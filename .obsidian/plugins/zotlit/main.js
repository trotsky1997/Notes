/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source visit the plugins github repository
*/

"use strict";var zF=Object.create;var ti=Object.defineProperty;var WF=Object.getOwnPropertyDescriptor;var UF=Object.getOwnPropertyNames;var HF=Object.getPrototypeOf,VF=Object.prototype.hasOwnProperty;var GF=(e,t,r)=>t in e?ti(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var fs=(e,t)=>()=>(e&&(t=e(e=0)),t);var g=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),cg=(e,t)=>{for(var r in t)ti(e,r,{get:t[r],enumerable:!0})},lg=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of UF(t))!VF.call(e,o)&&o!==r&&ti(e,o,{get:()=>t[o],enumerable:!(n=WF(t,o))||n.enumerable});return e};var ae=(e,t,r)=>(r=e!=null?zF(HF(e)):{},lg(t||!e||!e.__esModule?ti(r,"default",{value:e,enumerable:!0}):r,e)),af=e=>lg(ti({},"__esModule",{value:!0}),e);var fg=(e,t,r)=>(GF(e,typeof t!="symbol"?t+"":t,r),r);var We=g(ms=>{"use strict";Object.defineProperty(ms,"__esModule",{value:!0});function Cg(e,t){if(t)return e;throw new Error("Unhandled discriminated union member: "+JSON.stringify(e))}ms.assertNever=Cg;ms.default=Cg});var Og=g((jG,Tg)=>{var Zn=1e3,Yn=Zn*60,Qn=Yn*60,rn=Qn*24,rP=rn*7,nP=rn*365.25;Tg.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return oP(e);if(r==="number"&&isFinite(e))return t.long?aP(e):iP(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function oP(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*nP;case"weeks":case"week":case"w":return r*rP;case"days":case"day":case"d":return r*rn;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Qn;case"minutes":case"minute":case"mins":case"min":case"m":return r*Yn;case"seconds":case"second":case"secs":case"sec":case"s":return r*Zn;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function iP(e){var t=Math.abs(e);return t>=rn?Math.round(e/rn)+"d":t>=Qn?Math.round(e/Qn)+"h":t>=Yn?Math.round(e/Yn)+"m":t>=Zn?Math.round(e/Zn)+"s":e+"ms"}function aP(e){var t=Math.abs(e);return t>=rn?hs(e,t,rn,"day"):t>=Qn?hs(e,t,Qn,"hour"):t>=Yn?hs(e,t,Yn,"minute"):t>=Zn?hs(e,t,Zn,"second"):e+" ms"}function hs(e,t,r,n){var o=t>=r*1.5;return Math.round(e/r)+" "+n+(o?"s":"")}});var Fg=g((BG,Dg)=>{function sP(e){r.debug=r,r.default=r,r.coerce=u,r.disable=i,r.enable=o,r.enabled=a,r.humanize=Og(),r.destroy=l,Object.keys(e).forEach(c=>{r[c]=e[c]}),r.names=[],r.skips=[],r.formatters={};function t(c){let f=0;for(let p=0;p<c.length;p++)f=(f<<5)-f+c.charCodeAt(p),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=t;function r(c){let f,p=null,d,h;function y(...v){if(!y.enabled)return;let w=y,S=Number(new Date),T=S-(f||S);w.diff=T,w.prev=f,w.curr=S,f=S,v[0]=r.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");let M=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,(Q,X)=>{if(Q==="%%")return"%";M++;let G=r.formatters[X];if(typeof G=="function"){let x=v[M];Q=G.call(w,x),v.splice(M,1),M--}return Q}),r.formatArgs.call(w,v),(w.log||r.log).apply(w,v)}return y.namespace=c,y.useColors=r.useColors(),y.color=r.selectColor(c),y.extend=n,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(d!==r.namespaces&&(d=r.namespaces,h=r.enabled(c)),h),set:v=>{p=v}}),typeof r.init=="function"&&r.init(y),y}function n(c,f){let p=r(this.namespace+(typeof f>"u"?":":f)+c);return p.log=this.log,p}function o(c){r.save(c),r.namespaces=c,r.names=[],r.skips=[];let f,p=(typeof c=="string"?c:"").split(/[\s,]+/),d=p.length;for(f=0;f<d;f++)p[f]&&(c=p[f].replace(/\*/g,".*?"),c[0]==="-"?r.skips.push(new RegExp("^"+c.slice(1)+"$")):r.names.push(new RegExp("^"+c+"$")))}function i(){let c=[...r.names.map(s),...r.skips.map(s).map(f=>"-"+f)].join(",");return r.enable(""),c}function a(c){if(c[c.length-1]==="*")return!0;let f,p;for(f=0,p=r.skips.length;f<p;f++)if(r.skips[f].test(c))return!1;for(f=0,p=r.names.length;f<p;f++)if(r.names[f].test(c))return!0;return!1}function s(c){return c.toString().substring(2,c.toString().length-2).replace(/\.\*\?$/,"*")}function u(c){return c instanceof Error?c.stack||c.message:c}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Dg.exports=sP});var Pe=g((dt,gs)=>{dt.formatArgs=cP;dt.save=lP;dt.load=fP;dt.useColors=uP;dt.storage=pP();dt.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();dt.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function uP(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function cP(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+gs.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(r++,o==="%c"&&(n=r))}),e.splice(n,0,t)}dt.log=console.debug||console.log||(()=>{});function lP(e){try{e?dt.storage.setItem("debug",e):dt.storage.removeItem("debug")}catch{}}function fP(){let e;try{e=dt.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function pP(){try{return localStorage}catch{}}gs.exports=Fg()(dt);var{formatters:dP}=gs.exports;dP.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var Ng=g((zG,Pg)=>{"use strict";Pg.exports=mP;function Xn(e){return e instanceof Buffer?Buffer.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}function mP(e){if(e=e||{},e.circles)return hP(e);return e.proto?n:r;function t(o,i){for(var a=Object.keys(o),s=new Array(a.length),u=0;u<a.length;u++){var l=a[u],c=o[l];typeof c!="object"||c===null?s[l]=c:c instanceof Date?s[l]=new Date(c):ArrayBuffer.isView(c)?s[l]=Xn(c):s[l]=i(c)}return s}function r(o){if(typeof o!="object"||o===null)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return t(o,r);if(o instanceof Map)return new Map(t(Array.from(o),r));if(o instanceof Set)return new Set(t(Array.from(o),r));var i={};for(var a in o)if(Object.hasOwnProperty.call(o,a)!==!1){var s=o[a];typeof s!="object"||s===null?i[a]=s:s instanceof Date?i[a]=new Date(s):s instanceof Map?i[a]=new Map(t(Array.from(s),r)):s instanceof Set?i[a]=new Set(t(Array.from(s),r)):ArrayBuffer.isView(s)?i[a]=Xn(s):i[a]=r(s)}return i}function n(o){if(typeof o!="object"||o===null)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return t(o,n);if(o instanceof Map)return new Map(t(Array.from(o),n));if(o instanceof Set)return new Set(t(Array.from(o),n));var i={};for(var a in o){var s=o[a];typeof s!="object"||s===null?i[a]=s:s instanceof Date?i[a]=new Date(s):s instanceof Map?i[a]=new Map(t(Array.from(s),n)):s instanceof Set?i[a]=new Set(t(Array.from(s),n)):ArrayBuffer.isView(s)?i[a]=Xn(s):i[a]=n(s)}return i}}function hP(e){var t=[],r=[];return e.proto?i:o;function n(a,s){for(var u=Object.keys(a),l=new Array(u.length),c=0;c<u.length;c++){var f=u[c],p=a[f];if(typeof p!="object"||p===null)l[f]=p;else if(p instanceof Date)l[f]=new Date(p);else if(ArrayBuffer.isView(p))l[f]=Xn(p);else{var d=t.indexOf(p);d!==-1?l[f]=r[d]:l[f]=s(p)}}return l}function o(a){if(typeof a!="object"||a===null)return a;if(a instanceof Date)return new Date(a);if(Array.isArray(a))return n(a,o);if(a instanceof Map)return new Map(n(Array.from(a),o));if(a instanceof Set)return new Set(n(Array.from(a),o));var s={};t.push(a),r.push(s);for(var u in a)if(Object.hasOwnProperty.call(a,u)!==!1){var l=a[u];if(typeof l!="object"||l===null)s[u]=l;else if(l instanceof Date)s[u]=new Date(l);else if(l instanceof Map)s[u]=new Map(n(Array.from(l),o));else if(l instanceof Set)s[u]=new Set(n(Array.from(l),o));else if(ArrayBuffer.isView(l))s[u]=Xn(l);else{var c=t.indexOf(l);c!==-1?s[u]=r[c]:s[u]=o(l)}}return t.pop(),r.pop(),s}function i(a){if(typeof a!="object"||a===null)return a;if(a instanceof Date)return new Date(a);if(Array.isArray(a))return n(a,i);if(a instanceof Map)return new Map(n(Array.from(a),i));if(a instanceof Set)return new Set(n(Array.from(a),i));var s={};t.push(a),r.push(s);for(var u in a){var l=a[u];if(typeof l!="object"||l===null)s[u]=l;else if(l instanceof Date)s[u]=new Date(l);else if(l instanceof Map)s[u]=new Map(n(Array.from(l),i));else if(l instanceof Set)s[u]=new Set(n(Array.from(l),i));else if(ArrayBuffer.isView(l))s[u]=Xn(l);else{var c=t.indexOf(l);c!==-1?s[u]=r[c]:s[u]=i(l)}}return t.pop(),r.pop(),s}}});var on=g((WG,$g)=>{var gP=require("util"),nn=Pe()("log4js:configuration"),ys=[],vs=[],Rg=e=>!e,Mg=e=>e&&typeof e=="object"&&!Array.isArray(e),yP=e=>/^[A-Za-z][A-Za-z0-9_]*$/g.test(e),vP=e=>e&&typeof e=="number"&&Number.isInteger(e),bP=e=>{vs.push(e),nn(`Added listener, now ${vs.length} listeners`)},wP=e=>{ys.push(e),nn(`Added pre-processing listener, now ${ys.length} listeners`)},qg=(e,t,r)=>{(Array.isArray(t)?t:[t]).forEach(o=>{if(o)throw new Error(`Problem with log4js configuration: (${gP.inspect(e,{depth:5})}) - ${r}`)})},xP=e=>{nn("New configuration to be validated: ",e),qg(e,Rg(Mg(e)),"must be an object."),nn(`Calling pre-processing listeners (${ys.length})`),ys.forEach(t=>t(e)),nn("Configuration pre-processing finished."),nn(`Calling configuration listeners (${vs.length})`),vs.forEach(t=>t(e)),nn("Configuration finished.")};$g.exports={configure:xP,addListener:bP,addPreProcessingListener:wP,throwExceptionIf:qg,anObject:Mg,anInteger:vP,validIdentifier:yP,not:Rg}});var bs=g((UG,St)=>{"use strict";function Lg(e,t){for(var r=e.toString();r.length<t;)r="0"+r;return r}function an(e){return Lg(e,2)}function EP(e){var t=Math.abs(e),r=String(Math.floor(t/60)),n=String(t%60);return r=("0"+r).slice(-2),n=("0"+n).slice(-2),e===0?"Z":(e<0?"+":"-")+r+":"+n}function jg(e,t){typeof e!="string"&&(t=e,e=St.exports.ISO8601_FORMAT),t||(t=St.exports.now());var r=an(t.getDate()),n=an(t.getMonth()+1),o=an(t.getFullYear()),i=an(o.substring(2,4)),a=e.indexOf("yyyy")>-1?o:i,s=an(t.getHours()),u=an(t.getMinutes()),l=an(t.getSeconds()),c=Lg(t.getMilliseconds(),3),f=EP(t.getTimezoneOffset()),p=e.replace(/dd/g,r).replace(/MM/g,n).replace(/y{1,4}/g,a).replace(/hh/g,s).replace(/mm/g,u).replace(/ss/g,l).replace(/SSS/g,c).replace(/O/g,f);return p}function Tr(e,t,r,n){e["set"+(n?"":"UTC")+t](r)}function SP(e,t,r){var n=e.indexOf("O")<0,o=!1,i=[{pattern:/y{1,4}/,regexp:"\\d{1,4}",fn:function(f,p){Tr(f,"FullYear",p,n)}},{pattern:/MM/,regexp:"\\d{1,2}",fn:function(f,p){Tr(f,"Month",p-1,n),f.getMonth()!==p-1&&(o=!0)}},{pattern:/dd/,regexp:"\\d{1,2}",fn:function(f,p){o&&Tr(f,"Month",f.getMonth()-1,n),Tr(f,"Date",p,n)}},{pattern:/hh/,regexp:"\\d{1,2}",fn:function(f,p){Tr(f,"Hours",p,n)}},{pattern:/mm/,regexp:"\\d\\d",fn:function(f,p){Tr(f,"Minutes",p,n)}},{pattern:/ss/,regexp:"\\d\\d",fn:function(f,p){Tr(f,"Seconds",p,n)}},{pattern:/SSS/,regexp:"\\d\\d\\d",fn:function(f,p){Tr(f,"Milliseconds",p,n)}},{pattern:/O/,regexp:"[+-]\\d{1,2}:?\\d{2}?|Z",fn:function(f,p){p==="Z"?p=0:p=p.replace(":","");var d=Math.abs(p),h=(p>0?-1:1)*(d%100+Math.floor(d/100)*60);f.setUTCMinutes(f.getUTCMinutes()+h)}}],a=i.reduce(function(f,p){return p.pattern.test(f.regexp)?(p.index=f.regexp.match(p.pattern).index,f.regexp=f.regexp.replace(p.pattern,"("+p.regexp+")")):p.index=-1,f},{regexp:e,index:[]}),s=i.filter(function(f){return f.index>-1});s.sort(function(f,p){return f.index-p.index});var u=new RegExp(a.regexp),l=u.exec(t);if(l){var c=r||St.exports.now();return s.forEach(function(f,p){f.fn(c,l[p+1])}),c}throw new Error("String '"+t+"' could not be parsed as '"+e+"'")}function kP(e,t,r){if(!e)throw new Error("pattern must be supplied");return SP(e,t,r)}function _P(){return new Date}St.exports=jg;St.exports.asString=jg;St.exports.parse=kP;St.exports.now=_P;St.exports.ISO8601_FORMAT="yyyy-MM-ddThh:mm:ss.SSS";St.exports.ISO8601_WITH_TZ_OFFSET_FORMAT="yyyy-MM-ddThh:mm:ss.SSSO";St.exports.DATETIME_FORMAT="dd MM yyyy hh:mm:ss.SSS";St.exports.ABSOLUTETIME_FORMAT="hh:mm:ss.SSS"});var gf=g((HG,Qg)=>{var Or=bs(),Bg=require("os"),ii=require("util"),oi=require("path"),zg=require("url"),Wg=Pe()("log4js:layouts"),Ug={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[90,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[91,39],yellow:[33,39]};function Hg(e){return e?`\x1B[${Ug[e][0]}m`:""}function Vg(e){return e?`\x1B[${Ug[e][1]}m`:""}function IP(e,t){return Hg(t)+e+Vg(t)}function Gg(e,t){return IP(ii.format("[%s] [%s] %s - ",Or.asString(e.startTime),e.level.toString(),e.categoryName),t)}function Kg(e){return Gg(e)+ii.format(...e.data)}function ws(e){return Gg(e,e.level.colour)+ii.format(...e.data)}function Jg(e){return ii.format(...e.data)}function Zg(e){return e.data[0]}function Yg(e,t){let r="%r %p %c - %m%n",n=/%(-?[0-9]+)?(\.?-?[0-9]+)?([[\]cdhmnprzxXyflos%])(\{([^}]+)\})?|([^%]+)/;e=e||r;function o(b,k){let I=b.categoryName;if(k){let R=parseInt(k,10),D=I.split(".");R<D.length&&(I=D.slice(D.length-R).join("."))}return I}function i(b,k){let I=Or.ISO8601_FORMAT;if(k)switch(I=k,I){case"ISO8601":case"ISO8601_FORMAT":I=Or.ISO8601_FORMAT;break;case"ISO8601_WITH_TZ_OFFSET":case"ISO8601_WITH_TZ_OFFSET_FORMAT":I=Or.ISO8601_WITH_TZ_OFFSET_FORMAT;break;case"ABSOLUTE":process.emitWarning("Pattern %d{ABSOLUTE} is deprecated in favor of %d{ABSOLUTETIME}. Please use %d{ABSOLUTETIME} instead.","DeprecationWarning","log4js-node-DEP0003"),Wg("[log4js-node-DEP0003]","DEPRECATION: Pattern %d{ABSOLUTE} is deprecated and replaced by %d{ABSOLUTETIME}.");case"ABSOLUTETIME":case"ABSOLUTETIME_FORMAT":I=Or.ABSOLUTETIME_FORMAT;break;case"DATE":process.emitWarning("Pattern %d{DATE} is deprecated due to the confusion it causes when used. Please use %d{DATETIME} instead.","DeprecationWarning","log4js-node-DEP0004"),Wg("[log4js-node-DEP0004]","DEPRECATION: Pattern %d{DATE} is deprecated and replaced by %d{DATETIME}.");case"DATETIME":case"DATETIME_FORMAT":I=Or.DATETIME_FORMAT;break}return Or.asString(I,b.startTime)}function a(){return Bg.hostname().toString()}function s(b){return ii.format(...b.data)}function u(){return Bg.EOL}function l(b){return b.level.toString()}function c(b){return Or.asString("hh:mm:ss",b.startTime)}function f(b){return Hg(b.level.colour)}function p(b){return Vg(b.level.colour)}function d(){return"%"}function h(b){return b&&b.pid?b.pid.toString():process.pid.toString()}function y(){return h()}function v(b,k){return typeof t[k]<"u"?typeof t[k]=="function"?t[k](b):t[k]:null}function w(b,k){let I=b.context[k];return typeof I<"u"?typeof I=="function"?I(b):I:null}function S(b,k){let I=b.fileName||"";if(I=function(D){let L="file://";return D.startsWith(L)&&(typeof zg.fileURLToPath=="function"?D=zg.fileURLToPath(D):(D=oi.normalize(D.replace(new RegExp(`^${L}`),"")),process.platform==="win32"&&(D.startsWith("\\")?D=D.slice(1):D=oi.sep+oi.sep+D))),D}(I),k){let D=parseInt(k,10),L=I.split(oi.sep);L.length>D&&(I=L.slice(-D).join(oi.sep))}return I}function T(b){return b.lineNumber?`${b.lineNumber}`:""}function M(b){return b.columnNumber?`${b.columnNumber}`:""}function B(b){return b.callStack||""}let Q={c:o,d:i,h:a,m:s,n:u,p:l,r:c,"[":f,"]":p,y,z:h,"%":d,x:v,X:w,f:S,l:T,o:M,s:B};function X(b,k,I){return Q[b](k,I)}function G(b,k){let I;return b?(I=parseInt(b.slice(1),10),I>0?k.slice(0,I):k.slice(I)):k}function x(b,k){let I;if(b)if(b.charAt(0)==="-")for(I=parseInt(b.slice(1),10);k.length<I;)k+=" ";else for(I=parseInt(b,10);k.length<I;)k=` ${k}`;return k}function C(b,k,I){let R=b;return R=G(k,R),R=x(I,R),R}return function(b){let k="",I,R=e;for(;(I=n.exec(R))!==null;){let D=I[1],L=I[2],H=I[3],te=I[5],ue=I[6];if(ue)k+=ue.toString();else{let _=X(H,b,te);k+=C(_,L,D)}R=R.slice(I.index+I[0].length)}return k}}var hf={messagePassThrough(){return Jg},basic(){return Kg},colored(){return ws},coloured(){return ws},pattern(e){return Yg(e&&e.pattern,e&&e.tokens)},dummy(){return Zg}};Qg.exports={basicLayout:Kg,messagePassThroughLayout:Jg,patternLayout:Yg,colouredLayout:ws,coloredLayout:ws,dummyLayout:Zg,addLayout(e,t){hf[e]=t},layout(e,t){return hf[e]&&hf[e](t)}}});var sn=g((VG,ey)=>{var Ae=on(),Xg=["white","grey","black","blue","cyan","green","magenta","red","yellow"],Ce=class{constructor(t,r,n){this.level=t,this.levelStr=r,this.colour=n}toString(){return this.levelStr}static getLevel(t,r){return t?t instanceof Ce?t:(t instanceof Object&&t.levelStr&&(t=t.levelStr),Ce[t.toString().toUpperCase()]||r):r}static addLevels(t){t&&(Object.keys(t).forEach(n=>{let o=n.toUpperCase();Ce[o]=new Ce(t[n].value,o,t[n].colour);let i=Ce.levels.findIndex(a=>a.levelStr===o);i>-1?Ce.levels[i]=Ce[o]:Ce.levels.push(Ce[o])}),Ce.levels.sort((n,o)=>n.level-o.level))}isLessThanOrEqualTo(t){return typeof t=="string"&&(t=Ce.getLevel(t)),this.level<=t.level}isGreaterThanOrEqualTo(t){return typeof t=="string"&&(t=Ce.getLevel(t)),this.level>=t.level}isEqualTo(t){return typeof t=="string"&&(t=Ce.getLevel(t)),this.level===t.level}};Ce.levels=[];Ce.addLevels({ALL:{value:Number.MIN_VALUE,colour:"grey"},TRACE:{value:5e3,colour:"blue"},DEBUG:{value:1e4,colour:"cyan"},INFO:{value:2e4,colour:"green"},WARN:{value:3e4,colour:"yellow"},ERROR:{value:4e4,colour:"red"},FATAL:{value:5e4,colour:"magenta"},MARK:{value:9007199254740992,colour:"grey"},OFF:{value:Number.MAX_VALUE,colour:"grey"}});Ae.addListener(e=>{let t=e.levels;t&&(Ae.throwExceptionIf(e,Ae.not(Ae.anObject(t)),"levels must be an object"),Object.keys(t).forEach(n=>{Ae.throwExceptionIf(e,Ae.not(Ae.validIdentifier(n)),`level name "${n}" is not a valid identifier (must start with a letter, only contain A-Z,a-z,0-9,_)`),Ae.throwExceptionIf(e,Ae.not(Ae.anObject(t[n])),`level "${n}" must be an object`),Ae.throwExceptionIf(e,Ae.not(t[n].value),`level "${n}" must have a 'value' property`),Ae.throwExceptionIf(e,Ae.not(Ae.anInteger(t[n].value)),`level "${n}".value must have an integer value`),Ae.throwExceptionIf(e,Ae.not(t[n].colour),`level "${n}" must have a 'colour' property`),Ae.throwExceptionIf(e,Ae.not(Xg.indexOf(t[n].colour)>-1),`level "${n}".colour must be one of ${Xg.join(", ")}`)}))});Ae.addListener(e=>{Ce.addLevels(e.levels)});ey.exports=Ce});var ly=g(si=>{"use strict";var{parse:ny,stringify:oy}=JSON,{keys:AP}=Object,ai=String,iy="string",ty={},xs="object",ay=(e,t)=>t,CP=e=>e instanceof ai?ai(e):e,TP=(e,t)=>typeof t===iy?new ai(t):t,sy=(e,t,r,n)=>{let o=[];for(let i=AP(r),{length:a}=i,s=0;s<a;s++){let u=i[s],l=r[u];if(l instanceof ai){let c=e[l];typeof c===xs&&!t.has(c)?(t.add(c),r[u]=ty,o.push({k:u,a:[e,t,c,n]})):r[u]=n.call(r,u,c)}else r[u]!==ty&&(r[u]=n.call(r,u,l))}for(let{length:i}=o,a=0;a<i;a++){let{k:s,a:u}=o[a];r[s]=n.call(r,s,sy.apply(null,u))}return r},ry=(e,t,r)=>{let n=ai(t.push(r)-1);return e.set(r,n),n},uy=(e,t)=>{let r=ny(e,TP).map(CP),n=r[0],o=t||ay,i=typeof n===xs&&n?sy(r,new Set,n,o):n;return o.call({"":i},"",i)};si.parse=uy;var cy=(e,t,r)=>{let n=t&&typeof t===xs?(c,f)=>c===""||-1<t.indexOf(c)?f:void 0:t||ay,o=new Map,i=[],a=[],s=+ry(o,i,n.call({"":e},"",e)),u=!s;for(;s<i.length;)u=!0,a[s]=oy(i[s++],l,r);return"["+a.join(",")+"]";function l(c,f){if(u)return u=!u,f;let p=n.call(this,c,f);switch(typeof p){case xs:if(p===null)return p;case iy:return o.get(p)||ry(o,i,p)}return p}};si.stringify=cy;var OP=e=>ny(cy(e));si.toJSON=OP;var DP=e=>uy(oy(e));si.fromJSON=DP});var yf=g((KG,dy)=>{var fy=ly(),py=sn(),eo=class{constructor(t,r,n,o,i){this.startTime=new Date,this.categoryName=t,this.data=n,this.level=r,this.context=Object.assign({},o),this.pid=process.pid,i&&(this.functionName=i.functionName,this.fileName=i.fileName,this.lineNumber=i.lineNumber,this.columnNumber=i.columnNumber,this.callStack=i.callStack)}serialise(){return fy.stringify(this,(t,r)=>(r&&r.message&&r.stack?r=Object.assign({message:r.message,stack:r.stack},r):typeof r=="number"&&(Number.isNaN(r)||!Number.isFinite(r))?r=r.toString():typeof r>"u"&&(r=typeof r),r))}static deserialise(t){let r;try{let n=fy.parse(t,(o,i)=>{if(i&&i.message&&i.stack){let a=new Error(i);Object.keys(i).forEach(s=>{a[s]=i[s]}),i=a}return i});n.location={functionName:n.functionName,fileName:n.fileName,lineNumber:n.lineNumber,columnNumber:n.columnNumber,callStack:n.callStack},r=new eo(n.categoryName,py.getLevel(n.level.levelStr),n.data,n.context,n.location),r.startTime=new Date(n.startTime),r.pid=n.pid,r.cluster=n.cluster}catch(n){r=new eo("log4js",py.ERROR,["Unable to parse log:",t,"because: ",n])}return r}};dy.exports=eo});var Ss=g((JG,gy)=>{var kt=Pe()("log4js:clustering"),FP=yf(),PP=on(),to=!1,_t=null;try{_t=require("cluster")}catch{kt("cluster module not present"),to=!0}var bf=[],ci=!1,ui="NODE_APP_INSTANCE",my=()=>ci&&process.env[ui]==="0",vf=()=>to||_t&&_t.isMaster||my(),hy=e=>{bf.forEach(t=>t(e))},Es=(e,t)=>{if(kt("cluster message received from worker ",e,": ",t),e.topic&&e.data&&(t=e,e=void 0),t&&t.topic&&t.topic==="log4js:message"){kt("received message: ",t.data);let r=FP.deserialise(t.data);hy(r)}};to||PP.addListener(e=>{bf.length=0,{pm2:ci,disableClustering:to,pm2InstanceVar:ui="NODE_APP_INSTANCE"}=e,kt(`clustering disabled ? ${to}`),kt(`cluster.isMaster ? ${_t&&_t.isMaster}`),kt(`pm2 enabled ? ${ci}`),kt(`pm2InstanceVar = ${ui}`),kt(`process.env[${ui}] = ${process.env[ui]}`),ci&&process.removeListener("message",Es),_t&&_t.removeListener&&_t.removeListener("message",Es),to||e.disableClustering?kt("Not listening for cluster messages, because clustering disabled."):my()?(kt("listening for PM2 broadcast messages"),process.on("message",Es)):_t&&_t.isMaster?(kt("listening for cluster messages"),_t.on("message",Es)):kt("not listening for messages, because we are not a master process")});gy.exports={onlyOnMaster:(e,t)=>vf()?e():t,isMaster:vf,send:e=>{vf()?hy(e):(ci||(e.cluster={workerId:_t.worker.id,worker:process.pid}),process.send({topic:"log4js:message",data:e.serialise()}))},onMessage:e=>{bf.push(e)}}});var by=g((ZG,vy)=>{function NP(e){if(typeof e=="number"&&Number.isInteger(e))return e;let t={K:1024,M:1024*1024,G:1024*1024*1024},r=Object.keys(t),n=e.slice(-1).toLocaleUpperCase(),o=e.slice(0,-1).trim();if(r.indexOf(n)<0||!Number.isInteger(Number(o)))throw Error(`maxLogSize: "${e}" is invalid`);return o*t[n]}function RP(e,t){let r=Object.assign({},t);return Object.keys(e).forEach(n=>{r[n]&&(r[n]=e[n](t[n]))}),r}function wf(e){return RP({maxLogSize:NP},e)}var yy={dateFile:wf,file:wf,fileSync:wf};vy.exports.modifyConfig=e=>yy[e.type]?yy[e.type](e):e});var xy=g((YG,wy)=>{var MP=console.log.bind(console);function qP(e,t){return r=>{MP(e(r,t))}}function $P(e,t){let r=t.colouredLayout;return e.layout&&(r=t.layout(e.layout.type,e.layout)),qP(r,e.timezoneOffset)}wy.exports.configure=$P});var Sy=g(Ey=>{function LP(e,t){return r=>{process.stdout.write(`${e(r,t)}
`)}}function jP(e,t){let r=t.colouredLayout;return e.layout&&(r=t.layout(e.layout.type,e.layout)),LP(r,e.timezoneOffset)}Ey.configure=jP});var _y=g((XG,ky)=>{function BP(e,t){return r=>{process.stderr.write(`${e(r,t)}
`)}}function zP(e,t){let r=t.colouredLayout;return e.layout&&(r=t.layout(e.layout.type,e.layout)),BP(r,e.timezoneOffset)}ky.exports.configure=zP});var Ay=g((eK,Iy)=>{function WP(e,t,r,n){let o=n.getLevel(e),i=n.getLevel(t,n.FATAL);return a=>{let s=a.level;o.isLessThanOrEqualTo(s)&&i.isGreaterThanOrEqualTo(s)&&r(a)}}function UP(e,t,r,n){let o=r(e.appender);return WP(e.level,e.maxLevel,o,n)}Iy.exports.configure=UP});var Oy=g((tK,Ty)=>{var Cy=Pe()("log4js:categoryFilter");function HP(e,t){return typeof e=="string"&&(e=[e]),r=>{Cy(`Checking ${r.categoryName} against ${e}`),e.indexOf(r.categoryName)===-1&&(Cy("Not excluded, sending to appender"),t(r))}}function VP(e,t,r){let n=r(e.appender);return HP(e.exclude,n)}Ty.exports.configure=VP});var Py=g((rK,Fy)=>{var Dy=Pe()("log4js:noLogFilter");function GP(e){return e.filter(r=>r!=null&&r!=="")}function KP(e,t){return r=>{Dy(`Checking data: ${r.data} against filters: ${e}`),typeof e=="string"&&(e=[e]),e=GP(e);let n=new RegExp(e.join("|"),"i");(e.length===0||r.data.findIndex(o=>n.test(o))<0)&&(Dy("Not excluded, sending to appender"),t(r))}}function JP(e,t,r){let n=r(e.appender);return KP(e.exclude,n)}Fy.exports.configure=JP});var tt=g(xf=>{"use strict";xf.fromCallback=function(e){return Object.defineProperty(function(){if(typeof arguments[arguments.length-1]=="function")e.apply(this,arguments);else return new Promise((t,r)=>{arguments[arguments.length]=(n,o)=>{if(n)return r(n);t(o)},arguments.length++,e.apply(this,arguments)})},"name",{value:e.name})};xf.fromPromise=function(e){return Object.defineProperty(function(){let t=arguments[arguments.length-1];if(typeof t!="function")return e.apply(this,arguments);e.apply(this,arguments).then(r=>t(null,r),t)},"name",{value:e.name})}});var Ry=g((oK,Ny)=>{var Dr=require("constants"),ZP=process.cwd,ks=null,YP=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return ks||(ks=ZP.call(process)),ks};try{process.cwd()}catch{}typeof process.chdir=="function"&&(Ef=process.chdir,process.chdir=function(e){ks=null,Ef.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,Ef));var Ef;Ny.exports=QP;function QP(e){Dr.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&t(e),e.lutimes||r(e),e.chown=i(e.chown),e.fchown=i(e.fchown),e.lchown=i(e.lchown),e.chmod=n(e.chmod),e.fchmod=n(e.fchmod),e.lchmod=n(e.lchmod),e.chownSync=a(e.chownSync),e.fchownSync=a(e.fchownSync),e.lchownSync=a(e.lchownSync),e.chmodSync=o(e.chmodSync),e.fchmodSync=o(e.fchmodSync),e.lchmodSync=o(e.lchmodSync),e.stat=s(e.stat),e.fstat=s(e.fstat),e.lstat=s(e.lstat),e.statSync=u(e.statSync),e.fstatSync=u(e.fstatSync),e.lstatSync=u(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(c,f,p){p&&process.nextTick(p)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(c,f,p,d){d&&process.nextTick(d)},e.lchownSync=function(){}),YP==="win32"&&(e.rename=typeof e.rename!="function"?e.rename:function(c){function f(p,d,h){var y=Date.now(),v=0;c(p,d,function w(S){if(S&&(S.code==="EACCES"||S.code==="EPERM"||S.code==="EBUSY")&&Date.now()-y<6e4){setTimeout(function(){e.stat(d,function(T,M){T&&T.code==="ENOENT"?c(p,d,w):h(S)})},v),v<100&&(v+=10);return}h&&h(S)})}return Object.setPrototypeOf&&Object.setPrototypeOf(f,c),f}(e.rename)),e.read=typeof e.read!="function"?e.read:function(c){function f(p,d,h,y,v,w){var S;if(w&&typeof w=="function"){var T=0;S=function(M,B,Q){if(M&&M.code==="EAGAIN"&&T<10)return T++,c.call(e,p,d,h,y,v,S);w.apply(this,arguments)}}return c.call(e,p,d,h,y,v,S)}return Object.setPrototypeOf&&Object.setPrototypeOf(f,c),f}(e.read),e.readSync=typeof e.readSync!="function"?e.readSync:function(c){return function(f,p,d,h,y){for(var v=0;;)try{return c.call(e,f,p,d,h,y)}catch(w){if(w.code==="EAGAIN"&&v<10){v++;continue}throw w}}}(e.readSync);function t(c){c.lchmod=function(f,p,d){c.open(f,Dr.O_WRONLY|Dr.O_SYMLINK,p,function(h,y){if(h){d&&d(h);return}c.fchmod(y,p,function(v){c.close(y,function(w){d&&d(v||w)})})})},c.lchmodSync=function(f,p){var d=c.openSync(f,Dr.O_WRONLY|Dr.O_SYMLINK,p),h=!0,y;try{y=c.fchmodSync(d,p),h=!1}finally{if(h)try{c.closeSync(d)}catch{}else c.closeSync(d)}return y}}function r(c){Dr.hasOwnProperty("O_SYMLINK")&&c.futimes?(c.lutimes=function(f,p,d,h){c.open(f,Dr.O_SYMLINK,function(y,v){if(y){h&&h(y);return}c.futimes(v,p,d,function(w){c.close(v,function(S){h&&h(w||S)})})})},c.lutimesSync=function(f,p,d){var h=c.openSync(f,Dr.O_SYMLINK),y,v=!0;try{y=c.futimesSync(h,p,d),v=!1}finally{if(v)try{c.closeSync(h)}catch{}else c.closeSync(h)}return y}):c.futimes&&(c.lutimes=function(f,p,d,h){h&&process.nextTick(h)},c.lutimesSync=function(){})}function n(c){return c&&function(f,p,d){return c.call(e,f,p,function(h){l(h)&&(h=null),d&&d.apply(this,arguments)})}}function o(c){return c&&function(f,p){try{return c.call(e,f,p)}catch(d){if(!l(d))throw d}}}function i(c){return c&&function(f,p,d,h){return c.call(e,f,p,d,function(y){l(y)&&(y=null),h&&h.apply(this,arguments)})}}function a(c){return c&&function(f,p,d){try{return c.call(e,f,p,d)}catch(h){if(!l(h))throw h}}}function s(c){return c&&function(f,p,d){typeof p=="function"&&(d=p,p=null);function h(y,v){v&&(v.uid<0&&(v.uid+=4294967296),v.gid<0&&(v.gid+=4294967296)),d&&d.apply(this,arguments)}return p?c.call(e,f,p,h):c.call(e,f,h)}}function u(c){return c&&function(f,p){var d=p?c.call(e,f,p):c.call(e,f);return d&&(d.uid<0&&(d.uid+=4294967296),d.gid<0&&(d.gid+=4294967296)),d}}function l(c){if(!c||c.code==="ENOSYS")return!0;var f=!process.getuid||process.getuid()!==0;return!!(f&&(c.code==="EINVAL"||c.code==="EPERM"))}}});var $y=g((iK,qy)=>{var My=require("stream").Stream;qy.exports=XP;function XP(e){return{ReadStream:t,WriteStream:r};function t(n,o){if(!(this instanceof t))return new t(n,o);My.call(this);var i=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,o=o||{};for(var a=Object.keys(o),s=0,u=a.length;s<u;s++){var l=a[s];this[l]=o[l]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){i._read()});return}e.open(this.path,this.flags,this.mode,function(c,f){if(c){i.emit("error",c),i.readable=!1;return}i.fd=f,i.emit("open",f),i._read()})}function r(n,o){if(!(this instanceof r))return new r(n,o);My.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,o=o||{};for(var i=Object.keys(o),a=0,s=i.length;a<s;a++){var u=i[a];this[u]=o[u]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var jy=g((aK,Ly)=>{"use strict";Ly.exports=tN;var eN=Object.getPrototypeOf||function(e){return e.__proto__};function tN(e){if(e===null||typeof e!="object")return e;if(e instanceof Object)var t={__proto__:eN(e)};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}),t}});var Te=g((sK,_f)=>{var xe=require("fs"),rN=Ry(),nN=$y(),oN=jy(),_s=require("util"),Le,As;typeof Symbol=="function"&&typeof Symbol.for=="function"?(Le=Symbol.for("graceful-fs.queue"),As=Symbol.for("graceful-fs.previous")):(Le="___graceful-fs.queue",As="___graceful-fs.previous");function iN(){}function Wy(e,t){Object.defineProperty(e,Le,{get:function(){return t}})}var un=iN;_s.debuglog?un=_s.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(un=function(){var e=_s.format.apply(_s,arguments);e="GFS4: "+e.split(/\n/).join(`
GFS4: `),console.error(e)});xe[Le]||(By=global[Le]||[],Wy(xe,By),xe.close=function(e){function t(r,n){return e.call(xe,r,function(o){o||zy(),typeof n=="function"&&n.apply(this,arguments)})}return Object.defineProperty(t,As,{value:e}),t}(xe.close),xe.closeSync=function(e){function t(r){e.apply(xe,arguments),zy()}return Object.defineProperty(t,As,{value:e}),t}(xe.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){un(xe[Le]),require("assert").equal(xe[Le].length,0)}));var By;global[Le]||Wy(global,xe[Le]);_f.exports=Sf(oN(xe));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!xe.__patched&&(_f.exports=Sf(xe),xe.__patched=!0);function Sf(e){rN(e),e.gracefulify=Sf,e.createReadStream=B,e.createWriteStream=Q;var t=e.readFile;e.readFile=r;function r(x,C,b){return typeof C=="function"&&(b=C,C=null),k(x,C,b);function k(I,R,D,L){return t(I,R,function(H){H&&(H.code==="EMFILE"||H.code==="ENFILE")?ro([k,[I,R,D],H,L||Date.now(),Date.now()]):typeof D=="function"&&D.apply(this,arguments)})}}var n=e.writeFile;e.writeFile=o;function o(x,C,b,k){return typeof b=="function"&&(k=b,b=null),I(x,C,b,k);function I(R,D,L,H,te){return n(R,D,L,function(ue){ue&&(ue.code==="EMFILE"||ue.code==="ENFILE")?ro([I,[R,D,L,H],ue,te||Date.now(),Date.now()]):typeof H=="function"&&H.apply(this,arguments)})}}var i=e.appendFile;i&&(e.appendFile=a);function a(x,C,b,k){return typeof b=="function"&&(k=b,b=null),I(x,C,b,k);function I(R,D,L,H,te){return i(R,D,L,function(ue){ue&&(ue.code==="EMFILE"||ue.code==="ENFILE")?ro([I,[R,D,L,H],ue,te||Date.now(),Date.now()]):typeof H=="function"&&H.apply(this,arguments)})}}var s=e.copyFile;s&&(e.copyFile=u);function u(x,C,b,k){return typeof b=="function"&&(k=b,b=0),I(x,C,b,k);function I(R,D,L,H,te){return s(R,D,L,function(ue){ue&&(ue.code==="EMFILE"||ue.code==="ENFILE")?ro([I,[R,D,L,H],ue,te||Date.now(),Date.now()]):typeof H=="function"&&H.apply(this,arguments)})}}var l=e.readdir;e.readdir=f;var c=/^v[0-5]\./;function f(x,C,b){typeof C=="function"&&(b=C,C=null);var k=c.test(process.version)?function(D,L,H,te){return l(D,I(D,L,H,te))}:function(D,L,H,te){return l(D,L,I(D,L,H,te))};return k(x,C,b);function I(R,D,L,H){return function(te,ue){te&&(te.code==="EMFILE"||te.code==="ENFILE")?ro([k,[R,D,L],te,H||Date.now(),Date.now()]):(ue&&ue.sort&&ue.sort(),typeof L=="function"&&L.call(this,te,ue))}}}if(process.version.substr(0,4)==="v0.8"){var p=nN(e);w=p.ReadStream,T=p.WriteStream}var d=e.ReadStream;d&&(w.prototype=Object.create(d.prototype),w.prototype.open=S);var h=e.WriteStream;h&&(T.prototype=Object.create(h.prototype),T.prototype.open=M),Object.defineProperty(e,"ReadStream",{get:function(){return w},set:function(x){w=x},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return T},set:function(x){T=x},enumerable:!0,configurable:!0});var y=w;Object.defineProperty(e,"FileReadStream",{get:function(){return y},set:function(x){y=x},enumerable:!0,configurable:!0});var v=T;Object.defineProperty(e,"FileWriteStream",{get:function(){return v},set:function(x){v=x},enumerable:!0,configurable:!0});function w(x,C){return this instanceof w?(d.apply(this,arguments),this):w.apply(Object.create(w.prototype),arguments)}function S(){var x=this;G(x.path,x.flags,x.mode,function(C,b){C?(x.autoClose&&x.destroy(),x.emit("error",C)):(x.fd=b,x.emit("open",b),x.read())})}function T(x,C){return this instanceof T?(h.apply(this,arguments),this):T.apply(Object.create(T.prototype),arguments)}function M(){var x=this;G(x.path,x.flags,x.mode,function(C,b){C?(x.destroy(),x.emit("error",C)):(x.fd=b,x.emit("open",b))})}function B(x,C){return new e.ReadStream(x,C)}function Q(x,C){return new e.WriteStream(x,C)}var X=e.open;e.open=G;function G(x,C,b,k){return typeof b=="function"&&(k=b,b=null),I(x,C,b,k);function I(R,D,L,H,te){return X(R,D,L,function(ue,_){ue&&(ue.code==="EMFILE"||ue.code==="ENFILE")?ro([I,[R,D,L,H],ue,te||Date.now(),Date.now()]):typeof H=="function"&&H.apply(this,arguments)})}}return e}function ro(e){un("ENQUEUE",e[0].name,e[1]),xe[Le].push(e),kf()}var Is;function zy(){for(var e=Date.now(),t=0;t<xe[Le].length;++t)xe[Le][t].length>2&&(xe[Le][t][3]=e,xe[Le][t][4]=e);kf()}function kf(){if(clearTimeout(Is),Is=void 0,xe[Le].length!==0){var e=xe[Le].shift(),t=e[0],r=e[1],n=e[2],o=e[3],i=e[4];if(o===void 0)un("RETRY",t.name,r),t.apply(null,r);else if(Date.now()-o>=6e4){un("TIMEOUT",t.name,r);var a=r.pop();typeof a=="function"&&a.call(null,n)}else{var s=Date.now()-i,u=Math.max(i-o,1),l=Math.min(u*1.2,100);s>=l?(un("RETRY",t.name,r),t.apply(null,r.concat([o]))):xe[Le].push(e)}Is===void 0&&(Is=setTimeout(kf,0))}}});var If=g(cn=>{"use strict";var Uy=tt().fromCallback,It=Te(),aN=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchown","lchmod","link","lstat","mkdir","mkdtemp","open","readFile","readdir","readlink","realpath","rename","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(e=>typeof It[e]=="function");Object.keys(It).forEach(e=>{e!=="promises"&&(cn[e]=It[e])});aN.forEach(e=>{cn[e]=Uy(It[e])});cn.exists=function(e,t){return typeof t=="function"?It.exists(e,t):new Promise(r=>It.exists(e,r))};cn.read=function(e,t,r,n,o,i){return typeof i=="function"?It.read(e,t,r,n,o,i):new Promise((a,s)=>{It.read(e,t,r,n,o,(u,l,c)=>{if(u)return s(u);a({bytesRead:l,buffer:c})})})};cn.write=function(e,t,...r){return typeof r[r.length-1]=="function"?It.write(e,t,...r):new Promise((n,o)=>{It.write(e,t,...r,(i,a,s)=>{if(i)return o(i);n({bytesWritten:a,buffer:s})})})};typeof It.realpath.native=="function"&&(cn.realpath.native=Uy(It.realpath.native))});var Cf=g((cK,Vy)=>{"use strict";var Af=require("path");function Hy(e){return e=Af.normalize(Af.resolve(e)).split(Af.sep),e.length>0?e[0]:null}var sN=/[<>:"|?*]/;function uN(e){let t=Hy(e);return e=e.replace(t,""),sN.test(e)}Vy.exports={getRootPath:Hy,invalidWin32Path:uN}});var Ky=g((lK,Gy)=>{"use strict";var cN=Te(),Tf=require("path"),lN=Cf().invalidWin32Path,fN=parseInt("0777",8);function Of(e,t,r,n){if(typeof t=="function"?(r=t,t={}):(!t||typeof t!="object")&&(t={mode:t}),process.platform==="win32"&&lN(e)){let a=new Error(e+" contains invalid WIN32 path characters.");return a.code="EINVAL",r(a)}let o=t.mode,i=t.fs||cN;o===void 0&&(o=fN&~process.umask()),n||(n=null),r=r||function(){},e=Tf.resolve(e),i.mkdir(e,o,a=>{if(!a)return n=n||e,r(null,n);switch(a.code){case"ENOENT":if(Tf.dirname(e)===e)return r(a);Of(Tf.dirname(e),t,(s,u)=>{s?r(s,u):Of(e,t,r,u)});break;default:i.stat(e,(s,u)=>{s||!u.isDirectory()?r(a,n):r(null,n)});break}})}Gy.exports=Of});var Zy=g((fK,Jy)=>{"use strict";var pN=Te(),Df=require("path"),dN=Cf().invalidWin32Path,mN=parseInt("0777",8);function Ff(e,t,r){(!t||typeof t!="object")&&(t={mode:t});let n=t.mode,o=t.fs||pN;if(process.platform==="win32"&&dN(e)){let i=new Error(e+" contains invalid WIN32 path characters.");throw i.code="EINVAL",i}n===void 0&&(n=mN&~process.umask()),r||(r=null),e=Df.resolve(e);try{o.mkdirSync(e,n),r=r||e}catch(i){if(i.code==="ENOENT"){if(Df.dirname(e)===e)throw i;r=Ff(Df.dirname(e),t,r),Ff(e,t,r)}else{let a;try{a=o.statSync(e)}catch{throw i}if(!a.isDirectory())throw i}}return r}Jy.exports=Ff});var mt=g((pK,Yy)=>{"use strict";var hN=tt().fromCallback,Pf=hN(Ky()),Nf=Zy();Yy.exports={mkdirs:Pf,mkdirsSync:Nf,mkdirp:Pf,mkdirpSync:Nf,ensureDir:Pf,ensureDirSync:Nf}});var Rf=g((dK,Xy)=>{"use strict";var Ue=Te(),Qy=require("os"),Cs=require("path");function gN(){let e=Cs.join("millis-test-sync"+Date.now().toString()+Math.random().toString().slice(2));e=Cs.join(Qy.tmpdir(),e);let t=new Date(1435410243862);Ue.writeFileSync(e,"https://github.com/jprichardson/node-fs-extra/pull/141");let r=Ue.openSync(e,"r+");return Ue.futimesSync(r,t,t),Ue.closeSync(r),Ue.statSync(e).mtime>1435410243e3}function yN(e){let t=Cs.join("millis-test"+Date.now().toString()+Math.random().toString().slice(2));t=Cs.join(Qy.tmpdir(),t);let r=new Date(1435410243862);Ue.writeFile(t,"https://github.com/jprichardson/node-fs-extra/pull/141",n=>{if(n)return e(n);Ue.open(t,"r+",(o,i)=>{if(o)return e(o);Ue.futimes(i,r,r,a=>{if(a)return e(a);Ue.close(i,s=>{if(s)return e(s);Ue.stat(t,(u,l)=>{if(u)return e(u);e(null,l.mtime>1435410243e3)})})})})})}function vN(e){if(typeof e=="number")return Math.floor(e/1e3)*1e3;if(e instanceof Date)return new Date(Math.floor(e.getTime()/1e3)*1e3);throw new Error("fs-extra: timeRemoveMillis() unknown parameter type")}function bN(e,t,r,n){Ue.open(e,"r+",(o,i)=>{if(o)return n(o);Ue.futimes(i,t,r,a=>{Ue.close(i,s=>{n&&n(a||s)})})})}function wN(e,t,r){let n=Ue.openSync(e,"r+");return Ue.futimesSync(n,t,r),Ue.closeSync(n)}Xy.exports={hasMillisRes:yN,hasMillisResSync:gN,timeRemoveMillis:vN,utimesMillis:bN,utimesMillisSync:wN}});var pi=g((mK,iv)=>{"use strict";var At=Te(),rt=require("path"),ev=10,tv=5,xN=0,qf=process.versions.node.split("."),rv=Number.parseInt(qf[0],10),nv=Number.parseInt(qf[1],10),EN=Number.parseInt(qf[2],10);function li(){if(rv>ev)return!0;if(rv===ev){if(nv>tv)return!0;if(nv===tv&&EN>=xN)return!0}return!1}function SN(e,t,r){li()?At.stat(e,{bigint:!0},(n,o)=>{if(n)return r(n);At.stat(t,{bigint:!0},(i,a)=>i?i.code==="ENOENT"?r(null,{srcStat:o,destStat:null}):r(i):r(null,{srcStat:o,destStat:a}))}):At.stat(e,(n,o)=>{if(n)return r(n);At.stat(t,(i,a)=>i?i.code==="ENOENT"?r(null,{srcStat:o,destStat:null}):r(i):r(null,{srcStat:o,destStat:a}))})}function kN(e,t){let r,n;li()?r=At.statSync(e,{bigint:!0}):r=At.statSync(e);try{li()?n=At.statSync(t,{bigint:!0}):n=At.statSync(t)}catch(o){if(o.code==="ENOENT")return{srcStat:r,destStat:null};throw o}return{srcStat:r,destStat:n}}function _N(e,t,r,n){SN(e,t,(o,i)=>{if(o)return n(o);let{srcStat:a,destStat:s}=i;return s&&s.ino&&s.dev&&s.ino===a.ino&&s.dev===a.dev?n(new Error("Source and destination must not be the same.")):a.isDirectory()&&$f(e,t)?n(new Error(fi(e,t,r))):n(null,{srcStat:a,destStat:s})})}function IN(e,t,r){let{srcStat:n,destStat:o}=kN(e,t);if(o&&o.ino&&o.dev&&o.ino===n.ino&&o.dev===n.dev)throw new Error("Source and destination must not be the same.");if(n.isDirectory()&&$f(e,t))throw new Error(fi(e,t,r));return{srcStat:n,destStat:o}}function Mf(e,t,r,n,o){let i=rt.resolve(rt.dirname(e)),a=rt.resolve(rt.dirname(r));if(a===i||a===rt.parse(a).root)return o();li()?At.stat(a,{bigint:!0},(s,u)=>s?s.code==="ENOENT"?o():o(s):u.ino&&u.dev&&u.ino===t.ino&&u.dev===t.dev?o(new Error(fi(e,r,n))):Mf(e,t,a,n,o)):At.stat(a,(s,u)=>s?s.code==="ENOENT"?o():o(s):u.ino&&u.dev&&u.ino===t.ino&&u.dev===t.dev?o(new Error(fi(e,r,n))):Mf(e,t,a,n,o))}function ov(e,t,r,n){let o=rt.resolve(rt.dirname(e)),i=rt.resolve(rt.dirname(r));if(i===o||i===rt.parse(i).root)return;let a;try{li()?a=At.statSync(i,{bigint:!0}):a=At.statSync(i)}catch(s){if(s.code==="ENOENT")return;throw s}if(a.ino&&a.dev&&a.ino===t.ino&&a.dev===t.dev)throw new Error(fi(e,r,n));return ov(e,t,i,n)}function $f(e,t){let r=rt.resolve(e).split(rt.sep).filter(o=>o),n=rt.resolve(t).split(rt.sep).filter(o=>o);return r.reduce((o,i,a)=>o&&n[a]===i,!0)}function fi(e,t,r){return`Cannot ${r} '${e}' to a subdirectory of itself, '${t}'.`}iv.exports={checkPaths:_N,checkPathsSync:IN,checkParentPaths:Mf,checkParentPathsSync:ov,isSrcSubdir:$f}});var sv=g((hK,av)=>{"use strict";av.exports=function(e){if(typeof Buffer.allocUnsafe=="function")try{return Buffer.allocUnsafe(e)}catch{return new Buffer(e)}return new Buffer(e)}});var pv=g((gK,fv)=>{"use strict";var be=Te(),di=require("path"),AN=mt().mkdirsSync,CN=Rf().utimesMillisSync,mi=pi();function TN(e,t,r){typeof r=="function"&&(r={filter:r}),r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;

    see https://github.com/jprichardson/node-fs-extra/issues/269`);let{srcStat:n,destStat:o}=mi.checkPathsSync(e,t,"copy");return mi.checkParentPathsSync(e,n,t,"copy"),ON(o,e,t,r)}function ON(e,t,r,n){if(n.filter&&!n.filter(t,r))return;let o=di.dirname(r);return be.existsSync(o)||AN(o),uv(e,t,r,n)}function uv(e,t,r,n){if(!(n.filter&&!n.filter(t,r)))return DN(e,t,r,n)}function DN(e,t,r,n){let i=(n.dereference?be.statSync:be.lstatSync)(t);if(i.isDirectory())return RN(i,e,t,r,n);if(i.isFile()||i.isCharacterDevice()||i.isBlockDevice())return FN(i,e,t,r,n);if(i.isSymbolicLink())return $N(e,t,r,n)}function FN(e,t,r,n,o){return t?PN(e,r,n,o):cv(e,r,n,o)}function PN(e,t,r,n){if(n.overwrite)return be.unlinkSync(r),cv(e,t,r,n);if(n.errorOnExist)throw new Error(`'${r}' already exists`)}function cv(e,t,r,n){return typeof be.copyFileSync=="function"?(be.copyFileSync(t,r),be.chmodSync(r,e.mode),n.preserveTimestamps?CN(r,e.atime,e.mtime):void 0):NN(e,t,r,n)}function NN(e,t,r,n){let i=sv()(65536),a=be.openSync(t,"r"),s=be.openSync(r,"w",e.mode),u=0;for(;u<e.size;){let l=be.readSync(a,i,0,65536,u);be.writeSync(s,i,0,l),u+=l}n.preserveTimestamps&&be.futimesSync(s,e.atime,e.mtime),be.closeSync(a),be.closeSync(s)}function RN(e,t,r,n,o){if(!t)return MN(e,r,n,o);if(t&&!t.isDirectory())throw new Error(`Cannot overwrite non-directory '${n}' with directory '${r}'.`);return lv(r,n,o)}function MN(e,t,r,n){return be.mkdirSync(r),lv(t,r,n),be.chmodSync(r,e.mode)}function lv(e,t,r){be.readdirSync(e).forEach(n=>qN(n,e,t,r))}function qN(e,t,r,n){let o=di.join(t,e),i=di.join(r,e),{destStat:a}=mi.checkPathsSync(o,i,"copy");return uv(a,o,i,n)}function $N(e,t,r,n){let o=be.readlinkSync(t);if(n.dereference&&(o=di.resolve(process.cwd(),o)),e){let i;try{i=be.readlinkSync(r)}catch(a){if(a.code==="EINVAL"||a.code==="UNKNOWN")return be.symlinkSync(o,r);throw a}if(n.dereference&&(i=di.resolve(process.cwd(),i)),mi.isSrcSubdir(o,i))throw new Error(`Cannot copy '${o}' to a subdirectory of itself, '${i}'.`);if(be.statSync(r).isDirectory()&&mi.isSrcSubdir(i,o))throw new Error(`Cannot overwrite '${i}' with '${o}'.`);return LN(o,r)}else return be.symlinkSync(o,r)}function LN(e,t){return be.unlinkSync(t),be.symlinkSync(e,t)}fv.exports=TN});var Lf=g((yK,dv)=>{"use strict";dv.exports={copySync:pv()}});var Qt=g((vK,hv)=>{"use strict";var jN=tt().fromPromise,mv=If();function BN(e){return mv.access(e).then(()=>!0).catch(()=>!1)}hv.exports={pathExists:jN(BN),pathExistsSync:mv.existsSync}});var kv=g((bK,Sv)=>{"use strict";var je=Te(),hi=require("path"),zN=mt().mkdirs,WN=Qt().pathExists,UN=Rf().utimesMillis,gi=pi();function HN(e,t,r,n){typeof r=="function"&&!n?(n=r,r={}):typeof r=="function"&&(r={filter:r}),n=n||function(){},r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;

    see https://github.com/jprichardson/node-fs-extra/issues/269`),gi.checkPaths(e,t,"copy",(o,i)=>{if(o)return n(o);let{srcStat:a,destStat:s}=i;gi.checkParentPaths(e,a,t,"copy",u=>u?n(u):r.filter?vv(gv,s,e,t,r,n):gv(s,e,t,r,n))})}function gv(e,t,r,n,o){let i=hi.dirname(r);WN(i,(a,s)=>{if(a)return o(a);if(s)return jf(e,t,r,n,o);zN(i,u=>u?o(u):jf(e,t,r,n,o))})}function vv(e,t,r,n,o,i){Promise.resolve(o.filter(r,n)).then(a=>a?e(t,r,n,o,i):i(),a=>i(a))}function jf(e,t,r,n,o){return n.filter?vv(yv,e,t,r,n,o):yv(e,t,r,n,o)}function yv(e,t,r,n,o){(n.dereference?je.stat:je.lstat)(t,(a,s)=>{if(a)return o(a);if(s.isDirectory())return JN(s,e,t,r,n,o);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return VN(s,e,t,r,n,o);if(s.isSymbolicLink())return QN(e,t,r,n,o)})}function VN(e,t,r,n,o,i){return t?GN(e,r,n,o,i):bv(e,r,n,o,i)}function GN(e,t,r,n,o){if(n.overwrite)je.unlink(r,i=>i?o(i):bv(e,t,r,n,o));else return n.errorOnExist?o(new Error(`'${r}' already exists`)):o()}function bv(e,t,r,n,o){return typeof je.copyFile=="function"?je.copyFile(t,r,i=>i?o(i):wv(e,r,n,o)):KN(e,t,r,n,o)}function KN(e,t,r,n,o){let i=je.createReadStream(t);i.on("error",a=>o(a)).once("open",()=>{let a=je.createWriteStream(r,{mode:e.mode});a.on("error",s=>o(s)).on("open",()=>i.pipe(a)).once("close",()=>wv(e,r,n,o))})}function wv(e,t,r,n){je.chmod(t,e.mode,o=>o?n(o):r.preserveTimestamps?UN(t,e.atime,e.mtime,n):n())}function JN(e,t,r,n,o,i){return t?t&&!t.isDirectory()?i(new Error(`Cannot overwrite non-directory '${n}' with directory '${r}'.`)):xv(r,n,o,i):ZN(e,r,n,o,i)}function ZN(e,t,r,n,o){je.mkdir(r,i=>{if(i)return o(i);xv(t,r,n,a=>a?o(a):je.chmod(r,e.mode,o))})}function xv(e,t,r,n){je.readdir(e,(o,i)=>o?n(o):Ev(i,e,t,r,n))}function Ev(e,t,r,n,o){let i=e.pop();return i?YN(e,i,t,r,n,o):o()}function YN(e,t,r,n,o,i){let a=hi.join(r,t),s=hi.join(n,t);gi.checkPaths(a,s,"copy",(u,l)=>{if(u)return i(u);let{destStat:c}=l;jf(c,a,s,o,f=>f?i(f):Ev(e,r,n,o,i))})}function QN(e,t,r,n,o){je.readlink(t,(i,a)=>{if(i)return o(i);if(n.dereference&&(a=hi.resolve(process.cwd(),a)),e)je.readlink(r,(s,u)=>s?s.code==="EINVAL"||s.code==="UNKNOWN"?je.symlink(a,r,o):o(s):(n.dereference&&(u=hi.resolve(process.cwd(),u)),gi.isSrcSubdir(a,u)?o(new Error(`Cannot copy '${a}' to a subdirectory of itself, '${u}'.`)):e.isDirectory()&&gi.isSrcSubdir(u,a)?o(new Error(`Cannot overwrite '${u}' with '${a}'.`)):XN(a,r,o)));else return je.symlink(a,r,o)})}function XN(e,t,r){je.unlink(t,n=>n?r(n):je.symlink(e,t,r))}Sv.exports=HN});var Bf=g((wK,_v)=>{"use strict";var eR=tt().fromCallback;_v.exports={copy:eR(kv())}});var Nv=g((xK,Pv)=>{"use strict";var Iv=Te(),Ov=require("path"),me=require("assert"),yi=process.platform==="win32";function Dv(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(r=>{e[r]=e[r]||Iv[r],r=r+"Sync",e[r]=e[r]||Iv[r]}),e.maxBusyTries=e.maxBusyTries||3}function zf(e,t,r){let n=0;typeof t=="function"&&(r=t,t={}),me(e,"rimraf: missing path"),me.strictEqual(typeof e,"string","rimraf: path should be a string"),me.strictEqual(typeof r,"function","rimraf: callback function required"),me(t,"rimraf: invalid options argument provided"),me.strictEqual(typeof t,"object","rimraf: options should be object"),Dv(t),Av(e,t,function o(i){if(i){if((i.code==="EBUSY"||i.code==="ENOTEMPTY"||i.code==="EPERM")&&n<t.maxBusyTries){n++;let a=n*100;return setTimeout(()=>Av(e,t,o),a)}i.code==="ENOENT"&&(i=null)}r(i)})}function Av(e,t,r){me(e),me(t),me(typeof r=="function"),t.lstat(e,(n,o)=>{if(n&&n.code==="ENOENT")return r(null);if(n&&n.code==="EPERM"&&yi)return Cv(e,t,n,r);if(o&&o.isDirectory())return Ts(e,t,n,r);t.unlink(e,i=>{if(i){if(i.code==="ENOENT")return r(null);if(i.code==="EPERM")return yi?Cv(e,t,i,r):Ts(e,t,i,r);if(i.code==="EISDIR")return Ts(e,t,i,r)}return r(i)})})}function Cv(e,t,r,n){me(e),me(t),me(typeof n=="function"),r&&me(r instanceof Error),t.chmod(e,438,o=>{o?n(o.code==="ENOENT"?null:r):t.stat(e,(i,a)=>{i?n(i.code==="ENOENT"?null:r):a.isDirectory()?Ts(e,t,r,n):t.unlink(e,n)})})}function Tv(e,t,r){let n;me(e),me(t),r&&me(r instanceof Error);try{t.chmodSync(e,438)}catch(o){if(o.code==="ENOENT")return;throw r}try{n=t.statSync(e)}catch(o){if(o.code==="ENOENT")return;throw r}n.isDirectory()?Os(e,t,r):t.unlinkSync(e)}function Ts(e,t,r,n){me(e),me(t),r&&me(r instanceof Error),me(typeof n=="function"),t.rmdir(e,o=>{o&&(o.code==="ENOTEMPTY"||o.code==="EEXIST"||o.code==="EPERM")?tR(e,t,n):o&&o.code==="ENOTDIR"?n(r):n(o)})}function tR(e,t,r){me(e),me(t),me(typeof r=="function"),t.readdir(e,(n,o)=>{if(n)return r(n);let i=o.length,a;if(i===0)return t.rmdir(e,r);o.forEach(s=>{zf(Ov.join(e,s),t,u=>{if(!a){if(u)return r(a=u);--i===0&&t.rmdir(e,r)}})})})}function Fv(e,t){let r;t=t||{},Dv(t),me(e,"rimraf: missing path"),me.strictEqual(typeof e,"string","rimraf: path should be a string"),me(t,"rimraf: missing options"),me.strictEqual(typeof t,"object","rimraf: options should be object");try{r=t.lstatSync(e)}catch(n){if(n.code==="ENOENT")return;n.code==="EPERM"&&yi&&Tv(e,t,n)}try{r&&r.isDirectory()?Os(e,t,null):t.unlinkSync(e)}catch(n){if(n.code==="ENOENT")return;if(n.code==="EPERM")return yi?Tv(e,t,n):Os(e,t,n);if(n.code!=="EISDIR")throw n;Os(e,t,n)}}function Os(e,t,r){me(e),me(t),r&&me(r instanceof Error);try{t.rmdirSync(e)}catch(n){if(n.code==="ENOTDIR")throw r;if(n.code==="ENOTEMPTY"||n.code==="EEXIST"||n.code==="EPERM")rR(e,t);else if(n.code!=="ENOENT")throw n}}function rR(e,t){if(me(e),me(t),t.readdirSync(e).forEach(r=>Fv(Ov.join(e,r),t)),yi){let r=Date.now();do try{return t.rmdirSync(e,t)}catch{}while(Date.now()-r<500)}else return t.rmdirSync(e,t)}Pv.exports=zf;zf.sync=Fv});var vi=g((EK,Mv)=>{"use strict";var nR=tt().fromCallback,Rv=Nv();Mv.exports={remove:nR(Rv),removeSync:Rv.sync}});var Uv=g((SK,Wv)=>{"use strict";var oR=tt().fromCallback,Lv=Te(),jv=require("path"),Bv=mt(),zv=vi(),qv=oR(function(t,r){r=r||function(){},Lv.readdir(t,(n,o)=>{if(n)return Bv.mkdirs(t,r);o=o.map(a=>jv.join(t,a)),i();function i(){let a=o.pop();if(!a)return r();zv.remove(a,s=>{if(s)return r(s);i()})}})});function $v(e){let t;try{t=Lv.readdirSync(e)}catch{return Bv.mkdirsSync(e)}t.forEach(r=>{r=jv.join(e,r),zv.removeSync(r)})}Wv.exports={emptyDirSync:$v,emptydirSync:$v,emptyDir:qv,emptydir:qv}});var Kv=g((kK,Gv)=>{"use strict";var iR=tt().fromCallback,Hv=require("path"),bi=Te(),Vv=mt(),aR=Qt().pathExists;function sR(e,t){function r(){bi.writeFile(e,"",n=>{if(n)return t(n);t()})}bi.stat(e,(n,o)=>{if(!n&&o.isFile())return t();let i=Hv.dirname(e);aR(i,(a,s)=>{if(a)return t(a);if(s)return r();Vv.mkdirs(i,u=>{if(u)return t(u);r()})})})}function uR(e){let t;try{t=bi.statSync(e)}catch{}if(t&&t.isFile())return;let r=Hv.dirname(e);bi.existsSync(r)||Vv.mkdirsSync(r),bi.writeFileSync(e,"")}Gv.exports={createFile:iR(sR),createFileSync:uR}});var Xv=g((_K,Qv)=>{"use strict";var cR=tt().fromCallback,Zv=require("path"),ln=Te(),Yv=mt(),Jv=Qt().pathExists;function lR(e,t,r){function n(o,i){ln.link(o,i,a=>{if(a)return r(a);r(null)})}Jv(t,(o,i)=>{if(o)return r(o);if(i)return r(null);ln.lstat(e,a=>{if(a)return a.message=a.message.replace("lstat","ensureLink"),r(a);let s=Zv.dirname(t);Jv(s,(u,l)=>{if(u)return r(u);if(l)return n(e,t);Yv.mkdirs(s,c=>{if(c)return r(c);n(e,t)})})})})}function fR(e,t){if(ln.existsSync(t))return;try{ln.lstatSync(e)}catch(i){throw i.message=i.message.replace("lstat","ensureLink"),i}let n=Zv.dirname(t);return ln.existsSync(n)||Yv.mkdirsSync(n),ln.linkSync(e,t)}Qv.exports={createLink:cR(lR),createLinkSync:fR}});var tb=g((IK,eb)=>{"use strict";var Fr=require("path"),wi=Te(),pR=Qt().pathExists;function dR(e,t,r){if(Fr.isAbsolute(e))return wi.lstat(e,n=>n?(n.message=n.message.replace("lstat","ensureSymlink"),r(n)):r(null,{toCwd:e,toDst:e}));{let n=Fr.dirname(t),o=Fr.join(n,e);return pR(o,(i,a)=>i?r(i):a?r(null,{toCwd:o,toDst:e}):wi.lstat(e,s=>s?(s.message=s.message.replace("lstat","ensureSymlink"),r(s)):r(null,{toCwd:e,toDst:Fr.relative(n,e)})))}}function mR(e,t){let r;if(Fr.isAbsolute(e)){if(r=wi.existsSync(e),!r)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}else{let n=Fr.dirname(t),o=Fr.join(n,e);if(r=wi.existsSync(o),r)return{toCwd:o,toDst:e};if(r=wi.existsSync(e),!r)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:Fr.relative(n,e)}}}eb.exports={symlinkPaths:dR,symlinkPathsSync:mR}});var ob=g((AK,nb)=>{"use strict";var rb=Te();function hR(e,t,r){if(r=typeof t=="function"?t:r,t=typeof t=="function"?!1:t,t)return r(null,t);rb.lstat(e,(n,o)=>{if(n)return r(null,"file");t=o&&o.isDirectory()?"dir":"file",r(null,t)})}function gR(e,t){let r;if(t)return t;try{r=rb.lstatSync(e)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}nb.exports={symlinkType:hR,symlinkTypeSync:gR}});var fb=g((CK,lb)=>{"use strict";var yR=tt().fromCallback,ab=require("path"),no=Te(),sb=mt(),vR=sb.mkdirs,bR=sb.mkdirsSync,ub=tb(),wR=ub.symlinkPaths,xR=ub.symlinkPathsSync,cb=ob(),ER=cb.symlinkType,SR=cb.symlinkTypeSync,ib=Qt().pathExists;function kR(e,t,r,n){n=typeof r=="function"?r:n,r=typeof r=="function"?!1:r,ib(t,(o,i)=>{if(o)return n(o);if(i)return n(null);wR(e,t,(a,s)=>{if(a)return n(a);e=s.toDst,ER(s.toCwd,r,(u,l)=>{if(u)return n(u);let c=ab.dirname(t);ib(c,(f,p)=>{if(f)return n(f);if(p)return no.symlink(e,t,l,n);vR(c,d=>{if(d)return n(d);no.symlink(e,t,l,n)})})})})})}function _R(e,t,r){if(no.existsSync(t))return;let o=xR(e,t);e=o.toDst,r=SR(o.toCwd,r);let i=ab.dirname(t);return no.existsSync(i)||bR(i),no.symlinkSync(e,t,r)}lb.exports={createSymlink:yR(kR),createSymlinkSync:_R}});var db=g((TK,pb)=>{"use strict";var Ds=Kv(),Fs=Xv(),Ps=fb();pb.exports={createFile:Ds.createFile,createFileSync:Ds.createFileSync,ensureFile:Ds.createFile,ensureFileSync:Ds.createFileSync,createLink:Fs.createLink,createLinkSync:Fs.createLinkSync,ensureLink:Fs.createLink,ensureLinkSync:Fs.createLinkSync,createSymlink:Ps.createSymlink,createSymlinkSync:Ps.createSymlinkSync,ensureSymlink:Ps.createSymlink,ensureSymlinkSync:Ps.createSymlinkSync}});var yb=g((OK,gb)=>{var oo;try{oo=Te()}catch{oo=require("fs")}function IR(e,t,r){r==null&&(r=t,t={}),typeof t=="string"&&(t={encoding:t}),t=t||{};var n=t.fs||oo,o=!0;"throws"in t&&(o=t.throws),n.readFile(e,t,function(i,a){if(i)return r(i);a=hb(a);var s;try{s=JSON.parse(a,t?t.reviver:null)}catch(u){return o?(u.message=e+": "+u.message,r(u)):r(null,null)}r(null,s)})}function AR(e,t){t=t||{},typeof t=="string"&&(t={encoding:t});var r=t.fs||oo,n=!0;"throws"in t&&(n=t.throws);try{var o=r.readFileSync(e,t);return o=hb(o),JSON.parse(o,t.reviver)}catch(i){if(n)throw i.message=e+": "+i.message,i;return null}}function mb(e,t){var r,n=`
`;typeof t=="object"&&t!==null&&(t.spaces&&(r=t.spaces),t.EOL&&(n=t.EOL));var o=JSON.stringify(e,t?t.replacer:null,r);return o.replace(/\n/g,n)+n}function CR(e,t,r,n){n==null&&(n=r,r={}),r=r||{};var o=r.fs||oo,i="";try{i=mb(t,r)}catch(a){n&&n(a,null);return}o.writeFile(e,i,r,n)}function TR(e,t,r){r=r||{};var n=r.fs||oo,o=mb(t,r);return n.writeFileSync(e,o,r)}function hb(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e=e.replace(/^\uFEFF/,""),e}var OR={readFile:IR,readFileSync:AR,writeFile:CR,writeFileSync:TR};gb.exports=OR});var Rs=g((DK,bb)=>{"use strict";var vb=tt().fromCallback,Ns=yb();bb.exports={readJson:vb(Ns.readFile),readJsonSync:Ns.readFileSync,writeJson:vb(Ns.writeFile),writeJsonSync:Ns.writeFileSync}});var Eb=g((FK,xb)=>{"use strict";var DR=require("path"),FR=mt(),PR=Qt().pathExists,wb=Rs();function NR(e,t,r,n){typeof r=="function"&&(n=r,r={});let o=DR.dirname(e);PR(o,(i,a)=>{if(i)return n(i);if(a)return wb.writeJson(e,t,r,n);FR.mkdirs(o,s=>{if(s)return n(s);wb.writeJson(e,t,r,n)})})}xb.exports=NR});var kb=g((PK,Sb)=>{"use strict";var RR=Te(),MR=require("path"),qR=mt(),$R=Rs();function LR(e,t,r){let n=MR.dirname(e);RR.existsSync(n)||qR.mkdirsSync(n),$R.writeJsonSync(e,t,r)}Sb.exports=LR});var Ib=g((NK,_b)=>{"use strict";var jR=tt().fromCallback,Ke=Rs();Ke.outputJson=jR(Eb());Ke.outputJsonSync=kb();Ke.outputJSON=Ke.outputJson;Ke.outputJSONSync=Ke.outputJsonSync;Ke.writeJSON=Ke.writeJson;Ke.writeJSONSync=Ke.writeJsonSync;Ke.readJSON=Ke.readJson;Ke.readJSONSync=Ke.readJsonSync;_b.exports=Ke});var Fb=g((RK,Db)=>{"use strict";var Tb=Te(),BR=require("path"),zR=Lf().copySync,Ob=vi().removeSync,WR=mt().mkdirpSync,Ab=pi();function UR(e,t,r){r=r||{};let n=r.overwrite||r.clobber||!1,{srcStat:o}=Ab.checkPathsSync(e,t,"move");return Ab.checkParentPathsSync(e,o,t,"move"),WR(BR.dirname(t)),HR(e,t,n)}function HR(e,t,r){if(r)return Ob(t),Cb(e,t,r);if(Tb.existsSync(t))throw new Error("dest already exists.");return Cb(e,t,r)}function Cb(e,t,r){try{Tb.renameSync(e,t)}catch(n){if(n.code!=="EXDEV")throw n;return VR(e,t,r)}}function VR(e,t,r){return zR(e,t,{overwrite:r,errorOnExist:!0}),Ob(e)}Db.exports=UR});var Nb=g((MK,Pb)=>{"use strict";Pb.exports={moveSync:Fb()}});var Lb=g((qK,$b)=>{"use strict";var GR=Te(),KR=require("path"),JR=Bf().copy,qb=vi().remove,ZR=mt().mkdirp,YR=Qt().pathExists,Rb=pi();function QR(e,t,r,n){typeof r=="function"&&(n=r,r={});let o=r.overwrite||r.clobber||!1;Rb.checkPaths(e,t,"move",(i,a)=>{if(i)return n(i);let{srcStat:s}=a;Rb.checkParentPaths(e,s,t,"move",u=>{if(u)return n(u);ZR(KR.dirname(t),l=>l?n(l):XR(e,t,o,n))})})}function XR(e,t,r,n){if(r)return qb(t,o=>o?n(o):Mb(e,t,r,n));YR(t,(o,i)=>o?n(o):i?n(new Error("dest already exists.")):Mb(e,t,r,n))}function Mb(e,t,r,n){GR.rename(e,t,o=>o?o.code!=="EXDEV"?n(o):e3(e,t,r,n):n())}function e3(e,t,r,n){JR(e,t,{overwrite:r,errorOnExist:!0},i=>i?n(i):qb(e,n))}$b.exports=QR});var Bb=g(($K,jb)=>{"use strict";var t3=tt().fromCallback;jb.exports={move:t3(Lb())}});var Hb=g((LK,Ub)=>{"use strict";var r3=tt().fromCallback,xi=Te(),zb=require("path"),Wb=mt(),n3=Qt().pathExists;function o3(e,t,r,n){typeof r=="function"&&(n=r,r="utf8");let o=zb.dirname(e);n3(o,(i,a)=>{if(i)return n(i);if(a)return xi.writeFile(e,t,r,n);Wb.mkdirs(o,s=>{if(s)return n(s);xi.writeFile(e,t,r,n)})})}function i3(e,...t){let r=zb.dirname(e);if(xi.existsSync(r))return xi.writeFileSync(e,...t);Wb.mkdirsSync(r),xi.writeFileSync(e,...t)}Ub.exports={outputFile:r3(o3),outputFileSync:i3}});var Uf=g((jK,Wf)=>{"use strict";Wf.exports=Object.assign({},If(),Lf(),Bf(),Uv(),db(),Ib(),mt(),Nb(),Bb(),Hb(),Qt(),vi());var Vb=require("fs");Object.getOwnPropertyDescriptor(Vb,"promises")&&Object.defineProperty(Wf.exports,"promises",{get(){return Vb.promises}})});var Kb=g((BK,Gb)=>{Gb.exports=()=>new Date});var Zb=g((zK,Jb)=>{var a3=Pe()("streamroller:fileNameFormatter"),s3=require("path"),u3=".gz",c3=".";Jb.exports=({file:e,keepFileExt:t,needsIndex:r,alwaysIncludeDate:n,compress:o,fileNameSep:i})=>{let a=i||c3,s=s3.join(e.dir,e.name),u=d=>d+e.ext,l=(d,h,y)=>(r||!y)&&h?d+a+h:d,c=(d,h,y)=>(h>0||n)&&y?d+a+y:d,f=(d,h)=>h&&o?d+u3:d,p=t?[c,l,u,f]:[u,c,l,f];return({date:d,index:h})=>(a3(`_formatFileName: date=${d}, index=${h}`),p.reduce((y,v)=>v(y,h,d),s))}});var e0=g((WK,Xb)=>{var fn=Pe()("streamroller:fileNameParser"),Yb=".gz",Qb=bs(),l3=".";Xb.exports=({file:e,keepFileExt:t,pattern:r,fileNameSep:n})=>{let o=n||l3,i=(p,d)=>p.endsWith(Yb)?(fn("it is gzipped"),d.isCompressed=!0,p.slice(0,-1*Yb.length)):p,a="__NOT_MATCHING__",f=[i,t?p=>p.startsWith(e.name)&&p.endsWith(e.ext)?(fn("it starts and ends with the right things"),p.slice(e.name.length+1,-1*e.ext.length)):a:p=>p.startsWith(e.base)?(fn("it starts with the right things"),p.slice(e.base.length+1)):a,r?(p,d)=>{let h=p.split(o),y=h[h.length-1];fn("items: ",h,", indexStr: ",y);let v=p;y!==void 0&&y.match(/^\d+$/)?(v=p.slice(0,-1*(y.length+1)),fn(`dateStr is ${v}`),r&&!v&&(v=y,y="0")):y="0";try{let w=Qb.parse(r,v,new Date(0,0));return Qb.asString(r,w)!==v?p:(d.index=parseInt(y,10),d.date=v,d.timestamp=w.getTime(),"")}catch(w){return fn(`Problem parsing ${v} as ${r}, error was: `,w),p}}:(p,d)=>p.match(/^\d+$/)?(fn("it has an index"),d.index=parseInt(p,10),""):p];return p=>{let d={filename:p,index:0,isCompressed:!1};return f.reduce((y,v)=>v(y,d),p)?null:d}}});var r0=g((UK,t0)=>{var nt=Pe()("streamroller:moveAndMaybeCompressFile"),dr=Uf(),f3=require("zlib"),p3=function(e){let t={mode:parseInt("0600",8),compress:!1},r=Object.assign({},t,e);return nt(`_parseOption: moveAndMaybeCompressFile called with option=${JSON.stringify(r)}`),r},d3=async(e,t,r)=>{if(r=p3(r),e===t){nt("moveAndMaybeCompressFile: source and target are the same, not doing anything");return}if(await dr.pathExists(e))if(nt(`moveAndMaybeCompressFile: moving file from ${e} to ${t} ${r.compress?"with":"without"} compress`),r.compress)await new Promise((n,o)=>{let i=!1,a=dr.createWriteStream(t,{mode:r.mode,flags:"wx"}).on("open",()=>{i=!0;let s=dr.createReadStream(e).on("open",()=>{s.pipe(f3.createGzip()).pipe(a)}).on("error",u=>{nt(`moveAndMaybeCompressFile: error reading ${e}`,u),a.destroy(u)})}).on("finish",()=>{nt(`moveAndMaybeCompressFile: finished compressing ${t}, deleting ${e}`),dr.unlink(e).then(n).catch(s=>{nt(`moveAndMaybeCompressFile: error deleting ${e}, truncating instead`,s),dr.truncate(e).then(n).catch(u=>{nt(`moveAndMaybeCompressFile: error truncating ${e}`,u),o(u)})})}).on("error",s=>{i?(nt(`moveAndMaybeCompressFile: error writing ${t}, deleting`,s),dr.unlink(t).then(()=>{o(s)}).catch(u=>{nt(`moveAndMaybeCompressFile: error deleting ${t}`,u),o(u)})):(nt(`moveAndMaybeCompressFile: error creating ${t}`,s),o(s))})}).catch(()=>{});else{nt(`moveAndMaybeCompressFile: renaming ${e} to ${t}`);try{await dr.move(e,t,{overwrite:!0})}catch(n){if(nt(`moveAndMaybeCompressFile: error renaming ${e} to ${t}`,n),n.code!=="ENOENT"){nt("moveAndMaybeCompressFile: trying copy+truncate instead");try{await dr.copy(e,t,{overwrite:!0}),await dr.truncate(e)}catch(o){nt("moveAndMaybeCompressFile: error copy+truncate",o)}}}}};t0.exports=d3});var $s=g((HK,n0)=>{var ht=Pe()("streamroller:RollingFileWriteStream"),dn=Uf(),pn=require("path"),m3=require("os"),Ms=Kb(),qs=bs(),{Writable:h3}=require("stream"),g3=Zb(),y3=e0(),v3=r0(),b3=e=>(ht(`deleteFiles: files to delete: ${e}`),Promise.all(e.map(t=>dn.unlink(t).catch(r=>{ht(`deleteFiles: error when unlinking ${t}, ignoring. Error was ${r}`)})))),Hf=class extends h3{constructor(t,r){if(ht(`constructor: creating RollingFileWriteStream. path=${t}`),typeof t!="string"||t.length===0)throw new Error(`Invalid filename: ${t}`);if(t.endsWith(pn.sep))throw new Error(`Filename is a directory: ${t}`);t.indexOf(`~${pn.sep}`)===0&&(t=t.replace("~",m3.homedir())),super(r),this.options=this._parseOption(r),this.fileObject=pn.parse(t),this.fileObject.dir===""&&(this.fileObject=pn.parse(pn.join(process.cwd(),t))),this.fileFormatter=g3({file:this.fileObject,alwaysIncludeDate:this.options.alwaysIncludePattern,needsIndex:this.options.maxSize<Number.MAX_SAFE_INTEGER,compress:this.options.compress,keepFileExt:this.options.keepFileExt,fileNameSep:this.options.fileNameSep}),this.fileNameParser=y3({file:this.fileObject,keepFileExt:this.options.keepFileExt,pattern:this.options.pattern,fileNameSep:this.options.fileNameSep}),this.state={currentSize:0},this.options.pattern&&(this.state.currentDate=qs(this.options.pattern,Ms())),this.filename=this.fileFormatter({index:0,date:this.state.currentDate}),["a","a+","as","as+"].includes(this.options.flags)&&this._setExistingSizeAndDate(),ht(`constructor: create new file ${this.filename}, state=${JSON.stringify(this.state)}`),this._renewWriteStream()}_setExistingSizeAndDate(){try{let t=dn.statSync(this.filename);this.state.currentSize=t.size,this.options.pattern&&(this.state.currentDate=qs(this.options.pattern,t.mtime))}catch{return}}_parseOption(t){let r={maxSize:0,numToKeep:Number.MAX_SAFE_INTEGER,encoding:"utf8",mode:parseInt("0600",8),flags:"a",compress:!1,keepFileExt:!1,alwaysIncludePattern:!1},n=Object.assign({},r,t);if(!n.maxSize)delete n.maxSize;else if(n.maxSize<=0)throw new Error(`options.maxSize (${n.maxSize}) should be > 0`);if(n.numBackups||n.numBackups===0){if(n.numBackups<0)throw new Error(`options.numBackups (${n.numBackups}) should be >= 0`);if(n.numBackups>=Number.MAX_SAFE_INTEGER)throw new Error(`options.numBackups (${n.numBackups}) should be < Number.MAX_SAFE_INTEGER`);n.numToKeep=n.numBackups+1}else if(n.numToKeep<=0)throw new Error(`options.numToKeep (${n.numToKeep}) should be > 0`);return ht(`_parseOption: creating stream with option=${JSON.stringify(n)}`),n}_final(t){this.currentFileStream.end("",this.options.encoding,t)}_write(t,r,n){this._shouldRoll().then(()=>{ht(`_write: writing chunk. file=${this.currentFileStream.path} state=${JSON.stringify(this.state)} chunk=${t}`),this.currentFileStream.write(t,r,o=>{this.state.currentSize+=t.length,n(o)})})}async _shouldRoll(){(this._dateChanged()||this._tooBig())&&(ht(`_shouldRoll: rolling because dateChanged? ${this._dateChanged()} or tooBig? ${this._tooBig()}`),await this._roll())}_dateChanged(){return this.state.currentDate&&this.state.currentDate!==qs(this.options.pattern,Ms())}_tooBig(){return this.state.currentSize>=this.options.maxSize}_roll(){return ht("_roll: closing the current stream"),new Promise((t,r)=>{this.currentFileStream.end("",this.options.encoding,()=>{this._moveOldFiles().then(t).catch(r)})})}async _moveOldFiles(){let t=await this._getExistingFiles(),r=this.state.currentDate?t.filter(n=>n.date===this.state.currentDate):t;for(let n=r.length;n>=0;n--){ht(`_moveOldFiles: i = ${n}`);let o=this.fileFormatter({date:this.state.currentDate,index:n}),i=this.fileFormatter({date:this.state.currentDate,index:n+1}),a={compress:this.options.compress&&n===0,mode:this.options.mode};await v3(o,i,a)}this.state.currentSize=0,this.state.currentDate=this.state.currentDate?qs(this.options.pattern,Ms()):null,ht(`_moveOldFiles: finished rolling files. state=${JSON.stringify(this.state)}`),this._renewWriteStream(),await new Promise((n,o)=>{this.currentFileStream.write("","utf8",()=>{this._clean().then(n).catch(o)})})}async _getExistingFiles(){let t=await dn.readdir(this.fileObject.dir).catch(()=>[]);ht(`_getExistingFiles: files=${t}`);let r=t.map(o=>this.fileNameParser(o)).filter(o=>o),n=o=>(o.timestamp?o.timestamp:Ms().getTime())-o.index;return r.sort((o,i)=>n(o)-n(i)),r}_renewWriteStream(){let t=this.fileFormatter({date:this.state.currentDate,index:0}),r=i=>{try{return dn.mkdirSync(i,{recursive:!0})}catch(a){if(a.code==="ENOENT")return r(pn.dirname(i)),r(i);if(a.code!=="EEXIST"&&a.code!=="EROFS")throw a;try{if(dn.statSync(i).isDirectory())return i;throw a}catch{throw a}}};r(this.fileObject.dir);let n={flags:this.options.flags,encoding:this.options.encoding,mode:this.options.mode},o=function(i,a,s){return i[s]=i[a],delete i[a],i};dn.appendFileSync(t,"",o({...n},"flags","flag")),this.currentFileStream=dn.createWriteStream(t,n),this.currentFileStream.on("error",i=>{this.emit("error",i)})}async _clean(){let t=await this._getExistingFiles();if(ht(`_clean: numToKeep = ${this.options.numToKeep}, existingFiles = ${t.length}`),ht("_clean: existing files are: ",t),this._tooManyFiles(t.length)){let r=t.slice(0,t.length-this.options.numToKeep).map(n=>pn.format({dir:this.fileObject.dir,base:n.filename}));await b3(r)}}_tooManyFiles(t){return this.options.numToKeep>0&&t>this.options.numToKeep}};n0.exports=Hf});var i0=g((VK,o0)=>{var w3=$s(),Vf=class extends w3{constructor(t,r,n,o){o||(o={}),r&&(o.maxSize=r),!o.numBackups&&o.numBackups!==0&&(!n&&n!==0&&(n=1),o.numBackups=n),super(t,o),this.backups=o.numBackups,this.size=this.options.maxSize}get theStream(){return this.currentFileStream}};o0.exports=Vf});var s0=g((GK,a0)=>{var x3=$s(),Gf=class extends x3{constructor(t,r,n){r&&typeof r=="object"&&(n=r,r=null),n||(n={}),r||(r="yyyy-MM-dd"),n.pattern=r,!n.numBackups&&n.numBackups!==0?(!n.daysToKeep&&n.daysToKeep!==0?n.daysToKeep=1:process.emitWarning("options.daysToKeep is deprecated due to the confusion it causes when used together with file size rolling. Please use options.numBackups instead.","DeprecationWarning","streamroller-DEP0001"),n.numBackups=n.daysToKeep):n.daysToKeep=n.numBackups,super(t,n),this.mode=this.options.mode}get theStream(){return this.currentFileStream}};a0.exports=Gf});var Kf=g((KK,u0)=>{u0.exports={RollingFileWriteStream:$s(),RollingFileStream:i0(),DateRollingFileStream:s0()}});var d0=g((JK,p0)=>{var c0=Pe()("log4js:file"),Jf=require("path"),E3=Kf(),f0=require("os"),S3=f0.EOL,Ls=!1,js=new Set;function l0(){js.forEach(e=>{e.sighupHandler()})}function k3(e,t,r,n,o,i){if(typeof e!="string"||e.length===0)throw new Error(`Invalid filename: ${e}`);if(e.endsWith(Jf.sep))throw new Error(`Filename is a directory: ${e}`);e=e.replace(new RegExp(`^~(?=${Jf.sep}.+)`),f0.homedir()),e=Jf.normalize(e),n=!n&&n!==0?5:n,c0("Creating file appender (",e,", ",r,", ",n,", ",o,", ",i,")");function a(l,c,f,p){let d=new E3.RollingFileStream(l,c,f,p);return d.on("error",h=>{console.error("log4js.fileAppender - Writing to file %s, error happened ",l,h)}),d.on("drain",()=>{process.emit("log4js:pause",!1)}),d}let s=a(e,r,n,o),u=function(l){if(s.writable){if(o.removeColor===!0){let c=/\x1b[[0-9;]*m/g;l.data=l.data.map(f=>typeof f=="string"?f.replace(c,""):f)}s.write(t(l,i)+S3,"utf8")||process.emit("log4js:pause",!0)}};return u.reopen=function(){s.end(()=>{s=a(e,r,n,o)})},u.sighupHandler=function(){c0("SIGHUP handler called."),u.reopen()},u.shutdown=function(l){js.delete(u),js.size===0&&Ls&&(process.removeListener("SIGHUP",l0),Ls=!1),s.end("","utf-8",l)},js.add(u),Ls||(process.on("SIGHUP",l0),Ls=!0),u}function _3(e,t){let r=t.basicLayout;return e.layout&&(r=t.layout(e.layout.type,e.layout)),e.mode=e.mode||384,k3(e.filename,r,e.maxLogSize,e.backups,e,e.timezoneOffset)}p0.exports.configure=_3});var h0=g((ZK,m0)=>{var I3=Kf(),A3=require("os"),C3=A3.EOL;function T3(e,t,r){let n=new I3.DateRollingFileStream(e,t,r);return n.on("error",o=>{console.error("log4js.dateFileAppender - Writing to file %s, error happened ",e,o)}),n.on("drain",()=>{process.emit("log4js:pause",!1)}),n}function O3(e,t,r,n,o){n.maxSize=n.maxLogSize;let i=T3(e,t,n),a=function(s){i.writable&&(i.write(r(s,o)+C3,"utf8")||process.emit("log4js:pause",!0))};return a.shutdown=function(s){i.end("","utf-8",s)},a}function D3(e,t){let r=t.basicLayout;return e.layout&&(r=t.layout(e.layout.type,e.layout)),e.alwaysIncludePattern||(e.alwaysIncludePattern=!1),e.mode=e.mode||384,O3(e.filename,e.pattern,r,e,e.timezoneOffset)}m0.exports.configure=D3});var b0=g((YK,v0)=>{var mr=Pe()("log4js:fileSync"),er=require("path"),Xt=require("fs"),g0=require("os"),F3=g0.EOL;function y0(e,t){let r=n=>{try{return Xt.mkdirSync(n,{recursive:!0})}catch(o){if(o.code==="ENOENT")return r(er.dirname(n)),r(n);if(o.code!=="EEXIST"&&o.code!=="EROFS")throw o;try{if(Xt.statSync(n).isDirectory())return n;throw o}catch{throw o}}};r(er.dirname(e)),Xt.appendFileSync(e,"",{mode:t.mode,flag:t.flags})}var Zf=class{constructor(t,r,n,o){if(mr("In RollingFileStream"),r<0)throw new Error(`maxLogSize (${r}) should be > 0`);this.filename=t,this.size=r,this.backups=n,this.options=o,this.currentSize=0;function i(a){let s=0;try{s=Xt.statSync(a).size}catch{y0(a,o)}return s}this.currentSize=i(this.filename)}shouldRoll(){return mr("should roll with current size %d, and max size %d",this.currentSize,this.size),this.currentSize>=this.size}roll(t){let r=this,n=new RegExp(`^${er.basename(t)}`);function o(l){return n.test(l)}function i(l){return parseInt(l.slice(`${er.basename(t)}.`.length),10)||0}function a(l,c){return i(l)-i(c)}function s(l){let c=i(l);if(mr(`Index of ${l} is ${c}`),r.backups===0)Xt.truncateSync(t,0);else if(c<r.backups){try{Xt.unlinkSync(`${t}.${c+1}`)}catch{}mr(`Renaming ${l} -> ${t}.${c+1}`),Xt.renameSync(er.join(er.dirname(t),l),`${t}.${c+1}`)}}function u(){mr("Renaming the old files"),Xt.readdirSync(er.dirname(t)).filter(o).sort(a).reverse().forEach(s)}mr("Rolling, rolling, rolling"),u()}write(t,r){let n=this;function o(){mr("writing the chunk to the file"),n.currentSize+=t.length,Xt.appendFileSync(n.filename,t)}mr("in write"),this.shouldRoll()&&(this.currentSize=0,this.roll(this.filename)),o()}};function P3(e,t,r,n,o,i){if(typeof e!="string"||e.length===0)throw new Error(`Invalid filename: ${e}`);if(e.endsWith(er.sep))throw new Error(`Filename is a directory: ${e}`);e=e.replace(new RegExp(`^~(?=${er.sep}.+)`),g0.homedir()),e=er.normalize(e),n=!n&&n!==0?5:n,mr("Creating fileSync appender (",e,", ",r,", ",n,", ",o,", ",i,")");function a(u,l,c){let f;return l?f=new Zf(u,l,c,o):f=(p=>(y0(p,o),{write(d){Xt.appendFileSync(p,d)}}))(u),f}let s=a(e,r,n);return u=>{s.write(t(u,i)+F3)}}function N3(e,t){let r=t.basicLayout;e.layout&&(r=t.layout(e.layout.type,e.layout));let n={flags:e.flags||"a",encoding:e.encoding||"utf8",mode:e.mode||384};return P3(e.filename,r,e.maxLogSize,e.backups,n,e.timezoneOffset)}v0.exports.configure=N3});var x0=g((QK,w0)=>{var tr=Pe()("log4js:tcp"),R3=require("net");function M3(e,t){let r=!1,n=[],o,i=3,a="__LOG4JS__";function s(f){tr("Writing log event to socket"),r=o.write(`${t(f)}${a}`,"utf8")}function u(){let f;for(tr("emptying buffer");f=n.shift();)s(f)}function l(){tr(`appender creating socket to ${e.host||"localhost"}:${e.port||5e3}`),a=`${e.endMsg||"__LOG4JS__"}`,o=R3.createConnection(e.port||5e3,e.host||"localhost"),o.on("connect",()=>{tr("socket connected"),u(),r=!0}),o.on("drain",()=>{tr("drain event received, emptying buffer"),r=!0,u()}),o.on("timeout",o.end.bind(o)),o.on("error",f=>{tr("connection error",f),r=!1,u()}),o.on("close",l)}l();function c(f){r?s(f):(tr("buffering log event because it cannot write at the moment"),n.push(f))}return c.shutdown=function(f){tr("shutdown called"),n.length&&i?(tr("buffer has items, waiting 100ms to empty"),i-=1,setTimeout(()=>{c.shutdown(f)},100)):(o.removeAllListeners("close"),o.end(f))},c}function q3(e,t){tr(`configure with config = ${e}`);let r=function(n){return n.serialise()};return e.layout&&(r=t.layout(e.layout.type,e.layout)),M3(e,r)}w0.exports.configure=q3});var Xf=g((XK,Qf)=>{var Yf=require("path"),Pr=Pe()("log4js:appenders"),Ct=on(),E0=Ss(),$3=sn(),L3=gf(),j3=by(),Lt=new Map;Lt.set("console",xy());Lt.set("stdout",Sy());Lt.set("stderr",_y());Lt.set("logLevelFilter",Ay());Lt.set("categoryFilter",Oy());Lt.set("noLogFilter",Py());Lt.set("file",d0());Lt.set("dateFile",h0());Lt.set("fileSync",b0());Lt.set("tcp",x0());var Ei=new Map,Bs=(e,t)=>{let r;try{let n=`${e}.cjs`;r=require.resolve(n),Pr("Loading module from ",n)}catch{r=e,Pr("Loading module from ",e)}try{return require(r)}catch(n){Ct.throwExceptionIf(t,n.code!=="MODULE_NOT_FOUND",`appender "${e}" could not be loaded (error was: ${n})`);return}},B3=(e,t)=>Lt.get(e)||Bs(`./${e}`,t)||Bs(e,t)||require.main&&require.main.filename&&Bs(Yf.join(Yf.dirname(require.main.filename),e),t)||Bs(Yf.join(process.cwd(),e),t),zs=new Set,S0=(e,t)=>{if(Ei.has(e))return Ei.get(e);if(!t.appenders[e])return!1;if(zs.has(e))throw new Error(`Dependency loop detected for appender ${e}.`);zs.add(e),Pr(`Creating appender ${e}`);let r=z3(e,t);return zs.delete(e),Ei.set(e,r),r},z3=(e,t)=>{let r=t.appenders[e],n=r.type.configure?r.type:B3(r.type,t);return Ct.throwExceptionIf(t,Ct.not(n),`appender "${e}" is not valid (type "${r.type}" could not be found)`),n.appender&&(process.emitWarning(`Appender ${r.type} exports an appender function.`,"DeprecationWarning","log4js-node-DEP0001"),Pr("[log4js-node-DEP0001]",`DEPRECATION: Appender ${r.type} exports an appender function.`)),n.shutdown&&(process.emitWarning(`Appender ${r.type} exports a shutdown function.`,"DeprecationWarning","log4js-node-DEP0002"),Pr("[log4js-node-DEP0002]",`DEPRECATION: Appender ${r.type} exports a shutdown function.`)),Pr(`${e}: clustering.isMaster ? ${E0.isMaster()}`),Pr(`${e}: appenderModule is ${require("util").inspect(n)}`),E0.onlyOnMaster(()=>(Pr(`calling appenderModule.configure for ${e} / ${r.type}`),n.configure(j3.modifyConfig(r),L3,o=>S0(o,t),$3)),()=>{})},k0=e=>{if(Ei.clear(),zs.clear(),!e)return;let t=[];Object.values(e.categories).forEach(r=>{t.push(...r.appenders)}),Object.keys(e.appenders).forEach(r=>{(t.includes(r)||e.appenders[r].type==="tcp-server"||e.appenders[r].type==="multiprocess")&&S0(r,e)})},_0=()=>{k0()};_0();Ct.addListener(e=>{Ct.throwExceptionIf(e,Ct.not(Ct.anObject(e.appenders)),'must have a property "appenders" of type object.');let t=Object.keys(e.appenders);Ct.throwExceptionIf(e,Ct.not(t.length),"must define at least one appender."),t.forEach(r=>{Ct.throwExceptionIf(e,Ct.not(e.appenders[r].type),`appender "${r}" is not valid (must be an object with property "type")`)})});Ct.addListener(k0);Qf.exports=Ei;Qf.exports.init=_0});var rp=g((eJ,Ws)=>{var Si=Pe()("log4js:categories"),Ee=on(),ep=sn(),I0=Xf(),Nr=new Map;function A0(e,t,r){if(t.inherit===!1)return;let n=r.lastIndexOf(".");if(n<0)return;let o=r.slice(0,n),i=e.categories[o];i||(i={inherit:!0,appenders:[]}),A0(e,i,o),!e.categories[o]&&i.appenders&&i.appenders.length&&i.level&&(e.categories[o]=i),t.appenders=t.appenders||[],t.level=t.level||i.level,i.appenders.forEach(a=>{t.appenders.includes(a)||t.appenders.push(a)}),t.parent=i}function W3(e){if(!e.categories)return;Object.keys(e.categories).forEach(r=>{let n=e.categories[r];A0(e,n,r)})}Ee.addPreProcessingListener(e=>W3(e));Ee.addListener(e=>{Ee.throwExceptionIf(e,Ee.not(Ee.anObject(e.categories)),'must have a property "categories" of type object.');let t=Object.keys(e.categories);Ee.throwExceptionIf(e,Ee.not(t.length),"must define at least one category."),t.forEach(r=>{let n=e.categories[r];Ee.throwExceptionIf(e,[Ee.not(n.appenders),Ee.not(n.level)],`category "${r}" is not valid (must be an object with properties "appenders" and "level")`),Ee.throwExceptionIf(e,Ee.not(Array.isArray(n.appenders)),`category "${r}" is not valid (appenders must be an array of appender names)`),Ee.throwExceptionIf(e,Ee.not(n.appenders.length),`category "${r}" is not valid (appenders must contain at least one appender name)`),Object.prototype.hasOwnProperty.call(n,"enableCallStack")&&Ee.throwExceptionIf(e,typeof n.enableCallStack!="boolean",`category "${r}" is not valid (enableCallStack must be boolean type)`),n.appenders.forEach(o=>{Ee.throwExceptionIf(e,Ee.not(I0.get(o)),`category "${r}" is not valid (appender "${o}" is not defined)`)}),Ee.throwExceptionIf(e,Ee.not(ep.getLevel(n.level)),`category "${r}" is not valid (level "${n.level}" not recognised; valid levels are ${ep.levels.join(", ")})`)}),Ee.throwExceptionIf(e,Ee.not(e.categories.default),'must define a "default" category.')});var tp=e=>{if(Nr.clear(),!e)return;Object.keys(e.categories).forEach(r=>{let n=e.categories[r],o=[];n.appenders.forEach(i=>{o.push(I0.get(i)),Si(`Creating category ${r}`),Nr.set(r,{appenders:o,level:ep.getLevel(n.level),enableCallStack:n.enableCallStack||!1})})})},C0=()=>{tp()};C0();Ee.addListener(tp);var io=e=>{if(Si(`configForCategory: searching for config for ${e}`),Nr.has(e))return Si(`configForCategory: ${e} exists in config, returning it`),Nr.get(e);let t;return e.indexOf(".")>0?(Si(`configForCategory: ${e} has hierarchy, cloning from parents`),t={...io(e.slice(0,e.lastIndexOf(".")))}):(Nr.has("default")||tp({categories:{default:{appenders:["out"],level:"OFF"}}}),Si("configForCategory: cloning default category"),t={...Nr.get("default")}),Nr.set(e,t),t},U3=e=>io(e).appenders,H3=e=>io(e).level,V3=(e,t)=>{io(e).level=t},G3=e=>io(e).enableCallStack===!0,K3=(e,t)=>{io(e).enableCallStack=t};Ws.exports=Nr;Ws.exports=Object.assign(Ws.exports,{appendersForCategory:U3,getLevelForCategory:H3,setLevelForCategory:V3,getEnableCallStackForCategory:G3,setEnableCallStackForCategory:K3,init:C0})});var P0=g((tJ,F0)=>{var T0=Pe()("log4js:logger"),J3=yf(),rr=sn(),Z3=Ss(),Us=rp(),O0=on(),Y3=/at (?:(.+)\s+\()?(?:(.+?):(\d+)(?::(\d+))?|([^)]+))\)?/;function Q3(e,t=4){try{let r=e.stack.split(`
`).slice(t),n=Y3.exec(r[0]);if(n&&n.length===6)return{functionName:n[1],fileName:n[2],lineNumber:parseInt(n[3],10),columnNumber:parseInt(n[4],10),callStack:r.join(`
`)};console.error("log4js.logger - defaultParseCallStack error")}catch(r){console.error("log4js.logger - defaultParseCallStack error",r)}return null}var ki=class{constructor(t){if(!t)throw new Error("No category provided.");this.category=t,this.context={},this.parseCallStack=Q3,T0(`Logger created (${this.category}, ${this.level})`)}get level(){return rr.getLevel(Us.getLevelForCategory(this.category),rr.OFF)}set level(t){Us.setLevelForCategory(this.category,rr.getLevel(t,this.level))}get useCallStack(){return Us.getEnableCallStackForCategory(this.category)}set useCallStack(t){Us.setEnableCallStackForCategory(this.category,t===!0)}log(t,...r){let n=rr.getLevel(t);n?this.isLevelEnabled(n)&&this._log(n,r):O0.validIdentifier(t)&&r.length>0?(this.log(rr.WARN,"log4js:logger.log: valid log-level not found as first parameter given:",t),this.log(rr.INFO,`[${t}]`,...r)):this.log(rr.INFO,t,...r)}isLevelEnabled(t){return this.level.isLessThanOrEqualTo(t)}_log(t,r){T0(`sending log data (${t}) to appenders`);let n=new J3(this.category,t,r,this.context,this.useCallStack&&this.parseCallStack(new Error));Z3.send(n)}addContext(t,r){this.context[t]=r}removeContext(t){delete this.context[t]}clearContext(){this.context={}}setParseCallStackFunction(t){this.parseCallStack=t}};function D0(e){let t=rr.getLevel(e),n=t.toString().toLowerCase().replace(/_([a-z])/g,i=>i[1].toUpperCase()),o=n[0].toUpperCase()+n.slice(1);ki.prototype[`is${o}Enabled`]=function(){return this.isLevelEnabled(t)},ki.prototype[n]=function(...i){this.log(t,...i)}}rr.levels.forEach(D0);O0.addListener(()=>{rr.levels.forEach(D0)});F0.exports=ki});var M0=g((rJ,R0)=>{var ao=sn(),X3=':remote-addr - - ":method :url HTTP/:http-version" :status :content-length ":referrer" ":user-agent"';function e5(e){return e.originalUrl||e.url}function t5(e,t,r){let n=i=>{let a=i.concat();for(let s=0;s<a.length;++s)for(let u=s+1;u<a.length;++u)a[s].token==a[u].token&&a.splice(u--,1);return a},o=[];return o.push({token:":url",replacement:e5(e)}),o.push({token:":protocol",replacement:e.protocol}),o.push({token:":hostname",replacement:e.hostname}),o.push({token:":method",replacement:e.method}),o.push({token:":status",replacement:t.__statusCode||t.statusCode}),o.push({token:":response-time",replacement:t.responseTime}),o.push({token:":date",replacement:new Date().toUTCString()}),o.push({token:":referrer",replacement:e.headers.referer||e.headers.referrer||""}),o.push({token:":http-version",replacement:`${e.httpVersionMajor}.${e.httpVersionMinor}`}),o.push({token:":remote-addr",replacement:e.headers["x-forwarded-for"]||e.ip||e._remoteAddress||e.socket&&(e.socket.remoteAddress||e.socket.socket&&e.socket.socket.remoteAddress)}),o.push({token:":user-agent",replacement:e.headers["user-agent"]}),o.push({token:":content-length",replacement:t.getHeader("content-length")||t.__headers&&t.__headers["Content-Length"]||"-"}),o.push({token:/:req\[([^\]]+)]/g,replacement(i,a){return e.headers[a.toLowerCase()]}}),o.push({token:/:res\[([^\]]+)]/g,replacement(i,a){return t.getHeader(a.toLowerCase())||t.__headers&&t.__headers[a]}}),n(r.concat(o))}function N0(e,t){for(let r=0;r<t.length;r++)e=e.replace(t[r].token,t[r].replacement);return e}function r5(e){let t=null;if(e instanceof RegExp&&(t=e),typeof e=="string"&&(t=new RegExp(e)),Array.isArray(e)){let r=e.map(n=>n.source?n.source:n);t=new RegExp(r.join("|"))}return t}function n5(e,t,r){let n=t;if(r){let o=r.find(i=>{let a=!1;return i.from&&i.to?a=e>=i.from&&e<=i.to:a=i.codes.indexOf(e)!==-1,a});o&&(n=ao.getLevel(o.level,n))}return n}R0.exports=function(t,r){typeof r=="string"||typeof r=="function"?r={format:r}:r=r||{};let n=t,o=ao.getLevel(r.level,ao.INFO),i=r.format||X3;return(a,s,u)=>{if(a._logging!==void 0)return u();if(typeof r.nolog!="function"){let l=r5(r.nolog);if(l&&l.test(a.originalUrl))return u()}if(n.isLevelEnabled(o)||r.level==="auto"){let l=new Date,{writeHead:c}=s;a._logging=!0,s.writeHead=(d,h)=>{s.writeHead=c,s.writeHead(d,h),s.__statusCode=d,s.__headers=h||{}};let f=!1,p=()=>{if(f)return;if(f=!0,typeof r.nolog=="function"&&r.nolog(a,s)===!0){a._logging=!1;return}s.responseTime=new Date-l,s.statusCode&&r.level==="auto"&&(o=ao.INFO,s.statusCode>=300&&(o=ao.WARN),s.statusCode>=400&&(o=ao.ERROR)),o=n5(s.statusCode,o,r.statusRules);let d=t5(a,s,r.tokens||[]);if(r.context&&n.addContext("res",s),typeof i=="function"){let h=i(a,s,y=>N0(y,d));h&&n.log(o,h)}else n.log(o,N0(i,d));r.context&&n.removeContext("res")};s.on("end",p),s.on("finish",p),s.on("error",p),s.on("close",p)}return u()}}});var B0=g((nJ,j0)=>{var q0=Pe()("log4js:recording"),Hs=[];function o5(){return function(e){q0(`received logEvent, number of events now ${Hs.length+1}`),q0("log event was ",e),Hs.push(e)}}function $0(){return Hs.slice()}function L0(){Hs.length=0}j0.exports={configure:o5,replay:$0,playback:$0,reset:L0,erase:L0}});var K0=g((oJ,G0)=>{var Rr=Pe()("log4js:main"),i5=require("fs"),a5=Ng()({proto:!0}),s5=on(),u5=gf(),c5=sn(),z0=Xf(),W0=rp(),l5=P0(),f5=Ss(),p5=M0(),d5=B0(),_i=!1;function m5(e){if(!_i)return;Rr("Received log event ",e),W0.appendersForCategory(e.categoryName).forEach(r=>{r(e)})}function h5(e){Rr(`Loading configuration from ${e}`);try{return JSON.parse(i5.readFileSync(e,"utf8"))}catch(t){throw new Error(`Problem reading config from file "${e}". Error was ${t.message}`,t)}}function U0(e){_i&&H0();let t=e;return typeof t=="string"&&(t=h5(e)),Rr(`Configuration is ${t}`),s5.configure(a5(t)),f5.onMessage(m5),_i=!0,V0}function g5(){return d5}function H0(e){Rr("Shutdown called. Disabling all log writing."),_i=!1;let t=Array.from(z0.values());z0.init(),W0.init();let r=t.reduceRight((a,s)=>s.shutdown?a+1:a,0);if(r===0)return Rr("No appenders with shutdown functions found."),e!==void 0&&e();let n=0,o;Rr(`Found ${r} appenders with shutdown functions.`);function i(a){o=o||a,n+=1,Rr(`Appender shutdowns complete: ${n} / ${r}`),n>=r&&(Rr("All shutdown functions completed."),e&&e(o))}return t.filter(a=>a.shutdown).forEach(a=>a.shutdown(i)),null}function y5(e){return _i||U0(process.env.LOG4JS_CONFIG||{appenders:{out:{type:"stdout"}},categories:{default:{appenders:["out"],level:"OFF"}}}),new l5(e||"default")}var V0={getLogger:y5,configure:U0,shutdown:H0,connectLogger:p5,levels:c5,addLayout:u5.addLayout,recording:g5};G0.exports=V0});var np=g((exports,module)=>{(function(t,r){typeof exports=="object"&&typeof module=="object"?module.exports=r():typeof define=="function"&&define.amd?define("workerpool",[],r):typeof exports=="object"?exports.workerpool=r():t.workerpool=r()})(typeof self<"u"?self:exports,function(){return function(){var __webpack_modules__={162:function(e,t,r){"use strict";r.r(t),r.d(t,{IFrameWorker:function(){return o}});function n(){let i=document.createElement("iframe");return i.width=i.height=i.frameBorder="0",i.classList.add("iframe-worker"),i.style.display="contents",i}class o{constructor(a,s){if(this.scriptText=a,this.onerror=null,this.onmessage=null,this.onmessageerror=null,this.handleMessage=l=>{l.source===this.worker&&(l.stopImmediatePropagation(),this.dispatchEvent(new MessageEvent("message",{data:l.data})),this.onmessage&&this.onmessage(l))},this.handleError=(l,c,f,p,d)=>{if(c===this.scriptText.toString()){let h=new ErrorEvent("error",{message:l,filename:c,lineno:f,colno:p,error:d});this.dispatchEvent(h),this.onerror&&this.onerror(h)}},typeof s<"u")throw new TypeError("Options are not supported for iframe workers");let u=new EventTarget;this.addEventListener=u.addEventListener.bind(u),this.removeEventListener=u.removeEventListener.bind(u),this.dispatchEvent=u.dispatchEvent.bind(u),document.body.appendChild(this.iframe=n()),this.worker.document.open(),this.worker.document.write(`<html><body><script>window.postMessage=
(message, origin) => {
  parent.postMessage(message, origin || "*")
};window.importScripts=
(...urls) => urls.reduce((promise, url) => (
  promise.then(() => new Promise(resolve => {
    const script = document.createElement("script")
    script.src = url
    script.addEventListener("load", () => resolve())
    document.body.appendChild(script)
  }))
), Promise.resolve());addEventListener("error",ev=>{parent.dispatchEvent(new ErrorEvent("error",{filename:"${a.substring(0,50)}",error:ev.error}))})</script><script type="module">${a}</script></body></html>`),this.worker.document.close(),window.addEventListener("message",this.handleMessage),window.onerror=this.handleError,this.ready=new Promise((l,c)=>{this.worker.onload=l,this.worker.onerror=c})}terminate(){document.body.removeChild(this.iframe),window.removeEventListener("message",this.handleMessage),window.onerror=null}postMessage(a){(async()=>{try{await this.ready}catch{}finally{this.worker.dispatchEvent(new MessageEvent("message",{data:a}))}})()}get worker(){return this.iframe.contentWindow}}},799:function(e,t,r){var n=r(446),o=r(518),i=r(722),a=r(393),s=new a;function u(d,h){typeof d=="string"?this.script=d||null:(this.script=null,h=d),this.workers=[],this.tasks=[],h=h||{},this.name=h.name,this.forkArgs=Object.freeze(h.forkArgs||[]),this.forkOpts=Object.freeze(h.forkOpts||{}),this.debugPortStart=h.debugPortStart||43210,this.nodeWorker=h.nodeWorker,this.workerType=h.workerType||h.nodeWorker||"auto",this.maxQueueSize=h.maxQueueSize||1/0,this.onCreateWorker=h.onCreateWorker||function(){return null},this.onTerminateWorker=h.onTerminateWorker||function(){return null},h&&"maxWorkers"in h?(l(h.maxWorkers),this.maxWorkers=h.maxWorkers):this.maxWorkers=Math.max((i.cpus||4)-1,1),h&&"minWorkers"in h&&(h.minWorkers==="max"?this.minWorkers=this.maxWorkers:(c(h.minWorkers),this.minWorkers=h.minWorkers,this.maxWorkers=Math.max(this.minWorkers,this.maxWorkers)),this._ensureMinWorkers()),this._boundNext=this._next.bind(this),this.workerType==="thread"&&o.ensureWorkerThreads()}u.prototype.exec=function(d,h,y){if(h&&!Array.isArray(h))throw new TypeError('Array expected as argument "params"');if(typeof d=="string"){var v=n.defer();if(this.tasks.length>=this.maxQueueSize)throw new Error("Max queue size of "+this.maxQueueSize+" reached");var w=this.tasks,S={method:d,params:h,resolver:v,timeout:null,options:y};w.push(S);var T=v.promise.timeout;return v.promise.timeout=function(B){return w.indexOf(S)!==-1?(S.timeout=B,v.promise):T.call(v.promise,B)},this._next(),v.promise}else{if(typeof d=="function")return this.exec("run",[String(d),h]);throw new TypeError('Function or string expected as argument "method"')}},u.prototype.proxy=function(){if(arguments.length>0)throw new Error("No arguments expected");var d=this;return this.exec("methods").then(function(h){var y={};return h.forEach(function(v){y[v]=function(){return d.exec(v,Array.prototype.slice.call(arguments))}}),y})},u.prototype._next=function(){if(this.tasks.length>0){var d=this._getWorker();if(d){var h=this,y=this.tasks.shift();if(y.resolver.promise.pending){var v=d.exec(y.method,y.params,y.resolver,y.options).then(h._boundNext).catch(function(){if(d.terminated)return h._removeWorker(d)}).then(function(){h._next()});typeof y.timeout=="number"&&v.timeout(y.timeout)}else h._next()}}},u.prototype._getWorker=function(){for(var d=this.workers,h=0;h<d.length;h++){var y=d[h];if(y.busy()===!1)return y}return d.length<this.maxWorkers?(y=this._createWorkerHandler(),d.push(y),y):null},u.prototype._removeWorker=function(d){var h=this;return s.releasePort(d.debugPort),this._removeWorkerFromList(d),this._ensureMinWorkers(),new n(function(y,v){d.terminate(!1,function(w){h.onTerminateWorker({forkArgs:d.forkArgs,forkOpts:d.forkOpts,script:d.script}),w?v(w):y(d)})})},u.prototype._removeWorkerFromList=function(d){var h=this.workers.indexOf(d);h!==-1&&this.workers.splice(h,1)},u.prototype.terminate=function(d,h){var y=this;this.tasks.forEach(function(M){M.resolver.reject(new Error("Pool terminated"))}),this.tasks.length=0;var v=function(B){this._removeWorkerFromList(B)},w=v.bind(this),S=[],T=this.workers.slice();return T.forEach(function(M){var B=M.terminateAndNotify(d,h).then(w).always(function(){y.onTerminateWorker({forkArgs:M.forkArgs,forkOpts:M.forkOpts,script:M.script})});S.push(B)}),n.all(S)},u.prototype.stats=function(){var d=this.workers.length,h=this.workers.filter(function(y){return y.busy()}).length;return{totalWorkers:d,busyWorkers:h,idleWorkers:d-h,pendingTasks:this.tasks.length,activeTasks:h}},u.prototype._ensureMinWorkers=function(){if(this.minWorkers)for(var d=this.workers.length;d<this.minWorkers;d++)this.workers.push(this._createWorkerHandler())},u.prototype._createWorkerHandler=function(){var d=this.onCreateWorker({forkArgs:this.forkArgs,forkOpts:this.forkOpts,script:this.script})||{};return new o(d.script||this.script,{forkArgs:d.forkArgs||this.forkArgs,forkOpts:d.forkOpts||this.forkOpts,debugPort:s.nextAvailableStartingAt(this.debugPortStart),workerType:this.workerType,name:this.name})};function l(d){if(!f(d)||!p(d)||d<1)throw new TypeError("Option maxWorkers must be an integer number >= 1")}function c(d){if(!f(d)||!p(d)||d<0)throw new TypeError("Option minWorkers must be an integer number >= 0")}function f(d){return typeof d=="number"}function p(d){return Math.round(d)==d}e.exports=u},446:function(e){"use strict";function t(i,a){var s=this;if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(typeof i!="function")throw new SyntaxError("Function parameter handler(resolve, reject) missing");var u=[],l=[];this.resolved=!1,this.rejected=!1,this.pending=!0;var c=function(h,y){u.push(h),l.push(y)};this.then=function(d,h){return new t(function(y,v){var w=d?r(d,y,v):y,S=h?r(h,y,v):v;c(w,S)},s)};var f=function(h){return s.resolved=!0,s.rejected=!1,s.pending=!1,u.forEach(function(y){y(h)}),c=function(v,w){v(h)},f=p=function(){},s},p=function(h){return s.resolved=!1,s.rejected=!0,s.pending=!1,l.forEach(function(y){y(h)}),c=function(v,w){w(h)},f=p=function(){},s};this.cancel=function(){return a?a.cancel():p(new n),s},this.timeout=function(d){if(a)a.timeout(d);else{var h=setTimeout(function(){p(new o("Promise timed out after "+d+" ms"))},d);s.always(function(){clearTimeout(h)})}return s},i(function(d){f(d)},function(d){p(d)})}function r(i,a,s){return function(u){try{var l=i(u);l&&typeof l.then=="function"&&typeof l.catch=="function"?l.then(a,s):a(l)}catch(c){s(c)}}}t.prototype.catch=function(i){return this.then(null,i)},t.prototype.always=function(i){return this.then(i,i)},t.all=function(i){return new t(function(a,s){var u=i.length,l=[];u?i.forEach(function(c,f){c.then(function(p){l[f]=p,u--,u==0&&a(l)},function(p){u=0,s(p)})}):a(l)})},t.defer=function(){var i={};return i.promise=new t(function(a,s){i.resolve=a,i.reject=s}),i};function n(i){this.message=i||"promise cancelled",this.stack=new Error().stack}n.prototype=new Error,n.prototype.constructor=Error,n.prototype.name="CancellationError",t.CancellationError=n;function o(i){this.message=i||"timeout exceeded",this.stack=new Error().stack}o.prototype=new Error,o.prototype.constructor=Error,o.prototype.name="TimeoutError",t.TimeoutError=o,e.exports=t},518:function(e,t,r){"use strict";function n(x,C){var b=typeof Symbol<"u"&&x[Symbol.iterator]||x["@@iterator"];if(!b){if(Array.isArray(x)||(b=o(x))||C&&x&&typeof x.length=="number"){b&&(x=b);var k=0,I=function(){};return{s:I,n:function(){return k>=x.length?{done:!0}:{done:!1,value:x[k++]}},e:function(te){throw te},f:I}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var R=!0,D=!1,L;return{s:function(){b=b.call(x)},n:function(){var te=b.next();return R=te.done,te},e:function(te){D=!0,L=te},f:function(){try{!R&&b.return!=null&&b.return()}finally{if(D)throw L}}}}function o(x,C){if(x){if(typeof x=="string")return i(x,C);var b=Object.prototype.toString.call(x).slice(8,-1);if(b==="Object"&&x.constructor&&(b=x.constructor.name),b==="Map"||b==="Set")return Array.from(x);if(b==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return i(x,C)}}function i(x,C){(C==null||C>x.length)&&(C=x.length);for(var b=0,k=new Array(C);b<C;b++)k[b]=x[b];return k}function a(x){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},a(x)}var s=r(446),u=r(722),l=r(781),c=r(162),f=c.IFrameWorker,p="__workerpool-terminate__",d=1e3;function h(){var x=v();if(!x)throw new Error("WorkerPool: workerType = 'thread' is not supported, Node >= 11.7.0 required");return x}function y(){if(typeof Worker!="function"&&((typeof Worker>"u"?"undefined":a(Worker))!=="object"||typeof Worker.prototype.constructor!="function"))throw new Error("WorkerPool: Web Workers not supported")}function v(){try{return l("worker_threads")}catch(x){if(a(x)==="object"&&x!==null&&x.code==="MODULE_NOT_FOUND")return null;throw x}}function w(){if(u.platform==="browser"){if(typeof Blob>"u")throw new Error("Blob not supported by the browser");if(!window.URL||typeof window.URL.createObjectURL!="function")throw new Error("URL.createObjectURL not supported by the browser");var x=new Blob([r(710)],{type:"text/javascript"});return window.URL.createObjectURL(x)}else return __dirname+"/worker.js"}function S(x,C){if(C.workerType==="iframe")return T(x,f,C);if(C.workerType==="web")return y(),T(x,Worker,C);if(C.workerType==="thread")return b=h(),M(x,b);if(C.workerType==="process"||!C.workerType)return B(x,Q(C),l("child_process"));if(u.platform==="browser")return y(),T(x,Worker);var b=v();return b?M(x,b):B(x,Q(C),l("child_process"))}function T(x,C,b){var k=new C(x,b!=null&&b.name?{name:"".concat(b.name,"-").concat(Date.now())}:void 0);return k.isBrowserWorker=!0,k.on=function(I,R){this.addEventListener(I,function(D){R(D.data)})},k.send=function(I){this.postMessage(I)},k}function M(x,C){var b=new C.Worker(x,{stdout:!1,stderr:!1});return b.isWorkerThread=!0,b.send=function(k){this.postMessage(k)},b.kill=function(){return this.terminate(),!0},b.disconnect=function(){this.terminate()},b}function B(x,C,b){var k=b.fork(x,C.forkArgs,C.forkOpts);return k.isChildProcess=!0,k}function Q(x){x=x||{};var C=process.execArgv.join(" "),b=C.indexOf("--inspect")!==-1,k=C.indexOf("--debug-brk")!==-1,I=[];return b&&(I.push("--inspect="+x.debugPort),k&&I.push("--debug-brk")),process.execArgv.forEach(function(R){R.indexOf("--max-old-space-size")>-1&&I.push(R)}),Object.assign({},x,{forkArgs:x.forkArgs,forkOpts:Object.assign({},x.forkOpts,{execArgv:(x.forkOpts&&x.forkOpts.execArgv||[]).concat(I)})})}function X(x){for(var C=new Error(""),b=Object.keys(x),k=0;k<b.length;k++)C[b[k]]=x[b[k]];return C}function G(x,C){var b=this,k=C||{};this.script=x||w(),this.worker=S(this.script,k),this.debugPort=k.debugPort,this.forkOpts=k.forkOpts,this.forkArgs=k.forkArgs,x||(this.worker.ready=!0),this.requestQueue=[],this.worker.on("message",function(L){if(!b.terminated)if(typeof L=="string"&&L==="ready")b.worker.ready=!0,R();else{var H=L.id,te=b.processing[H];te!==void 0&&(L.isEvent?te.options&&typeof te.options.on=="function"&&te.options.on(L.payload):(delete b.processing[H],b.terminating===!0&&b.terminate(),L.error?te.resolver.reject(X(L.error)):te.resolver.resolve(L.result)))}});function I(L){b.terminated=!0;for(var H in b.processing)b.processing[H]!==void 0&&b.processing[H].resolver.reject(L);b.processing=Object.create(null)}function R(){var L=n(b.requestQueue.splice(0)),H;try{for(L.s();!(H=L.n()).done;){var te=H.value;b.worker.send(te)}}catch(ue){L.e(ue)}finally{L.f()}}var D=this.worker;this.worker.on("error",I),this.worker.on("exit",function(L,H){var te=`Workerpool Worker terminated Unexpectedly
`;te+="    exitCode: `"+L+"`\n",te+="    signalCode: `"+H+"`\n",te+="    workerpool.script: `"+b.script+"`\n",te+="    spawnArgs: `"+D.spawnargs+"`\n",te+="    spawnfile: `"+D.spawnfile+"`\n",te+="    stdout: `"+D.stdout+"`\n",te+="    stderr: `"+D.stderr+"`\n",I(new Error(te))}),this.processing=Object.create(null),this.terminating=!1,this.terminated=!1,this.terminationHandler=null,this.lastId=0}G.prototype.methods=function(){return this.exec("methods")},G.prototype.exec=function(x,C,b,k){b||(b=s.defer());var I=++this.lastId;this.processing[I]={id:I,resolver:b,options:k};var R={id:I,method:x,params:C};this.terminated?b.reject(new Error("Worker is terminated")):this.worker.ready?this.worker.send(R):this.requestQueue.push(R);var D=this;return b.promise.catch(function(L){if(L instanceof s.CancellationError||L instanceof s.TimeoutError)return delete D.processing[I],D.terminateAndNotify(!0).then(function(){throw L},function(H){throw H});throw L})},G.prototype.busy=function(){return Object.keys(this.processing).length>0},G.prototype.terminate=function(x,C){var b=this;if(x){for(var k in this.processing)this.processing[k]!==void 0&&this.processing[k].resolver.reject(new Error("Worker terminated"));this.processing=Object.create(null)}if(typeof C=="function"&&(this.terminationHandler=C),this.busy())this.terminating=!0;else{var I=function(L){if(b.terminated=!0,b.worker!=null&&b.worker.removeAllListeners&&b.worker.removeAllListeners("message"),b.worker=null,b.terminating=!1,b.terminationHandler)b.terminationHandler(L,b);else if(L)throw L};if(this.worker)if(typeof this.worker.kill=="function"){if(this.worker.killed){I(new Error("worker already killed!"));return}if(this.worker.isChildProcess){var R=setTimeout(function(){b.worker&&b.worker.kill()},d);this.worker.once("exit",function(){clearTimeout(R),b.worker&&(b.worker.killed=!0),I()}),this.worker.ready?this.worker.send(p):this.requestQueue.push(p)}else this.worker.kill(),this.worker.killed=!0,I();return}else if(typeof this.worker.terminate=="function")this.worker.terminate(),this.worker.killed=!0;else throw new Error("Failed to terminate worker");I()}},G.prototype.terminateAndNotify=function(x,C){var b=s.defer();return C&&(b.promise.timeout=C),this.terminate(x,function(k,I){k?b.reject(k):b.resolve(I)}),b.promise},e.exports=G,e.exports._tryRequireWorkerThreads=v,e.exports._setupProcessWorker=B,e.exports._setupBrowserWorker=T,e.exports._setupWorkerThreadWorker=M,e.exports.ensureWorkerThreads=h},393:function(e){"use strict";var t=65535;e.exports=r;function r(){this.ports=Object.create(null),this.length=0}r.prototype.nextAvailableStartingAt=function(n){for(;this.ports[n]===!0;)n++;if(n>=t)throw new Error("WorkerPool debug port limit reached: "+n+">= "+t);return this.ports[n]=!0,this.length++,n},r.prototype.releasePort=function(n){delete this.ports[n],this.length--}},722:function(e,t,r){var n=r(781),o=function(u){return typeof u<"u"&&u.versions!=null&&u.versions.node!=null};e.exports.isNode=o,e.exports.platform=typeof process<"u"&&o(process)?"node":"browser";var i=a("worker_threads");e.exports.isMainThread=e.exports.platform==="node"?(!i||i.isMainThread)&&!process.connected:typeof Window<"u",e.exports.cpus=e.exports.platform==="browser"?self.navigator.hardwareConcurrency:n("os").cpus().length;function a(s){try{return n(s)}catch{return null}}},710:function(e){e.exports=`!function(){var __webpack_exports__={};!function(){var exports=__webpack_exports__,__webpack_unused_export__;function _typeof(r){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}var requireFoolWebpack=eval("typeof require !== 'undefined' ? require : function (module) { throw new Error('Module \\" + module + \\" not found.') }"),TERMINATE_METHOD_ID="__workerpool-terminate__",worker={exit:function(){}},WorkerThreads,parentPort;if("undefined"!=typeof self&&"function"==typeof postMessage&&"function"==typeof addEventListener)worker.on=function(r,e){addEventListener(r,function(r){e(r.data)})},worker.send=function(r){postMessage(r)};else{if("undefined"==typeof process)throw new Error("Script must be executed as a worker");try{WorkerThreads=requireFoolWebpack("worker_threads")}catch(error){if("object"!==_typeof(error)||null===error||"MODULE_NOT_FOUND"!==error.code)throw error}WorkerThreads&&null!==WorkerThreads.parentPort?(parentPort=WorkerThreads.parentPort,worker.send=parentPort.postMessage.bind(parentPort),worker.on=parentPort.on.bind(parentPort)):(worker.on=process.on.bind(process),worker.send=process.send.bind(process),worker.on("disconnect",function(){process.exit(1)}),worker.exit=process.exit.bind(process))}function convertError(o){return Object.getOwnPropertyNames(o).reduce(function(r,e){return Object.defineProperty(r,e,{value:o[e],enumerable:!0})},{})}function isPromise(r){return r&&"function"==typeof r.then&&"function"==typeof r.catch}worker.methods={},worker.methods.run=function(r,e){r=new Function("return ("+r+").apply(null, arguments);");return r.apply(r,e)},worker.methods.methods=function(){return Object.keys(worker.methods)};var currentRequestId=null;worker.on("message",function(e){if(e===TERMINATE_METHOD_ID)return worker.exit(0);try{var r=worker.methods[e.method];if(!r)throw new Error('Unknown method "'+e.method+'"');currentRequestId=e.id;var o=r.apply(r,e.params);isPromise(o)?o.then(function(r){worker.send({id:e.id,result:r,error:null}),currentRequestId=null}).catch(function(r){worker.send({id:e.id,result:null,error:convertError(r)}),currentRequestId=null}):(worker.send({id:e.id,result:o,error:null}),currentRequestId=null)}catch(r){worker.send({id:e.id,result:null,error:convertError(r)})}}),worker.register=function(r){if(r)for(var e in r)r.hasOwnProperty(e)&&(worker.methods[e]=r[e]);worker.send("ready")},worker.emit=function(r){currentRequestId&&worker.send({id:currentRequestId,isEvent:!0,payload:r})},__webpack_unused_export__=worker.register,worker.emit}()}();`},781:function(module){var requireFoolWebpack=eval(`typeof require !== 'undefined' ? require : function (module) { throw new Error('Module " + module + " not found.') }`);module.exports=requireFoolWebpack},52:function(__unused_webpack_module,exports){function _typeof(e){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(e)}var requireFoolWebpack=eval(`typeof require !== 'undefined' ? require : function (module) { throw new Error('Module " + module + " not found.') }`),TERMINATE_METHOD_ID="__workerpool-terminate__",worker={exit:function e(){}};if(typeof self<"u"&&typeof postMessage=="function"&&typeof addEventListener=="function")worker.on=function(e,t){addEventListener(e,function(r){t(r.data)})},worker.send=function(e){postMessage(e)};else if(typeof process<"u"){var WorkerThreads;try{WorkerThreads=requireFoolWebpack("worker_threads")}catch(e){if(!(_typeof(e)==="object"&&e!==null&&e.code==="MODULE_NOT_FOUND"))throw e}if(WorkerThreads&&WorkerThreads.parentPort!==null){var parentPort=WorkerThreads.parentPort;worker.send=parentPort.postMessage.bind(parentPort),worker.on=parentPort.on.bind(parentPort)}else worker.on=process.on.bind(process),worker.send=process.send.bind(process),worker.on("disconnect",function(){process.exit(1)}),worker.exit=process.exit.bind(process)}else throw new Error("Script must be executed as a worker");function convertError(e){return Object.getOwnPropertyNames(e).reduce(function(t,r){return Object.defineProperty(t,r,{value:e[r],enumerable:!0})},{})}function isPromise(e){return e&&typeof e.then=="function"&&typeof e.catch=="function"}worker.methods={},worker.methods.run=function e(t,r){var n=new Function("return ("+t+").apply(null, arguments);");return n.apply(n,r)},worker.methods.methods=function e(){return Object.keys(worker.methods)};var currentRequestId=null;worker.on("message",function(e){if(e===TERMINATE_METHOD_ID)return worker.exit(0);try{var t=worker.methods[e.method];if(t){currentRequestId=e.id;var r=t.apply(t,e.params);isPromise(r)?r.then(function(n){worker.send({id:e.id,result:n,error:null}),currentRequestId=null}).catch(function(n){worker.send({id:e.id,result:null,error:convertError(n)}),currentRequestId=null}):(worker.send({id:e.id,result:r,error:null}),currentRequestId=null)}else throw new Error('Unknown method "'+e.method+'"')}catch(n){worker.send({id:e.id,result:null,error:convertError(n)})}}),worker.register=function(e){if(e)for(var t in e)e.hasOwnProperty(t)&&(worker.methods[t]=e[t]);worker.send("ready")},worker.emit=function(e){currentRequestId&&worker.send({id:currentRequestId,isEvent:!0,payload:e})},exports.add=worker.register,exports.emit=worker.emit}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(t!==void 0)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}(function(){__webpack_require__.d=function(e,t){for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}})(),function(){__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){__webpack_require__.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}();var __webpack_exports__={};return function(){var e=__webpack_exports__,t=__webpack_require__(722);e.pool=function(n,o){var i=__webpack_require__(799);return new i(n,o)},e.worker=function(n){var o=__webpack_require__(52);o.add(n)},e.workerEmit=function(n){var o=__webpack_require__(52);o.emit(n)},e.Promise=__webpack_require__(446),e.platform=t.platform,e.isMainThread=t.isMainThread,e.cpus=t.cpus}(),__webpack_exports__}()})});var Y0=g((aJ,Z0)=>{"use strict";var v5=["h","min","s","ms","\u03BCs","ns"],b5=["hour","minute","second","millisecond","microsecond","nanosecond"],J0=[3600,60,1,1e6,1e3,1];Z0.exports=function(e,t){var r,n,o,i,a,s,u,l,c,f;if(r=!1,n=!1,t&&(r=t.verbose||!1,n=t.precise||!1),!Array.isArray(e)||e.length!==2||typeof e[0]!="number"||typeof e[1]!="number")return"";for(e[1]<0&&(f=e[0]+e[1]/1e9,e[0]=parseInt(f),e[1]=parseFloat((f%1).toPrecision(9))*1e9),c="",o=0;o<6&&(i=o<3?0:1,a=e[i],o!==3&&o!==0&&(a=a%J0[o-1]),o===2&&(a+=e[1]/1e9),s=a/J0[o],!(s>=1&&(r&&(s=Math.floor(s)),n?l=s.toString():(u=s>=10?0:2,l=s.toFixed(u)),l.indexOf(".")>-1&&l[l.length-1]==="0"&&(l=l.replace(/\.?0+$/,"")),c&&(c+=" "),c+=l,r?(c+=" "+b5[o],l!=="1"&&(c+="s")):c+=" "+v5[o],!r)));o++);return c}});function hr(e,t){for(var r in t)e[r]=t[r];return e}function sx(e){var t=e.parentNode;t&&t.removeChild(e)}function Y(e,t,r){var n,o,i,a={};for(i in t)i=="key"?n=t[i]:i=="ref"?o=t[i]:a[i]=t[i];if(arguments.length>2&&(a.children=arguments.length>3?$i.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)a[i]===void 0&&(a[i]=e.defaultProps[i]);return Mi(e,a,n,o,null)}function Mi(e,t,r,n,o){var i={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:o??++ox};return o==null&&V.vnode!=null&&V.vnode(i),i}function ou(){return{current:null}}function z(e){return e.children}function gt(e,t){this.props=e,this.context=t}function qi(e,t){if(t==null)return e.__?qi(e.__,e.__.__k.indexOf(e)+1):null;for(var r;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?qi(e):null}function ux(e){var t,r;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null){e.__e=e.__c.base=r.__e;break}return ux(e)}}function dp(e){(!e.__d&&(e.__d=!0)&&Ri.push(e)&&!ru.__r++||ex!==V.debounceRendering)&&((ex=V.debounceRendering)||setTimeout)(ru)}function ru(){for(var e;ru.__r=Ri.length;)e=Ri.sort(function(t,r){return t.__v.__b-r.__v.__b}),Ri=[],e.some(function(t){var r,n,o,i,a,s;t.__d&&(a=(i=(r=t).__v).__e,(s=r.__P)&&(n=[],(o=hr({},i)).__v=i.__v+1,mp(s,i,o,r.__n,s.ownerSVGElement!==void 0,i.__h!=null?[a]:null,n,a??qi(i),i.__h),px(n,i),i.__e!=a&&ux(i)))})}function cx(e,t,r,n,o,i,a,s,u,l){var c,f,p,d,h,y,v,w=n&&n.__k||ax,S=w.length;for(r.__k=[],c=0;c<t.length;c++)if((d=r.__k[c]=(d=t[c])==null||typeof d=="boolean"?null:typeof d=="string"||typeof d=="number"||typeof d=="bigint"?Mi(null,d,null,null,d):Array.isArray(d)?Mi(z,{children:d},null,null,null):d.__b>0?Mi(d.type,d.props,d.key,d.ref?d.ref:null,d.__v):d)!=null){if(d.__=r,d.__b=r.__b+1,(p=w[c])===null||p&&d.key==p.key&&d.type===p.type)w[c]=void 0;else for(f=0;f<S;f++){if((p=w[f])&&d.key==p.key&&d.type===p.type){w[f]=void 0;break}p=null}mp(e,d,p=p||tu,o,i,a,s,u,l),h=d.__e,(f=d.ref)&&p.ref!=f&&(v||(v=[]),p.ref&&v.push(p.ref,null,d),v.push(f,d.__c||h,d)),h!=null?(y==null&&(y=h),typeof d.type=="function"&&d.__k===p.__k?d.__d=u=lx(d,u,e):u=fx(e,d,p,w,h,u),typeof r.type=="function"&&(r.__d=u)):u&&p.__e==u&&u.parentNode!=e&&(u=qi(p))}for(r.__e=y,c=S;c--;)w[c]!=null&&mx(w[c],w[c]);if(v)for(c=0;c<v.length;c++)dx(v[c],v[++c],v[++c])}function lx(e,t,r){for(var n,o=e.__k,i=0;o&&i<o.length;i++)(n=o[i])&&(n.__=e,t=typeof n.type=="function"?lx(n,t,r):fx(r,n,n,o,n.__e,t));return t}function or(e,t){return t=t||[],e==null||typeof e=="boolean"||(Array.isArray(e)?e.some(function(r){or(r,t)}):t.push(e)),t}function fx(e,t,r,n,o,i){var a,s,u;if(t.__d!==void 0)a=t.__d,t.__d=void 0;else if(r==null||o!=i||o.parentNode==null)e:if(i==null||i.parentNode!==e)e.appendChild(o),a=null;else{for(s=i,u=0;(s=s.nextSibling)&&u<n.length;u+=1)if(s==o)break e;e.insertBefore(o,i),a=i}return a!==void 0?a:o.nextSibling}function I5(e,t,r,n,o){var i;for(i in r)i==="children"||i==="key"||i in t||nu(e,i,null,r[i],n);for(i in t)o&&typeof t[i]!="function"||i==="children"||i==="key"||i==="value"||i==="checked"||r[i]===t[i]||nu(e,i,t[i],r[i],n)}function tx(e,t,r){t[0]==="-"?e.setProperty(t,r):e[t]=r==null?"":typeof r!="number"||_5.test(t)?r:r+"px"}function nu(e,t,r,n,o){var i;e:if(t==="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof n=="string"&&(e.style.cssText=n=""),n)for(t in n)r&&t in r||tx(e.style,t,"");if(r)for(t in r)n&&r[t]===n[t]||tx(e.style,t,r[t])}else if(t[0]==="o"&&t[1]==="n")i=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=r,r?n||e.addEventListener(t,i?nx:rx,i):e.removeEventListener(t,i?nx:rx,i);else if(t!=="dangerouslySetInnerHTML"){if(o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t in e)try{e[t]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&t.indexOf("-")==-1?e.removeAttribute(t):e.setAttribute(t,r))}}function rx(e){this.l[e.type+!1](V.event?V.event(e):e)}function nx(e){this.l[e.type+!0](V.event?V.event(e):e)}function mp(e,t,r,n,o,i,a,s,u){var l,c,f,p,d,h,y,v,w,S,T,M,B,Q,X,G=t.type;if(t.constructor!==void 0)return null;r.__h!=null&&(u=r.__h,s=t.__e=r.__e,t.__h=null,i=[s]),(l=V.__b)&&l(t);try{e:if(typeof G=="function"){if(v=t.props,w=(l=G.contextType)&&n[l.__c],S=l?w?w.props.value:l.__:n,r.__c?y=(c=t.__c=r.__c).__=c.__E:("prototype"in G&&G.prototype.render?t.__c=c=new G(v,S):(t.__c=c=new gt(v,S),c.constructor=G,c.render=C5),w&&w.sub(c),c.props=v,c.state||(c.state={}),c.context=S,c.__n=n,f=c.__d=!0,c.__h=[],c._sb=[]),c.__s==null&&(c.__s=c.state),G.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=hr({},c.__s)),hr(c.__s,G.getDerivedStateFromProps(v,c.__s))),p=c.props,d=c.state,f)G.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if(G.getDerivedStateFromProps==null&&v!==p&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(v,S),!c.__e&&c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(v,c.__s,S)===!1||t.__v===r.__v){for(c.props=v,c.state=c.__s,t.__v!==r.__v&&(c.__d=!1),c.__v=t,t.__e=r.__e,t.__k=r.__k,t.__k.forEach(function(x){x&&(x.__=t)}),T=0;T<c._sb.length;T++)c.__h.push(c._sb[T]);c._sb=[],c.__h.length&&a.push(c);break e}c.componentWillUpdate!=null&&c.componentWillUpdate(v,c.__s,S),c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(p,d,h)})}if(c.context=S,c.props=v,c.__v=t,c.__P=e,M=V.__r,B=0,"prototype"in G&&G.prototype.render){for(c.state=c.__s,c.__d=!1,M&&M(t),l=c.render(c.props,c.state,c.context),Q=0;Q<c._sb.length;Q++)c.__h.push(c._sb[Q]);c._sb=[]}else do c.__d=!1,M&&M(t),l=c.render(c.props,c.state,c.context),c.state=c.__s;while(c.__d&&++B<25);c.state=c.__s,c.getChildContext!=null&&(n=hr(hr({},n),c.getChildContext())),f||c.getSnapshotBeforeUpdate==null||(h=c.getSnapshotBeforeUpdate(p,d)),X=l!=null&&l.type===z&&l.key==null?l.props.children:l,cx(e,Array.isArray(X)?X:[X],t,r,n,o,i,a,s,u),c.base=t.__e,t.__h=null,c.__h.length&&a.push(c),y&&(c.__E=c.__=null),c.__e=!1}else i==null&&t.__v===r.__v?(t.__k=r.__k,t.__e=r.__e):t.__e=A5(r.__e,t,r,n,o,i,a,u);(l=V.diffed)&&l(t)}catch(x){t.__v=null,(u||i!=null)&&(t.__e=s,t.__h=!!u,i[i.indexOf(s)]=null),V.__e(x,t,r)}}function px(e,t){V.__c&&V.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(n){n.call(r)})}catch(n){V.__e(n,r.__v)}})}function A5(e,t,r,n,o,i,a,s){var u,l,c,f=r.props,p=t.props,d=t.type,h=0;if(d==="svg"&&(o=!0),i!=null){for(;h<i.length;h++)if((u=i[h])&&"setAttribute"in u==!!d&&(d?u.localName===d:u.nodeType===3)){e=u,i[h]=null;break}}if(e==null){if(d===null)return document.createTextNode(p);e=o?document.createElementNS("http://www.w3.org/2000/svg",d):document.createElement(d,p.is&&p),i=null,s=!1}if(d===null)f===p||s&&e.data===p||(e.data=p);else{if(i=i&&$i.call(e.childNodes),l=(f=r.props||tu).dangerouslySetInnerHTML,c=p.dangerouslySetInnerHTML,!s){if(i!=null)for(f={},h=0;h<e.attributes.length;h++)f[e.attributes[h].name]=e.attributes[h].value;(c||l)&&(c&&(l&&c.__html==l.__html||c.__html===e.innerHTML)||(e.innerHTML=c&&c.__html||""))}if(I5(e,p,f,o,s),c)t.__k=[];else if(h=t.props.children,cx(e,Array.isArray(h)?h:[h],t,r,n,o&&d!=="foreignObject",i,a,i?i[0]:r.__k&&qi(r,0),s),i!=null)for(h=i.length;h--;)i[h]!=null&&sx(i[h]);s||("value"in p&&(h=p.value)!==void 0&&(h!==e.value||d==="progress"&&!h||d==="option"&&h!==f.value)&&nu(e,"value",h,f.value,!1),"checked"in p&&(h=p.checked)!==void 0&&h!==e.checked&&nu(e,"checked",h,f.checked,!1))}return e}function dx(e,t,r){try{typeof e=="function"?e(t):e.current=t}catch(n){V.__e(n,r)}}function mx(e,t,r){var n,o;if(V.unmount&&V.unmount(e),(n=e.ref)&&(n.current&&n.current!==e.__e||dx(n,null,t)),(n=e.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(i){V.__e(i,t)}n.base=n.__P=null,e.__c=void 0}if(n=e.__k)for(o=0;o<n.length;o++)n[o]&&mx(n[o],t,r||typeof e.type!="function");r||e.__e==null||sx(e.__e),e.__=e.__e=e.__d=void 0}function C5(e,t,r){return this.constructor(e,r)}function po(e,t,r){var n,o,i;V.__&&V.__(e,t),o=(n=typeof r=="function")?null:r&&r.__k||t.__k,i=[],mp(t,e=(!n&&r||t).__k=Y(z,null,[e]),o||tu,tu,t.ownerSVGElement!==void 0,!n&&r?[r]:o?null:t.firstChild?$i.call(t.childNodes):null,i,!n&&r?r:o?o.__e:t.firstChild,n),px(i,e)}function hp(e,t){po(e,t,hp)}function hx(e,t,r){var n,o,i,a=hr({},e.props);for(i in t)i=="key"?n=t[i]:i=="ref"?o=t[i]:a[i]=t[i];return arguments.length>2&&(a.children=arguments.length>3?$i.call(arguments,2):r),Mi(e.type,a,n||e.key,o||e.ref,null)}function Oe(e,t){var r={__c:t="__cC"+ix++,__:e,Consumer:function(n,o){return n.children(o)},Provider:function(n){var o,i;return this.getChildContext||(o=[],(i={})[t]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(a){this.props.value!==a.value&&o.some(dp)},this.sub=function(a){o.push(a);var s=a.componentWillUnmount;a.componentWillUnmount=function(){o.splice(o.indexOf(a),1),s&&s.call(a)}}),n.children}};return r.Provider.__=r.Consumer.contextType=r}var $i,V,ox,k5,Ri,ex,ix,tu,ax,_5,mo=fs(()=>{tu={},ax=[],_5=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;$i=ax.slice,V={__e:function(e,t,r,n){for(var o,i,a;t=t.__;)if((o=t.__c)&&!o.__)try{if((i=o.constructor)&&i.getDerivedStateFromError!=null&&(o.setState(i.getDerivedStateFromError(e)),a=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,n||{}),a=o.__d),a)return o.__E=o}catch(s){e=s}throw e}},ox=0,k5=function(e){return e!=null&&e.constructor===void 0},gt.prototype.setState=function(e,t){var r;r=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=hr({},this.state),typeof e=="function"&&(e=e(hr({},r),this.props)),e&&hr(r,e),e!=null&&this.__v&&(t&&this._sb.push(t),dp(this))},gt.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),dp(this))},gt.prototype.render=z,Ri=[],ru.__r=0,ix=0});function yn(e,t){V.__h&&V.__h(ye,e,ho||t),ho=0;var r=ye.__H||(ye.__H={__:[],__h:[]});return e>=r.__.length&&r.__.push({__V:iu}),r.__[e]}function q(e){return ho=1,ir(kx,e)}function ir(e,t,r){var n=yn(Mr++,2);if(n.t=e,!n.__c&&(n.__=[r?r(t):kx(void 0,t),function(i){var a=n.__N?n.__N[0]:n.__[0],s=n.t(a,i);a!==s&&(n.__N=[s,n.__[1]],n.__c.setState({}))}],n.__c=ye,!ye.u)){ye.u=!0;var o=ye.shouldComponentUpdate;ye.shouldComponentUpdate=function(i,a,s){if(!n.__c.__H)return!0;var u=n.__c.__H.__.filter(function(c){return c.__c});if(u.every(function(c){return!c.__N}))return!o||o.call(this,i,a,s);var l=!1;return u.forEach(function(c){if(c.__N){var f=c.__[0];c.__=c.__N,c.__N=void 0,f!==c.__[0]&&(l=!0)}}),!(!l&&n.__c.props===i)&&(!o||o.call(this,i,a,s))}}return n.__N||n.__}function J(e,t){var r=yn(Mr++,3);!V.__s&&wp(r.__H,t)&&(r.__=e,r.i=t,ye.__H.__h.push(r))}function it(e,t){var r=yn(Mr++,4);!V.__s&&wp(r.__H,t)&&(r.__=e,r.i=t,ye.__h.push(r))}function W(e){return ho=5,ie(function(){return{current:e}},[])}function vp(e,t,r){ho=6,it(function(){return typeof e=="function"?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},r==null?r:r.concat(e))}function ie(e,t){var r=yn(Mr++,7);return wp(r.__H,t)?(r.__V=e(),r.i=t,r.__h=e,r.__V):r.__}function ee(e,t){return ho=8,ie(function(){return e},t)}function j(e){var t=ye.context[e.__c],r=yn(Mr++,9);return r.c=e,t?(r.__==null&&(r.__=!0,t.sub(ye)),t.props.value):e.__}function vn(e,t){V.useDebugValue&&V.useDebugValue(t?t(e):e)}function T5(e){var t=yn(Mr++,10),r=q();return t.__=e,ye.componentDidCatch||(ye.componentDidCatch=function(n,o){t.__&&t.__(n,o),r[1](n)}),[r[0],function(){r[1](void 0)}]}function bp(){var e=yn(Mr++,11);if(!e.__){for(var t=ye.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var r=t.__m||(t.__m=[0,0]);e.__="P"+r[0]+"-"+r[1]++}return e.__}function O5(){for(var e;e=Sx.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(au),e.__H.__h.forEach(yp),e.__H.__h=[]}catch(t){e.__H.__h=[],V.__e(t,e.__v)}}function D5(e){var t,r=function(){clearTimeout(n),Ex&&cancelAnimationFrame(t),setTimeout(e)},n=setTimeout(r,100);Ex&&(t=requestAnimationFrame(r))}function au(e){var t=ye,r=e.__c;typeof r=="function"&&(e.__c=void 0,r()),ye=t}function yp(e){var t=ye;e.__c=e.__(),ye=t}function wp(e,t){return!e||e.length!==t.length||t.some(function(r,n){return r!==e[n]})}function kx(e,t){return typeof t=="function"?t(e):t}var Mr,ye,gp,gx,ho,Sx,iu,yx,vx,bx,wx,xx,Ex,xp=fs(()=>{mo();ho=0,Sx=[],iu=[],yx=V.__b,vx=V.__r,bx=V.diffed,wx=V.__c,xx=V.unmount;V.__b=function(e){ye=null,yx&&yx(e)},V.__r=function(e){vx&&vx(e),Mr=0;var t=(ye=e.__c).__H;t&&(gp===ye?(t.__h=[],ye.__h=[],t.__.forEach(function(r){r.__N&&(r.__=r.__N),r.__V=iu,r.__N=r.i=void 0})):(t.__h.forEach(au),t.__h.forEach(yp),t.__h=[])),gp=ye},V.diffed=function(e){bx&&bx(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Sx.push(t)!==1&&gx===V.requestAnimationFrame||((gx=V.requestAnimationFrame)||D5)(O5)),t.__H.__.forEach(function(r){r.i&&(r.__H=r.i),r.__V!==iu&&(r.__=r.__V),r.i=void 0,r.__V=iu})),gp=ye=null},V.__c=function(e,t){t.some(function(r){try{r.__h.forEach(au),r.__h=r.__h.filter(function(n){return!n.__||yp(n)})}catch(n){t.some(function(o){o.__h&&(o.__h=[])}),t=[],V.__e(n,r.__v)}}),wx&&wx(e,t)},V.unmount=function(e){xx&&xx(e);var t,r=e.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{au(n)}catch(o){t=o}}),r.__H=void 0,t&&V.__e(t,r.__v))};Ex=typeof requestAnimationFrame=="function"});function Px(e,t){for(var r in t)e[r]=t[r];return e}function Sp(e,t){for(var r in e)if(r!=="__source"&&!(r in t))return!0;for(var n in t)if(n!=="__source"&&e[n]!==t[n])return!0;return!1}function Ep(e,t){return e===t&&(e!==0||1/e==1/t)||e!=e&&t!=t}function su(e){this.props=e}function He(e,t){function r(o){var i=this.props.ref,a=i==o.ref;return!a&&i&&(i.call?i(null):i.current=null),t?!t(this.props,o)||!a:Sp(this.props,o)}function n(o){return this.shouldComponentUpdate=r,Y(e,o)}return n.displayName="Memo("+(e.displayName||e.name)+")",n.prototype.isReactComponent=!0,n.__f=!0,n}function re(e){function t(r){var n=Px({},r);return delete n.ref,e(n,r.ref||null)}return t.$$typeof=F5,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}function Nx(e,t,r){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(n){typeof n.__c=="function"&&n.__c()}),e.__c.__H=null),(e=Px({},e)).__c!=null&&(e.__c.__P===r&&(e.__c.__P=t),e.__c=null),e.__k=e.__k&&e.__k.map(function(n){return Nx(n,t,r)})),e}function Rx(e,t,r){return e&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(n){return Rx(n,t,r)}),e.__c&&e.__c.__P===t&&(e.__e&&r.insertBefore(e.__e,e.__d),e.__c.__e=!0,e.__c.__P=r)),e}function Li(){this.__u=0,this.t=null,this.__b=null}function Mx(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function qx(e){var t,r,n;function o(i){if(t||(t=e()).then(function(a){r=a.default||a},function(a){n=a}),n)throw n;if(!r)throw t;return Y(r,i)}return o.displayName="Lazy",o.__f=!0,o}function go(){this.u=null,this.o=null}function N5(e){return this.getChildContext=function(){return e.context},e.children}function R5(e){var t=this,r=e.i;t.componentWillUnmount=function(){po(null,t.l),t.l=null,t.i=null},t.i&&t.i!==r&&t.componentWillUnmount(),e.__v?(t.l||(t.i=r,t.l={nodeType:1,parentNode:r,childNodes:[],appendChild:function(n){this.childNodes.push(n),t.i.appendChild(n)},insertBefore:function(n,o){this.childNodes.push(n),t.i.appendChild(n)},removeChild:function(n){this.childNodes.splice(this.childNodes.indexOf(n)>>>1,1),t.i.removeChild(n)}}),po(Y(N5,{context:t.context},e.__v),t.l)):t.l&&t.componentWillUnmount()}function $x(e,t){var r=Y(R5,{__v:e,i:t});return r.containerInfo=t,r}function jx(e,t,r){return t.__k==null&&(t.textContent=""),po(e,t),typeof r=="function"&&r(),e?e.__c:null}function Bx(e,t,r){return hp(e,t),typeof r=="function"&&r(),e?e.__c:null}function L5(){}function j5(){return this.cancelBubble}function B5(){return this.defaultPrevented}function Ux(e){return Y.bind(null,e)}function yt(e){return!!e&&e.$$typeof===Lx}function Ot(e){return yt(e)?hx.apply(null,arguments):e}function Hx(e){return!!e.__k&&(po(null,e),!0)}function Vx(e){return e&&(e.base||e.nodeType===1&&e)||null}function kp(e){e()}function Jx(e){return e}function Zx(){return[!1,kp]}function Qx(e,t){var r=t(),n=q({h:{__:r,v:t}}),o=n[0].h,i=n[1];return it(function(){o.__=r,o.v=t,Ep(o.__,t())||i({h:o})},[e,r,t]),J(function(){return Ep(o.__,o.v())||i({h:o}),e(function(){Ep(o.__,o.v())||i({h:o})})},[e]),r}var _x,F5,Ix,Me,P5,Ax,Cx,Lx,M5,q5,$5,Tx,zx,Ox,Dx,Fx,Wx,z5,Gx,ar,Kx,Yx,$,_p=fs(()=>{mo();mo();xp();xp();(su.prototype=new gt).isPureReactComponent=!0,su.prototype.shouldComponentUpdate=function(e,t){return Sp(this.props,e)||Sp(this.state,t)};_x=V.__b;V.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),_x&&_x(e)};F5=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;Ix=function(e,t){return e==null?null:or(or(e).map(t))},Me={map:Ix,forEach:Ix,count:function(e){return e?or(e).length:0},only:function(e){var t=or(e);if(t.length!==1)throw"Children.only";return t[0]},toArray:or},P5=V.__e;V.__e=function(e,t,r,n){if(e.then){for(var o,i=t;i=i.__;)if((o=i.__c)&&o.__c)return t.__e==null&&(t.__e=r.__e,t.__k=r.__k),o.__c(e,t)}P5(e,t,r,n)};Ax=V.unmount;V.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&e.__h===!0&&(e.type=null),Ax&&Ax(e)},(Li.prototype=new gt).__c=function(e,t){var r=t.__c,n=this;n.t==null&&(n.t=[]),n.t.push(r);var o=Mx(n.__v),i=!1,a=function(){i||(i=!0,r.__R=null,o?o(s):s())};r.__R=a;var s=function(){if(!--n.__u){if(n.state.__a){var l=n.state.__a;n.__v.__k[0]=Rx(l,l.__c.__P,l.__c.__O)}var c;for(n.setState({__a:n.__b=null});c=n.t.pop();)c.forceUpdate()}},u=t.__h===!0;n.__u++||u||n.setState({__a:n.__b=n.__v.__k[0]}),e.then(a,a)},Li.prototype.componentWillUnmount=function(){this.t=[]},Li.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var r=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=Nx(this.__b,r,n.__O=n.__P)}this.__b=null}var o=t.__a&&Y(z,null,e.fallback);return o&&(o.__h=null),[Y(z,null,t.__a?null:e.children),o]};Cx=function(e,t,r){if(++r[1]===r[0]&&e.o.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.o.size))for(r=e.u;r;){for(;r.length>3;)r.pop()();if(r[1]<r[0])break;e.u=r=r[2]}};(go.prototype=new gt).__a=function(e){var t=this,r=Mx(t.__v),n=t.o.get(e);return n[0]++,function(o){var i=function(){t.props.revealOrder?(n.push(o),Cx(t,e,n)):o()};r?r(i):i()}},go.prototype.render=function(e){this.u=null,this.o=new Map;var t=or(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var r=t.length;r--;)this.o.set(t[r],this.u=[1,0,this.u]);return e.children},go.prototype.componentDidUpdate=go.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(t,r){Cx(e,r,t)})};Lx=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,M5=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,q5=typeof document<"u",$5=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(e)};gt.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(gt.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});Tx=V.event;V.event=function(e){return Tx&&(e=Tx(e)),e.persist=L5,e.isPropagationStopped=j5,e.isDefaultPrevented=B5,e.nativeEvent=e};Ox={configurable:!0,get:function(){return this.class}},Dx=V.vnode;V.vnode=function(e){var t=e.type,r=e.props,n=r;if(typeof t=="string"){var o=t.indexOf("-")===-1;for(var i in n={},r){var a=r[i];q5&&i==="children"&&t==="noscript"||i==="value"&&"defaultValue"in r&&a==null||(i==="defaultValue"&&"value"in r&&r.value==null?i="value":i==="download"&&a===!0?a="":/ondoubleclick/i.test(i)?i="ondblclick":/^onchange(textarea|input)/i.test(i+t)&&!$5(r.type)?i="oninput":/^onfocus$/i.test(i)?i="onfocusin":/^onblur$/i.test(i)?i="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(i)?i=i.toLowerCase():o&&M5.test(i)?i=i.replace(/[A-Z0-9]/g,"-$&").toLowerCase():a===null&&(a=void 0),/^oninput$/i.test(i)&&(i=i.toLowerCase(),n[i]&&(i="oninputCapture")),n[i]=a)}t=="select"&&n.multiple&&Array.isArray(n.value)&&(n.value=or(r.children).forEach(function(s){s.props.selected=n.value.indexOf(s.props.value)!=-1})),t=="select"&&n.defaultValue!=null&&(n.value=or(r.children).forEach(function(s){s.props.selected=n.multiple?n.defaultValue.indexOf(s.props.value)!=-1:n.defaultValue==s.props.value})),e.props=n,r.class!=r.className&&(Ox.enumerable="className"in r,r.className!=null&&(n.class=r.className),Object.defineProperty(n,"className",Ox))}e.$$typeof=Lx,Dx&&Dx(e)};Fx=V.__r;V.__r=function(e){Fx&&Fx(e),zx=e.__c};Wx={ReactCurrentDispatcher:{current:{readContext:function(e){return zx.__n[e.__c].props.value}}}},z5="17.0.2";Gx=function(e,t){return e(t)},ar=function(e,t){return e(t)},Kx=z;Yx=it;$={useState:q,useId:bp,useReducer:ir,useEffect:J,useLayoutEffect:it,useInsertionEffect:Yx,useTransition:Zx,useDeferredValue:Jx,useSyncExternalStore:Qx,startTransition:kp,useRef:W,useImperativeHandle:vp,useMemo:ie,useCallback:ee,useContext:j,useDebugValue:vn,version:"17.0.2",Children:Me,render:jx,hydrate:Bx,unmountComponentAtNode:Hx,createPortal:$x,createElement:Y,createContext:Oe,createFactory:Ux,cloneElement:Ot,createRef:ou,Fragment:z,isValidElement:yt,findDOMNode:Vx,Component:gt,PureComponent:su,memo:He,forwardRef:re,flushSync:ar,unstable_batchedUpdates:Gx,StrictMode:Kx,Suspense:Li,SuspenseList:go,lazy:qx,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Wx}});var Bt={};cg(Bt,{Children:()=>Me,Component:()=>gt,Fragment:()=>z,PureComponent:()=>su,StrictMode:()=>Kx,Suspense:()=>Li,SuspenseList:()=>go,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:()=>Wx,cloneElement:()=>Ot,createContext:()=>Oe,createElement:()=>Y,createFactory:()=>Ux,createPortal:()=>$x,createRef:()=>ou,default:()=>$,findDOMNode:()=>Vx,flushSync:()=>ar,forwardRef:()=>re,hydrate:()=>Bx,isValidElement:()=>yt,lazy:()=>qx,memo:()=>He,render:()=>jx,startTransition:()=>kp,unmountComponentAtNode:()=>Hx,unstable_batchedUpdates:()=>Gx,useCallback:()=>ee,useContext:()=>j,useDebugValue:()=>vn,useDeferredValue:()=>Jx,useEffect:()=>J,useErrorBoundary:()=>T5,useId:()=>bp,useImperativeHandle:()=>vp,useInsertionEffect:()=>Yx,useLayoutEffect:()=>it,useMemo:()=>ie,useReducer:()=>ir,useRef:()=>W,useState:()=>q,useSyncExternalStore:()=>Qx,useTransition:()=>Zx,version:()=>z5});var A=fs(()=>{_p();_p()});var H1=g((Ere,U1)=>{"use strict";U1.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`)});var Z1=g((Sre,J1)=>{"use strict";var K1="%[a-f0-9]{2}",V1=new RegExp("("+K1+")|([^%]+?)","gi"),G1=new RegExp("("+K1+")+","gi");function zp(e,t){try{return[decodeURIComponent(e.join(""))]}catch{}if(e.length===1)return e;t=t||1;var r=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],zp(r),zp(n))}function _M(e){try{return decodeURIComponent(e)}catch{for(var t=e.match(V1)||[],r=1;r<t.length;r++)e=zp(t,r).join(""),t=e.match(V1)||[];return e}}function IM(e){for(var t={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},r=G1.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch{var n=_M(r[0]);n!==r[0]&&(t[r[0]]=n)}r=G1.exec(e)}t["%C2"]="\uFFFD";for(var o=Object.keys(t),i=0;i<o.length;i++){var a=o[i];e=e.replace(new RegExp(a,"g"),t[a])}return e}J1.exports=function(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch{return IM(e)}}});var Q1=g((kre,Y1)=>{"use strict";Y1.exports=(e,t)=>{if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t==="")return[e];let r=e.indexOf(t);return r===-1?[e]:[e.slice(0,r),e.slice(r+t.length)]}});var e2=g((_re,X1)=>{"use strict";X1.exports=function(e,t){for(var r={},n=Object.keys(e),o=Array.isArray(t),i=0;i<n.length;i++){var a=n[i],s=e[a];(o?t.indexOf(a)!==-1:t(a,s,e))&&(r[a]=s)}return r}});var Up=g(ut=>{"use strict";var AM=H1(),CM=Z1(),r2=Q1(),TM=e2(),OM=e=>e==null,Wp=Symbol("encodeFragmentIdentifier");function DM(e){switch(e.arrayFormat){case"index":return t=>(r,n)=>{let o=r.length;return n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,[_e(t,e),"[",o,"]"].join("")]:[...r,[_e(t,e),"[",_e(o,e),"]=",_e(n,e)].join("")]};case"bracket":return t=>(r,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,[_e(t,e),"[]"].join("")]:[...r,[_e(t,e),"[]=",_e(n,e)].join("")];case"colon-list-separator":return t=>(r,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,[_e(t,e),":list="].join("")]:[...r,[_e(t,e),":list=",_e(n,e)].join("")];case"comma":case"separator":case"bracket-separator":{let t=e.arrayFormat==="bracket-separator"?"[]=":"=";return r=>(n,o)=>o===void 0||e.skipNull&&o===null||e.skipEmptyString&&o===""?n:(o=o===null?"":o,n.length===0?[[_e(r,e),t,_e(o,e)].join("")]:[[n,_e(o,e)].join(e.arrayFormatSeparator)])}default:return t=>(r,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,_e(t,e)]:[...r,[_e(t,e),"=",_e(n,e)].join("")]}}function FM(e){let t;switch(e.arrayFormat){case"index":return(r,n,o)=>{if(t=/\[(\d*)\]$/.exec(r),r=r.replace(/\[\d*\]$/,""),!t){o[r]=n;return}o[r]===void 0&&(o[r]={}),o[r][t[1]]=n};case"bracket":return(r,n,o)=>{if(t=/(\[\])$/.exec(r),r=r.replace(/\[\]$/,""),!t){o[r]=n;return}if(o[r]===void 0){o[r]=[n];return}o[r]=[].concat(o[r],n)};case"colon-list-separator":return(r,n,o)=>{if(t=/(:list)$/.exec(r),r=r.replace(/:list$/,""),!t){o[r]=n;return}if(o[r]===void 0){o[r]=[n];return}o[r]=[].concat(o[r],n)};case"comma":case"separator":return(r,n,o)=>{let i=typeof n=="string"&&n.includes(e.arrayFormatSeparator),a=typeof n=="string"&&!i&&br(n,e).includes(e.arrayFormatSeparator);n=a?br(n,e):n;let s=i||a?n.split(e.arrayFormatSeparator).map(u=>br(u,e)):n===null?n:br(n,e);o[r]=s};case"bracket-separator":return(r,n,o)=>{let i=/(\[\])$/.test(r);if(r=r.replace(/\[\]$/,""),!i){o[r]=n&&br(n,e);return}let a=n===null?[]:n.split(e.arrayFormatSeparator).map(s=>br(s,e));if(o[r]===void 0){o[r]=a;return}o[r]=[].concat(o[r],a)};default:return(r,n,o)=>{if(o[r]===void 0){o[r]=n;return}o[r]=[].concat(o[r],n)}}}function n2(e){if(typeof e!="string"||e.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function _e(e,t){return t.encode?t.strict?AM(e):encodeURIComponent(e):e}function br(e,t){return t.decode?CM(e):e}function o2(e){return Array.isArray(e)?e.sort():typeof e=="object"?o2(Object.keys(e)).sort((t,r)=>Number(t)-Number(r)).map(t=>e[t]):e}function i2(e){let t=e.indexOf("#");return t!==-1&&(e=e.slice(0,t)),e}function PM(e){let t="",r=e.indexOf("#");return r!==-1&&(t=e.slice(r)),t}function a2(e){e=i2(e);let t=e.indexOf("?");return t===-1?"":e.slice(t+1)}function t2(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&typeof e=="string"&&e.trim()!==""?e=Number(e):t.parseBooleans&&e!==null&&(e.toLowerCase()==="true"||e.toLowerCase()==="false")&&(e=e.toLowerCase()==="true"),e}function s2(e,t){t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t),n2(t.arrayFormatSeparator);let r=FM(t),n=Object.create(null);if(typeof e!="string"||(e=e.trim().replace(/^[?#&]/,""),!e))return n;for(let o of e.split("&")){if(o==="")continue;let[i,a]=r2(t.decode?o.replace(/\+/g," "):o,"=");a=a===void 0?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?a:br(a,t),r(br(i,t),a,n)}for(let o of Object.keys(n)){let i=n[o];if(typeof i=="object"&&i!==null)for(let a of Object.keys(i))i[a]=t2(i[a],t);else n[o]=t2(i,t)}return t.sort===!1?n:(t.sort===!0?Object.keys(n).sort():Object.keys(n).sort(t.sort)).reduce((o,i)=>{let a=n[i];return a&&typeof a=="object"&&!Array.isArray(a)?o[i]=o2(a):o[i]=a,o},Object.create(null))}ut.extract=a2;ut.parse=s2;ut.stringify=(e,t)=>{if(!e)return"";t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t),n2(t.arrayFormatSeparator);let r=a=>t.skipNull&&OM(e[a])||t.skipEmptyString&&e[a]==="",n=DM(t),o={};for(let a of Object.keys(e))r(a)||(o[a]=e[a]);let i=Object.keys(o);return t.sort!==!1&&i.sort(t.sort),i.map(a=>{let s=e[a];return s===void 0?"":s===null?_e(a,t):Array.isArray(s)?s.length===0&&t.arrayFormat==="bracket-separator"?_e(a,t)+"[]":s.reduce(n(a),[]).join("&"):_e(a,t)+"="+_e(s,t)}).filter(a=>a.length>0).join("&")};ut.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);let[r,n]=r2(e,"#");return Object.assign({url:r.split("?")[0]||"",query:s2(a2(e),t)},t&&t.parseFragmentIdentifier&&n?{fragmentIdentifier:br(n,t)}:{})};ut.stringifyUrl=(e,t)=>{t=Object.assign({encode:!0,strict:!0,[Wp]:!0},t);let r=i2(e.url).split("?")[0]||"",n=ut.extract(e.url),o=ut.parse(n,{sort:!1}),i=Object.assign(o,e.query),a=ut.stringify(i,t);a&&(a=`?${a}`);let s=PM(e.url);return e.fragmentIdentifier&&(s=`#${t[Wp]?_e(e.fragmentIdentifier,t):e.fragmentIdentifier}`),`${r}${a}${s}`};ut.pick=(e,t,r)=>{r=Object.assign({parseFragmentIdentifier:!0,[Wp]:!1},r);let{url:n,query:o,fragmentIdentifier:i}=ut.parseUrl(e,r);return ut.stringifyUrl({url:n,query:TM(o,t),fragmentIdentifier:i},r)};ut.exclude=(e,t,r)=>{let n=Array.isArray(t)?o=>!t.includes(o):(o,i)=>!t(o,i);return ut.pick(e,n,r)}});var Ft=g((_2,I2)=>{"use strict";var Pu=function(e){return e&&e.Math===Math&&e};I2.exports=Pu(typeof globalThis=="object"&&globalThis)||Pu(typeof window=="object"&&window)||Pu(typeof self=="object"&&self)||Pu(typeof global=="object"&&global)||function(){return this}()||_2||Function("return this")()});var Ye=g((ine,A2)=>{"use strict";A2.exports=function(e){try{return!!e()}catch{return!0}}});var ea=g((ane,C2)=>{"use strict";var rq=Ye();C2.exports=!rq(function(){var e=function(){}.bind();return typeof e!="function"||e.hasOwnProperty("prototype")})});var P2=g((sne,F2)=>{"use strict";var nq=ea(),D2=Function.prototype,T2=D2.apply,O2=D2.call;F2.exports=typeof Reflect=="object"&&Reflect.apply||(nq?O2.bind(T2):function(){return O2.apply(T2,arguments)})});var Qe=g((une,M2)=>{"use strict";var N2=ea(),R2=Function.prototype,td=R2.call,oq=N2&&R2.bind.bind(td,td);M2.exports=N2?oq:function(e){return function(){return td.apply(e,arguments)}}});var xn=g((cne,$2)=>{"use strict";var q2=Qe(),iq=q2({}.toString),aq=q2("".slice);$2.exports=function(e){return aq(iq(e),8,-1)}});var rd=g((lne,L2)=>{"use strict";var sq=xn(),uq=Qe();L2.exports=function(e){if(sq(e)==="Function")return uq(e)}});var od=g((fne,j2)=>{"use strict";var nd=typeof document=="object"&&document.all,cq=typeof nd>"u"&&nd!==void 0;j2.exports={all:nd,IS_HTMLDDA:cq}});var qe=g((pne,z2)=>{"use strict";var B2=od(),lq=B2.all;z2.exports=B2.IS_HTMLDDA?function(e){return typeof e=="function"||e===lq}:function(e){return typeof e=="function"}});var Pt=g((dne,W2)=>{"use strict";var fq=Ye();W2.exports=!fq(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})});var xr=g((mne,U2)=>{"use strict";var pq=ea(),Nu=Function.prototype.call;U2.exports=pq?Nu.bind(Nu):function(){return Nu.apply(Nu,arguments)}});var K2=g(G2=>{"use strict";var H2={}.propertyIsEnumerable,V2=Object.getOwnPropertyDescriptor,dq=V2&&!H2.call({1:2},1);G2.f=dq?function(t){var r=V2(this,t);return!!r&&r.enumerable}:H2});var ta=g((gne,J2)=>{"use strict";J2.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}});var ad=g((yne,Z2)=>{"use strict";var mq=Qe(),hq=Ye(),gq=xn(),id=Object,yq=mq("".split);Z2.exports=hq(function(){return!id("z").propertyIsEnumerable(0)})?function(e){return gq(e)==="String"?yq(e,""):id(e)}:id});var So=g((vne,Y2)=>{"use strict";Y2.exports=function(e){return e==null}});var ra=g((bne,Q2)=>{"use strict";var vq=So(),bq=TypeError;Q2.exports=function(e){if(vq(e))throw bq("Can't call method on "+e);return e}});var ko=g((wne,X2)=>{"use strict";var wq=ad(),xq=ra();X2.exports=function(e){return wq(xq(e))}});var zt=g((xne,rE)=>{"use strict";var eE=qe(),tE=od(),Eq=tE.all;rE.exports=tE.IS_HTMLDDA?function(e){return typeof e=="object"?e!==null:eE(e)||e===Eq}:function(e){return typeof e=="object"?e!==null:eE(e)}});var na=g((Ene,nE)=>{"use strict";nE.exports={}});var En=g((Sne,iE)=>{"use strict";var sd=na(),ud=Ft(),Sq=qe(),oE=function(e){return Sq(e)?e:void 0};iE.exports=function(e,t){return arguments.length<2?oE(sd[e])||oE(ud[e]):sd[e]&&sd[e][t]||ud[e]&&ud[e][t]}});var Ru=g((kne,aE)=>{"use strict";var kq=Qe();aE.exports=kq({}.isPrototypeOf)});var uE=g((_ne,sE)=>{"use strict";sE.exports=typeof navigator<"u"&&String(navigator.userAgent)||""});var hE=g((Ine,mE)=>{"use strict";var dE=Ft(),cd=uE(),cE=dE.process,lE=dE.Deno,fE=cE&&cE.versions||lE&&lE.version,pE=fE&&fE.v8,Wt,Mu;pE&&(Wt=pE.split("."),Mu=Wt[0]>0&&Wt[0]<4?1:+(Wt[0]+Wt[1]));!Mu&&cd&&(Wt=cd.match(/Edge\/(\d+)/),(!Wt||Wt[1]>=74)&&(Wt=cd.match(/Chrome\/(\d+)/),Wt&&(Mu=+Wt[1])));mE.exports=Mu});var ld=g((Ane,yE)=>{"use strict";var gE=hE(),_q=Ye(),Iq=Ft(),Aq=Iq.String;yE.exports=!!Object.getOwnPropertySymbols&&!_q(function(){var e=Symbol("symbol detection");return!Aq(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&gE&&gE<41})});var fd=g((Cne,vE)=>{"use strict";var Cq=ld();vE.exports=Cq&&!Symbol.sham&&typeof Symbol.iterator=="symbol"});var pd=g((Tne,bE)=>{"use strict";var Tq=En(),Oq=qe(),Dq=Ru(),Fq=fd(),Pq=Object;bE.exports=Fq?function(e){return typeof e=="symbol"}:function(e){var t=Tq("Symbol");return Oq(t)&&Dq(t.prototype,Pq(e))}});var qu=g((One,wE)=>{"use strict";var Nq=String;wE.exports=function(e){try{return Nq(e)}catch{return"Object"}}});var Sn=g((Dne,xE)=>{"use strict";var Rq=qe(),Mq=qu(),qq=TypeError;xE.exports=function(e){if(Rq(e))return e;throw qq(Mq(e)+" is not a function")}});var $u=g((Fne,EE)=>{"use strict";var $q=Sn(),Lq=So();EE.exports=function(e,t){var r=e[t];return Lq(r)?void 0:$q(r)}});var kE=g((Pne,SE)=>{"use strict";var dd=xr(),md=qe(),hd=zt(),jq=TypeError;SE.exports=function(e,t){var r,n;if(t==="string"&&md(r=e.toString)&&!hd(n=dd(r,e))||md(r=e.valueOf)&&!hd(n=dd(r,e))||t!=="string"&&md(r=e.toString)&&!hd(n=dd(r,e)))return n;throw jq("Can't convert object to primitive value")}});var oa=g((Nne,_E)=>{"use strict";_E.exports=!0});var CE=g((Rne,AE)=>{"use strict";var IE=Ft(),Bq=Object.defineProperty;AE.exports=function(e,t){try{Bq(IE,e,{value:t,configurable:!0,writable:!0})}catch{IE[e]=t}return t}});var Lu=g((Mne,OE)=>{"use strict";var zq=Ft(),Wq=CE(),TE="__core-js_shared__",Uq=zq[TE]||Wq(TE,{});OE.exports=Uq});var gd=g((qne,FE)=>{"use strict";var Hq=oa(),DE=Lu();(FE.exports=function(e,t){return DE[e]||(DE[e]=t!==void 0?t:{})})("versions",[]).push({version:"3.32.1",mode:Hq?"pure":"global",copyright:"\xA9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.32.1/LICENSE",source:"https://github.com/zloirock/core-js"})});var ju=g(($ne,PE)=>{"use strict";var Vq=ra(),Gq=Object;PE.exports=function(e){return Gq(Vq(e))}});var cr=g((Lne,NE)=>{"use strict";var Kq=Qe(),Jq=ju(),Zq=Kq({}.hasOwnProperty);NE.exports=Object.hasOwn||function(t,r){return Zq(Jq(t),r)}});var Bu=g((jne,RE)=>{"use strict";var Yq=Qe(),Qq=0,Xq=Math.random(),e$=Yq(1 .toString);RE.exports=function(e){return"Symbol("+(e===void 0?"":e)+")_"+e$(++Qq+Xq,36)}});var Ut=g((Bne,qE)=>{"use strict";var t$=Ft(),r$=gd(),ME=cr(),n$=Bu(),o$=ld(),i$=fd(),_o=t$.Symbol,yd=r$("wks"),a$=i$?_o.for||_o:_o&&_o.withoutSetter||n$;qE.exports=function(e){return ME(yd,e)||(yd[e]=o$&&ME(_o,e)?_o[e]:a$("Symbol."+e)),yd[e]}});var BE=g((zne,jE)=>{"use strict";var s$=xr(),$E=zt(),LE=pd(),u$=$u(),c$=kE(),l$=Ut(),f$=TypeError,p$=l$("toPrimitive");jE.exports=function(e,t){if(!$E(e)||LE(e))return e;var r=u$(e,p$),n;if(r){if(t===void 0&&(t="default"),n=s$(r,e,t),!$E(n)||LE(n))return n;throw f$("Can't convert object to primitive value")}return t===void 0&&(t="number"),c$(e,t)}});var ia=g((Wne,zE)=>{"use strict";var d$=BE(),m$=pd();zE.exports=function(e){var t=d$(e,"string");return m$(t)?t:t+""}});var bd=g((Une,UE)=>{"use strict";var h$=Ft(),WE=zt(),vd=h$.document,g$=WE(vd)&&WE(vd.createElement);UE.exports=function(e){return g$?vd.createElement(e):{}}});var wd=g((Hne,HE)=>{"use strict";var y$=Pt(),v$=Ye(),b$=bd();HE.exports=!y$&&!v$(function(){return Object.defineProperty(b$("div"),"a",{get:function(){return 7}}).a!==7})});var KE=g(GE=>{"use strict";var w$=Pt(),x$=xr(),E$=K2(),S$=ta(),k$=ko(),_$=ia(),I$=cr(),A$=wd(),VE=Object.getOwnPropertyDescriptor;GE.f=w$?VE:function(t,r){if(t=k$(t),r=_$(r),A$)try{return VE(t,r)}catch{}if(I$(t,r))return S$(!x$(E$.f,t,r),t[r])}});var ZE=g((Gne,JE)=>{"use strict";var C$=Ye(),T$=qe(),O$=/#|\.prototype\./,aa=function(e,t){var r=F$[D$(e)];return r===N$?!0:r===P$?!1:T$(t)?C$(t):!!t},D$=aa.normalize=function(e){return String(e).replace(O$,".").toLowerCase()},F$=aa.data={},P$=aa.NATIVE="N",N$=aa.POLYFILL="P";JE.exports=aa});var sa=g((Kne,QE)=>{"use strict";var YE=rd(),R$=Sn(),M$=ea(),q$=YE(YE.bind);QE.exports=function(e,t){return R$(e),t===void 0?e:M$?q$(e,t):function(){return e.apply(t,arguments)}}});var xd=g((Jne,XE)=>{"use strict";var $$=Pt(),L$=Ye();XE.exports=$$&&L$(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})});var jr=g((Zne,eS)=>{"use strict";var j$=zt(),B$=String,z$=TypeError;eS.exports=function(e){if(j$(e))return e;throw z$(B$(e)+" is not an object")}});var Br=g(rS=>{"use strict";var W$=Pt(),U$=wd(),H$=xd(),zu=jr(),tS=ia(),V$=TypeError,Ed=Object.defineProperty,G$=Object.getOwnPropertyDescriptor,Sd="enumerable",kd="configurable",_d="writable";rS.f=W$?H$?function(t,r,n){if(zu(t),r=tS(r),zu(n),typeof t=="function"&&r==="prototype"&&"value"in n&&_d in n&&!n[_d]){var o=G$(t,r);o&&o[_d]&&(t[r]=n.value,n={configurable:kd in n?n[kd]:o[kd],enumerable:Sd in n?n[Sd]:o[Sd],writable:!1})}return Ed(t,r,n)}:Ed:function(t,r,n){if(zu(t),r=tS(r),zu(n),U$)try{return Ed(t,r,n)}catch{}if("get"in n||"set"in n)throw V$("Accessors not supported");return"value"in n&&(t[r]=n.value),t}});var kn=g((Qne,nS)=>{"use strict";var K$=Pt(),J$=Br(),Z$=ta();nS.exports=K$?function(e,t,r){return J$.f(e,t,Z$(1,r))}:function(e,t,r){return e[t]=r,e}});var _n=g((Xne,iS)=>{"use strict";var Wu=Ft(),Y$=P2(),Q$=rd(),X$=qe(),eL=KE().f,tL=ZE(),Io=na(),rL=sa(),Ao=kn(),oS=cr(),nL=function(e){var t=function(r,n,o){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(r);case 2:return new e(r,n)}return new e(r,n,o)}return Y$(e,this,arguments)};return t.prototype=e.prototype,t};iS.exports=function(e,t){var r=e.target,n=e.global,o=e.stat,i=e.proto,a=n?Wu:o?Wu[r]:(Wu[r]||{}).prototype,s=n?Io:Io[r]||Ao(Io,r,{})[r],u=s.prototype,l,c,f,p,d,h,y,v,w;for(p in t)l=tL(n?p:r+(o?".":"#")+p,e.forced),c=!l&&a&&oS(a,p),h=s[p],c&&(e.dontCallGetSet?(w=eL(a,p),y=w&&w.value):y=a[p]),d=c&&y?y:t[p],!(c&&typeof h==typeof d)&&(e.bind&&c?v=rL(d,Wu):e.wrap&&c?v=nL(d):i&&X$(d)?v=Q$(d):v=d,(e.sham||d&&d.sham||h&&h.sham)&&Ao(v,"sham",!0),Ao(s,p,v),i&&(f=r+"Prototype",oS(Io,f)||Ao(Io,f,{}),Ao(Io[f],p,d),e.real&&u&&(l||!u[p])&&Ao(u,p,d)))}});var ua=g((eoe,aS)=>{"use strict";aS.exports={}});var uS=g((toe,sS)=>{"use strict";var oL=Math.ceil,iL=Math.floor;sS.exports=Math.trunc||function(t){var r=+t;return(r>0?iL:oL)(r)}});var Id=g((roe,cS)=>{"use strict";var aL=uS();cS.exports=function(e){var t=+e;return t!==t||t===0?0:aL(t)}});var Ad=g((noe,lS)=>{"use strict";var sL=Id(),uL=Math.max,cL=Math.min;lS.exports=function(e,t){var r=sL(e);return r<0?uL(r+t,0):cL(r,t)}});var pS=g((ooe,fS)=>{"use strict";var lL=Id(),fL=Math.min;fS.exports=function(e){return e>0?fL(lL(e),9007199254740991):0}});var ca=g((ioe,dS)=>{"use strict";var pL=pS();dS.exports=function(e){return pL(e.length)}});var gS=g((aoe,hS)=>{"use strict";var dL=ko(),mL=Ad(),hL=ca(),mS=function(e){return function(t,r,n){var o=dL(t),i=hL(o),a=mL(n,i),s;if(e&&r!==r){for(;i>a;)if(s=o[a++],s!==s)return!0}else for(;i>a;a++)if((e||a in o)&&o[a]===r)return e||a||0;return!e&&-1}};hS.exports={includes:mS(!0),indexOf:mS(!1)}});var Td=g((soe,vS)=>{"use strict";var gL=Qe(),Cd=cr(),yL=ko(),vL=gS().indexOf,bL=ua(),yS=gL([].push);vS.exports=function(e,t){var r=yL(e),n=0,o=[],i;for(i in r)!Cd(bL,i)&&Cd(r,i)&&yS(o,i);for(;t.length>n;)Cd(r,i=t[n++])&&(~vL(o,i)||yS(o,i));return o}});var Uu=g((uoe,bS)=>{"use strict";bS.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]});var Od=g(wS=>{"use strict";var wL=Td(),xL=Uu(),EL=xL.concat("length","prototype");wS.f=Object.getOwnPropertyNames||function(t){return wL(t,EL)}});var ES=g((loe,xS)=>{"use strict";var SL=ia(),kL=Br(),_L=ta();xS.exports=function(e,t,r){var n=SL(t);n in e?kL.f(e,n,_L(0,r)):e[n]=r}});var _S=g((foe,kS)=>{"use strict";var SS=Ad(),IL=ca(),AL=ES(),CL=Array,TL=Math.max;kS.exports=function(e,t,r){for(var n=IL(e),o=SS(t,n),i=SS(r===void 0?n:r,n),a=CL(TL(i-o,0)),s=0;o<i;o++,s++)AL(a,s,e[o]);return a.length=s,a}});var TS=g((poe,CS)=>{"use strict";var OL=xn(),DL=ko(),IS=Od().f,FL=_S(),AS=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],PL=function(e){try{return IS(e)}catch{return FL(AS)}};CS.exports.f=function(t){return AS&&OL(t)==="Window"?PL(t):IS(DL(t))}});var DS=g((doe,OS)=>{"use strict";var NL=Ye();OS.exports=NL(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}})});var NS=g((moe,PS)=>{"use strict";var RL=Ye(),ML=zt(),qL=xn(),FS=DS(),Hu=Object.isExtensible,$L=RL(function(){Hu(1)});PS.exports=$L||FS?function(t){return!ML(t)||FS&&qL(t)==="ArrayBuffer"?!1:Hu?Hu(t):!0}:Hu});var MS=g((hoe,RS)=>{"use strict";var LL=Ye();RS.exports=!LL(function(){return Object.isExtensible(Object.preventExtensions({}))})});var Nd=g((goe,LS)=>{"use strict";var jL=_n(),BL=Qe(),zL=ua(),WL=zt(),Dd=cr(),UL=Br().f,qS=Od(),HL=TS(),Fd=NS(),VL=Bu(),GL=MS(),$S=!1,Er=VL("meta"),KL=0,Pd=function(e){UL(e,Er,{value:{objectID:"O"+KL++,weakData:{}}})},JL=function(e,t){if(!WL(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!Dd(e,Er)){if(!Fd(e))return"F";if(!t)return"E";Pd(e)}return e[Er].objectID},ZL=function(e,t){if(!Dd(e,Er)){if(!Fd(e))return!0;if(!t)return!1;Pd(e)}return e[Er].weakData},YL=function(e){return GL&&$S&&Fd(e)&&!Dd(e,Er)&&Pd(e),e},QL=function(){XL.enable=function(){},$S=!0;var e=qS.f,t=BL([].splice),r={};r[Er]=1,e(r).length&&(qS.f=function(n){for(var o=e(n),i=0,a=o.length;i<a;i++)if(o[i]===Er){t(o,i,1);break}return o},jL({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:HL.f}))},XL=LS.exports={enable:QL,fastKey:JL,getWeakData:ZL,onFreeze:YL};zL[Er]=!0});var la=g((yoe,jS)=>{"use strict";jS.exports={}});var zS=g((voe,BS)=>{"use strict";var e4=Ut(),t4=la(),r4=e4("iterator"),n4=Array.prototype;BS.exports=function(e){return e!==void 0&&(t4.Array===e||n4[r4]===e)}});var Vu=g((boe,US)=>{"use strict";var o4=Ut(),i4=o4("toStringTag"),WS={};WS[i4]="z";US.exports=String(WS)==="[object z]"});var Ku=g((woe,HS)=>{"use strict";var a4=Vu(),s4=qe(),Gu=xn(),u4=Ut(),c4=u4("toStringTag"),l4=Object,f4=Gu(function(){return arguments}())==="Arguments",p4=function(e,t){try{return e[t]}catch{}};HS.exports=a4?Gu:function(e){var t,r,n;return e===void 0?"Undefined":e===null?"Null":typeof(r=p4(t=l4(e),c4))=="string"?r:f4?Gu(t):(n=Gu(t))==="Object"&&s4(t.callee)?"Arguments":n}});var Rd=g((xoe,GS)=>{"use strict";var d4=Ku(),VS=$u(),m4=So(),h4=la(),g4=Ut(),y4=g4("iterator");GS.exports=function(e){if(!m4(e))return VS(e,y4)||VS(e,"@@iterator")||h4[d4(e)]}});var JS=g((Eoe,KS)=>{"use strict";var v4=xr(),b4=Sn(),w4=jr(),x4=qu(),E4=Rd(),S4=TypeError;KS.exports=function(e,t){var r=arguments.length<2?E4(e):t;if(b4(r))return w4(v4(r,e));throw S4(x4(e)+" is not iterable")}});var QS=g((Soe,YS)=>{"use strict";var k4=xr(),ZS=jr(),_4=$u();YS.exports=function(e,t,r){var n,o;ZS(e);try{if(n=_4(e,"return"),!n){if(t==="throw")throw r;return r}n=k4(n,e)}catch(i){o=!0,n=i}if(t==="throw")throw r;if(o)throw n;return ZS(n),r}});var fa=g((koe,rk)=>{"use strict";var I4=sa(),A4=xr(),C4=jr(),T4=qu(),O4=zS(),D4=ca(),XS=Ru(),F4=JS(),P4=Rd(),ek=QS(),N4=TypeError,Ju=function(e,t){this.stopped=e,this.result=t},tk=Ju.prototype;rk.exports=function(e,t,r){var n=r&&r.that,o=!!(r&&r.AS_ENTRIES),i=!!(r&&r.IS_RECORD),a=!!(r&&r.IS_ITERATOR),s=!!(r&&r.INTERRUPTED),u=I4(t,n),l,c,f,p,d,h,y,v=function(S){return l&&ek(l,"normal",S),new Ju(!0,S)},w=function(S){return o?(C4(S),s?u(S[0],S[1],v):u(S[0],S[1])):s?u(S,v):u(S)};if(i)l=e.iterator;else if(a)l=e;else{if(c=P4(e),!c)throw N4(T4(e)+" is not iterable");if(O4(c)){for(f=0,p=D4(e);p>f;f++)if(d=w(e[f]),d&&XS(tk,d))return d;return new Ju(!1)}l=F4(e,c)}for(h=i?e.next:l.next;!(y=A4(h,l)).done;){try{d=w(y.value)}catch(S){ek(l,"throw",S)}if(typeof d=="object"&&d&&XS(tk,d))return d}return new Ju(!1)}});var Md=g((_oe,nk)=>{"use strict";var R4=Ru(),M4=TypeError;nk.exports=function(e,t){if(R4(t,e))return e;throw M4("Incorrect invocation")}});var ik=g((Ioe,ok)=>{"use strict";var q4=Vu(),$4=Ku();ok.exports=q4?{}.toString:function(){return"[object "+$4(this)+"]"}});var Zu=g((Aoe,sk)=>{"use strict";var L4=Vu(),j4=Br().f,B4=kn(),z4=cr(),W4=ik(),U4=Ut(),ak=U4("toStringTag");sk.exports=function(e,t,r,n){if(e){var o=r?e:e.prototype;z4(o,ak)||j4(o,ak,{configurable:!0,value:t}),n&&!L4&&B4(o,"toString",W4)}}});var ck=g((Coe,uk)=>{"use strict";var H4=xn();uk.exports=Array.isArray||function(t){return H4(t)==="Array"}});var fk=g((Toe,lk)=>{"use strict";var V4=Qe(),G4=qe(),qd=Lu(),K4=V4(Function.toString);G4(qd.inspectSource)||(qd.inspectSource=function(e){return K4(e)});lk.exports=qd.inspectSource});var yk=g((Ooe,gk)=>{"use strict";var J4=Qe(),Z4=Ye(),pk=qe(),Y4=Ku(),Q4=En(),X4=fk(),dk=function(){},e6=[],mk=Q4("Reflect","construct"),$d=/^\s*(?:class|function)\b/,t6=J4($d.exec),r6=!$d.exec(dk),pa=function(t){if(!pk(t))return!1;try{return mk(dk,e6,t),!0}catch{return!1}},hk=function(t){if(!pk(t))return!1;switch(Y4(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return r6||!!t6($d,X4(t))}catch{return!0}};hk.sham=!0;gk.exports=!mk||Z4(function(){var e;return pa(pa.call)||!pa(Object)||!pa(function(){e=!0})||e})?hk:pa});var xk=g((Doe,wk)=>{"use strict";var vk=ck(),n6=yk(),o6=zt(),i6=Ut(),a6=i6("species"),bk=Array;wk.exports=function(e){var t;return vk(e)&&(t=e.constructor,n6(t)&&(t===bk||vk(t.prototype))?t=void 0:o6(t)&&(t=t[a6],t===null&&(t=void 0))),t===void 0?bk:t}});var Sk=g((Foe,Ek)=>{"use strict";var s6=xk();Ek.exports=function(e,t){return new(s6(e))(t===0?0:t)}});var Ik=g((Poe,_k)=>{"use strict";var u6=sa(),c6=Qe(),l6=ad(),f6=ju(),p6=ca(),d6=Sk(),kk=c6([].push),zr=function(e){var t=e===1,r=e===2,n=e===3,o=e===4,i=e===6,a=e===7,s=e===5||i;return function(u,l,c,f){for(var p=f6(u),d=l6(p),h=u6(l,c),y=p6(d),v=0,w=f||d6,S=t?w(u,y):r||a?w(u,0):void 0,T,M;y>v;v++)if((s||v in d)&&(T=d[v],M=h(T,v,p),e))if(t)S[v]=M;else if(M)switch(e){case 3:return!0;case 5:return T;case 6:return v;case 2:kk(S,T)}else switch(e){case 4:return!1;case 7:kk(S,T)}return i?-1:n||o?o:S}};_k.exports={forEach:zr(0),map:zr(1),filter:zr(2),some:zr(3),every:zr(4),find:zr(5),findIndex:zr(6),filterReject:zr(7)}});var Tk=g((Noe,Ck)=>{"use strict";var m6=Ft(),h6=qe(),Ak=m6.WeakMap;Ck.exports=h6(Ak)&&/native code/.test(String(Ak))});var Yu=g((Roe,Dk)=>{"use strict";var g6=gd(),y6=Bu(),Ok=g6("keys");Dk.exports=function(e){return Ok[e]||(Ok[e]=y6(e))}});var zd=g((Moe,Nk)=>{"use strict";var v6=Tk(),Pk=Ft(),b6=zt(),w6=kn(),Ld=cr(),jd=Lu(),x6=Yu(),E6=ua(),Fk="Object already initialized",Bd=Pk.TypeError,S6=Pk.WeakMap,Qu,da,Xu,k6=function(e){return Xu(e)?da(e):Qu(e,{})},_6=function(e){return function(t){var r;if(!b6(t)||(r=da(t)).type!==e)throw Bd("Incompatible receiver, "+e+" required");return r}};v6||jd.state?(Ht=jd.state||(jd.state=new S6),Ht.get=Ht.get,Ht.has=Ht.has,Ht.set=Ht.set,Qu=function(e,t){if(Ht.has(e))throw Bd(Fk);return t.facade=e,Ht.set(e,t),t},da=function(e){return Ht.get(e)||{}},Xu=function(e){return Ht.has(e)}):(In=x6("state"),E6[In]=!0,Qu=function(e,t){if(Ld(e,In))throw Bd(Fk);return t.facade=e,w6(e,In,t),t},da=function(e){return Ld(e,In)?e[In]:{}},Xu=function(e){return Ld(e,In)});var Ht,In;Nk.exports={set:Qu,get:da,has:Xu,enforce:k6,getterFor:_6}});var qk=g((qoe,Mk)=>{"use strict";var I6=_n(),A6=Ft(),C6=Nd(),T6=Ye(),O6=kn(),D6=fa(),F6=Md(),P6=qe(),N6=zt(),R6=So(),M6=Zu(),q6=Br().f,$6=Ik().forEach,L6=Pt(),Rk=zd(),j6=Rk.set,B6=Rk.getterFor;Mk.exports=function(e,t,r){var n=e.indexOf("Map")!==-1,o=e.indexOf("Weak")!==-1,i=n?"set":"add",a=A6[e],s=a&&a.prototype,u={},l;if(!L6||!P6(a)||!(o||s.forEach&&!T6(function(){new a().entries().next()})))l=r.getConstructor(t,e,n,i),C6.enable();else{l=t(function(p,d){j6(F6(p,c),{type:e,collection:new a}),R6(d)||D6(d,p[i],{that:p,AS_ENTRIES:n})});var c=l.prototype,f=B6(e);$6(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(p){var d=p==="add"||p==="set";p in s&&!(o&&p==="clear")&&O6(c,p,function(h,y){var v=f(this).collection;if(!d&&o&&!N6(h))return p==="get"?void 0:!1;var w=v[p](h===0?0:h,y);return d?this:w})}),o||q6(c,"size",{configurable:!0,get:function(){return f(this).collection.size}})}return M6(l,e,!1,!0),u[e]=l,I6({global:!0,forced:!0},u),o||r.setStrong(l,e,n),l}});var Lk=g(($oe,$k)=>{"use strict";var z6=Td(),W6=Uu();$k.exports=Object.keys||function(t){return z6(t,W6)}});var Bk=g(jk=>{"use strict";var U6=Pt(),H6=xd(),V6=Br(),G6=jr(),K6=ko(),J6=Lk();jk.f=U6&&!H6?Object.defineProperties:function(t,r){G6(t);for(var n=K6(r),o=J6(r),i=o.length,a=0,s;i>a;)V6.f(t,s=o[a++],n[s]);return t}});var Wk=g((joe,zk)=>{"use strict";var Z6=En();zk.exports=Z6("document","documentElement")});var ma=g((Boe,Zk)=>{"use strict";var Y6=jr(),Q6=Bk(),Uk=Uu(),X6=ua(),e9=Wk(),t9=bd(),r9=Yu(),Hk=">",Vk="<",Ud="prototype",Hd="script",Kk=r9("IE_PROTO"),Wd=function(){},Jk=function(e){return Vk+Hd+Hk+e+Vk+"/"+Hd+Hk},Gk=function(e){e.write(Jk("")),e.close();var t=e.parentWindow.Object;return e=null,t},n9=function(){var e=t9("iframe"),t="java"+Hd+":",r;return e.style.display="none",e9.appendChild(e),e.src=String(t),r=e.contentWindow.document,r.open(),r.write(Jk("document.F=Object")),r.close(),r.F},ec,tc=function(){try{ec=new ActiveXObject("htmlfile")}catch{}tc=typeof document<"u"?document.domain&&ec?Gk(ec):n9():Gk(ec);for(var e=Uk.length;e--;)delete tc[Ud][Uk[e]];return tc()};X6[Kk]=!0;Zk.exports=Object.create||function(t,r){var n;return t!==null?(Wd[Ud]=Y6(t),n=new Wd,Wd[Ud]=null,n[Kk]=t):n=tc(),r===void 0?n:Q6.f(n,r)}});var Vd=g((zoe,Yk)=>{"use strict";var o9=Br();Yk.exports=function(e,t,r){return o9.f(e,t,r)}});var rc=g((Woe,Qk)=>{"use strict";var i9=kn();Qk.exports=function(e,t,r,n){return n&&n.enumerable?e[t]=r:i9(e,t,r),e}});var e_=g((Uoe,Xk)=>{"use strict";var a9=rc();Xk.exports=function(e,t,r){for(var n in t)r&&r.unsafe&&e[n]?e[n]=t[n]:a9(e,n,t[n],r);return e}});var n_=g((Hoe,r_)=>{"use strict";var Gd=Pt(),s9=cr(),t_=Function.prototype,u9=Gd&&Object.getOwnPropertyDescriptor,Kd=s9(t_,"name"),c9=Kd&&function(){}.name==="something",l9=Kd&&(!Gd||Gd&&u9(t_,"name").configurable);r_.exports={EXISTS:Kd,PROPER:c9,CONFIGURABLE:l9}});var i_=g((Voe,o_)=>{"use strict";var f9=Ye();o_.exports=!f9(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})});var Zd=g((Goe,s_)=>{"use strict";var p9=cr(),d9=qe(),m9=ju(),h9=Yu(),g9=i_(),a_=h9("IE_PROTO"),Jd=Object,y9=Jd.prototype;s_.exports=g9?Jd.getPrototypeOf:function(e){var t=m9(e);if(p9(t,a_))return t[a_];var r=t.constructor;return d9(r)&&t instanceof r?r.prototype:t instanceof Jd?y9:null}});var em=g((Koe,l_)=>{"use strict";var v9=Ye(),b9=qe(),w9=zt(),x9=ma(),u_=Zd(),E9=rc(),S9=Ut(),k9=oa(),Xd=S9("iterator"),c_=!1,Sr,Yd,Qd;[].keys&&(Qd=[].keys(),"next"in Qd?(Yd=u_(u_(Qd)),Yd!==Object.prototype&&(Sr=Yd)):c_=!0);var _9=!w9(Sr)||v9(function(){var e={};return Sr[Xd].call(e)!==e});_9?Sr={}:k9&&(Sr=x9(Sr));b9(Sr[Xd])||E9(Sr,Xd,function(){return this});l_.exports={IteratorPrototype:Sr,BUGGY_SAFARI_ITERATORS:c_}});var p_=g((Joe,f_)=>{"use strict";var I9=em().IteratorPrototype,A9=ma(),C9=ta(),T9=Zu(),O9=la(),D9=function(){return this};f_.exports=function(e,t,r,n){var o=t+" Iterator";return e.prototype=A9(I9,{next:C9(+!n,r)}),T9(e,o,!1,!0),O9[o]=D9,e}});var m_=g((Zoe,d_)=>{"use strict";var F9=Qe(),P9=Sn();d_.exports=function(e,t,r){try{return F9(P9(Object.getOwnPropertyDescriptor(e,t)[r]))}catch{}}});var g_=g((Yoe,h_)=>{"use strict";var N9=qe(),R9=String,M9=TypeError;h_.exports=function(e){if(typeof e=="object"||N9(e))return e;throw M9("Can't set "+R9(e)+" as a prototype")}});var v_=g((Qoe,y_)=>{"use strict";var q9=m_(),$9=jr(),L9=g_();y_.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,t={},r;try{r=q9(Object.prototype,"__proto__","set"),r(t,[]),e=t instanceof Array}catch{}return function(o,i){return $9(o),L9(i),e?r(o,i):o.__proto__=i,o}}():void 0)});var T_=g((Xoe,C_)=>{"use strict";var j9=_n(),B9=xr(),nc=oa(),I_=n_(),z9=qe(),W9=p_(),b_=Zd(),w_=v_(),U9=Zu(),H9=kn(),tm=rc(),V9=Ut(),x_=la(),A_=em(),G9=I_.PROPER,K9=I_.CONFIGURABLE,E_=A_.IteratorPrototype,oc=A_.BUGGY_SAFARI_ITERATORS,ha=V9("iterator"),S_="keys",ga="values",k_="entries",__=function(){return this};C_.exports=function(e,t,r,n,o,i,a){W9(r,t,n);var s=function(w){if(w===o&&p)return p;if(!oc&&w in c)return c[w];switch(w){case S_:return function(){return new r(this,w)};case ga:return function(){return new r(this,w)};case k_:return function(){return new r(this,w)}}return function(){return new r(this)}},u=t+" Iterator",l=!1,c=e.prototype,f=c[ha]||c["@@iterator"]||o&&c[o],p=!oc&&f||s(o),d=t==="Array"&&c.entries||f,h,y,v;if(d&&(h=b_(d.call(new e)),h!==Object.prototype&&h.next&&(!nc&&b_(h)!==E_&&(w_?w_(h,E_):z9(h[ha])||tm(h,ha,__)),U9(h,u,!0,!0),nc&&(x_[u]=__))),G9&&o===ga&&f&&f.name!==ga&&(!nc&&K9?H9(c,"name",ga):(l=!0,p=function(){return B9(f,this)})),o)if(y={values:s(ga),keys:i?p:s(S_),entries:s(k_)},a)for(v in y)(oc||l||!(v in c))&&tm(c,v,y[v]);else j9({target:t,proto:!0,forced:oc||l},y);return(!nc||a)&&c[ha]!==p&&tm(c,ha,p,{name:o}),x_[t]=p,y}});var D_=g((eie,O_)=>{"use strict";O_.exports=function(e,t){return{value:e,done:t}}});var N_=g((tie,P_)=>{"use strict";var J9=En(),Z9=Vd(),Y9=Ut(),Q9=Pt(),F_=Y9("species");P_.exports=function(e){var t=J9(e);Q9&&t&&!t[F_]&&Z9(t,F_,{configurable:!0,get:function(){return this}})}});var j_=g((rie,L_)=>{"use strict";var X9=ma(),ej=Vd(),R_=e_(),tj=sa(),rj=Md(),nj=So(),oj=fa(),ij=T_(),ic=D_(),aj=N_(),ya=Pt(),M_=Nd().fastKey,$_=zd(),q_=$_.set,rm=$_.getterFor;L_.exports={getConstructor:function(e,t,r,n){var o=e(function(l,c){rj(l,i),q_(l,{type:t,index:X9(null),first:void 0,last:void 0,size:0}),ya||(l.size=0),nj(c)||oj(c,l[n],{that:l,AS_ENTRIES:r})}),i=o.prototype,a=rm(t),s=function(l,c,f){var p=a(l),d=u(l,c),h,y;return d?d.value=f:(p.last=d={index:y=M_(c,!0),key:c,value:f,previous:h=p.last,next:void 0,removed:!1},p.first||(p.first=d),h&&(h.next=d),ya?p.size++:l.size++,y!=="F"&&(p.index[y]=d)),l},u=function(l,c){var f=a(l),p=M_(c),d;if(p!=="F")return f.index[p];for(d=f.first;d;d=d.next)if(d.key===c)return d};return R_(i,{clear:function(){for(var c=this,f=a(c),p=f.index,d=f.first;d;)d.removed=!0,d.previous&&(d.previous=d.previous.next=void 0),delete p[d.index],d=d.next;f.first=f.last=void 0,ya?f.size=0:c.size=0},delete:function(l){var c=this,f=a(c),p=u(c,l);if(p){var d=p.next,h=p.previous;delete f.index[p.index],p.removed=!0,h&&(h.next=d),d&&(d.previous=h),f.first===p&&(f.first=d),f.last===p&&(f.last=h),ya?f.size--:c.size--}return!!p},forEach:function(c){for(var f=a(this),p=tj(c,arguments.length>1?arguments[1]:void 0),d;d=d?d.next:f.first;)for(p(d.value,d.key,this);d&&d.removed;)d=d.previous},has:function(c){return!!u(this,c)}}),R_(i,r?{get:function(c){var f=u(this,c);return f&&f.value},set:function(c,f){return s(this,c===0?0:c,f)}}:{add:function(c){return s(this,c=c===0?0:c,c)}}),ya&&ej(i,"size",{configurable:!0,get:function(){return a(this).size}}),o},setStrong:function(e,t,r){var n=t+" Iterator",o=rm(t),i=rm(n);ij(e,t,function(a,s){q_(this,{type:n,target:a,state:o(a),kind:s,last:void 0})},function(){for(var a=i(this),s=a.kind,u=a.last;u&&u.removed;)u=u.previous;return!a.target||!(a.last=u=u?u.next:a.state.first)?(a.target=void 0,ic(void 0,!0)):ic(s==="keys"?u.key:s==="values"?u.value:[u.key,u.value],!1)},r?"entries":"values",!r,!0),aj(t)}}});var B_=g(()=>{"use strict";var sj=qk(),uj=j_();sj("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},uj)});var z_=g(()=>{"use strict";B_()});var U_=g((sie,W_)=>{"use strict";W_.exports=function(e,t){return t===1?function(r,n){return r[e](n)}:function(r,n,o){return r[e](n,o)}}});var G_=g((uie,V_)=>{"use strict";var cj=En(),ac=U_(),H_=cj("Map");V_.exports={Map:H_,set:ac("set",2),get:ac("get",1),has:ac("has",1),remove:ac("delete",1),proto:H_.prototype}});var K_=g(()=>{"use strict";var lj=_n(),fj=Qe(),pj=Sn(),dj=ra(),mj=fa(),sc=G_(),hj=oa(),gj=sc.Map,yj=sc.has,vj=sc.get,bj=sc.set,wj=fj([].push);lj({target:"Map",stat:!0,forced:hj},{groupBy:function(t,r){dj(t),pj(r);var n=new gj,o=0;return mj(t,function(i){var a=r(i,o++);yj(n,a)?wj(vj(n,a),i):bj(n,a,[i])}),n}})});var Y_=g((fie,Z_)=>{"use strict";z_();K_();var xj=xr(),Ej=qe(),Sj=na(),J_=Sj.Map,kj=J_.groupBy;Z_.exports=function(t,r,n){return xj(kj,Ej(this)?this:J_,t,r,n)}});var X_=g((pie,Q_)=>{"use strict";var _j=Y_();Q_.exports=_j});var eI=g(()=>{"use strict";var Ij=_n(),Aj=Pt(),Cj=ma();Ij({target:"Object",stat:!0,sham:!Aj},{create:Cj})});var tI=g(()=>{"use strict";var Tj=_n(),Oj=En(),Dj=Qe(),Fj=Sn(),Pj=ra(),Nj=ia(),Rj=fa(),Mj=Oj("Object","create"),qj=Dj([].push);Tj({target:"Object",stat:!0},{groupBy:function(t,r){Pj(t),Fj(r);var n=Mj(null),o=0;return Rj(t,function(i){var a=Nj(r(i,o++));a in n?qj(n[a],i):n[a]=[i]}),n}})});var nI=g((yie,rI)=>{"use strict";eI();tI();var $j=na();rI.exports=$j.Object.groupBy});var iI=g((vie,oI)=>{"use strict";var Lj=nI();oI.exports=Lj});var II=g(_I=>{"use strict";var To=(A(),af(Bt));function rB(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var nB=typeof Object.is=="function"?Object.is:rB,oB=To.useState,iB=To.useEffect,aB=To.useLayoutEffect,sB=To.useDebugValue;function uB(e,t){var r=t(),n=oB({inst:{value:r,getSnapshot:t}}),o=n[0].inst,i=n[1];return aB(function(){o.value=r,o.getSnapshot=t,xm(o)&&i({inst:o})},[e,r,t]),iB(function(){return xm(o)&&i({inst:o}),e(function(){xm(o)&&i({inst:o})})},[e]),sB(r),r}function xm(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!nB(e,r)}catch{return!0}}function cB(e,t){return t()}var lB=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?cB:uB;_I.useSyncExternalStore=To.useSyncExternalStore!==void 0?To.useSyncExternalStore:lB});var CI=g((zse,AI)=>{"use strict";AI.exports=II()});var OI=g(TI=>{"use strict";var wc=(A(),af(Bt)),fB=CI();function pB(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var dB=typeof Object.is=="function"?Object.is:pB,mB=fB.useSyncExternalStore,hB=wc.useRef,gB=wc.useEffect,yB=wc.useMemo,vB=wc.useDebugValue;TI.useSyncExternalStoreWithSelector=function(e,t,r,n,o){var i=hB(null);if(i.current===null){var a={hasValue:!1,value:null};i.current=a}else a=i.current;i=yB(function(){function u(d){if(!l){if(l=!0,c=d,d=n(d),o!==void 0&&a.hasValue){var h=a.value;if(o(h,d))return f=h}return f=d}if(h=f,dB(c,d))return h;var y=n(d);return o!==void 0&&o(h,y)?h:(c=d,f=y)}var l=!1,c,f,p=r===void 0?null:r;return[function(){return u(t())},p===null?void 0:function(){return u(p())}]},[t,r,n,o]);var s=mB(e,i[0],i[1]);return gB(function(){a.hasValue=!0,a.value=s},[s]),vB(s),s}});var FI=g((Use,DI)=>{"use strict";DI.exports=OI()});var Kr=g((qhe,Ir)=>{function Qm(){return Ir.exports=Qm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ir.exports.__esModule=!0,Ir.exports.default=Ir.exports,Qm.apply(this,arguments)}Ir.exports=Qm,Ir.exports.__esModule=!0,Ir.exports.default=Ir.exports});var Lc=g((hge,Ar)=>{function ah(e){return Ar.exports=ah=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ar.exports.__esModule=!0,Ar.exports.default=Ar.exports,ah(e)}Ar.exports=ah,Ar.exports.__esModule=!0,Ar.exports.default=Ar.exports});var NC=g((gge,La)=>{var PC=Lc().default;function o7(e,t){if(PC(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(PC(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}La.exports=o7,La.exports.__esModule=!0,La.exports.default=La.exports});var RC=g((yge,ja)=>{var i7=Lc().default,a7=NC();function s7(e){var t=a7(e,"string");return i7(t)==="symbol"?t:String(t)}ja.exports=s7,ja.exports.__esModule=!0,ja.exports.default=ja.exports});var MC=g((vge,Ba)=>{var u7=RC();function c7(e,t,r){return t=u7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Ba.exports=c7,Ba.exports.__esModule=!0,Ba.exports.default=Ba.exports});var qC=g((bge,za)=>{function l7(e){if(Array.isArray(e))return e}za.exports=l7,za.exports.__esModule=!0,za.exports.default=za.exports});var $C=g((wge,Wa)=>{function f7(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,i,a,s=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(c){l=!0,o=c}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}Wa.exports=f7,Wa.exports.__esModule=!0,Wa.exports.default=Wa.exports});var LC=g((xge,Ua)=>{function p7(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Ua.exports=p7,Ua.exports.__esModule=!0,Ua.exports.default=Ua.exports});var BC=g((Ege,Ha)=>{var jC=LC();function d7(e,t){if(e){if(typeof e=="string")return jC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jC(e,t)}}Ha.exports=d7,Ha.exports.__esModule=!0,Ha.exports.default=Ha.exports});var zC=g((Sge,Va)=>{function m7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}Va.exports=m7,Va.exports.__esModule=!0,Va.exports.default=Va.exports});var WC=g((kge,Ga)=>{var h7=qC(),g7=$C(),y7=BC(),v7=zC();function b7(e,t){return h7(e)||g7(e,t)||y7(e,t)||v7()}Ga.exports=b7,Ga.exports.__esModule=!0,Ga.exports.default=Ga.exports});var HC=g((jc,UC)=>{"use strict";jc.__esModule=!0;jc.default={scheme:"threezerotwofour",author:"jan t. sott (http://github.com/idleberg)",base00:"#090300",base01:"#3a3432",base02:"#4a4543",base03:"#5c5855",base04:"#807d7c",base05:"#a5a2a2",base06:"#d6d5d4",base07:"#f7f7f7",base08:"#db2d20",base09:"#e8bbd0",base0A:"#fded02",base0B:"#01a252",base0C:"#b5e4f4",base0D:"#01a0e4",base0E:"#a16a94",base0F:"#cdab53"};UC.exports=jc.default});var GC=g((Bc,VC)=>{"use strict";Bc.__esModule=!0;Bc.default={scheme:"apathy",author:"jannik siebert (https://github.com/janniks)",base00:"#031A16",base01:"#0B342D",base02:"#184E45",base03:"#2B685E",base04:"#5F9C92",base05:"#81B5AC",base06:"#A7CEC8",base07:"#D2E7E4",base08:"#3E9688",base09:"#3E7996",base0A:"#3E4C96",base0B:"#883E96",base0C:"#963E4C",base0D:"#96883E",base0E:"#4C963E",base0F:"#3E965B"};VC.exports=Bc.default});var JC=g((zc,KC)=>{"use strict";zc.__esModule=!0;zc.default={scheme:"ashes",author:"jannik siebert (https://github.com/janniks)",base00:"#1C2023",base01:"#393F45",base02:"#565E65",base03:"#747C84",base04:"#ADB3BA",base05:"#C7CCD1",base06:"#DFE2E5",base07:"#F3F4F5",base08:"#C7AE95",base09:"#C7C795",base0A:"#AEC795",base0B:"#95C7AE",base0C:"#95AEC7",base0D:"#AE95C7",base0E:"#C795AE",base0F:"#C79595"};KC.exports=zc.default});var YC=g((Wc,ZC)=>{"use strict";Wc.__esModule=!0;Wc.default={scheme:"atelier dune",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/dune)",base00:"#20201d",base01:"#292824",base02:"#6e6b5e",base03:"#7d7a68",base04:"#999580",base05:"#a6a28c",base06:"#e8e4cf",base07:"#fefbec",base08:"#d73737",base09:"#b65611",base0A:"#cfb017",base0B:"#60ac39",base0C:"#1fad83",base0D:"#6684e1",base0E:"#b854d4",base0F:"#d43552"};ZC.exports=Wc.default});var XC=g((Uc,QC)=>{"use strict";Uc.__esModule=!0;Uc.default={scheme:"atelier forest",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/forest)",base00:"#1b1918",base01:"#2c2421",base02:"#68615e",base03:"#766e6b",base04:"#9c9491",base05:"#a8a19f",base06:"#e6e2e0",base07:"#f1efee",base08:"#f22c40",base09:"#df5320",base0A:"#d5911a",base0B:"#5ab738",base0C:"#00ad9c",base0D:"#407ee7",base0E:"#6666ea",base0F:"#c33ff3"};QC.exports=Uc.default});var tT=g((Hc,eT)=>{"use strict";Hc.__esModule=!0;Hc.default={scheme:"atelier heath",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/heath)",base00:"#1b181b",base01:"#292329",base02:"#695d69",base03:"#776977",base04:"#9e8f9e",base05:"#ab9bab",base06:"#d8cad8",base07:"#f7f3f7",base08:"#ca402b",base09:"#a65926",base0A:"#bb8a35",base0B:"#379a37",base0C:"#159393",base0D:"#516aec",base0E:"#7b59c0",base0F:"#cc33cc"};eT.exports=Hc.default});var nT=g((Vc,rT)=>{"use strict";Vc.__esModule=!0;Vc.default={scheme:"atelier lakeside",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/lakeside/)",base00:"#161b1d",base01:"#1f292e",base02:"#516d7b",base03:"#5a7b8c",base04:"#7195a8",base05:"#7ea2b4",base06:"#c1e4f6",base07:"#ebf8ff",base08:"#d22d72",base09:"#935c25",base0A:"#8a8a0f",base0B:"#568c3b",base0C:"#2d8f6f",base0D:"#257fad",base0E:"#5d5db1",base0F:"#b72dd2"};rT.exports=Vc.default});var iT=g((Gc,oT)=>{"use strict";Gc.__esModule=!0;Gc.default={scheme:"atelier seaside",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/seaside/)",base00:"#131513",base01:"#242924",base02:"#5e6e5e",base03:"#687d68",base04:"#809980",base05:"#8ca68c",base06:"#cfe8cf",base07:"#f0fff0",base08:"#e6193c",base09:"#87711d",base0A:"#c3c322",base0B:"#29a329",base0C:"#1999b3",base0D:"#3d62f5",base0E:"#ad2bee",base0F:"#e619c3"};oT.exports=Gc.default});var sT=g((Kc,aT)=>{"use strict";Kc.__esModule=!0;Kc.default={scheme:"bespin",author:"jan t. sott",base00:"#28211c",base01:"#36312e",base02:"#5e5d5c",base03:"#666666",base04:"#797977",base05:"#8a8986",base06:"#9d9b97",base07:"#baae9e",base08:"#cf6a4c",base09:"#cf7d34",base0A:"#f9ee98",base0B:"#54be0d",base0C:"#afc4db",base0D:"#5ea6ea",base0E:"#9b859d",base0F:"#937121"};aT.exports=Kc.default});var cT=g((Jc,uT)=>{"use strict";Jc.__esModule=!0;Jc.default={scheme:"brewer",author:"timoth\xE9e poisot (http://github.com/tpoisot)",base00:"#0c0d0e",base01:"#2e2f30",base02:"#515253",base03:"#737475",base04:"#959697",base05:"#b7b8b9",base06:"#dadbdc",base07:"#fcfdfe",base08:"#e31a1c",base09:"#e6550d",base0A:"#dca060",base0B:"#31a354",base0C:"#80b1d3",base0D:"#3182bd",base0E:"#756bb1",base0F:"#b15928"};uT.exports=Jc.default});var fT=g((Zc,lT)=>{"use strict";Zc.__esModule=!0;Zc.default={scheme:"bright",author:"chris kempson (http://chriskempson.com)",base00:"#000000",base01:"#303030",base02:"#505050",base03:"#b0b0b0",base04:"#d0d0d0",base05:"#e0e0e0",base06:"#f5f5f5",base07:"#ffffff",base08:"#fb0120",base09:"#fc6d24",base0A:"#fda331",base0B:"#a1c659",base0C:"#76c7b7",base0D:"#6fb3d2",base0E:"#d381c3",base0F:"#be643c"};lT.exports=Zc.default});var dT=g((Yc,pT)=>{"use strict";Yc.__esModule=!0;Yc.default={scheme:"chalk",author:"chris kempson (http://chriskempson.com)",base00:"#151515",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#f5f5f5",base08:"#fb9fb1",base09:"#eda987",base0A:"#ddb26f",base0B:"#acc267",base0C:"#12cfc0",base0D:"#6fc2ef",base0E:"#e1a3ee",base0F:"#deaf8f"};pT.exports=Yc.default});var hT=g((Qc,mT)=>{"use strict";Qc.__esModule=!0;Qc.default={scheme:"codeschool",author:"brettof86",base00:"#232c31",base01:"#1c3657",base02:"#2a343a",base03:"#3f4944",base04:"#84898c",base05:"#9ea7a6",base06:"#a7cfa3",base07:"#b5d8f6",base08:"#2a5491",base09:"#43820d",base0A:"#a03b1e",base0B:"#237986",base0C:"#b02f30",base0D:"#484d79",base0E:"#c59820",base0F:"#c98344"};mT.exports=Qc.default});var yT=g((Xc,gT)=>{"use strict";Xc.__esModule=!0;Xc.default={scheme:"colors",author:"mrmrs (http://clrs.cc)",base00:"#111111",base01:"#333333",base02:"#555555",base03:"#777777",base04:"#999999",base05:"#bbbbbb",base06:"#dddddd",base07:"#ffffff",base08:"#ff4136",base09:"#ff851b",base0A:"#ffdc00",base0B:"#2ecc40",base0C:"#7fdbff",base0D:"#0074d9",base0E:"#b10dc9",base0F:"#85144b"};gT.exports=Xc.default});var bT=g((el,vT)=>{"use strict";el.__esModule=!0;el.default={scheme:"default",author:"chris kempson (http://chriskempson.com)",base00:"#181818",base01:"#282828",base02:"#383838",base03:"#585858",base04:"#b8b8b8",base05:"#d8d8d8",base06:"#e8e8e8",base07:"#f8f8f8",base08:"#ab4642",base09:"#dc9656",base0A:"#f7ca88",base0B:"#a1b56c",base0C:"#86c1b9",base0D:"#7cafc2",base0E:"#ba8baf",base0F:"#a16946"};vT.exports=el.default});var xT=g((tl,wT)=>{"use strict";tl.__esModule=!0;tl.default={scheme:"eighties",author:"chris kempson (http://chriskempson.com)",base00:"#2d2d2d",base01:"#393939",base02:"#515151",base03:"#747369",base04:"#a09f93",base05:"#d3d0c8",base06:"#e8e6df",base07:"#f2f0ec",base08:"#f2777a",base09:"#f99157",base0A:"#ffcc66",base0B:"#99cc99",base0C:"#66cccc",base0D:"#6699cc",base0E:"#cc99cc",base0F:"#d27b53"};wT.exports=tl.default});var ST=g((rl,ET)=>{"use strict";rl.__esModule=!0;rl.default={scheme:"embers",author:"jannik siebert (https://github.com/janniks)",base00:"#16130F",base01:"#2C2620",base02:"#433B32",base03:"#5A5047",base04:"#8A8075",base05:"#A39A90",base06:"#BEB6AE",base07:"#DBD6D1",base08:"#826D57",base09:"#828257",base0A:"#6D8257",base0B:"#57826D",base0C:"#576D82",base0D:"#6D5782",base0E:"#82576D",base0F:"#825757"};ET.exports=rl.default});var _T=g((nl,kT)=>{"use strict";nl.__esModule=!0;nl.default={scheme:"flat",author:"chris kempson (http://chriskempson.com)",base00:"#2C3E50",base01:"#34495E",base02:"#7F8C8D",base03:"#95A5A6",base04:"#BDC3C7",base05:"#e0e0e0",base06:"#f5f5f5",base07:"#ECF0F1",base08:"#E74C3C",base09:"#E67E22",base0A:"#F1C40F",base0B:"#2ECC71",base0C:"#1ABC9C",base0D:"#3498DB",base0E:"#9B59B6",base0F:"#be643c"};kT.exports=nl.default});var AT=g((ol,IT)=>{"use strict";ol.__esModule=!0;ol.default={scheme:"google",author:"seth wright (http://sethawright.com)",base00:"#1d1f21",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"#CC342B",base09:"#F96A38",base0A:"#FBA922",base0B:"#198844",base0C:"#3971ED",base0D:"#3971ED",base0E:"#A36AC7",base0F:"#3971ED"};IT.exports=ol.default});var TT=g((il,CT)=>{"use strict";il.__esModule=!0;il.default={scheme:"grayscale",author:"alexandre gavioli (https://github.com/alexx2/)",base00:"#101010",base01:"#252525",base02:"#464646",base03:"#525252",base04:"#ababab",base05:"#b9b9b9",base06:"#e3e3e3",base07:"#f7f7f7",base08:"#7c7c7c",base09:"#999999",base0A:"#a0a0a0",base0B:"#8e8e8e",base0C:"#868686",base0D:"#686868",base0E:"#747474",base0F:"#5e5e5e"};CT.exports=il.default});var DT=g((al,OT)=>{"use strict";al.__esModule=!0;al.default={scheme:"green screen",author:"chris kempson (http://chriskempson.com)",base00:"#001100",base01:"#003300",base02:"#005500",base03:"#007700",base04:"#009900",base05:"#00bb00",base06:"#00dd00",base07:"#00ff00",base08:"#007700",base09:"#009900",base0A:"#007700",base0B:"#00bb00",base0C:"#005500",base0D:"#009900",base0E:"#00bb00",base0F:"#005500"};OT.exports=al.default});var PT=g((sl,FT)=>{"use strict";sl.__esModule=!0;sl.default={scheme:"harmonic16",author:"jannik siebert (https://github.com/janniks)",base00:"#0b1c2c",base01:"#223b54",base02:"#405c79",base03:"#627e99",base04:"#aabcce",base05:"#cbd6e2",base06:"#e5ebf1",base07:"#f7f9fb",base08:"#bf8b56",base09:"#bfbf56",base0A:"#8bbf56",base0B:"#56bf8b",base0C:"#568bbf",base0D:"#8b56bf",base0E:"#bf568b",base0F:"#bf5656"};FT.exports=sl.default});var RT=g((ul,NT)=>{"use strict";ul.__esModule=!0;ul.default={scheme:"hopscotch",author:"jan t. sott",base00:"#322931",base01:"#433b42",base02:"#5c545b",base03:"#797379",base04:"#989498",base05:"#b9b5b8",base06:"#d5d3d5",base07:"#ffffff",base08:"#dd464c",base09:"#fd8b19",base0A:"#fdcc59",base0B:"#8fc13e",base0C:"#149b93",base0D:"#1290bf",base0E:"#c85e7c",base0F:"#b33508"};NT.exports=ul.default});var qT=g((cl,MT)=>{"use strict";cl.__esModule=!0;cl.default={scheme:"isotope",author:"jan t. sott",base00:"#000000",base01:"#404040",base02:"#606060",base03:"#808080",base04:"#c0c0c0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#ffffff",base08:"#ff0000",base09:"#ff9900",base0A:"#ff0099",base0B:"#33ff00",base0C:"#00ffff",base0D:"#0066ff",base0E:"#cc00ff",base0F:"#3300ff"};MT.exports=cl.default});var LT=g((ll,$T)=>{"use strict";ll.__esModule=!0;ll.default={scheme:"marrakesh",author:"alexandre gavioli (http://github.com/alexx2/)",base00:"#201602",base01:"#302e00",base02:"#5f5b17",base03:"#6c6823",base04:"#86813b",base05:"#948e48",base06:"#ccc37a",base07:"#faf0a5",base08:"#c35359",base09:"#b36144",base0A:"#a88339",base0B:"#18974e",base0C:"#75a738",base0D:"#477ca1",base0E:"#8868b3",base0F:"#b3588e"};$T.exports=ll.default});var BT=g((fl,jT)=>{"use strict";fl.__esModule=!0;fl.default={scheme:"mocha",author:"chris kempson (http://chriskempson.com)",base00:"#3B3228",base01:"#534636",base02:"#645240",base03:"#7e705a",base04:"#b8afad",base05:"#d0c8c6",base06:"#e9e1dd",base07:"#f5eeeb",base08:"#cb6077",base09:"#d28b71",base0A:"#f4bc87",base0B:"#beb55b",base0C:"#7bbda4",base0D:"#8ab3b5",base0E:"#a89bb9",base0F:"#bb9584"};jT.exports=fl.default});var WT=g((pl,zT)=>{"use strict";pl.__esModule=!0;pl.default={scheme:"monokai",author:"wimer hazenberg (http://www.monokai.nl)",base00:"#272822",base01:"#383830",base02:"#49483e",base03:"#75715e",base04:"#a59f85",base05:"#f8f8f2",base06:"#f5f4f1",base07:"#f9f8f5",base08:"#f92672",base09:"#fd971f",base0A:"#f4bf75",base0B:"#a6e22e",base0C:"#a1efe4",base0D:"#66d9ef",base0E:"#ae81ff",base0F:"#cc6633"};zT.exports=pl.default});var HT=g((dl,UT)=>{"use strict";dl.__esModule=!0;dl.default={scheme:"ocean",author:"chris kempson (http://chriskempson.com)",base00:"#2b303b",base01:"#343d46",base02:"#4f5b66",base03:"#65737e",base04:"#a7adba",base05:"#c0c5ce",base06:"#dfe1e8",base07:"#eff1f5",base08:"#bf616a",base09:"#d08770",base0A:"#ebcb8b",base0B:"#a3be8c",base0C:"#96b5b4",base0D:"#8fa1b3",base0E:"#b48ead",base0F:"#ab7967"};UT.exports=dl.default});var GT=g((ml,VT)=>{"use strict";ml.__esModule=!0;ml.default={scheme:"paraiso",author:"jan t. sott",base00:"#2f1e2e",base01:"#41323f",base02:"#4f424c",base03:"#776e71",base04:"#8d8687",base05:"#a39e9b",base06:"#b9b6b0",base07:"#e7e9db",base08:"#ef6155",base09:"#f99b15",base0A:"#fec418",base0B:"#48b685",base0C:"#5bc4bf",base0D:"#06b6ef",base0E:"#815ba4",base0F:"#e96ba8"};VT.exports=ml.default});var JT=g((hl,KT)=>{"use strict";hl.__esModule=!0;hl.default={scheme:"pop",author:"chris kempson (http://chriskempson.com)",base00:"#000000",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#ffffff",base08:"#eb008a",base09:"#f29333",base0A:"#f8ca12",base0B:"#37b349",base0C:"#00aabb",base0D:"#0e5a94",base0E:"#b31e8d",base0F:"#7a2d00"};KT.exports=hl.default});var YT=g((gl,ZT)=>{"use strict";gl.__esModule=!0;gl.default={scheme:"railscasts",author:"ryan bates (http://railscasts.com)",base00:"#2b2b2b",base01:"#272935",base02:"#3a4055",base03:"#5a647e",base04:"#d4cfc9",base05:"#e6e1dc",base06:"#f4f1ed",base07:"#f9f7f3",base08:"#da4939",base09:"#cc7833",base0A:"#ffc66d",base0B:"#a5c261",base0C:"#519f50",base0D:"#6d9cbe",base0E:"#b6b3eb",base0F:"#bc9458"};ZT.exports=gl.default});var XT=g((yl,QT)=>{"use strict";yl.__esModule=!0;yl.default={scheme:"shapeshifter",author:"tyler benziger (http://tybenz.com)",base00:"#000000",base01:"#040404",base02:"#102015",base03:"#343434",base04:"#555555",base05:"#ababab",base06:"#e0e0e0",base07:"#f9f9f9",base08:"#e92f2f",base09:"#e09448",base0A:"#dddd13",base0B:"#0ed839",base0C:"#23edda",base0D:"#3b48e3",base0E:"#f996e2",base0F:"#69542d"};QT.exports=yl.default});var tO=g((vl,eO)=>{"use strict";vl.__esModule=!0;vl.default={scheme:"solarized",author:"ethan schoonover (http://ethanschoonover.com/solarized)",base00:"#002b36",base01:"#073642",base02:"#586e75",base03:"#657b83",base04:"#839496",base05:"#93a1a1",base06:"#eee8d5",base07:"#fdf6e3",base08:"#dc322f",base09:"#cb4b16",base0A:"#b58900",base0B:"#859900",base0C:"#2aa198",base0D:"#268bd2",base0E:"#6c71c4",base0F:"#d33682"};eO.exports=vl.default});var nO=g((bl,rO)=>{"use strict";bl.__esModule=!0;bl.default={scheme:"summerfruit",author:"christopher corley (http://cscorley.github.io/)",base00:"#151515",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#B0B0B0",base05:"#D0D0D0",base06:"#E0E0E0",base07:"#FFFFFF",base08:"#FF0086",base09:"#FD8900",base0A:"#ABA800",base0B:"#00C918",base0C:"#1faaaa",base0D:"#3777E6",base0E:"#AD00A1",base0F:"#cc6633"};rO.exports=bl.default});var iO=g((wl,oO)=>{"use strict";wl.__esModule=!0;wl.default={scheme:"tomorrow",author:"chris kempson (http://chriskempson.com)",base00:"#1d1f21",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"#cc6666",base09:"#de935f",base0A:"#f0c674",base0B:"#b5bd68",base0C:"#8abeb7",base0D:"#81a2be",base0E:"#b294bb",base0F:"#a3685a"};oO.exports=wl.default});var sO=g((xl,aO)=>{"use strict";xl.__esModule=!0;xl.default={scheme:"london tube",author:"jan t. sott",base00:"#231f20",base01:"#1c3f95",base02:"#5a5758",base03:"#737171",base04:"#959ca1",base05:"#d9d8d8",base06:"#e7e7e8",base07:"#ffffff",base08:"#ee2e24",base09:"#f386a1",base0A:"#ffd204",base0B:"#00853e",base0C:"#85cebc",base0D:"#009ddc",base0E:"#98005d",base0F:"#b06110"};aO.exports=xl.default});var cO=g((El,uO)=>{"use strict";El.__esModule=!0;El.default={scheme:"twilight",author:"david hart (http://hart-dev.com)",base00:"#1e1e1e",base01:"#323537",base02:"#464b50",base03:"#5f5a60",base04:"#838184",base05:"#a7a7a7",base06:"#c3c3c3",base07:"#ffffff",base08:"#cf6a4c",base09:"#cda869",base0A:"#f9ee98",base0B:"#8f9d6a",base0C:"#afc4db",base0D:"#7587a6",base0E:"#9b859d",base0F:"#9b703f"};uO.exports=El.default});var lO=g(se=>{"use strict";se.__esModule=!0;function ce(e){return e&&e.__esModule?e.default:e}var w7=HC();se.threezerotwofour=ce(w7);var x7=GC();se.apathy=ce(x7);var E7=JC();se.ashes=ce(E7);var S7=YC();se.atelierDune=ce(S7);var k7=XC();se.atelierForest=ce(k7);var _7=tT();se.atelierHeath=ce(_7);var I7=nT();se.atelierLakeside=ce(I7);var A7=iT();se.atelierSeaside=ce(A7);var C7=sT();se.bespin=ce(C7);var T7=cT();se.brewer=ce(T7);var O7=fT();se.bright=ce(O7);var D7=dT();se.chalk=ce(D7);var F7=hT();se.codeschool=ce(F7);var P7=yT();se.colors=ce(P7);var N7=bT();se.default=ce(N7);var R7=xT();se.eighties=ce(R7);var M7=ST();se.embers=ce(M7);var q7=_T();se.flat=ce(q7);var $7=AT();se.google=ce($7);var L7=TT();se.grayscale=ce(L7);var j7=DT();se.greenscreen=ce(j7);var B7=PT();se.harmonic=ce(B7);var z7=RT();se.hopscotch=ce(z7);var W7=qT();se.isotope=ce(W7);var U7=LT();se.marrakesh=ce(U7);var H7=BT();se.mocha=ce(H7);var V7=WT();se.monokai=ce(V7);var G7=HT();se.ocean=ce(G7);var K7=GT();se.paraiso=ce(K7);var J7=JT();se.pop=ce(J7);var Z7=YT();se.railscasts=ce(Z7);var Y7=XT();se.shapeshifter=ce(Y7);var Q7=tO();se.solarized=ce(Q7);var X7=nO();se.summerfruit=ce(X7);var eW=iO();se.tomorrow=ce(eW);var tW=sO();se.tube=ce(tW);var rW=cO();se.twilight=ce(rW)});var pO=g((Ige,fO)=>{"use strict";fO.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var mO=g((Age,dO)=>{dO.exports=function(t){return!t||typeof t=="string"?!1:t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&t.constructor.name!=="String")}});var yO=g((Cge,gO)=>{"use strict";var nW=mO(),oW=Array.prototype.concat,iW=Array.prototype.slice,hO=gO.exports=function(t){for(var r=[],n=0,o=t.length;n<o;n++){var i=t[n];nW(i)?r=oW.call(r,iW.call(i)):r.push(i)}return r};hO.wrap=function(e){return function(){return e(hO(arguments))}}});var xO=g((Tge,wO)=>{var Ka=pO(),Ja=yO(),vO=Object.hasOwnProperty,bO=Object.create(null);for(Sl in Ka)vO.call(Ka,Sl)&&(bO[Ka[Sl]]=Sl);var Sl,wt=wO.exports={to:{},get:{}};wt.get=function(e){var t=e.substring(0,3).toLowerCase(),r,n;switch(t){case"hsl":r=wt.get.hsl(e),n="hsl";break;case"hwb":r=wt.get.hwb(e),n="hwb";break;default:r=wt.get.rgb(e),n="rgb";break}return r?{model:n,value:r}:null};wt.get.rgb=function(e){if(!e)return null;var t=/^#([a-f0-9]{3,4})$/i,r=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,n=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,o=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,i=/^(\w+)$/,a=[0,0,0,1],s,u,l;if(s=e.match(r)){for(l=s[2],s=s[1],u=0;u<3;u++){var c=u*2;a[u]=parseInt(s.slice(c,c+2),16)}l&&(a[3]=parseInt(l,16)/255)}else if(s=e.match(t)){for(s=s[1],l=s[3],u=0;u<3;u++)a[u]=parseInt(s[u]+s[u],16);l&&(a[3]=parseInt(l+l,16)/255)}else if(s=e.match(n)){for(u=0;u<3;u++)a[u]=parseInt(s[u+1],0);s[4]&&(s[5]?a[3]=parseFloat(s[4])*.01:a[3]=parseFloat(s[4]))}else if(s=e.match(o)){for(u=0;u<3;u++)a[u]=Math.round(parseFloat(s[u+1])*2.55);s[4]&&(s[5]?a[3]=parseFloat(s[4])*.01:a[3]=parseFloat(s[4]))}else return(s=e.match(i))?s[1]==="transparent"?[0,0,0,0]:vO.call(Ka,s[1])?(a=Ka[s[1]],a[3]=1,a):null:null;for(u=0;u<3;u++)a[u]=Zr(a[u],0,255);return a[3]=Zr(a[3],0,1),a};wt.get.hsl=function(e){if(!e)return null;var t=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=e.match(t);if(r){var n=parseFloat(r[4]),o=(parseFloat(r[1])%360+360)%360,i=Zr(parseFloat(r[2]),0,100),a=Zr(parseFloat(r[3]),0,100),s=Zr(isNaN(n)?1:n,0,1);return[o,i,a,s]}return null};wt.get.hwb=function(e){if(!e)return null;var t=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=e.match(t);if(r){var n=parseFloat(r[4]),o=(parseFloat(r[1])%360+360)%360,i=Zr(parseFloat(r[2]),0,100),a=Zr(parseFloat(r[3]),0,100),s=Zr(isNaN(n)?1:n,0,1);return[o,i,a,s]}return null};wt.to.hex=function(){var e=Ja(arguments);return"#"+kl(e[0])+kl(e[1])+kl(e[2])+(e[3]<1?kl(Math.round(e[3]*255)):"")};wt.to.rgb=function(){var e=Ja(arguments);return e.length<4||e[3]===1?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"};wt.to.rgb.percent=function(){var e=Ja(arguments),t=Math.round(e[0]/255*100),r=Math.round(e[1]/255*100),n=Math.round(e[2]/255*100);return e.length<4||e[3]===1?"rgb("+t+"%, "+r+"%, "+n+"%)":"rgba("+t+"%, "+r+"%, "+n+"%, "+e[3]+")"};wt.to.hsl=function(){var e=Ja(arguments);return e.length<4||e[3]===1?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"};wt.to.hwb=function(){var e=Ja(arguments),t="";return e.length>=4&&e[3]!==1&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"};wt.to.keyword=function(e){return bO[e.slice(0,3)]};function Zr(e,t,r){return Math.min(Math.max(t,e),r)}function kl(e){var t=Math.round(e).toString(16).toUpperCase();return t.length<2?"0"+t:t}});var SO=g((Oge,EO)=>{"use strict";EO.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var sh=g((Dge,AO)=>{var $n=SO(),IO={};for(_l in $n)$n.hasOwnProperty(_l)&&(IO[$n[_l]]=_l);var _l,U=AO.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(Xe in U)if(U.hasOwnProperty(Xe)){if(!("channels"in U[Xe]))throw new Error("missing channels property: "+Xe);if(!("labels"in U[Xe]))throw new Error("missing channel labels property: "+Xe);if(U[Xe].labels.length!==U[Xe].channels)throw new Error("channel and label counts mismatch: "+Xe);kO=U[Xe].channels,_O=U[Xe].labels,delete U[Xe].channels,delete U[Xe].labels,Object.defineProperty(U[Xe],"channels",{value:kO}),Object.defineProperty(U[Xe],"labels",{value:_O})}var kO,_O,Xe;U.rgb.hsl=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,o=Math.min(t,r,n),i=Math.max(t,r,n),a=i-o,s,u,l;return i===o?s=0:t===i?s=(r-n)/a:r===i?s=2+(n-t)/a:n===i&&(s=4+(t-r)/a),s=Math.min(s*60,360),s<0&&(s+=360),l=(o+i)/2,i===o?u=0:l<=.5?u=a/(i+o):u=a/(2-i-o),[s,u*100,l*100]};U.rgb.hsv=function(e){var t,r,n,o,i,a=e[0]/255,s=e[1]/255,u=e[2]/255,l=Math.max(a,s,u),c=l-Math.min(a,s,u),f=function(p){return(l-p)/6/c+1/2};return c===0?o=i=0:(i=c/l,t=f(a),r=f(s),n=f(u),a===l?o=n-r:s===l?o=1/3+t-n:u===l&&(o=2/3+r-t),o<0?o+=1:o>1&&(o-=1)),[o*360,i*100,l*100]};U.rgb.hwb=function(e){var t=e[0],r=e[1],n=e[2],o=U.rgb.hsl(e)[0],i=1/255*Math.min(t,Math.min(r,n));return n=1-1/255*Math.max(t,Math.max(r,n)),[o,i*100,n*100]};U.rgb.cmyk=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,o,i,a,s;return s=Math.min(1-t,1-r,1-n),o=(1-t-s)/(1-s)||0,i=(1-r-s)/(1-s)||0,a=(1-n-s)/(1-s)||0,[o*100,i*100,a*100,s*100]};function aW(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2)}U.rgb.keyword=function(e){var t=IO[e];if(t)return t;var r=1/0,n;for(var o in $n)if($n.hasOwnProperty(o)){var i=$n[o],a=aW(e,i);a<r&&(r=a,n=o)}return n};U.keyword.rgb=function(e){return $n[e]};U.rgb.xyz=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92;var o=t*.4124+r*.3576+n*.1805,i=t*.2126+r*.7152+n*.0722,a=t*.0193+r*.1192+n*.9505;return[o*100,i*100,a*100]};U.rgb.lab=function(e){var t=U.rgb.xyz(e),r=t[0],n=t[1],o=t[2],i,a,s;return r/=95.047,n/=100,o/=108.883,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,o=o>.008856?Math.pow(o,1/3):7.787*o+16/116,i=116*n-16,a=500*(r-n),s=200*(n-o),[i,a,s]};U.hsl.rgb=function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100,o,i,a,s,u;if(r===0)return u=n*255,[u,u,u];n<.5?i=n*(1+r):i=n+r-n*r,o=2*n-i,s=[0,0,0];for(var l=0;l<3;l++)a=t+1/3*-(l-1),a<0&&a++,a>1&&a--,6*a<1?u=o+(i-o)*6*a:2*a<1?u=i:3*a<2?u=o+(i-o)*(2/3-a)*6:u=o,s[l]=u*255;return s};U.hsl.hsv=function(e){var t=e[0],r=e[1]/100,n=e[2]/100,o=r,i=Math.max(n,.01),a,s;return n*=2,r*=n<=1?n:2-n,o*=i<=1?i:2-i,s=(n+r)/2,a=n===0?2*o/(i+o):2*r/(n+r),[t,a*100,s*100]};U.hsv.rgb=function(e){var t=e[0]/60,r=e[1]/100,n=e[2]/100,o=Math.floor(t)%6,i=t-Math.floor(t),a=255*n*(1-r),s=255*n*(1-r*i),u=255*n*(1-r*(1-i));switch(n*=255,o){case 0:return[n,u,a];case 1:return[s,n,a];case 2:return[a,n,u];case 3:return[a,s,n];case 4:return[u,a,n];case 5:return[n,a,s]}};U.hsv.hsl=function(e){var t=e[0],r=e[1]/100,n=e[2]/100,o=Math.max(n,.01),i,a,s;return s=(2-r)*n,i=(2-r)*o,a=r*o,a/=i<=1?i:2-i,a=a||0,s/=2,[t,a*100,s*100]};U.hwb.rgb=function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100,o=r+n,i,a,s,u;o>1&&(r/=o,n/=o),i=Math.floor(6*t),a=1-n,s=6*t-i,i&1&&(s=1-s),u=r+s*(a-r);var l,c,f;switch(i){default:case 6:case 0:l=a,c=u,f=r;break;case 1:l=u,c=a,f=r;break;case 2:l=r,c=a,f=u;break;case 3:l=r,c=u,f=a;break;case 4:l=u,c=r,f=a;break;case 5:l=a,c=r,f=u;break}return[l*255,c*255,f*255]};U.cmyk.rgb=function(e){var t=e[0]/100,r=e[1]/100,n=e[2]/100,o=e[3]/100,i,a,s;return i=1-Math.min(1,t*(1-o)+o),a=1-Math.min(1,r*(1-o)+o),s=1-Math.min(1,n*(1-o)+o),[i*255,a*255,s*255]};U.xyz.rgb=function(e){var t=e[0]/100,r=e[1]/100,n=e[2]/100,o,i,a;return o=t*3.2406+r*-1.5372+n*-.4986,i=t*-.9689+r*1.8758+n*.0415,a=t*.0557+r*-.204+n*1.057,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o*12.92,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a*12.92,o=Math.min(Math.max(0,o),1),i=Math.min(Math.max(0,i),1),a=Math.min(Math.max(0,a),1),[o*255,i*255,a*255]};U.xyz.lab=function(e){var t=e[0],r=e[1],n=e[2],o,i,a;return t/=95.047,r/=100,n/=108.883,t=t>.008856?Math.pow(t,1/3):7.787*t+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,o=116*r-16,i=500*(t-r),a=200*(r-n),[o,i,a]};U.lab.xyz=function(e){var t=e[0],r=e[1],n=e[2],o,i,a;i=(t+16)/116,o=r/500+i,a=i-n/200;var s=Math.pow(i,3),u=Math.pow(o,3),l=Math.pow(a,3);return i=s>.008856?s:(i-16/116)/7.787,o=u>.008856?u:(o-16/116)/7.787,a=l>.008856?l:(a-16/116)/7.787,o*=95.047,i*=100,a*=108.883,[o,i,a]};U.lab.lch=function(e){var t=e[0],r=e[1],n=e[2],o,i,a;return o=Math.atan2(n,r),i=o*360/2/Math.PI,i<0&&(i+=360),a=Math.sqrt(r*r+n*n),[t,a,i]};U.lch.lab=function(e){var t=e[0],r=e[1],n=e[2],o,i,a;return a=n/360*2*Math.PI,o=r*Math.cos(a),i=r*Math.sin(a),[t,o,i]};U.rgb.ansi16=function(e){var t=e[0],r=e[1],n=e[2],o=1 in arguments?arguments[1]:U.rgb.hsv(e)[2];if(o=Math.round(o/50),o===0)return 30;var i=30+(Math.round(n/255)<<2|Math.round(r/255)<<1|Math.round(t/255));return o===2&&(i+=60),i};U.hsv.ansi16=function(e){return U.rgb.ansi16(U.hsv.rgb(e),e[2])};U.rgb.ansi256=function(e){var t=e[0],r=e[1],n=e[2];if(t===r&&r===n)return t<8?16:t>248?231:Math.round((t-8)/247*24)+232;var o=16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5);return o};U.ansi16.rgb=function(e){var t=e%10;if(t===0||t===7)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];var r=(~~(e>50)+1)*.5,n=(t&1)*r*255,o=(t>>1&1)*r*255,i=(t>>2&1)*r*255;return[n,o,i]};U.ansi256.rgb=function(e){if(e>=232){var t=(e-232)*10+8;return[t,t,t]}e-=16;var r,n=Math.floor(e/36)/5*255,o=Math.floor((r=e%36)/6)/5*255,i=r%6/5*255;return[n,o,i]};U.rgb.hex=function(e){var t=((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255),r=t.toString(16).toUpperCase();return"000000".substring(r.length)+r};U.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var r=t[0];t[0].length===3&&(r=r.split("").map(function(s){return s+s}).join(""));var n=parseInt(r,16),o=n>>16&255,i=n>>8&255,a=n&255;return[o,i,a]};U.rgb.hcg=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,o=Math.max(Math.max(t,r),n),i=Math.min(Math.min(t,r),n),a=o-i,s,u;return a<1?s=i/(1-a):s=0,a<=0?u=0:o===t?u=(r-n)/a%6:o===r?u=2+(n-t)/a:u=4+(t-r)/a+4,u/=6,u%=1,[u*360,a*100,s*100]};U.hsl.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=1,o=0;return r<.5?n=2*t*r:n=2*t*(1-r),n<1&&(o=(r-.5*n)/(1-n)),[e[0],n*100,o*100]};U.hsv.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=t*r,o=0;return n<1&&(o=(r-n)/(1-n)),[e[0],n*100,o*100]};U.hcg.rgb=function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100;if(r===0)return[n*255,n*255,n*255];var o=[0,0,0],i=t%1*6,a=i%1,s=1-a,u=0;switch(Math.floor(i)){case 0:o[0]=1,o[1]=a,o[2]=0;break;case 1:o[0]=s,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=a;break;case 3:o[0]=0,o[1]=s,o[2]=1;break;case 4:o[0]=a,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=s}return u=(1-r)*n,[(r*o[0]+u)*255,(r*o[1]+u)*255,(r*o[2]+u)*255]};U.hcg.hsv=function(e){var t=e[1]/100,r=e[2]/100,n=t+r*(1-t),o=0;return n>0&&(o=t/n),[e[0],o*100,n*100]};U.hcg.hsl=function(e){var t=e[1]/100,r=e[2]/100,n=r*(1-t)+.5*t,o=0;return n>0&&n<.5?o=t/(2*n):n>=.5&&n<1&&(o=t/(2*(1-n))),[e[0],o*100,n*100]};U.hcg.hwb=function(e){var t=e[1]/100,r=e[2]/100,n=t+r*(1-t);return[e[0],(n-t)*100,(1-n)*100]};U.hwb.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=1-r,o=n-t,i=0;return o<1&&(i=(n-o)/(1-o)),[e[0],o*100,i*100]};U.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};U.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};U.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};U.gray.hsl=U.gray.hsv=function(e){return[0,0,e[0]]};U.gray.hwb=function(e){return[0,100,e[0]]};U.gray.cmyk=function(e){return[0,0,0,e[0]]};U.gray.lab=function(e){return[e[0],0,0]};U.gray.hex=function(e){var t=Math.round(e[0]/100*255)&255,r=(t<<16)+(t<<8)+t,n=r.toString(16).toUpperCase();return"000000".substring(n.length)+n};U.rgb.gray=function(e){var t=(e[0]+e[1]+e[2])/3;return[t/255*100]}});var TO=g((Fge,CO)=>{var Il=sh();function sW(){for(var e={},t=Object.keys(Il),r=t.length,n=0;n<r;n++)e[t[n]]={distance:-1,parent:null};return e}function uW(e){var t=sW(),r=[e];for(t[e].distance=0;r.length;)for(var n=r.pop(),o=Object.keys(Il[n]),i=o.length,a=0;a<i;a++){var s=o[a],u=t[s];u.distance===-1&&(u.distance=t[n].distance+1,u.parent=n,r.unshift(s))}return t}function cW(e,t){return function(r){return t(e(r))}}function lW(e,t){for(var r=[t[e].parent,e],n=Il[t[e].parent][e],o=t[e].parent;t[o].parent;)r.unshift(t[o].parent),n=cW(Il[t[o].parent][o],n),o=t[o].parent;return n.conversion=r,n}CO.exports=function(e){for(var t=uW(e),r={},n=Object.keys(t),o=n.length,i=0;i<o;i++){var a=n[i],s=t[a];s.parent!==null&&(r[a]=lW(a,t))}return r}});var DO=g((Pge,OO)=>{var uh=sh(),fW=TO(),qo={},pW=Object.keys(uh);function dW(e){var t=function(r){return r==null?r:(arguments.length>1&&(r=Array.prototype.slice.call(arguments)),e(r))};return"conversion"in e&&(t.conversion=e.conversion),t}function mW(e){var t=function(r){if(r==null)return r;arguments.length>1&&(r=Array.prototype.slice.call(arguments));var n=e(r);if(typeof n=="object")for(var o=n.length,i=0;i<o;i++)n[i]=Math.round(n[i]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}pW.forEach(function(e){qo[e]={},Object.defineProperty(qo[e],"channels",{value:uh[e].channels}),Object.defineProperty(qo[e],"labels",{value:uh[e].labels});var t=fW(e),r=Object.keys(t);r.forEach(function(n){var o=t[n];qo[e][n]=mW(o),qo[e][n].raw=dW(o)})});OO.exports=qo});var NO=g((Nge,PO)=>{"use strict";var Za=xO(),xt=DO(),fh=[].slice,FO=["keyword","gray","hex"],ch={};Object.keys(xt).forEach(function(e){ch[fh.call(xt[e].labels).sort().join("")]=e});var Al={};function ze(e,t){if(!(this instanceof ze))return new ze(e,t);if(t&&t in FO&&(t=null),t&&!(t in xt))throw new Error("Unknown model: "+t);var r,n;if(e==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof ze)this.model=e.model,this.color=e.color.slice(),this.valpha=e.valpha;else if(typeof e=="string"){var o=Za.get(e);if(o===null)throw new Error("Unable to parse color from string: "+e);this.model=o.model,n=xt[this.model].channels,this.color=o.value.slice(0,n),this.valpha=typeof o.value[n]=="number"?o.value[n]:1}else if(e.length){this.model=t||"rgb",n=xt[this.model].channels;var i=fh.call(e,0,n);this.color=lh(i,n),this.valpha=typeof e[n]=="number"?e[n]:1}else if(typeof e=="number")e&=16777215,this.model="rgb",this.color=[e>>16&255,e>>8&255,e&255],this.valpha=1;else{this.valpha=1;var a=Object.keys(e);"alpha"in e&&(a.splice(a.indexOf("alpha"),1),this.valpha=typeof e.alpha=="number"?e.alpha:0);var s=a.sort().join("");if(!(s in ch))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=ch[s];var u=xt[this.model].labels,l=[];for(r=0;r<u.length;r++)l.push(e[u[r]]);this.color=lh(l)}if(Al[this.model])for(n=xt[this.model].channels,r=0;r<n;r++){var c=Al[this.model][r];c&&(this.color[r]=c(this.color[r]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}ze.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(e){var t=this.model in Za.to?this:this.rgb();t=t.round(typeof e=="number"?e:1);var r=t.valpha===1?t.color:t.color.concat(this.valpha);return Za.to[t.model](r)},percentString:function(e){var t=this.rgb().round(typeof e=="number"?e:1),r=t.valpha===1?t.color:t.color.concat(this.valpha);return Za.to.rgb.percent(r)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var e={},t=xt[this.model].channels,r=xt[this.model].labels,n=0;n<t;n++)e[r[n]]=this.color[n];return this.valpha!==1&&(e.alpha=this.valpha),e},unitArray:function(){var e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,this.valpha!==1&&e.push(this.valpha),e},unitObject:function(){var e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,this.valpha!==1&&(e.alpha=this.valpha),e},round:function(e){return e=Math.max(e||0,0),new ze(this.color.map(gW(e)).concat(this.valpha),this.model)},alpha:function(e){return arguments.length?new ze(this.color.concat(Math.max(0,Math.min(1,e))),this.model):this.valpha},red:ke("rgb",0,Fe(255)),green:ke("rgb",1,Fe(255)),blue:ke("rgb",2,Fe(255)),hue:ke(["hsl","hsv","hsl","hwb","hcg"],0,function(e){return(e%360+360)%360}),saturationl:ke("hsl",1,Fe(100)),lightness:ke("hsl",2,Fe(100)),saturationv:ke("hsv",1,Fe(100)),value:ke("hsv",2,Fe(100)),chroma:ke("hcg",1,Fe(100)),gray:ke("hcg",2,Fe(100)),white:ke("hwb",1,Fe(100)),wblack:ke("hwb",2,Fe(100)),cyan:ke("cmyk",0,Fe(100)),magenta:ke("cmyk",1,Fe(100)),yellow:ke("cmyk",2,Fe(100)),black:ke("cmyk",3,Fe(100)),x:ke("xyz",0,Fe(100)),y:ke("xyz",1,Fe(100)),z:ke("xyz",2,Fe(100)),l:ke("lab",0,Fe(100)),a:ke("lab",1),b:ke("lab",2),keyword:function(e){return arguments.length?new ze(e):xt[this.model].keyword(this.color)},hex:function(e){return arguments.length?new ze(e):Za.to.hex(this.rgb().round().color)},rgbNumber:function(){var e=this.rgb().color;return(e[0]&255)<<16|(e[1]&255)<<8|e[2]&255},luminosity:function(){for(var e=this.rgb().color,t=[],r=0;r<e.length;r++){var n=e[r]/255;t[r]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return .2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),r=e.luminosity();return t>r?(t+.05)/(r+.05):(r+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},isDark:function(){var e=this.rgb().color,t=(e[0]*299+e[1]*587+e[2]*114)/1e3;return t<128},isLight:function(){return!this.isDark()},negate:function(){for(var e=this.rgb(),t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten:function(e){var t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken:function(e){var t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate:function(e){var t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate:function(e){var t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten:function(e){var t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken:function(e){var t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale:function(){var e=this.rgb().color,t=e[0]*.3+e[1]*.59+e[2]*.11;return ze.rgb(t,t,t)},fade:function(e){return this.alpha(this.valpha-this.valpha*e)},opaquer:function(e){return this.alpha(this.valpha+this.valpha*e)},rotate:function(e){var t=this.hsl(),r=t.color[0];return r=(r+e)%360,r=r<0?360+r:r,t.color[0]=r,t},mix:function(e,t){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);var r=e.rgb(),n=this.rgb(),o=t===void 0?.5:t,i=2*o-1,a=r.alpha()-n.alpha(),s=((i*a===-1?i:(i+a)/(1+i*a))+1)/2,u=1-s;return ze.rgb(s*r.red()+u*n.red(),s*r.green()+u*n.green(),s*r.blue()+u*n.blue(),r.alpha()*o+n.alpha()*(1-o))}};Object.keys(xt).forEach(function(e){if(FO.indexOf(e)===-1){var t=xt[e].channels;ze.prototype[e]=function(){if(this.model===e)return new ze(this);if(arguments.length)return new ze(arguments,e);var r=typeof arguments[t]=="number"?t:this.valpha;return new ze(yW(xt[this.model][e].raw(this.color)).concat(r),e)},ze[e]=function(r){return typeof r=="number"&&(r=lh(fh.call(arguments),t)),new ze(r,e)}}});function hW(e,t){return Number(e.toFixed(t))}function gW(e){return function(t){return hW(t,e)}}function ke(e,t,r){return e=Array.isArray(e)?e:[e],e.forEach(function(n){(Al[n]||(Al[n]=[]))[t]=r}),e=e[0],function(n){var o;return arguments.length?(r&&(n=r(n)),o=this[e](),o.color[t]=n,o):(o=this[e]().color[t],r&&(o=r(o)),o)}}function Fe(e){return function(t){return Math.max(0,Math.min(e,t))}}function yW(e){return Array.isArray(e)?e:[e]}function lh(e,t){for(var r=0;r<t;r++)typeof e[r]!="number"&&(e[r]=0);return e}PO.exports=ze});var XO=g((Rge,QO)=>{var vW="Expected a function",RO="__lodash_placeholder__",jn=1,Tl=2,bW=4,Ln=8,Ya=16,$o=32,Qa=64,zO=128,wW=256,WO=512,MO=1/0,xW=9007199254740991,EW=17976931348623157e292,qO=0/0,SW=[["ary",zO],["bind",jn],["bindKey",Tl],["curry",Ln],["curryRight",Ya],["flip",WO],["partial",$o],["partialRight",Qa],["rearg",wW]],kW="[object Function]",_W="[object GeneratorFunction]",IW="[object Symbol]",AW=/[\\^$.*+?()[\]{}|]/g,CW=/^\s+|\s+$/g,TW=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,OW=/\{\n\/\* \[wrapped with (.+)\] \*/,DW=/,? & /,FW=/^[-+]0x[0-9a-f]+$/i,PW=/^0b[01]+$/i,NW=/^\[object .+?Constructor\]$/,RW=/^0o[0-7]+$/i,MW=/^(?:0|[1-9]\d*)$/,qW=parseInt,$W=typeof global=="object"&&global&&global.Object===Object&&global,LW=typeof self=="object"&&self&&self.Object===Object&&self,es=$W||LW||Function("return this")();function UO(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function jW(e,t){for(var r=-1,n=e?e.length:0;++r<n&&t(e[r],r,e)!==!1;);return e}function BW(e,t){var r=e?e.length:0;return!!r&&WW(e,t,0)>-1}function zW(e,t,r,n){for(var o=e.length,i=r+(n?1:-1);n?i--:++i<o;)if(t(e[i],i,e))return i;return-1}function WW(e,t,r){if(t!==t)return zW(e,UW,r);for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}function UW(e){return e!==e}function HW(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&n++;return n}function VW(e,t){return e?.[t]}function GW(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function HO(e,t){for(var r=-1,n=e.length,o=0,i=[];++r<n;){var a=e[r];(a===t||a===RO)&&(e[r]=RO,i[o++]=r)}return i}var KW=Function.prototype,VO=Object.prototype,ph=es["__core-js_shared__"],$O=function(){var e=/[^.]+$/.exec(ph&&ph.keys&&ph.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),GO=KW.toString,JW=VO.hasOwnProperty,KO=VO.toString,ZW=RegExp("^"+GO.call(JW).replace(AW,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),YW=Object.create,Cl=Math.max,QW=Math.min,LO=function(){var e=jO(Object,"defineProperty"),t=jO.name;return t&&t.length>2?e:void 0}();function XW(e){return Lo(e)?YW(e):{}}function eU(e){if(!Lo(e)||fU(e))return!1;var t=hU(e)||GW(e)?ZW:NW;return t.test(dU(e))}function tU(e,t,r,n){for(var o=-1,i=e.length,a=r.length,s=-1,u=t.length,l=Cl(i-a,0),c=Array(u+l),f=!n;++s<u;)c[s]=t[s];for(;++o<a;)(f||o<i)&&(c[r[o]]=e[o]);for(;l--;)c[s++]=e[o++];return c}function rU(e,t,r,n){for(var o=-1,i=e.length,a=-1,s=r.length,u=-1,l=t.length,c=Cl(i-s,0),f=Array(c+l),p=!n;++o<c;)f[o]=e[o];for(var d=o;++u<l;)f[d+u]=t[u];for(;++a<s;)(p||o<i)&&(f[d+r[a]]=e[o++]);return f}function nU(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function oU(e,t,r){var n=t&jn,o=Xa(e);function i(){var a=this&&this!==es&&this instanceof i?o:e;return a.apply(n?r:this,arguments)}return i}function Xa(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=XW(e.prototype),n=e.apply(r,t);return Lo(n)?n:r}}function iU(e,t,r){var n=Xa(e);function o(){for(var i=arguments.length,a=Array(i),s=i,u=ZO(o);s--;)a[s]=arguments[s];var l=i<3&&a[0]!==u&&a[i-1]!==u?[]:HO(a,u);if(i-=l.length,i<r)return JO(e,t,dh,o.placeholder,void 0,a,l,void 0,void 0,r-i);var c=this&&this!==es&&this instanceof o?n:e;return UO(c,this,a)}return o}function dh(e,t,r,n,o,i,a,s,u,l){var c=t&zO,f=t&jn,p=t&Tl,d=t&(Ln|Ya),h=t&WO,y=p?void 0:Xa(e);function v(){for(var w=arguments.length,S=Array(w),T=w;T--;)S[T]=arguments[T];if(d)var M=ZO(v),B=HW(S,M);if(n&&(S=tU(S,n,o,d)),i&&(S=rU(S,i,a,d)),w-=B,d&&w<l){var Q=HO(S,M);return JO(e,t,dh,v.placeholder,r,S,Q,s,u,l-w)}var X=f?r:this,G=p?X[e]:e;return w=S.length,s?S=pU(S,s):h&&w>1&&S.reverse(),c&&u<w&&(S.length=u),this&&this!==es&&this instanceof v&&(G=y||Xa(G)),G.apply(X,S)}return v}function aU(e,t,r,n){var o=t&jn,i=Xa(e);function a(){for(var s=-1,u=arguments.length,l=-1,c=n.length,f=Array(c+u),p=this&&this!==es&&this instanceof a?i:e;++l<c;)f[l]=n[l];for(;u--;)f[l++]=arguments[++s];return UO(p,o?r:this,f)}return a}function JO(e,t,r,n,o,i,a,s,u,l){var c=t&Ln,f=c?a:void 0,p=c?void 0:a,d=c?i:void 0,h=c?void 0:i;t|=c?$o:Qa,t&=~(c?Qa:$o),t&bW||(t&=~(jn|Tl));var y=r(e,t,o,d,f,h,p,s,u,l);return y.placeholder=n,YO(y,e,t)}function sU(e,t,r,n,o,i,a,s){var u=t&Tl;if(!u&&typeof e!="function")throw new TypeError(vW);var l=n?n.length:0;if(l||(t&=~($o|Qa),n=o=void 0),a=a===void 0?a:Cl(BO(a),0),s=s===void 0?s:BO(s),l-=o?o.length:0,t&Qa){var c=n,f=o;n=o=void 0}var p=[e,t,r,n,o,c,f,i,a,s];if(e=p[0],t=p[1],r=p[2],n=p[3],o=p[4],s=p[9]=p[9]==null?u?0:e.length:Cl(p[9]-l,0),!s&&t&(Ln|Ya)&&(t&=~(Ln|Ya)),!t||t==jn)var d=oU(e,t,r);else t==Ln||t==Ya?d=iU(e,t,s):(t==$o||t==(jn|$o))&&!o.length?d=aU(e,t,r,n):d=dh.apply(void 0,p);return YO(d,e,t)}function ZO(e){var t=e;return t.placeholder}function jO(e,t){var r=VW(e,t);return eU(r)?r:void 0}function uU(e){var t=e.match(OW);return t?t[1].split(DW):[]}function cU(e,t){var r=t.length,n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(TW,`{
/* [wrapped with `+t+`] */
`)}function lU(e,t){return t=t??xW,!!t&&(typeof e=="number"||MW.test(e))&&e>-1&&e%1==0&&e<t}function fU(e){return!!$O&&$O in e}function pU(e,t){for(var r=e.length,n=QW(t.length,r),o=nU(e);n--;){var i=t[n];e[n]=lU(i,r)?o[i]:void 0}return e}var YO=LO?function(e,t,r){var n=t+"";return LO(e,"toString",{configurable:!0,enumerable:!1,value:wU(cU(n,mU(uU(n),r)))})}:xU;function dU(e){if(e!=null){try{return GO.call(e)}catch{}try{return e+""}catch{}}return""}function mU(e,t){return jW(SW,function(r){var n="_."+r[0];t&r[1]&&!BW(e,n)&&e.push(n)}),e.sort()}function mh(e,t,r){t=r?void 0:t;var n=sU(e,Ln,void 0,void 0,void 0,void 0,void 0,t);return n.placeholder=mh.placeholder,n}function hU(e){var t=Lo(e)?KO.call(e):"";return t==kW||t==_W}function Lo(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function gU(e){return!!e&&typeof e=="object"}function yU(e){return typeof e=="symbol"||gU(e)&&KO.call(e)==IW}function vU(e){if(!e)return e===0?e:0;if(e=bU(e),e===MO||e===-MO){var t=e<0?-1:1;return t*EW}return e===e?e:0}function BO(e){var t=vU(e),r=t%1;return t===t?r?t-r:t:0}function bU(e){if(typeof e=="number")return e;if(yU(e))return qO;if(Lo(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Lo(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(CW,"");var r=PW.test(e);return r||RW.test(e)?qW(e.slice(2),r?2:8):FW.test(e)?qO:+e}function wU(e){return function(){return e}}function xU(e){return e}mh.placeholder={};QO.exports=mh});var yV={};cg(yV,{default:()=>le});module.exports=af(yV);var ni=require("obsidian");var pg=require("obsidian"),Vn=class extends pg.Component{async load(){if(!this._loaded){this._loaded=!0,await this.onload();for(var t=0,r=this._children.slice();t<r.length;t++)await r[t].load()}}async unload(){if(this._loaded){this._loaded=!1;for(var t=this._children,r=this._events;t.length>0;)await t.pop().unload();for(;r.length>0;)r.pop()();await this.onunload()}}async addChild(t){return this._children.push(t),this._loaded&&await t.load(),t}async removeChild(t){var r=this._children,n=r.indexOf(t);return n!==-1&&(r.splice(n,1),await t.unload()),t}};var sf=Symbol.for("v1.to-use.peak-dev.org"),uf=Symbol.for("v1.factory.to-use.peak-dev.org"),Gn,ri,$e=function(){return Object.defineProperties(e(),{this:{get(){if(Gn)return Gn;throw new TypeError("No current context")}},me:{value:sf},factory:{value:uf}});function e(o){let i=new Map;i.prev=o;let a=Object.assign(o?u=>{let l=i.get(u);if(!l){for(let d=i.prev;d;d=d.prev)if(l=d.get(u)){l=Object.assign(Object.assign({},l),{s:l.s||1});break}l=l||{s:2,v:r},i.set(u,l)}let c,f,p;for(;;)switch(l.s){case 0:return Gn===a&&ri&&ri.push(u),l.v;case 1:if(c=l.d,!c||s(()=>c.k.every(d=>a(d)===c.c(d)))){l.s=0;break}l.v=c.f;case 2:l.s=4;try{t(i,u,0,s(f=l.v,u,p=[])),p.length&&(l.d={c:a,f,k:p});break}catch(d){l.s=3,l.v=d,l.d=null}case 3:throw l.v;case 4:throw new Error(`Factory ${String(l.v)} didn't resolve ${String(u)}`)}}:u=>$e.this(u),{def(u,l){return t(i,u,2,l),a},set(u,l){return t(i,u,1,l),a},fork(u){let l=e(i);return u!=null?l(u):l}});return o?a.use=a:a;function s(u,l,c){let f=Gn,p=ri;try{return Gn=a,ri=c,u(l)}finally{Gn=f,ri=p}}}function t(o,i,a,s){if(o.has(i)){let u=o.get(i);if(!u.s)throw new Error(`Already read: ${String(i)}`);u.s=a,u.v=s,u.d=null}else o.set(i,{s:a,v:s})}function r(o){if(typeof o[sf]=="function")return o[sf](o);if(n(o))return typeof o.prototype[uf]=="function"?o.prototype[uf]():new o;throw new ReferenceError(`No config for ${String(o)}`)}function n(o){return typeof o=="function"&&o.prototype!==void 0&&(Object.getPrototypeOf(o.prototype)!==Object.prototype||Object.getOwnPropertyNames(o.prototype).length>1||o.toString().startsWith("class"))}}();$e.def(ni.Plugin,()=>{throw new Error("Plugin not created yet")});var fe=class extends Vn{constructor(){super(...arguments),this.use=$e.service(this)}};$e.service=function(e){return $e(ps).addChild(e),$e.this};$e.plugin=function(e){let t=$e.fork().set(ni.Plugin,e).set(e.constructor,e);return e.addChild(t.use(ps)),t};var ps=class extends Vn{constructor(){super(...arguments),this.children=new Set([this])}onload(){this.loaded=!0}onunload(){this.loaded=!1,this.children.clear()}async addChild(t){this.children.has(t)||(this.children.add(t),this.loaded?super.addChild(t):await super.addChild(t))}};function ds(e,t){e._loaded&&e.removeChild(t)}function dg(e,t){let r=new ni.Component;r.onload=()=>{ds(e,r),t()},e.addChild(r)}function et(e,t){let r=Object.keys(t).map(n=>KF(e,n,t[n]));return r.length===1?r[0]:function(){r.forEach(n=>n())}}function KF(e,t,r){let n=e[t],o=e.hasOwnProperty(t),i=r(n);return n&&Object.setPrototypeOf(i,n),Object.setPrototypeOf(a,i),e[t]=a,s;function a(...u){return i===n&&e[t]===a&&s(),i.apply(this,u)}function s(){e[t]===a&&(o?e[t]=n:delete e[t]),i!==n&&(i=n,Object.setPrototypeOf(a,n||Function))}}var gg=require("obsidian");var mg=require("obsidian");function hg(e){let t=app.workspace;switch(e?.getRoot()){case t.rootSplit:case t.floatingSplit:case t.leftSplit:case t.rightSplit:return!0;default:return!1}}var cf,Kn=(cf=window.queueMicrotask)!==null&&cf!==void 0?cf:(e=>t=>e.then(t))(Promise.resolve());var lf=2,zV=Symbol.for(`v${lf}.layout-storage-events.ophidian.peak-dev.org`);var WV=`ophidian-layout-storage:v${lf}:item-load`,UV=`ophidian-layout-storage:v${lf}:item-save`;var JF=require("obsidian");var vg=require("obsidian");var yg=class extends vg.Component{constructor(t,r){super(),this.use=t,this.container=r,this.win=this.container.win}[$e.factory](){return new ff(this.constructor)}static onload(t){}static onunload(t){}},ff=class extends fe{constructor(t){super(),this.factory=t,this.instances=new Map,this.watching=!1,this.layoutReadyCallbacks=[]}onload(){var t,r;this.registerEvent(app.workspace.on("layout-change",()=>{app.workspace.layoutReady&&this.layoutReadyCallbacks.length&&(this.layoutReadyCallbacks.forEach(Kn),this.layoutReadyCallbacks=[])})),(r=(t=this.factory).onload)===null||r===void 0||r.call(t,this.use)}onLeafChange(t,r){return this.onLayoutReady(()=>t.call(r,app.workspace.activeLeaf)),app.workspace.on("active-leaf-change",n=>{app.workspace.layoutReady&&t.call(r,n)})}onLayoutReady(t){app.workspace.layoutReady?Kn(t):this.layoutReadyCallbacks.push(t)}onunload(){var t,r;(r=(t=this.factory).onunload)===null||r===void 0||r.call(t,this.use)}watch(){if(!this._loaded)dg(this,()=>this.watch());else if(!this.watching){let{workspace:t}=app,r=this;this.watching=!0,this.registerEvent(t.on("window-open",n=>{this.onLayoutReady(()=>this.forContainer(n))})),this.register(et(t,{clearLayout(n){return async function(){try{return await n.call(this)}finally{r.onLayoutReady(()=>r.forAll())}}}})),this.onLayoutReady(()=>this.forAll())}return this}forWindow(t,r){var n;t===void 0&&(t=(n=window.activeWindow)!==null&&n!==void 0?n:window),r===void 0&&(r=!0);let o=QF(t);if(o)return this.forContainer(o,r)}forContainer(t,r=!0){t=t.getContainer();let n=this.instances.get(t);return!n&&r&&(n=new this.factory(this.use,t),n&&(this.instances.set(t,n),this.addChild(n),t.component.addChild(n),n.register(()=>{ds(this,n),ds(t.component,n),this.instances.delete(t)}))),n}forDom(t,r=!0){return this.forWindow(YF(t),r)}forLeaf(t=app.workspace.activeLeaf,r=!0){if(hg(t))return this.forContainer(t.getContainer(),r)}forView(t,r=!0){return this.forLeaf(t.leaf,r)}forAll(t=!0){return ZF().map(r=>this.forContainer(r,t)).filter(r=>r)}};function ZF(){return[app.workspace.rootSplit].concat(app.workspace.floatingSplit.children)}function YF(e){return e.win||(e.ownerDocument||e).defaultView||window}function QF(e){if(e===window)return app.workspace.rootSplit;let{floatingSplit:t}=app.workspace;if(t){for(let r of t.children)if(e===r.win)return r}}var XF=require("obsidian");var eP=require("obsidian");var jF=require("obsidian");var bg=e=>`obsidian-zotero:${e}`;var Et=({key:e,groupID:t,parentItem:r},n=!1)=>{let o=[e];return!n&&r&&o.push(`a${r}`),typeof t=="number"&&o.push(`g${t}`),o.join("")},wg=(e,t,r=!0)=>(n,...o)=>{let i="";for(let a=0;a<n.length;a++)a>0&&(i+=e(o[a-1])),i+=(r?n.raw:n)[a];return t(i)},mf=(e=!0,t)=>wg(r=>r,r=>new RegExp(e?"^"+r+"$":r,t),!0),pf=String.raw`[23456789ABCDEFGHIJKLMNPQRSTUVWXYZ]{8}`,df=String.raw`\d+`,xg=e=>{let t={annotKey:pf,parentKey:pf,groupID:df,page:df};if(e)for(let r in t)t[r]=`(${t[r]})`;return wg(r=>t[r],r=>r)`${"annotKey"}a${"parentKey"}(?:g${"groupID"})?(?:p${"page"})?`},Eg=mf()`${pf}(?:g${df})?`,Sg=mf()`${xg(!0)}`,kg=mf()`(?:${xg(!1)}n?)+`,Jn=(e,t)=>{if(e===null)return null;let r;return typeof e=="number"?r=e:r=parseInt(e,10),Number.isInteger(r)?t?r+1:r:null};var _g=(e,t,{getLogger:r,configure:n})=>{let o=bg(e);return n({appenders:{out:{type:"console"}},categories:{default:{appenders:["out"],level:t},[o]:{appenders:["out"],level:t}}}),r(o)},Ig={ALL:"ALL",TRACE:"TRACE",DEBUG:"DEBUG",INFO:"INFO",WARN:"WARN",ERROR:"ERROR",FATAL:"FATAL",MARK:"MARK",OFF:"OFF"};var Yt=()=>(...e)=>e;var Ag=e=>`better-sqlite3-${e}.node`;var Yw=ae(We(),1),eu=ae(K0(),1);var Vs=e=>{let t=new Blob([e],{type:"text/javascript"});return URL.createObjectURL(t)};var Jw=ae(np(),1);var pp=ae(We(),1),Ni=require("obsidian"),Zw=ae(Y0(),1);var Q0='"use strict";var Hd=Object.create;var $r=Object.defineProperty,Jd=Object.defineProperties,Vd=Object.getOwnPropertyDescriptor,Yd=Object.getOwnPropertyDescriptors,Qd=Object.getOwnPropertyNames,Mr=Object.getOwnPropertySymbols,Zd=Object.getPrototypeOf,oi=Object.prototype.hasOwnProperty,zo=Object.prototype.propertyIsEnumerable;var ii=(e,t,r)=>t in e?$r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,he=(e,t)=>{for(var r in t||(t={}))oi.call(t,r)&&ii(e,r,t[r]);if(Mr)for(var r of Mr(t))zo.call(t,r)&&ii(e,r,t[r]);return e},We=(e,t)=>Jd(e,Yd(t));var St=(e,t)=>{var r={};for(var n in e)oi.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&Mr)for(var n of Mr(e))t.indexOf(n)<0&&zo.call(e,n)&&(r[n]=e[n]);return r};var F=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Xd=(e,t)=>{for(var r in t)$r(e,r,{get:t[r],enumerable:!0})},ep=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Qd(t))!oi.call(e,i)&&i!==r&&$r(e,i,{get:()=>t[i],enumerable:!(n=Vd(t,i))||n.enumerable});return e};var _t=(e,t,r)=>(r=e!=null?Hd(Zd(e)):{},ep(t||!e||!e.__esModule?$r(r,"default",{value:e,enumerable:!0}):r,e));var ee=(e,t,r)=>(ii(e,typeof t!="symbol"?t+"":t,r),r);var Ko=F((exports,module)=>{(function(t,r){typeof exports=="object"&&typeof module=="object"?module.exports=r():typeof define=="function"&&define.amd?define("workerpool",[],r):typeof exports=="object"?exports.workerpool=r():t.workerpool=r()})(typeof self!="undefined"?self:exports,function(){return function(){var __webpack_modules__={162:function(e,t,r){"use strict";r.r(t),r.d(t,{IFrameWorker:function(){return i}});function n(){let o=document.createElement("iframe");return o.width=o.height=o.frameBorder="0",o.classList.add("iframe-worker"),o.style.display="contents",o}class i{constructor(s,a){if(this.scriptText=s,this.onerror=null,this.onmessage=null,this.onmessageerror=null,this.handleMessage=d=>{d.source===this.worker&&(d.stopImmediatePropagation(),this.dispatchEvent(new MessageEvent("message",{data:d.data})),this.onmessage&&this.onmessage(d))},this.handleError=(d,f,h,l,m)=>{if(f===this.scriptText.toString()){let g=new ErrorEvent("error",{message:d,filename:f,lineno:h,colno:l,error:m});this.dispatchEvent(g),this.onerror&&this.onerror(g)}},typeof a!="undefined")throw new TypeError("Options are not supported for iframe workers");let u=new EventTarget;this.addEventListener=u.addEventListener.bind(u),this.removeEventListener=u.removeEventListener.bind(u),this.dispatchEvent=u.dispatchEvent.bind(u),document.body.appendChild(this.iframe=n()),this.worker.document.open(),this.worker.document.write(`<html><body><script>window.postMessage=\n(message, origin) => {\n  parent.postMessage(message, origin || "*")\n};window.importScripts=\n(...urls) => urls.reduce((promise, url) => (\n  promise.then(() => new Promise(resolve => {\n    const script = document.createElement("script")\n    script.src = url\n    script.addEventListener("load", () => resolve())\n    document.body.appendChild(script)\n  }))\n), Promise.resolve());addEventListener("error",ev=>{parent.dispatchEvent(new ErrorEvent("error",{filename:"${s.substring(0,50)}",error:ev.error}))})</script><script type="module">${s}</script></body></html>`),this.worker.document.close(),window.addEventListener("message",this.handleMessage),window.onerror=this.handleError,this.ready=new Promise((d,f)=>{this.worker.onload=d,this.worker.onerror=f})}terminate(){document.body.removeChild(this.iframe),window.removeEventListener("message",this.handleMessage),window.onerror=null}postMessage(s){(async()=>{try{await this.ready}catch(a){}finally{this.worker.dispatchEvent(new MessageEvent("message",{data:s}))}})()}get worker(){return this.iframe.contentWindow}}},799:function(e,t,r){var n=r(446),i=r(518),o=r(722),s=r(393),a=new s;function u(m,g){typeof m=="string"?this.script=m||null:(this.script=null,g=m),this.workers=[],this.tasks=[],g=g||{},this.name=g.name,this.forkArgs=Object.freeze(g.forkArgs||[]),this.forkOpts=Object.freeze(g.forkOpts||{}),this.debugPortStart=g.debugPortStart||43210,this.nodeWorker=g.nodeWorker,this.workerType=g.workerType||g.nodeWorker||"auto",this.maxQueueSize=g.maxQueueSize||1/0,this.onCreateWorker=g.onCreateWorker||function(){return null},this.onTerminateWorker=g.onTerminateWorker||function(){return null},g&&"maxWorkers"in g?(d(g.maxWorkers),this.maxWorkers=g.maxWorkers):this.maxWorkers=Math.max((o.cpus||4)-1,1),g&&"minWorkers"in g&&(g.minWorkers==="max"?this.minWorkers=this.maxWorkers:(f(g.minWorkers),this.minWorkers=g.minWorkers,this.maxWorkers=Math.max(this.minWorkers,this.maxWorkers)),this._ensureMinWorkers()),this._boundNext=this._next.bind(this),this.workerType==="thread"&&i.ensureWorkerThreads()}u.prototype.exec=function(m,g,E){if(g&&!Array.isArray(g))throw new TypeError(\'Array expected as argument "params"\');if(typeof m=="string"){var _=n.defer();if(this.tasks.length>=this.maxQueueSize)throw new Error("Max queue size of "+this.maxQueueSize+" reached");var A=this.tasks,q={method:m,params:g,resolver:_,timeout:null,options:E};A.push(q);var L=_.promise.timeout;return _.promise.timeout=function(V){return A.indexOf(q)!==-1?(q.timeout=V,_.promise):L.call(_.promise,V)},this._next(),_.promise}else{if(typeof m=="function")return this.exec("run",[String(m),g]);throw new TypeError(\'Function or string expected as argument "method"\')}},u.prototype.proxy=function(){if(arguments.length>0)throw new Error("No arguments expected");var m=this;return this.exec("methods").then(function(g){var E={};return g.forEach(function(_){E[_]=function(){return m.exec(_,Array.prototype.slice.call(arguments))}}),E})},u.prototype._next=function(){if(this.tasks.length>0){var m=this._getWorker();if(m){var g=this,E=this.tasks.shift();if(E.resolver.promise.pending){var _=m.exec(E.method,E.params,E.resolver,E.options).then(g._boundNext).catch(function(){if(m.terminated)return g._removeWorker(m)}).then(function(){g._next()});typeof E.timeout=="number"&&_.timeout(E.timeout)}else g._next()}}},u.prototype._getWorker=function(){for(var m=this.workers,g=0;g<m.length;g++){var E=m[g];if(E.busy()===!1)return E}return m.length<this.maxWorkers?(E=this._createWorkerHandler(),m.push(E),E):null},u.prototype._removeWorker=function(m){var g=this;return a.releasePort(m.debugPort),this._removeWorkerFromList(m),this._ensureMinWorkers(),new n(function(E,_){m.terminate(!1,function(A){g.onTerminateWorker({forkArgs:m.forkArgs,forkOpts:m.forkOpts,script:m.script}),A?_(A):E(m)})})},u.prototype._removeWorkerFromList=function(m){var g=this.workers.indexOf(m);g!==-1&&this.workers.splice(g,1)},u.prototype.terminate=function(m,g){var E=this;this.tasks.forEach(function(G){G.resolver.reject(new Error("Pool terminated"))}),this.tasks.length=0;var _=function(V){this._removeWorkerFromList(V)},A=_.bind(this),q=[],L=this.workers.slice();return L.forEach(function(G){var V=G.terminateAndNotify(m,g).then(A).always(function(){E.onTerminateWorker({forkArgs:G.forkArgs,forkOpts:G.forkOpts,script:G.script})});q.push(V)}),n.all(q)},u.prototype.stats=function(){var m=this.workers.length,g=this.workers.filter(function(E){return E.busy()}).length;return{totalWorkers:m,busyWorkers:g,idleWorkers:m-g,pendingTasks:this.tasks.length,activeTasks:g}},u.prototype._ensureMinWorkers=function(){if(this.minWorkers)for(var m=this.workers.length;m<this.minWorkers;m++)this.workers.push(this._createWorkerHandler())},u.prototype._createWorkerHandler=function(){var m=this.onCreateWorker({forkArgs:this.forkArgs,forkOpts:this.forkOpts,script:this.script})||{};return new i(m.script||this.script,{forkArgs:m.forkArgs||this.forkArgs,forkOpts:m.forkOpts||this.forkOpts,debugPort:a.nextAvailableStartingAt(this.debugPortStart),workerType:this.workerType,name:this.name})};function d(m){if(!h(m)||!l(m)||m<1)throw new TypeError("Option maxWorkers must be an integer number >= 1")}function f(m){if(!h(m)||!l(m)||m<0)throw new TypeError("Option minWorkers must be an integer number >= 0")}function h(m){return typeof m=="number"}function l(m){return Math.round(m)==m}e.exports=u},446:function(e){"use strict";function t(o,s){var a=this;if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(typeof o!="function")throw new SyntaxError("Function parameter handler(resolve, reject) missing");var u=[],d=[];this.resolved=!1,this.rejected=!1,this.pending=!0;var f=function(g,E){u.push(g),d.push(E)};this.then=function(m,g){return new t(function(E,_){var A=m?r(m,E,_):E,q=g?r(g,E,_):_;f(A,q)},a)};var h=function(g){return a.resolved=!0,a.rejected=!1,a.pending=!1,u.forEach(function(E){E(g)}),f=function(_,A){_(g)},h=l=function(){},a},l=function(g){return a.resolved=!1,a.rejected=!0,a.pending=!1,d.forEach(function(E){E(g)}),f=function(_,A){A(g)},h=l=function(){},a};this.cancel=function(){return s?s.cancel():l(new n),a},this.timeout=function(m){if(s)s.timeout(m);else{var g=setTimeout(function(){l(new i("Promise timed out after "+m+" ms"))},m);a.always(function(){clearTimeout(g)})}return a},o(function(m){h(m)},function(m){l(m)})}function r(o,s,a){return function(u){try{var d=o(u);d&&typeof d.then=="function"&&typeof d.catch=="function"?d.then(s,a):s(d)}catch(f){a(f)}}}t.prototype.catch=function(o){return this.then(null,o)},t.prototype.always=function(o){return this.then(o,o)},t.all=function(o){return new t(function(s,a){var u=o.length,d=[];u?o.forEach(function(f,h){f.then(function(l){d[h]=l,u--,u==0&&s(d)},function(l){u=0,a(l)})}):s(d)})},t.defer=function(){var o={};return o.promise=new t(function(s,a){o.resolve=s,o.reject=a}),o};function n(o){this.message=o||"promise cancelled",this.stack=new Error().stack}n.prototype=new Error,n.prototype.constructor=Error,n.prototype.name="CancellationError",t.CancellationError=n;function i(o){this.message=o||"timeout exceeded",this.stack=new Error().stack}i.prototype=new Error,i.prototype.constructor=Error,i.prototype.name="TimeoutError",t.TimeoutError=i,e.exports=t},518:function(e,t,r){"use strict";function n(S,T){var b=typeof Symbol!="undefined"&&S[Symbol.iterator]||S["@@iterator"];if(!b){if(Array.isArray(S)||(b=i(S))||T&&S&&typeof S.length=="number"){b&&(S=b);var O=0,k=function(){};return{s:k,n:function(){return O>=S.length?{done:!0}:{done:!1,value:S[O++]}},e:function(z){throw z},f:k}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var W=!0,$=!1,M;return{s:function(){b=b.call(S)},n:function(){var z=b.next();return W=z.done,z},e:function(z){$=!0,M=z},f:function(){try{!W&&b.return!=null&&b.return()}finally{if($)throw M}}}}function i(S,T){if(S){if(typeof S=="string")return o(S,T);var b=Object.prototype.toString.call(S).slice(8,-1);if(b==="Object"&&S.constructor&&(b=S.constructor.name),b==="Map"||b==="Set")return Array.from(S);if(b==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return o(S,T)}}function o(S,T){(T==null||T>S.length)&&(T=S.length);for(var b=0,O=new Array(T);b<T;b++)O[b]=S[b];return O}function s(S){return s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},s(S)}var a=r(446),u=r(722),d=r(781),f=r(162),h=f.IFrameWorker,l="__workerpool-terminate__",m=1e3;function g(){var S=_();if(!S)throw new Error("WorkerPool: workerType = \'thread\' is not supported, Node >= 11.7.0 required");return S}function E(){if(typeof Worker!="function"&&((typeof Worker=="undefined"?"undefined":s(Worker))!=="object"||typeof Worker.prototype.constructor!="function"))throw new Error("WorkerPool: Web Workers not supported")}function _(){try{return d("worker_threads")}catch(S){if(s(S)==="object"&&S!==null&&S.code==="MODULE_NOT_FOUND")return null;throw S}}function A(){if(u.platform==="browser"){if(typeof Blob=="undefined")throw new Error("Blob not supported by the browser");if(!window.URL||typeof window.URL.createObjectURL!="function")throw new Error("URL.createObjectURL not supported by the browser");var S=new Blob([r(710)],{type:"text/javascript"});return window.URL.createObjectURL(S)}else return __dirname+"/worker.js"}function q(S,T){if(T.workerType==="iframe")return L(S,h,T);if(T.workerType==="web")return E(),L(S,Worker,T);if(T.workerType==="thread")return b=g(),G(S,b);if(T.workerType==="process"||!T.workerType)return V(S,R(T),d("child_process"));if(u.platform==="browser")return E(),L(S,Worker);var b=_();return b?G(S,b):V(S,R(T),d("child_process"))}function L(S,T,b){var O=new T(S,b!=null&&b.name?{name:"".concat(b.name,"-").concat(Date.now())}:void 0);return O.isBrowserWorker=!0,O.on=function(k,W){this.addEventListener(k,function($){W($.data)})},O.send=function(k){this.postMessage(k)},O}function G(S,T){var b=new T.Worker(S,{stdout:!1,stderr:!1});return b.isWorkerThread=!0,b.send=function(O){this.postMessage(O)},b.kill=function(){return this.terminate(),!0},b.disconnect=function(){this.terminate()},b}function V(S,T,b){var O=b.fork(S,T.forkArgs,T.forkOpts);return O.isChildProcess=!0,O}function R(S){S=S||{};var T=process.execArgv.join(" "),b=T.indexOf("--inspect")!==-1,O=T.indexOf("--debug-brk")!==-1,k=[];return b&&(k.push("--inspect="+S.debugPort),O&&k.push("--debug-brk")),process.execArgv.forEach(function(W){W.indexOf("--max-old-space-size")>-1&&k.push(W)}),Object.assign({},S,{forkArgs:S.forkArgs,forkOpts:Object.assign({},S.forkOpts,{execArgv:(S.forkOpts&&S.forkOpts.execArgv||[]).concat(k)})})}function K(S){for(var T=new Error(""),b=Object.keys(S),O=0;O<b.length;O++)T[b[O]]=S[b[O]];return T}function B(S,T){var b=this,O=T||{};this.script=S||A(),this.worker=q(this.script,O),this.debugPort=O.debugPort,this.forkOpts=O.forkOpts,this.forkArgs=O.forkArgs,S||(this.worker.ready=!0),this.requestQueue=[],this.worker.on("message",function(M){if(!b.terminated)if(typeof M=="string"&&M==="ready")b.worker.ready=!0,W();else{var U=M.id,z=b.processing[U];z!==void 0&&(M.isEvent?z.options&&typeof z.options.on=="function"&&z.options.on(M.payload):(delete b.processing[U],b.terminating===!0&&b.terminate(),M.error?z.resolver.reject(K(M.error)):z.resolver.resolve(M.result)))}});function k(M){b.terminated=!0;for(var U in b.processing)b.processing[U]!==void 0&&b.processing[U].resolver.reject(M);b.processing=Object.create(null)}function W(){var M=n(b.requestQueue.splice(0)),U;try{for(M.s();!(U=M.n()).done;){var z=U.value;b.worker.send(z)}}catch(J){M.e(J)}finally{M.f()}}var $=this.worker;this.worker.on("error",k),this.worker.on("exit",function(M,U){var z=`Workerpool Worker terminated Unexpectedly\n`;z+="    exitCode: `"+M+"`\\n",z+="    signalCode: `"+U+"`\\n",z+="    workerpool.script: `"+b.script+"`\\n",z+="    spawnArgs: `"+$.spawnargs+"`\\n",z+="    spawnfile: `"+$.spawnfile+"`\\n",z+="    stdout: `"+$.stdout+"`\\n",z+="    stderr: `"+$.stderr+"`\\n",k(new Error(z))}),this.processing=Object.create(null),this.terminating=!1,this.terminated=!1,this.terminationHandler=null,this.lastId=0}B.prototype.methods=function(){return this.exec("methods")},B.prototype.exec=function(S,T,b,O){b||(b=a.defer());var k=++this.lastId;this.processing[k]={id:k,resolver:b,options:O};var W={id:k,method:S,params:T};this.terminated?b.reject(new Error("Worker is terminated")):this.worker.ready?this.worker.send(W):this.requestQueue.push(W);var $=this;return b.promise.catch(function(M){if(M instanceof a.CancellationError||M instanceof a.TimeoutError)return delete $.processing[k],$.terminateAndNotify(!0).then(function(){throw M},function(U){throw U});throw M})},B.prototype.busy=function(){return Object.keys(this.processing).length>0},B.prototype.terminate=function(S,T){var b=this;if(S){for(var O in this.processing)this.processing[O]!==void 0&&this.processing[O].resolver.reject(new Error("Worker terminated"));this.processing=Object.create(null)}if(typeof T=="function"&&(this.terminationHandler=T),this.busy())this.terminating=!0;else{var k=function(M){if(b.terminated=!0,b.worker!=null&&b.worker.removeAllListeners&&b.worker.removeAllListeners("message"),b.worker=null,b.terminating=!1,b.terminationHandler)b.terminationHandler(M,b);else if(M)throw M};if(this.worker)if(typeof this.worker.kill=="function"){if(this.worker.killed){k(new Error("worker already killed!"));return}if(this.worker.isChildProcess){var W=setTimeout(function(){b.worker&&b.worker.kill()},m);this.worker.once("exit",function(){clearTimeout(W),b.worker&&(b.worker.killed=!0),k()}),this.worker.ready?this.worker.send(l):this.requestQueue.push(l)}else this.worker.kill(),this.worker.killed=!0,k();return}else if(typeof this.worker.terminate=="function")this.worker.terminate(),this.worker.killed=!0;else throw new Error("Failed to terminate worker");k()}},B.prototype.terminateAndNotify=function(S,T){var b=a.defer();return T&&(b.promise.timeout=T),this.terminate(S,function(O,k){O?b.reject(O):b.resolve(k)}),b.promise},e.exports=B,e.exports._tryRequireWorkerThreads=_,e.exports._setupProcessWorker=V,e.exports._setupBrowserWorker=L,e.exports._setupWorkerThreadWorker=G,e.exports.ensureWorkerThreads=g},393:function(e){"use strict";var t=65535;e.exports=r;function r(){this.ports=Object.create(null),this.length=0}r.prototype.nextAvailableStartingAt=function(n){for(;this.ports[n]===!0;)n++;if(n>=t)throw new Error("WorkerPool debug port limit reached: "+n+">= "+t);return this.ports[n]=!0,this.length++,n},r.prototype.releasePort=function(n){delete this.ports[n],this.length--}},722:function(e,t,r){var n=r(781),i=function(u){return typeof u!="undefined"&&u.versions!=null&&u.versions.node!=null};e.exports.isNode=i,e.exports.platform=typeof process!="undefined"&&i(process)?"node":"browser";var o=s("worker_threads");e.exports.isMainThread=e.exports.platform==="node"?(!o||o.isMainThread)&&!process.connected:typeof Window!="undefined",e.exports.cpus=e.exports.platform==="browser"?self.navigator.hardwareConcurrency:n("os").cpus().length;function s(a){try{return n(a)}catch(u){return null}}},710:function(e){e.exports=`!function(){var __webpack_exports__={};!function(){var exports=__webpack_exports__,__webpack_unused_export__;function _typeof(r){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}var requireFoolWebpack=eval("typeof require !== \'undefined\' ? require : function (module) { throw new Error(\'Module \\\\" + module + \\\\" not found.\') }"),TERMINATE_METHOD_ID="__workerpool-terminate__",worker={exit:function(){}},WorkerThreads,parentPort;if("undefined"!=typeof self&&"function"==typeof postMessage&&"function"==typeof addEventListener)worker.on=function(r,e){addEventListener(r,function(r){e(r.data)})},worker.send=function(r){postMessage(r)};else{if("undefined"==typeof process)throw new Error("Script must be executed as a worker");try{WorkerThreads=requireFoolWebpack("worker_threads")}catch(error){if("object"!==_typeof(error)||null===error||"MODULE_NOT_FOUND"!==error.code)throw error}WorkerThreads&&null!==WorkerThreads.parentPort?(parentPort=WorkerThreads.parentPort,worker.send=parentPort.postMessage.bind(parentPort),worker.on=parentPort.on.bind(parentPort)):(worker.on=process.on.bind(process),worker.send=process.send.bind(process),worker.on("disconnect",function(){process.exit(1)}),worker.exit=process.exit.bind(process))}function convertError(o){return Object.getOwnPropertyNames(o).reduce(function(r,e){return Object.defineProperty(r,e,{value:o[e],enumerable:!0})},{})}function isPromise(r){return r&&"function"==typeof r.then&&"function"==typeof r.catch}worker.methods={},worker.methods.run=function(r,e){r=new Function("return ("+r+").apply(null, arguments);");return r.apply(r,e)},worker.methods.methods=function(){return Object.keys(worker.methods)};var currentRequestId=null;worker.on("message",function(e){if(e===TERMINATE_METHOD_ID)return worker.exit(0);try{var r=worker.methods[e.method];if(!r)throw new Error(\'Unknown method "\'+e.method+\'"\');currentRequestId=e.id;var o=r.apply(r,e.params);isPromise(o)?o.then(function(r){worker.send({id:e.id,result:r,error:null}),currentRequestId=null}).catch(function(r){worker.send({id:e.id,result:null,error:convertError(r)}),currentRequestId=null}):(worker.send({id:e.id,result:o,error:null}),currentRequestId=null)}catch(r){worker.send({id:e.id,result:null,error:convertError(r)})}}),worker.register=function(r){if(r)for(var e in r)r.hasOwnProperty(e)&&(worker.methods[e]=r[e]);worker.send("ready")},worker.emit=function(r){currentRequestId&&worker.send({id:currentRequestId,isEvent:!0,payload:r})},__webpack_unused_export__=worker.register,worker.emit}()}();`},781:function(module){var requireFoolWebpack=eval(`typeof require !== \'undefined\' ? require : function (module) { throw new Error(\'Module " + module + " not found.\') }`);module.exports=requireFoolWebpack},52:function(__unused_webpack_module,exports){function _typeof(e){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(e)}var requireFoolWebpack=eval(`typeof require !== \'undefined\' ? require : function (module) { throw new Error(\'Module " + module + " not found.\') }`),TERMINATE_METHOD_ID="__workerpool-terminate__",worker={exit:function e(){}};if(typeof self!="undefined"&&typeof postMessage=="function"&&typeof addEventListener=="function")worker.on=function(e,t){addEventListener(e,function(r){t(r.data)})},worker.send=function(e){postMessage(e)};else if(typeof process!="undefined"){var WorkerThreads;try{WorkerThreads=requireFoolWebpack("worker_threads")}catch(e){if(!(_typeof(e)==="object"&&e!==null&&e.code==="MODULE_NOT_FOUND"))throw e}if(WorkerThreads&&WorkerThreads.parentPort!==null){var parentPort=WorkerThreads.parentPort;worker.send=parentPort.postMessage.bind(parentPort),worker.on=parentPort.on.bind(parentPort)}else worker.on=process.on.bind(process),worker.send=process.send.bind(process),worker.on("disconnect",function(){process.exit(1)}),worker.exit=process.exit.bind(process)}else throw new Error("Script must be executed as a worker");function convertError(e){return Object.getOwnPropertyNames(e).reduce(function(t,r){return Object.defineProperty(t,r,{value:e[r],enumerable:!0})},{})}function isPromise(e){return e&&typeof e.then=="function"&&typeof e.catch=="function"}worker.methods={},worker.methods.run=function e(t,r){var n=new Function("return ("+t+").apply(null, arguments);");return n.apply(n,r)},worker.methods.methods=function e(){return Object.keys(worker.methods)};var currentRequestId=null;worker.on("message",function(e){if(e===TERMINATE_METHOD_ID)return worker.exit(0);try{var t=worker.methods[e.method];if(t){currentRequestId=e.id;var r=t.apply(t,e.params);isPromise(r)?r.then(function(n){worker.send({id:e.id,result:n,error:null}),currentRequestId=null}).catch(function(n){worker.send({id:e.id,result:null,error:convertError(n)}),currentRequestId=null}):(worker.send({id:e.id,result:r,error:null}),currentRequestId=null)}else throw new Error(\'Unknown method "\'+e.method+\'"\')}catch(n){worker.send({id:e.id,result:null,error:convertError(n)})}}),worker.register=function(e){if(e)for(var t in e)e.hasOwnProperty(t)&&(worker.methods[t]=e[t]);worker.send("ready")},worker.emit=function(e){currentRequestId&&worker.send({id:currentRequestId,isEvent:!0,payload:e})},exports.add=worker.register,exports.emit=worker.emit}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(t!==void 0)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}(function(){__webpack_require__.d=function(e,t){for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}})(),function(){__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){__webpack_require__.r=function(e){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}();var __webpack_exports__={};return function(){var e=__webpack_exports__,t=__webpack_require__(722);e.pool=function(n,i){var o=__webpack_require__(799);return new o(n,i)},e.worker=function(n){var i=__webpack_require__(52);i.add(n)},e.workerEmit=function(n){var i=__webpack_require__(52);i.emit(n)},e.Promise=__webpack_require__(446),e.platform=t.platform,e.isMainThread=t.isMainThread,e.cpus=t.cpus}(),__webpack_exports__}()})});var yi=F((is,gi)=>{(function(e){if(typeof is=="object"&&typeof gi!="undefined")gi.exports=e();else if(typeof define=="function"&&define.amd)define([],e);else{var t;typeof window!="undefined"?t=window:typeof global!="undefined"?t=global:typeof self!="undefined"?t=self:t=this,t.localforage=e()}})(function(){var e,t,r;return function n(i,o,s){function a(f,h){if(!o[f]){if(!i[f]){var l=typeof require=="function"&&require;if(!h&&l)return l(f,!0);if(u)return u(f,!0);var m=new Error("Cannot find module \'"+f+"\'");throw m.code="MODULE_NOT_FOUND",m}var g=o[f]={exports:{}};i[f][0].call(g.exports,function(E){var _=i[f][1][E];return a(_||E)},g,g.exports,n,i,o,s)}return o[f].exports}for(var u=typeof require=="function"&&require,d=0;d<s.length;d++)a(s[d]);return a}({1:[function(n,i,o){(function(s){"use strict";var a=s.MutationObserver||s.WebKitMutationObserver,u;if(a){var d=0,f=new a(E),h=s.document.createTextNode("");f.observe(h,{characterData:!0}),u=function(){h.data=d=++d%2}}else if(!s.setImmediate&&typeof s.MessageChannel!="undefined"){var l=new s.MessageChannel;l.port1.onmessage=E,u=function(){l.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?u=function(){var A=s.document.createElement("script");A.onreadystatechange=function(){E(),A.onreadystatechange=null,A.parentNode.removeChild(A),A=null},s.document.documentElement.appendChild(A)}:u=function(){setTimeout(E,0)};var m,g=[];function E(){m=!0;for(var A,q,L=g.length;L;){for(q=g,g=[],A=-1;++A<L;)q[A]();L=g.length}m=!1}i.exports=_;function _(A){g.push(A)===1&&!m&&u()}}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],2:[function(n,i,o){"use strict";var s=n(1);function a(){}var u={},d=["REJECTED"],f=["FULFILLED"],h=["PENDING"];i.exports=l;function l(R){if(typeof R!="function")throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,R!==a&&_(this,R)}l.prototype.catch=function(R){return this.then(null,R)},l.prototype.then=function(R,K){if(typeof R!="function"&&this.state===f||typeof K!="function"&&this.state===d)return this;var B=new this.constructor(a);if(this.state!==h){var S=this.state===f?R:K;g(B,S,this.outcome)}else this.queue.push(new m(B,R,K));return B};function m(R,K,B){this.promise=R,typeof K=="function"&&(this.onFulfilled=K,this.callFulfilled=this.otherCallFulfilled),typeof B=="function"&&(this.onRejected=B,this.callRejected=this.otherCallRejected)}m.prototype.callFulfilled=function(R){u.resolve(this.promise,R)},m.prototype.otherCallFulfilled=function(R){g(this.promise,this.onFulfilled,R)},m.prototype.callRejected=function(R){u.reject(this.promise,R)},m.prototype.otherCallRejected=function(R){g(this.promise,this.onRejected,R)};function g(R,K,B){s(function(){var S;try{S=K(B)}catch(T){return u.reject(R,T)}S===R?u.reject(R,new TypeError("Cannot resolve promise with itself")):u.resolve(R,S)})}u.resolve=function(R,K){var B=A(E,K);if(B.status==="error")return u.reject(R,B.value);var S=B.value;if(S)_(R,S);else{R.state=f,R.outcome=K;for(var T=-1,b=R.queue.length;++T<b;)R.queue[T].callFulfilled(K)}return R},u.reject=function(R,K){R.state=d,R.outcome=K;for(var B=-1,S=R.queue.length;++B<S;)R.queue[B].callRejected(K);return R};function E(R){var K=R&&R.then;if(R&&(typeof R=="object"||typeof R=="function")&&typeof K=="function")return function(){K.apply(R,arguments)}}function _(R,K){var B=!1;function S(k){B||(B=!0,u.reject(R,k))}function T(k){B||(B=!0,u.resolve(R,k))}function b(){K(T,S)}var O=A(b);O.status==="error"&&S(O.value)}function A(R,K){var B={};try{B.value=R(K),B.status="success"}catch(S){B.status="error",B.value=S}return B}l.resolve=q;function q(R){return R instanceof this?R:u.resolve(new this(a),R)}l.reject=L;function L(R){var K=new this(a);return u.reject(K,R)}l.all=G;function G(R){var K=this;if(Object.prototype.toString.call(R)!=="[object Array]")return this.reject(new TypeError("must be an array"));var B=R.length,S=!1;if(!B)return this.resolve([]);for(var T=new Array(B),b=0,O=-1,k=new this(a);++O<B;)W(R[O],O);return k;function W($,M){K.resolve($).then(U,function(z){S||(S=!0,u.reject(k,z))});function U(z){T[M]=z,++b===B&&!S&&(S=!0,u.resolve(k,T))}}}l.race=V;function V(R){var K=this;if(Object.prototype.toString.call(R)!=="[object Array]")return this.reject(new TypeError("must be an array"));var B=R.length,S=!1;if(!B)return this.resolve([]);for(var T=-1,b=new this(a);++T<B;)O(R[T]);return b;function O(k){K.resolve(k).then(function(W){S||(S=!0,u.resolve(b,W))},function(W){S||(S=!0,u.reject(b,W))})}}},{1:1}],3:[function(n,i,o){(function(s){"use strict";typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{2:2}],4:[function(n,i,o){"use strict";var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c};function a(c,y){if(!(c instanceof y))throw new TypeError("Cannot call a class as a function")}function u(){try{if(typeof indexedDB!="undefined")return indexedDB;if(typeof webkitIndexedDB!="undefined")return webkitIndexedDB;if(typeof mozIndexedDB!="undefined")return mozIndexedDB;if(typeof OIndexedDB!="undefined")return OIndexedDB;if(typeof msIndexedDB!="undefined")return msIndexedDB}catch(c){return}}var d=u();function f(){try{if(!d||!d.open)return!1;var c=typeof openDatabase!="undefined"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),y=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!c||y)&&typeof indexedDB!="undefined"&&typeof IDBKeyRange!="undefined"}catch(p){return!1}}function h(c,y){c=c||[],y=y||{};try{return new Blob(c,y)}catch(v){if(v.name!=="TypeError")throw v;for(var p=typeof BlobBuilder!="undefined"?BlobBuilder:typeof MSBlobBuilder!="undefined"?MSBlobBuilder:typeof MozBlobBuilder!="undefined"?MozBlobBuilder:WebKitBlobBuilder,w=new p,x=0;x<c.length;x+=1)w.append(c[x]);return w.getBlob(y.type)}}typeof Promise=="undefined"&&n(3);var l=Promise;function m(c,y){y&&c.then(function(p){y(null,p)},function(p){y(p)})}function g(c,y,p){typeof y=="function"&&c.then(y),typeof p=="function"&&c.catch(p)}function E(c){return typeof c!="string"&&(console.warn(c+" used as a key, but it is not a string."),c=String(c)),c}function _(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var A="local-forage-detect-blob-support",q=void 0,L={},G=Object.prototype.toString,V="readonly",R="readwrite";function K(c){for(var y=c.length,p=new ArrayBuffer(y),w=new Uint8Array(p),x=0;x<y;x++)w[x]=c.charCodeAt(x);return p}function B(c){return new l(function(y){var p=c.transaction(A,R),w=h([""]);p.objectStore(A).put(w,"key"),p.onabort=function(x){x.preventDefault(),x.stopPropagation(),y(!1)},p.oncomplete=function(){var x=navigator.userAgent.match(/Chrome\\/(\\d+)/),v=navigator.userAgent.match(/Edge\\//);y(v||!x||parseInt(x[1],10)>=43)}}).catch(function(){return!1})}function S(c){return typeof q=="boolean"?l.resolve(q):B(c).then(function(y){return q=y,q})}function T(c){var y=L[c.name],p={};p.promise=new l(function(w,x){p.resolve=w,p.reject=x}),y.deferredOperations.push(p),y.dbReady?y.dbReady=y.dbReady.then(function(){return p.promise}):y.dbReady=p.promise}function b(c){var y=L[c.name],p=y.deferredOperations.pop();if(p)return p.resolve(),p.promise}function O(c,y){var p=L[c.name],w=p.deferredOperations.pop();if(w)return w.reject(y),w.promise}function k(c,y){return new l(function(p,w){if(L[c.name]=L[c.name]||_o(),c.db)if(y)T(c),c.db.close();else return p(c.db);var x=[c.name];y&&x.push(c.version);var v=d.open.apply(d,x);y&&(v.onupgradeneeded=function(I){var D=v.result;try{D.createObjectStore(c.storeName),I.oldVersion<=1&&D.createObjectStore(A)}catch(N){if(N.name==="ConstraintError")console.warn(\'The database "\'+c.name+\'" has been upgraded from version \'+I.oldVersion+" to version "+I.newVersion+\', but the storage "\'+c.storeName+\'" already exists.\');else throw N}}),v.onerror=function(I){I.preventDefault(),w(v.error)},v.onsuccess=function(){var I=v.result;I.onversionchange=function(D){D.target.close()},p(I),b(c)}})}function W(c){return k(c,!1)}function $(c){return k(c,!0)}function M(c,y){if(!c.db)return!0;var p=!c.db.objectStoreNames.contains(c.storeName),w=c.version<c.db.version,x=c.version>c.db.version;if(w&&(c.version!==y&&console.warn(\'The database "\'+c.name+`" can\'t be downgraded from version `+c.db.version+" to version "+c.version+"."),c.version=c.db.version),x||p){if(p){var v=c.db.version+1;v>c.version&&(c.version=v)}return!0}return!1}function U(c){return new l(function(y,p){var w=new FileReader;w.onerror=p,w.onloadend=function(x){var v=btoa(x.target.result||"");y({__local_forage_encoded_blob:!0,data:v,type:c.type})},w.readAsBinaryString(c)})}function z(c){var y=K(atob(c.data));return h([y],{type:c.type})}function J(c){return c&&c.__local_forage_encoded_blob}function Pr(c){var y=this,p=y._initReady().then(function(){var w=L[y._dbInfo.name];if(w&&w.dbReady)return w.dbReady});return g(p,c,c),p}function Vl(c){T(c);for(var y=L[c.name],p=y.forages,w=0;w<p.length;w++){var x=p[w];x._dbInfo.db&&(x._dbInfo.db.close(),x._dbInfo.db=null)}return c.db=null,W(c).then(function(v){return c.db=v,M(c)?$(c):v}).then(function(v){c.db=y.db=v;for(var I=0;I<p.length;I++)p[I]._dbInfo.db=v}).catch(function(v){throw O(c,v),v})}function Je(c,y,p,w){w===void 0&&(w=1);try{var x=c.db.transaction(c.storeName,y);p(null,x)}catch(v){if(w>0&&(!c.db||v.name==="InvalidStateError"||v.name==="NotFoundError"))return l.resolve().then(function(){if(!c.db||v.name==="NotFoundError"&&!c.db.objectStoreNames.contains(c.storeName)&&c.version<=c.db.version)return c.db&&(c.version=c.db.version+1),$(c)}).then(function(){return Vl(c).then(function(){Je(c,y,p,w-1)})}).catch(p);p(v)}}function _o(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Yl(c){var y=this,p={db:null};if(c)for(var w in c)p[w]=c[w];var x=L[p.name];x||(x=_o(),L[p.name]=x),x.forages.push(y),y._initReady||(y._initReady=y.ready,y.ready=Pr);var v=[];function I(){return l.resolve()}for(var D=0;D<x.forages.length;D++){var N=x.forages[D];N!==y&&v.push(N._initReady().catch(I))}var C=x.forages.slice(0);return l.all(v).then(function(){return p.db=x.db,W(p)}).then(function(P){return p.db=P,M(p,y._defaultConfig.version)?$(p):P}).then(function(P){p.db=x.db=P,y._dbInfo=p;for(var j=0;j<C.length;j++){var H=C[j];H!==y&&(H._dbInfo.db=p.db,H._dbInfo.version=p.version)}})}function Ql(c,y){var p=this;c=E(c);var w=new l(function(x,v){p.ready().then(function(){Je(p._dbInfo,V,function(I,D){if(I)return v(I);try{var N=D.objectStore(p._dbInfo.storeName),C=N.get(c);C.onsuccess=function(){var P=C.result;P===void 0&&(P=null),J(P)&&(P=z(P)),x(P)},C.onerror=function(){v(C.error)}}catch(P){v(P)}})}).catch(v)});return m(w,y),w}function Zl(c,y){var p=this,w=new l(function(x,v){p.ready().then(function(){Je(p._dbInfo,V,function(I,D){if(I)return v(I);try{var N=D.objectStore(p._dbInfo.storeName),C=N.openCursor(),P=1;C.onsuccess=function(){var j=C.result;if(j){var H=j.value;J(H)&&(H=z(H));var Z=c(H,j.key,P++);Z!==void 0?x(Z):j.continue()}else x()},C.onerror=function(){v(C.error)}}catch(j){v(j)}})}).catch(v)});return m(w,y),w}function Xl(c,y,p){var w=this;c=E(c);var x=new l(function(v,I){var D;w.ready().then(function(){return D=w._dbInfo,G.call(y)==="[object Blob]"?S(D.db).then(function(N){return N?y:U(y)}):y}).then(function(N){Je(w._dbInfo,R,function(C,P){if(C)return I(C);try{var j=P.objectStore(w._dbInfo.storeName);N===null&&(N=void 0);var H=j.put(N,c);P.oncomplete=function(){N===void 0&&(N=null),v(N)},P.onabort=P.onerror=function(){var Z=H.error?H.error:H.transaction.error;I(Z)}}catch(Z){I(Z)}})}).catch(I)});return m(x,p),x}function ed(c,y){var p=this;c=E(c);var w=new l(function(x,v){p.ready().then(function(){Je(p._dbInfo,R,function(I,D){if(I)return v(I);try{var N=D.objectStore(p._dbInfo.storeName),C=N.delete(c);D.oncomplete=function(){x()},D.onerror=function(){v(C.error)},D.onabort=function(){var P=C.error?C.error:C.transaction.error;v(P)}}catch(P){v(P)}})}).catch(v)});return m(w,y),w}function td(c){var y=this,p=new l(function(w,x){y.ready().then(function(){Je(y._dbInfo,R,function(v,I){if(v)return x(v);try{var D=I.objectStore(y._dbInfo.storeName),N=D.clear();I.oncomplete=function(){w()},I.onabort=I.onerror=function(){var C=N.error?N.error:N.transaction.error;x(C)}}catch(C){x(C)}})}).catch(x)});return m(p,c),p}function rd(c){var y=this,p=new l(function(w,x){y.ready().then(function(){Je(y._dbInfo,V,function(v,I){if(v)return x(v);try{var D=I.objectStore(y._dbInfo.storeName),N=D.count();N.onsuccess=function(){w(N.result)},N.onerror=function(){x(N.error)}}catch(C){x(C)}})}).catch(x)});return m(p,c),p}function nd(c,y){var p=this,w=new l(function(x,v){if(c<0){x(null);return}p.ready().then(function(){Je(p._dbInfo,V,function(I,D){if(I)return v(I);try{var N=D.objectStore(p._dbInfo.storeName),C=!1,P=N.openKeyCursor();P.onsuccess=function(){var j=P.result;if(!j){x(null);return}c===0||C?x(j.key):(C=!0,j.advance(c))},P.onerror=function(){v(P.error)}}catch(j){v(j)}})}).catch(v)});return m(w,y),w}function id(c){var y=this,p=new l(function(w,x){y.ready().then(function(){Je(y._dbInfo,V,function(v,I){if(v)return x(v);try{var D=I.objectStore(y._dbInfo.storeName),N=D.openKeyCursor(),C=[];N.onsuccess=function(){var P=N.result;if(!P){w(C);return}C.push(P.key),P.continue()},N.onerror=function(){x(N.error)}}catch(P){x(P)}})}).catch(x)});return m(p,c),p}function od(c,y){y=_.apply(this,arguments);var p=this.config();c=typeof c!="function"&&c||{},c.name||(c.name=c.name||p.name,c.storeName=c.storeName||p.storeName);var w=this,x;if(!c.name)x=l.reject("Invalid arguments");else{var v=c.name===p.name&&w._dbInfo.db,I=v?l.resolve(w._dbInfo.db):W(c).then(function(D){var N=L[c.name],C=N.forages;N.db=D;for(var P=0;P<C.length;P++)C[P]._dbInfo.db=D;return D});c.storeName?x=I.then(function(D){if(D.objectStoreNames.contains(c.storeName)){var N=D.version+1;T(c);var C=L[c.name],P=C.forages;D.close();for(var j=0;j<P.length;j++){var H=P[j];H._dbInfo.db=null,H._dbInfo.version=N}var Z=new l(function(X,ce){var ae=d.open(c.name,N);ae.onerror=function(Fe){var Ut=ae.result;Ut.close(),ce(Fe)},ae.onupgradeneeded=function(){var Fe=ae.result;Fe.deleteObjectStore(c.storeName)},ae.onsuccess=function(){var Fe=ae.result;Fe.close(),X(Fe)}});return Z.then(function(X){C.db=X;for(var ce=0;ce<P.length;ce++){var ae=P[ce];ae._dbInfo.db=X,b(ae._dbInfo)}}).catch(function(X){throw(O(c,X)||l.resolve()).catch(function(){}),X})}}):x=I.then(function(D){T(c);var N=L[c.name],C=N.forages;D.close();for(var P=0;P<C.length;P++){var j=C[P];j._dbInfo.db=null}var H=new l(function(Z,X){var ce=d.deleteDatabase(c.name);ce.onerror=function(){var ae=ce.result;ae&&ae.close(),X(ce.error)},ce.onblocked=function(){console.warn(\'dropInstance blocked for database "\'+c.name+\'" until all open connections are closed\')},ce.onsuccess=function(){var ae=ce.result;ae&&ae.close(),Z(ae)}});return H.then(function(Z){N.db=Z;for(var X=0;X<C.length;X++){var ce=C[X];b(ce._dbInfo)}}).catch(function(Z){throw(O(c,Z)||l.resolve()).catch(function(){}),Z})})}return m(x,y),x}var sd={_driver:"asyncStorage",_initStorage:Yl,_support:f(),iterate:Zl,getItem:Ql,setItem:Xl,removeItem:ed,clear:td,length:rd,key:nd,keys:id,dropInstance:od};function ad(){return typeof openDatabase=="function"}var Qe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ud="~~local_forage_type~",Io=/^~~local_forage_type~([^~]+)~/,qr="__lfsc__:",Vn=qr.length,Yn="arbf",Qn="blob",ko="si08",Oo="ui08",To="uic8",Do="si16",Fo="si32",Ao="ur16",No="ui32",Co="fl32",Ro="fl64",Po=Vn+Yn.length,qo=Object.prototype.toString;function Lo(c){var y=c.length*.75,p=c.length,w,x=0,v,I,D,N;c[c.length-1]==="="&&(y--,c[c.length-2]==="="&&y--);var C=new ArrayBuffer(y),P=new Uint8Array(C);for(w=0;w<p;w+=4)v=Qe.indexOf(c[w]),I=Qe.indexOf(c[w+1]),D=Qe.indexOf(c[w+2]),N=Qe.indexOf(c[w+3]),P[x++]=v<<2|I>>4,P[x++]=(I&15)<<4|D>>2,P[x++]=(D&3)<<6|N&63;return C}function Zn(c){var y=new Uint8Array(c),p="",w;for(w=0;w<y.length;w+=3)p+=Qe[y[w]>>2],p+=Qe[(y[w]&3)<<4|y[w+1]>>4],p+=Qe[(y[w+1]&15)<<2|y[w+2]>>6],p+=Qe[y[w+2]&63];return y.length%3===2?p=p.substring(0,p.length-1)+"=":y.length%3===1&&(p=p.substring(0,p.length-2)+"=="),p}function cd(c,y){var p="";if(c&&(p=qo.call(c)),c&&(p==="[object ArrayBuffer]"||c.buffer&&qo.call(c.buffer)==="[object ArrayBuffer]")){var w,x=qr;c instanceof ArrayBuffer?(w=c,x+=Yn):(w=c.buffer,p==="[object Int8Array]"?x+=ko:p==="[object Uint8Array]"?x+=Oo:p==="[object Uint8ClampedArray]"?x+=To:p==="[object Int16Array]"?x+=Do:p==="[object Uint16Array]"?x+=Ao:p==="[object Int32Array]"?x+=Fo:p==="[object Uint32Array]"?x+=No:p==="[object Float32Array]"?x+=Co:p==="[object Float64Array]"?x+=Ro:y(new Error("Failed to get type for BinaryArray"))),y(x+Zn(w))}else if(p==="[object Blob]"){var v=new FileReader;v.onload=function(){var I=ud+c.type+"~"+Zn(this.result);y(qr+Qn+I)},v.readAsArrayBuffer(c)}else try{y(JSON.stringify(c))}catch(I){console.error("Couldn\'t convert value into a JSON string: ",c),y(null,I)}}function fd(c){if(c.substring(0,Vn)!==qr)return JSON.parse(c);var y=c.substring(Po),p=c.substring(Vn,Po),w;if(p===Qn&&Io.test(y)){var x=y.match(Io);w=x[1],y=y.substring(x[0].length)}var v=Lo(y);switch(p){case Yn:return v;case Qn:return h([v],{type:w});case ko:return new Int8Array(v);case Oo:return new Uint8Array(v);case To:return new Uint8ClampedArray(v);case Do:return new Int16Array(v);case Ao:return new Uint16Array(v);case Fo:return new Int32Array(v);case No:return new Uint32Array(v);case Co:return new Float32Array(v);case Ro:return new Float64Array(v);default:throw new Error("Unkown type: "+p)}}var Xn={serialize:cd,deserialize:fd,stringToBuffer:Lo,bufferToString:Zn};function Mo(c,y,p,w){c.executeSql("CREATE TABLE IF NOT EXISTS "+y.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],p,w)}function ld(c){var y=this,p={db:null};if(c)for(var w in c)p[w]=typeof c[w]!="string"?c[w].toString():c[w];var x=new l(function(v,I){try{p.db=openDatabase(p.name,String(p.version),p.description,p.size)}catch(D){return I(D)}p.db.transaction(function(D){Mo(D,p,function(){y._dbInfo=p,v()},function(N,C){I(C)})},I)});return p.serializer=Xn,x}function Ze(c,y,p,w,x,v){c.executeSql(p,w,x,function(I,D){D.code===D.SYNTAX_ERR?I.executeSql("SELECT name FROM sqlite_master WHERE type=\'table\' AND name = ?",[y.storeName],function(N,C){C.rows.length?v(N,D):Mo(N,y,function(){N.executeSql(p,w,x,v)},v)},v):v(I,D)},v)}function dd(c,y){var p=this;c=E(c);var w=new l(function(x,v){p.ready().then(function(){var I=p._dbInfo;I.db.transaction(function(D){Ze(D,I,"SELECT * FROM "+I.storeName+" WHERE key = ? LIMIT 1",[c],function(N,C){var P=C.rows.length?C.rows.item(0).value:null;P&&(P=I.serializer.deserialize(P)),x(P)},function(N,C){v(C)})})}).catch(v)});return m(w,y),w}function pd(c,y){var p=this,w=new l(function(x,v){p.ready().then(function(){var I=p._dbInfo;I.db.transaction(function(D){Ze(D,I,"SELECT * FROM "+I.storeName,[],function(N,C){for(var P=C.rows,j=P.length,H=0;H<j;H++){var Z=P.item(H),X=Z.value;if(X&&(X=I.serializer.deserialize(X)),X=c(X,Z.key,H+1),X!==void 0){x(X);return}}x()},function(N,C){v(C)})})}).catch(v)});return m(w,y),w}function $o(c,y,p,w){var x=this;c=E(c);var v=new l(function(I,D){x.ready().then(function(){y===void 0&&(y=null);var N=y,C=x._dbInfo;C.serializer.serialize(y,function(P,j){j?D(j):C.db.transaction(function(H){Ze(H,C,"INSERT OR REPLACE INTO "+C.storeName+" (key, value) VALUES (?, ?)",[c,P],function(){I(N)},function(Z,X){D(X)})},function(H){if(H.code===H.QUOTA_ERR){if(w>0){I($o.apply(x,[c,N,p,w-1]));return}D(H)}})})}).catch(D)});return m(v,p),v}function md(c,y,p){return $o.apply(this,[c,y,p,1])}function hd(c,y){var p=this;c=E(c);var w=new l(function(x,v){p.ready().then(function(){var I=p._dbInfo;I.db.transaction(function(D){Ze(D,I,"DELETE FROM "+I.storeName+" WHERE key = ?",[c],function(){x()},function(N,C){v(C)})})}).catch(v)});return m(w,y),w}function gd(c){var y=this,p=new l(function(w,x){y.ready().then(function(){var v=y._dbInfo;v.db.transaction(function(I){Ze(I,v,"DELETE FROM "+v.storeName,[],function(){w()},function(D,N){x(N)})})}).catch(x)});return m(p,c),p}function yd(c){var y=this,p=new l(function(w,x){y.ready().then(function(){var v=y._dbInfo;v.db.transaction(function(I){Ze(I,v,"SELECT COUNT(key) as c FROM "+v.storeName,[],function(D,N){var C=N.rows.item(0).c;w(C)},function(D,N){x(N)})})}).catch(x)});return m(p,c),p}function vd(c,y){var p=this,w=new l(function(x,v){p.ready().then(function(){var I=p._dbInfo;I.db.transaction(function(D){Ze(D,I,"SELECT key FROM "+I.storeName+" WHERE id = ? LIMIT 1",[c+1],function(N,C){var P=C.rows.length?C.rows.item(0).key:null;x(P)},function(N,C){v(C)})})}).catch(v)});return m(w,y),w}function wd(c){var y=this,p=new l(function(w,x){y.ready().then(function(){var v=y._dbInfo;v.db.transaction(function(I){Ze(I,v,"SELECT key FROM "+v.storeName,[],function(D,N){for(var C=[],P=0;P<N.rows.length;P++)C.push(N.rows.item(P).key);w(C)},function(D,N){x(N)})})}).catch(x)});return m(p,c),p}function bd(c){return new l(function(y,p){c.transaction(function(w){w.executeSql("SELECT name FROM sqlite_master WHERE type=\'table\' AND name <> \'__WebKitDatabaseInfoTable__\'",[],function(x,v){for(var I=[],D=0;D<v.rows.length;D++)I.push(v.rows.item(D).name);y({db:c,storeNames:I})},function(x,v){p(v)})},function(w){p(w)})})}function xd(c,y){y=_.apply(this,arguments);var p=this.config();c=typeof c!="function"&&c||{},c.name||(c.name=c.name||p.name,c.storeName=c.storeName||p.storeName);var w=this,x;return c.name?x=new l(function(v){var I;c.name===p.name?I=w._dbInfo.db:I=openDatabase(c.name,"","",0),c.storeName?v({db:I,storeNames:[c.storeName]}):v(bd(I))}).then(function(v){return new l(function(I,D){v.db.transaction(function(N){function C(Z){return new l(function(X,ce){N.executeSql("DROP TABLE IF EXISTS "+Z,[],function(){X()},function(ae,Fe){ce(Fe)})})}for(var P=[],j=0,H=v.storeNames.length;j<H;j++)P.push(C(v.storeNames[j]));l.all(P).then(function(){I()}).catch(function(Z){D(Z)})},function(N){D(N)})})}):x=l.reject("Invalid arguments"),m(x,y),x}var Ed={_driver:"webSQLStorage",_initStorage:ld,_support:ad(),iterate:pd,getItem:dd,setItem:md,removeItem:hd,clear:gd,length:yd,key:vd,keys:wd,dropInstance:xd};function Sd(){try{return typeof localStorage!="undefined"&&"setItem"in localStorage&&!!localStorage.setItem}catch(c){return!1}}function jo(c,y){var p=c.name+"/";return c.storeName!==y.storeName&&(p+=c.storeName+"/"),p}function _d(){var c="_localforage_support_test";try{return localStorage.setItem(c,!0),localStorage.removeItem(c),!1}catch(y){return!0}}function Id(){return!_d()||localStorage.length>0}function kd(c){var y=this,p={};if(c)for(var w in c)p[w]=c[w];return p.keyPrefix=jo(c,y._defaultConfig),Id()?(y._dbInfo=p,p.serializer=Xn,l.resolve()):l.reject()}function Od(c){var y=this,p=y.ready().then(function(){for(var w=y._dbInfo.keyPrefix,x=localStorage.length-1;x>=0;x--){var v=localStorage.key(x);v.indexOf(w)===0&&localStorage.removeItem(v)}});return m(p,c),p}function Td(c,y){var p=this;c=E(c);var w=p.ready().then(function(){var x=p._dbInfo,v=localStorage.getItem(x.keyPrefix+c);return v&&(v=x.serializer.deserialize(v)),v});return m(w,y),w}function Dd(c,y){var p=this,w=p.ready().then(function(){for(var x=p._dbInfo,v=x.keyPrefix,I=v.length,D=localStorage.length,N=1,C=0;C<D;C++){var P=localStorage.key(C);if(P.indexOf(v)===0){var j=localStorage.getItem(P);if(j&&(j=x.serializer.deserialize(j)),j=c(j,P.substring(I),N++),j!==void 0)return j}}});return m(w,y),w}function Fd(c,y){var p=this,w=p.ready().then(function(){var x=p._dbInfo,v;try{v=localStorage.key(c)}catch(I){v=null}return v&&(v=v.substring(x.keyPrefix.length)),v});return m(w,y),w}function Ad(c){var y=this,p=y.ready().then(function(){for(var w=y._dbInfo,x=localStorage.length,v=[],I=0;I<x;I++){var D=localStorage.key(I);D.indexOf(w.keyPrefix)===0&&v.push(D.substring(w.keyPrefix.length))}return v});return m(p,c),p}function Nd(c){var y=this,p=y.keys().then(function(w){return w.length});return m(p,c),p}function Cd(c,y){var p=this;c=E(c);var w=p.ready().then(function(){var x=p._dbInfo;localStorage.removeItem(x.keyPrefix+c)});return m(w,y),w}function Rd(c,y,p){var w=this;c=E(c);var x=w.ready().then(function(){y===void 0&&(y=null);var v=y;return new l(function(I,D){var N=w._dbInfo;N.serializer.serialize(y,function(C,P){if(P)D(P);else try{localStorage.setItem(N.keyPrefix+c,C),I(v)}catch(j){(j.name==="QuotaExceededError"||j.name==="NS_ERROR_DOM_QUOTA_REACHED")&&D(j),D(j)}})})});return m(x,p),x}function Pd(c,y){if(y=_.apply(this,arguments),c=typeof c!="function"&&c||{},!c.name){var p=this.config();c.name=c.name||p.name,c.storeName=c.storeName||p.storeName}var w=this,x;return c.name?x=new l(function(v){c.storeName?v(jo(c,w._defaultConfig)):v(c.name+"/")}).then(function(v){for(var I=localStorage.length-1;I>=0;I--){var D=localStorage.key(I);D.indexOf(v)===0&&localStorage.removeItem(D)}}):x=l.reject("Invalid arguments"),m(x,y),x}var qd={_driver:"localStorageWrapper",_initStorage:kd,_support:Sd(),iterate:Dd,getItem:Td,setItem:Rd,removeItem:Cd,clear:Od,length:Nd,key:Fd,keys:Ad,dropInstance:Pd},Ld=function(y,p){return y===p||typeof y=="number"&&typeof p=="number"&&isNaN(y)&&isNaN(p)},Md=function(y,p){for(var w=y.length,x=0;x<w;){if(Ld(y[x],p))return!0;x++}return!1},Wo=Array.isArray||function(c){return Object.prototype.toString.call(c)==="[object Array]"},Bt={},Bo={},Et={INDEXEDDB:sd,WEBSQL:Ed,LOCALSTORAGE:qd},$d=[Et.INDEXEDDB._driver,Et.WEBSQL._driver,Et.LOCALSTORAGE._driver],Lr=["dropInstance"],ei=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Lr),jd={description:"",driver:$d.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Wd(c,y){c[y]=function(){var p=arguments;return c.ready().then(function(){return c[y].apply(c,p)})}}function ti(){for(var c=1;c<arguments.length;c++){var y=arguments[c];if(y)for(var p in y)y.hasOwnProperty(p)&&(Wo(y[p])?arguments[0][p]=y[p].slice():arguments[0][p]=y[p])}return arguments[0]}var Bd=function(){function c(y){a(this,c);for(var p in Et)if(Et.hasOwnProperty(p)){var w=Et[p],x=w._driver;this[p]=x,Bt[x]||this.defineDriver(w)}this._defaultConfig=ti({},jd),this._config=ti({},this._defaultConfig,y),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return c.prototype.config=function(p){if((typeof p=="undefined"?"undefined":s(p))==="object"){if(this._ready)return new Error("Can\'t call config() after localforage has been used.");for(var w in p){if(w==="storeName"&&(p[w]=p[w].replace(/\\W/g,"_")),w==="version"&&typeof p[w]!="number")return new Error("Database version must be a number.");this._config[w]=p[w]}return"driver"in p&&p.driver?this.setDriver(this._config.driver):!0}else return typeof p=="string"?this._config[p]:this._config},c.prototype.defineDriver=function(p,w,x){var v=new l(function(I,D){try{var N=p._driver,C=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!p._driver){D(C);return}for(var P=ei.concat("_initStorage"),j=0,H=P.length;j<H;j++){var Z=P[j],X=!Md(Lr,Z);if((X||p[Z])&&typeof p[Z]!="function"){D(C);return}}var ce=function(){for(var Ut=function(Kd){return function(){var Gd=new Error("Method "+Kd+" is not implemented by the current driver"),Uo=l.reject(Gd);return m(Uo,arguments[arguments.length-1]),Uo}},ri=0,zd=Lr.length;ri<zd;ri++){var ni=Lr[ri];p[ni]||(p[ni]=Ut(ni))}};ce();var ae=function(Ut){Bt[N]&&console.info("Redefining LocalForage driver: "+N),Bt[N]=p,Bo[N]=Ut,I()};"_support"in p?p._support&&typeof p._support=="function"?p._support().then(ae,D):ae(!!p._support):ae(!0)}catch(Fe){D(Fe)}});return g(v,w,x),v},c.prototype.driver=function(){return this._driver||null},c.prototype.getDriver=function(p,w,x){var v=Bt[p]?l.resolve(Bt[p]):l.reject(new Error("Driver not found."));return g(v,w,x),v},c.prototype.getSerializer=function(p){var w=l.resolve(Xn);return g(w,p),w},c.prototype.ready=function(p){var w=this,x=w._driverSet.then(function(){return w._ready===null&&(w._ready=w._initDriver()),w._ready});return g(x,p,p),x},c.prototype.setDriver=function(p,w,x){var v=this;Wo(p)||(p=[p]);var I=this._getSupportedDrivers(p);function D(){v._config.driver=v.driver()}function N(j){return v._extend(j),D(),v._ready=v._initStorage(v._config),v._ready}function C(j){return function(){var H=0;function Z(){for(;H<j.length;){var X=j[H];return H++,v._dbInfo=null,v._ready=null,v.getDriver(X).then(N).catch(Z)}D();var ce=new Error("No available storage method found.");return v._driverSet=l.reject(ce),v._driverSet}return Z()}}var P=this._driverSet!==null?this._driverSet.catch(function(){return l.resolve()}):l.resolve();return this._driverSet=P.then(function(){var j=I[0];return v._dbInfo=null,v._ready=null,v.getDriver(j).then(function(H){v._driver=H._driver,D(),v._wrapLibraryMethodsWithReady(),v._initDriver=C(I)})}).catch(function(){D();var j=new Error("No available storage method found.");return v._driverSet=l.reject(j),v._driverSet}),g(this._driverSet,w,x),this._driverSet},c.prototype.supports=function(p){return!!Bo[p]},c.prototype._extend=function(p){ti(this,p)},c.prototype._getSupportedDrivers=function(p){for(var w=[],x=0,v=p.length;x<v;x++){var I=p[x];this.supports(I)&&w.push(I)}return w},c.prototype._wrapLibraryMethodsWithReady=function(){for(var p=0,w=ei.length;p<w;p++)Wd(this,ei[p])},c.prototype.createInstance=function(p){return new c(p)},c}(),Ud=new Bd;i.exports=Ud},{3:3}]},{},[4])(4)})});var Be=F(Vr=>{"use strict";Vr.getBooleanOption=(e,t)=>{let r=!1;if(t in e&&typeof(r=e[t])!="boolean")throw new TypeError(`Expected the "${t}" option to be a boolean`);return r};Vr.cppdb=Symbol();Vr.inspect=Symbol.for("nodejs.util.inspect.custom")});var wi=F((Z0,os)=>{"use strict";var vi={value:"SqliteError",writable:!0,enumerable:!1,configurable:!0};function ut(e,t){if(new.target!==ut)return new ut(e,t);if(typeof t!="string")throw new TypeError("Expected second argument to be a string");Error.call(this,e),vi.value=""+e,Object.defineProperty(this,"message",vi),Error.captureStackTrace(this,ut),this.code=t}Object.setPrototypeOf(ut,Error);Object.setPrototypeOf(ut.prototype,Error.prototype);Object.defineProperty(ut.prototype,"name",vi);os.exports=ut});var as=F((X0,ss)=>{var Yr=require("path").sep||"/";ss.exports=_p;function _p(e){if(typeof e!="string"||e.length<=7||e.substring(0,7)!="file://")throw new TypeError("must pass in a file:// URI to convert to a file path");var t=decodeURI(e.substring(7)),r=t.indexOf("/"),n=t.substring(0,r),i=t.substring(r+1);return n=="localhost"&&(n=""),n&&(n=Yr+Yr+n),i=i.replace(/^(.+)\\|/,"$1:"),Yr=="\\\\"&&(i=i.replace(/\\//g,"\\\\")),/^.+\\:/.test(i)||(i=Yr+i),n+i}});var ls=F((kt,fs)=>{var bi=require("fs"),Zr=require("path"),Ip=as(),Qr=Zr.join,kp=Zr.dirname,us=bi.accessSync&&function(e){try{bi.accessSync(e)}catch(t){return!1}return!0}||bi.existsSync||Zr.existsSync,cs={arrow:process.env.NODE_BINDINGS_ARROW||" \\u2192 ",compiled:process.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:process.platform,arch:process.arch,nodePreGyp:"node-v"+process.versions.modules+"-"+process.platform+"-"+process.arch,version:process.versions.node,bindings:"bindings.node",try:[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"],["module_root","addon-build","release","install-root","bindings"],["module_root","addon-build","debug","install-root","bindings"],["module_root","addon-build","default","install-root","bindings"],["module_root","lib","binding","nodePreGyp","bindings"]]};function Op(e){typeof e=="string"?e={bindings:e}:e||(e={}),Object.keys(cs).map(function(u){u in e||(e[u]=cs[u])}),e.module_root||(e.module_root=kt.getRoot(kt.getFileName())),Zr.extname(e.bindings)!=".node"&&(e.bindings+=".node");for(var t=typeof __webpack_require__=="function"?__non_webpack_require__:require,r=[],n=0,i=e.try.length,o,s,a;n<i;n++){o=Qr.apply(null,e.try[n].map(function(u){return e[u]||u})),r.push(o);try{return s=e.path?t.resolve(o):t(o),e.path||(s.path=o),s}catch(u){if(u.code!=="MODULE_NOT_FOUND"&&u.code!=="QUALIFIED_PATH_RESOLUTION_FAILED"&&!/not find/i.test(u.message))throw u}}throw a=new Error(`Could not locate the bindings file. Tried:\n`+r.map(function(u){return e.arrow+u}).join(`\n`)),a.tries=r,a}fs.exports=kt=Op;kt.getFileName=function(t){var r=Error.prepareStackTrace,n=Error.stackTraceLimit,i={},o;Error.stackTraceLimit=10,Error.prepareStackTrace=function(a,u){for(var d=0,f=u.length;d<f;d++)if(o=u[d].getFileName(),o!==__filename)if(t){if(o!==t)return}else return},Error.captureStackTrace(i),i.stack,Error.prepareStackTrace=r,Error.stackTraceLimit=n;var s="file://";return o.indexOf(s)===0&&(o=Ip(o)),o};kt.getRoot=function(t){for(var r=kp(t),n;;){if(r==="."&&(r=process.cwd()),us(Qr(r,"package.json"))||us(Qr(r,"node_modules")))return r;if(n===r)throw new Error(\'Could not find module root given file: "\'+t+\'". Do you have a `package.json` file? \');n=r,r=Qr(r,"..")}}});var ds=F(Xe=>{"use strict";var{cppdb:$e}=Be();Xe.prepare=function(t){return this[$e].prepare(t,this,!1)};Xe.exec=function(t){return this[$e].exec(t),this};Xe.close=function(){return this[$e].close(),this};Xe.loadExtension=function(...t){return this[$e].loadExtension(...t),this};Xe.defaultSafeIntegers=function(...t){return this[$e].defaultSafeIntegers(...t),this};Xe.unsafeMode=function(...t){return this[$e].unsafeMode(...t),this};Xe.getters={name:{get:function(){return this[$e].name},enumerable:!0},open:{get:function(){return this[$e].open},enumerable:!0},inTransaction:{get:function(){return this[$e].inTransaction},enumerable:!0},readonly:{get:function(){return this[$e].readonly},enumerable:!0},memory:{get:function(){return this[$e].memory},enumerable:!0}}});var hs=F((tx,ms)=>{"use strict";var{cppdb:Tp}=Be(),ps=new WeakMap;ms.exports=function(t){if(typeof t!="function")throw new TypeError("Expected first argument to be a function");let r=this[Tp],n=Dp(r,this),{apply:i}=Function.prototype,o={default:{value:Xr(i,t,r,n.default)},deferred:{value:Xr(i,t,r,n.deferred)},immediate:{value:Xr(i,t,r,n.immediate)},exclusive:{value:Xr(i,t,r,n.exclusive)},database:{value:this,enumerable:!0}};return Object.defineProperties(o.default.value,o),Object.defineProperties(o.deferred.value,o),Object.defineProperties(o.immediate.value,o),Object.defineProperties(o.exclusive.value,o),o.default.value};var Dp=(e,t)=>{let r=ps.get(e);if(!r){let n={commit:e.prepare("COMMIT",t,!1),rollback:e.prepare("ROLLBACK",t,!1),savepoint:e.prepare("SAVEPOINT `	_bs3.	`",t,!1),release:e.prepare("RELEASE `	_bs3.	`",t,!1),rollbackTo:e.prepare("ROLLBACK TO `	_bs3.	`",t,!1)};ps.set(e,r={default:Object.assign({begin:e.prepare("BEGIN",t,!1)},n),deferred:Object.assign({begin:e.prepare("BEGIN DEFERRED",t,!1)},n),immediate:Object.assign({begin:e.prepare("BEGIN IMMEDIATE",t,!1)},n),exclusive:Object.assign({begin:e.prepare("BEGIN EXCLUSIVE",t,!1)},n)})}return r},Xr=(e,t,r,{begin:n,commit:i,rollback:o,savepoint:s,release:a,rollbackTo:u})=>function(){let f,h,l;r.inTransaction?(f=s,h=a,l=u):(f=n,h=i,l=o),f.run();try{let m=e.call(t,this,arguments);return h.run(),m}catch(m){throw r.inTransaction&&(l.run(),l!==o&&h.run()),m}}});var ys=F((rx,gs)=>{"use strict";var{getBooleanOption:Fp,cppdb:Ap}=Be();gs.exports=function(t,r){if(r==null&&(r={}),typeof t!="string")throw new TypeError("Expected first argument to be a string");if(typeof r!="object")throw new TypeError("Expected second argument to be an options object");let n=Fp(r,"simple"),i=this[Ap].prepare(`PRAGMA ${t}`,this,!0);return n?i.pluck().get():i.all()}});var bs=F((nx,ws)=>{"use strict";var Np=require("fs"),Cp=require("path"),{promisify:Rp}=require("util"),{cppdb:Pp}=Be(),vs=Rp(Np.access);ws.exports=async function(t,r){if(r==null&&(r={}),typeof t!="string")throw new TypeError("Expected first argument to be a string");if(typeof r!="object")throw new TypeError("Expected second argument to be an options object");t=t.trim();let n="attached"in r?r.attached:"main",i="progress"in r?r.progress:null;if(!t)throw new TypeError("Backup filename cannot be an empty string");if(t===":memory:")throw new TypeError(\'Invalid backup filename ":memory:"\');if(typeof n!="string")throw new TypeError(\'Expected the "attached" option to be a string\');if(!n)throw new TypeError(\'The "attached" option cannot be an empty string\');if(i!=null&&typeof i!="function")throw new TypeError(\'Expected the "progress" option to be a function\');await vs(Cp.dirname(t)).catch(()=>{throw new TypeError("Cannot save backup because the directory does not exist")});let o=await vs(t).then(()=>!1,()=>!0);return qp(this[Pp].backup(this,n,t,o),i||null)};var qp=(e,t)=>{let r=0,n=!0;return new Promise((i,o)=>{setImmediate(function s(){try{let a=e.transfer(r);if(!a.remainingPages){e.close(),i(a);return}if(n&&(n=!1,r=100),t){let u=t(a);if(u!==void 0)if(typeof u=="number"&&u===u)r=Math.max(0,Math.min(2147483647,Math.round(u)));else throw new TypeError("Expected progress callback to return a number or undefined")}setImmediate(s)}catch(a){e.close(),o(a)}})})}});var Es=F((ix,xs)=>{"use strict";var{cppdb:Lp}=Be();xs.exports=function(t){if(t==null&&(t={}),typeof t!="object")throw new TypeError("Expected first argument to be an options object");let r="attached"in t?t.attached:"main";if(typeof r!="string")throw new TypeError(\'Expected the "attached" option to be a string\');if(!r)throw new TypeError(\'The "attached" option cannot be an empty string\');return this[Lp].serialize(r)}});var _s=F((ox,Ss)=>{"use strict";var{getBooleanOption:en,cppdb:Mp}=Be();Ss.exports=function(t,r,n){if(r==null&&(r={}),typeof r=="function"&&(n=r,r={}),typeof t!="string")throw new TypeError("Expected first argument to be a string");if(typeof n!="function")throw new TypeError("Expected last argument to be a function");if(typeof r!="object")throw new TypeError("Expected second argument to be an options object");if(!t)throw new TypeError("User-defined function name cannot be an empty string");let i="safeIntegers"in r?+en(r,"safeIntegers"):2,o=en(r,"deterministic"),s=en(r,"directOnly"),a=en(r,"varargs"),u=-1;if(!a){if(u=n.length,!Number.isInteger(u)||u<0)throw new TypeError("Expected function.length to be a positive integer");if(u>100)throw new RangeError("User-defined functions cannot have more than 100 arguments")}return this[Mp].function(n,t,u,i,o,s),this}});var Os=F((sx,ks)=>{"use strict";var{getBooleanOption:tn,cppdb:$p}=Be();ks.exports=function(t,r){if(typeof t!="string")throw new TypeError("Expected first argument to be a string");if(typeof r!="object"||r===null)throw new TypeError("Expected second argument to be an options object");if(!t)throw new TypeError("User-defined function name cannot be an empty string");let n="start"in r?r.start:null,i=xi(r,"step",!0),o=xi(r,"inverse",!1),s=xi(r,"result",!1),a="safeIntegers"in r?+tn(r,"safeIntegers"):2,u=tn(r,"deterministic"),d=tn(r,"directOnly"),f=tn(r,"varargs"),h=-1;if(!f&&(h=Math.max(Is(i),o?Is(o):0),h>0&&(h-=1),h>100))throw new RangeError("User-defined functions cannot have more than 100 arguments");return this[$p].aggregate(n,i,o,s,t,h,a,u,d),this};var xi=(e,t,r)=>{let n=t in e?e[t]:null;if(typeof n=="function")return n;if(n!=null)throw new TypeError(`Expected the "${t}" option to be a function`);if(r)throw new TypeError(`Missing required option "${t}"`);return null},Is=({length:e})=>{if(Number.isInteger(e)&&e>=0)return e;throw new TypeError("Expected function.length to be a positive integer")}});var As=F((ax,Fs)=>{"use strict";var{cppdb:jp}=Be();Fs.exports=function(t,r){if(typeof t!="string")throw new TypeError("Expected first argument to be a string");if(!t)throw new TypeError("Virtual table module name cannot be an empty string");let n=!1;if(typeof r=="object"&&r!==null)n=!0,r=Jp(Ds(r,"used",t));else{if(typeof r!="function")throw new TypeError("Expected second argument to be a function or a table definition object");r=Wp(r)}return this[jp].table(r,t,n),this};function Wp(e){return function(r,n,i,...o){let s={module:r,database:n,table:i},a=Gp.call(e,s,o);if(typeof a!="object"||a===null)throw new TypeError(`Virtual table module "${r}" did not return a table definition object`);return Ds(a,"returned",r)}}function Ds(e,t,r){if(!or.call(e,"rows"))throw new TypeError(`Virtual table module "${r}" ${t} a table definition without a "rows" property`);if(!or.call(e,"columns"))throw new TypeError(`Virtual table module "${r}" ${t} a table definition without a "columns" property`);let n=e.rows;if(typeof n!="function"||Object.getPrototypeOf(n)!==Hp)throw new TypeError(`Virtual table module "${r}" ${t} a table definition with an invalid "rows" property (should be a generator function)`);let i=e.columns;if(!Array.isArray(i)||!(i=[...i]).every(d=>typeof d=="string"))throw new TypeError(`Virtual table module "${r}" ${t} a table definition with an invalid "columns" property (should be an array of strings)`);if(i.length!==new Set(i).size)throw new TypeError(`Virtual table module "${r}" ${t} a table definition with duplicate column names`);if(!i.length)throw new RangeError(`Virtual table module "${r}" ${t} a table definition with zero columns`);let o;if(or.call(e,"parameters")){if(o=e.parameters,!Array.isArray(o)||!(o=[...o]).every(d=>typeof d=="string"))throw new TypeError(`Virtual table module "${r}" ${t} a table definition with an invalid "parameters" property (should be an array of strings)`)}else o=Kp(n);if(o.length!==new Set(o).size)throw new TypeError(`Virtual table module "${r}" ${t} a table definition with duplicate parameter names`);if(o.length>32)throw new RangeError(`Virtual table module "${r}" ${t} a table definition with more than the maximum number of 32 parameters`);for(let d of o)if(i.includes(d))throw new TypeError(`Virtual table module "${r}" ${t} a table definition with column "${d}" which was ambiguously defined as both a column and parameter`);let s=2;if(or.call(e,"safeIntegers")){let d=e.safeIntegers;if(typeof d!="boolean")throw new TypeError(`Virtual table module "${r}" ${t} a table definition with an invalid "safeIntegers" property (should be a boolean)`);s=+d}let a=!1;if(or.call(e,"directOnly")&&(a=e.directOnly,typeof a!="boolean"))throw new TypeError(`Virtual table module "${r}" ${t} a table definition with an invalid "directOnly" property (should be a boolean)`);return[`CREATE TABLE x(${[...o.map(Ts).map(d=>`${d} HIDDEN`),...i.map(Ts)].join(", ")});`,Bp(n,new Map(i.map((d,f)=>[d,o.length+f])),r),o,s,a]}function Bp(e,t,r){return function*(...i){let o=i.map(s=>Buffer.isBuffer(s)?Buffer.from(s):s);for(let s=0;s<t.size;++s)o.push(null);for(let s of e(...i))if(Array.isArray(s))Up(s,o,t.size,r),yield o;else if(typeof s=="object"&&s!==null)zp(s,o,t,r),yield o;else throw new TypeError(`Virtual table module "${r}" yielded something that isn\'t a valid row object`)}}function Up(e,t,r,n){if(e.length!==r)throw new TypeError(`Virtual table module "${n}" yielded a row with an incorrect number of columns`);let i=t.length-r;for(let o=0;o<r;++o)t[o+i]=e[o]}function zp(e,t,r,n){let i=0;for(let o of Object.keys(e)){let s=r.get(o);if(s===void 0)throw new TypeError(`Virtual table module "${n}" yielded a row with an undeclared column "${o}"`);t[s]=e[o],i+=1}if(i!==r.size)throw new TypeError(`Virtual table module "${n}" yielded a row with missing columns`)}function Kp({length:e}){if(!Number.isInteger(e)||e<0)throw new TypeError("Expected function.length to be a positive integer");let t=[];for(let r=0;r<e;++r)t.push(`$${r+1}`);return t}var{hasOwnProperty:or}=Object.prototype,{apply:Gp}=Function.prototype,Hp=Object.getPrototypeOf(function*(){}),Ts=e=>`"${e.replace(/"/g,\'""\')}"`,Jp=e=>()=>e});var Cs=F((ux,Ns)=>{"use strict";var Vp=function(){};Ns.exports=function(t,r){return Object.assign(new Vp,this)}});var Ls=F((cx,qs)=>{"use strict";var Yp=require("fs"),Rs=require("path"),sr=Be(),Qp=wi(),Ps;function ve(e,t){if(new.target==null)return new ve(e,t);let r;if(Buffer.isBuffer(e)&&(r=e,e=":memory:"),e==null&&(e=""),t==null&&(t={}),typeof e!="string")throw new TypeError("Expected first argument to be a string");if(typeof t!="object")throw new TypeError("Expected second argument to be an options object");if("readOnly"in t)throw new TypeError(\'Misspelled option "readOnly" should be "readonly"\');if("memory"in t)throw new TypeError(\'Option "memory" was removed in v7.0.0 (use ":memory:" filename instead)\');let n=e.trim(),i=n===""||n===":memory:",o=sr.getBooleanOption(t,"readonly"),s=sr.getBooleanOption(t,"fileMustExist"),a=sr.getBooleanOption(t,"uriPath"),u="timeout"in t?t.timeout:5e3,d="verbose"in t?t.verbose:null,f="nativeBinding"in t?t.nativeBinding:null;if(o&&i&&!r)throw new TypeError("In-memory/temporary databases cannot be readonly");if(!Number.isInteger(u)||u<0)throw new TypeError(\'Expected the "timeout" option to be a positive integer\');if(u>2147483647)throw new RangeError(\'Option "timeout" cannot be greater than 2147483647\');if(d!=null&&typeof d!="function")throw new TypeError(\'Expected the "verbose" option to be a function\');if(f!=null&&typeof f!="string")throw new TypeError(\'Expected the "nativeBinding" option to be a string\');let h;if(f==null?h=Ps||(Ps=ls()("better_sqlite3.node")):h=require(Rs.resolve(f).replace(/(\\.node)?$/,".node")),h.isInitialized||(h.setErrorConstructor(Qp),h.isInitialized=!0),!i&&!a&&!Yp.existsSync(Rs.dirname(n)))throw new TypeError("Cannot open database because the directory does not exist");Object.defineProperties(this,he({[sr.cppdb]:{value:new h.Database(n,e,i,o,s,a,u,d||null,r||null)}},ct.getters))}var ct=ds();ve.prototype.prepare=ct.prepare;ve.prototype.transaction=hs();ve.prototype.pragma=ys();ve.prototype.backup=bs();ve.prototype.serialize=Es();ve.prototype.function=_s();ve.prototype.aggregate=Os();ve.prototype.table=As();ve.prototype.loadExtension=ct.loadExtension;ve.prototype.exec=ct.exec;ve.prototype.close=ct.close;ve.prototype.defaultSafeIntegers=ct.defaultSafeIntegers;ve.prototype.unsafeMode=ct.unsafeMode;ve.prototype[sr.inspect]=Cs();qs.exports=ve});var Ms=F((lx,Ei)=>{"use strict";Ei.exports=Ls();Ei.exports.SqliteError=wi()});var js=F((dx,$s)=>{var Ot=1e3,Tt=Ot*60,Dt=Tt*60,ft=Dt*24,Zp=ft*7,Xp=ft*365.25;$s.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return em(e);if(r==="number"&&isFinite(e))return t.long?rm(e):tm(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function em(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Xp;case"weeks":case"week":case"w":return r*Zp;case"days":case"day":case"d":return r*ft;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Dt;case"minutes":case"minute":case"mins":case"min":case"m":return r*Tt;case"seconds":case"second":case"secs":case"sec":case"s":return r*Ot;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function tm(e){var t=Math.abs(e);return t>=ft?Math.round(e/ft)+"d":t>=Dt?Math.round(e/Dt)+"h":t>=Tt?Math.round(e/Tt)+"m":t>=Ot?Math.round(e/Ot)+"s":e+"ms"}function rm(e){var t=Math.abs(e);return t>=ft?rn(e,t,ft,"day"):t>=Dt?rn(e,t,Dt,"hour"):t>=Tt?rn(e,t,Tt,"minute"):t>=Ot?rn(e,t,Ot,"second"):e+" ms"}function rn(e,t,r,n){var i=t>=r*1.5;return Math.round(e/r)+" "+n+(i?"s":"")}});var Bs=F((px,Ws)=>{function nm(e){r.debug=r,r.default=r,r.coerce=u,r.disable=o,r.enable=i,r.enabled=s,r.humanize=js(),r.destroy=d,Object.keys(e).forEach(f=>{r[f]=e[f]}),r.names=[],r.skips=[],r.formatters={};function t(f){let h=0;for(let l=0;l<f.length;l++)h=(h<<5)-h+f.charCodeAt(l),h|=0;return r.colors[Math.abs(h)%r.colors.length]}r.selectColor=t;function r(f){let h,l=null,m,g;function E(..._){if(!E.enabled)return;let A=E,q=Number(new Date),L=q-(h||q);A.diff=L,A.prev=h,A.curr=q,h=q,_[0]=r.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let G=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(R,K)=>{if(R==="%%")return"%";G++;let B=r.formatters[K];if(typeof B=="function"){let S=_[G];R=B.call(A,S),_.splice(G,1),G--}return R}),r.formatArgs.call(A,_),(A.log||r.log).apply(A,_)}return E.namespace=f,E.useColors=r.useColors(),E.color=r.selectColor(f),E.extend=n,E.destroy=r.destroy,Object.defineProperty(E,"enabled",{enumerable:!0,configurable:!1,get:()=>l!==null?l:(m!==r.namespaces&&(m=r.namespaces,g=r.enabled(f)),g),set:_=>{l=_}}),typeof r.init=="function"&&r.init(E),E}function n(f,h){let l=r(this.namespace+(typeof h=="undefined"?":":h)+f);return l.log=this.log,l}function i(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let h,l=(typeof f=="string"?f:"").split(/[\\s,]+/),m=l.length;for(h=0;h<m;h++)l[h]&&(f=l[h].replace(/\\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.slice(1)+"$")):r.names.push(new RegExp("^"+f+"$")))}function o(){let f=[...r.names.map(a),...r.skips.map(a).map(h=>"-"+h)].join(",");return r.enable(""),f}function s(f){if(f[f.length-1]==="*")return!0;let h,l;for(h=0,l=r.skips.length;h<l;h++)if(r.skips[h].test(f))return!1;for(h=0,l=r.names.length;h<l;h++)if(r.names[h].test(f))return!0;return!1}function a(f){return f.toString().substring(2,f.toString().length-2).replace(/\\.\\*\\?$/,"*")}function u(f){return f instanceof Error?f.stack||f.message:f}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Ws.exports=nm});var me=F((Oe,nn)=>{Oe.formatArgs=om;Oe.save=sm;Oe.load=am;Oe.useColors=im;Oe.storage=um();Oe.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Oe.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function im(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/)}function om(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+nn.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),e.splice(n,0,t)}Oe.log=console.debug||console.log||(()=>{});function sm(e){try{e?Oe.storage.setItem("debug",e):Oe.storage.removeItem("debug")}catch(t){}}function am(){let e;try{e=Oe.storage.getItem("debug")}catch(t){}return!e&&typeof process!="undefined"&&"env"in process&&(e=process.env.DEBUG),e}function um(){try{return localStorage}catch(e){}}nn.exports=Bs()(Oe);var{formatters:cm}=nn.exports;cm.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var zs=F((mx,Us)=>{"use strict";Us.exports=fm;function Ft(e){return e instanceof Buffer?Buffer.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}function fm(e){if(e=e||{},e.circles)return lm(e);return e.proto?n:r;function t(i,o){for(var s=Object.keys(i),a=new Array(s.length),u=0;u<s.length;u++){var d=s[u],f=i[d];typeof f!="object"||f===null?a[d]=f:f instanceof Date?a[d]=new Date(f):ArrayBuffer.isView(f)?a[d]=Ft(f):a[d]=o(f)}return a}function r(i){if(typeof i!="object"||i===null)return i;if(i instanceof Date)return new Date(i);if(Array.isArray(i))return t(i,r);if(i instanceof Map)return new Map(t(Array.from(i),r));if(i instanceof Set)return new Set(t(Array.from(i),r));var o={};for(var s in i)if(Object.hasOwnProperty.call(i,s)!==!1){var a=i[s];typeof a!="object"||a===null?o[s]=a:a instanceof Date?o[s]=new Date(a):a instanceof Map?o[s]=new Map(t(Array.from(a),r)):a instanceof Set?o[s]=new Set(t(Array.from(a),r)):ArrayBuffer.isView(a)?o[s]=Ft(a):o[s]=r(a)}return o}function n(i){if(typeof i!="object"||i===null)return i;if(i instanceof Date)return new Date(i);if(Array.isArray(i))return t(i,n);if(i instanceof Map)return new Map(t(Array.from(i),n));if(i instanceof Set)return new Set(t(Array.from(i),n));var o={};for(var s in i){var a=i[s];typeof a!="object"||a===null?o[s]=a:a instanceof Date?o[s]=new Date(a):a instanceof Map?o[s]=new Map(t(Array.from(a),n)):a instanceof Set?o[s]=new Set(t(Array.from(a),n)):ArrayBuffer.isView(a)?o[s]=Ft(a):o[s]=n(a)}return o}}function lm(e){var t=[],r=[];return e.proto?o:i;function n(s,a){for(var u=Object.keys(s),d=new Array(u.length),f=0;f<u.length;f++){var h=u[f],l=s[h];if(typeof l!="object"||l===null)d[h]=l;else if(l instanceof Date)d[h]=new Date(l);else if(ArrayBuffer.isView(l))d[h]=Ft(l);else{var m=t.indexOf(l);m!==-1?d[h]=r[m]:d[h]=a(l)}}return d}function i(s){if(typeof s!="object"||s===null)return s;if(s instanceof Date)return new Date(s);if(Array.isArray(s))return n(s,i);if(s instanceof Map)return new Map(n(Array.from(s),i));if(s instanceof Set)return new Set(n(Array.from(s),i));var a={};t.push(s),r.push(a);for(var u in s)if(Object.hasOwnProperty.call(s,u)!==!1){var d=s[u];if(typeof d!="object"||d===null)a[u]=d;else if(d instanceof Date)a[u]=new Date(d);else if(d instanceof Map)a[u]=new Map(n(Array.from(d),i));else if(d instanceof Set)a[u]=new Set(n(Array.from(d),i));else if(ArrayBuffer.isView(d))a[u]=Ft(d);else{var f=t.indexOf(d);f!==-1?a[u]=r[f]:a[u]=i(d)}}return t.pop(),r.pop(),a}function o(s){if(typeof s!="object"||s===null)return s;if(s instanceof Date)return new Date(s);if(Array.isArray(s))return n(s,o);if(s instanceof Map)return new Map(n(Array.from(s),o));if(s instanceof Set)return new Set(n(Array.from(s),o));var a={};t.push(s),r.push(a);for(var u in s){var d=s[u];if(typeof d!="object"||d===null)a[u]=d;else if(d instanceof Date)a[u]=new Date(d);else if(d instanceof Map)a[u]=new Map(n(Array.from(d),o));else if(d instanceof Set)a[u]=new Set(n(Array.from(d),o));else if(ArrayBuffer.isView(d))a[u]=Ft(d);else{var f=t.indexOf(d);f!==-1?a[u]=r[f]:a[u]=o(d)}}return t.pop(),r.pop(),a}}});var dt=F((hx,Js)=>{var dm=require("util"),lt=me()("log4js:configuration"),on=[],sn=[],Ks=e=>!e,Gs=e=>e&&typeof e=="object"&&!Array.isArray(e),pm=e=>/^[A-Za-z][A-Za-z0-9_]*$/g.test(e),mm=e=>e&&typeof e=="number"&&Number.isInteger(e),hm=e=>{sn.push(e),lt(`Added listener, now ${sn.length} listeners`)},gm=e=>{on.push(e),lt(`Added pre-processing listener, now ${on.length} listeners`)},Hs=(e,t,r)=>{(Array.isArray(t)?t:[t]).forEach(i=>{if(i)throw new Error(`Problem with log4js configuration: (${dm.inspect(e,{depth:5})}) - ${r}`)})},ym=e=>{lt("New configuration to be validated: ",e),Hs(e,Ks(Gs(e)),"must be an object."),lt(`Calling pre-processing listeners (${on.length})`),on.forEach(t=>t(e)),lt("Configuration pre-processing finished."),lt(`Calling configuration listeners (${sn.length})`),sn.forEach(t=>t(e)),lt("Configuration finished.")};Js.exports={configure:ym,addListener:hm,addPreProcessingListener:gm,throwExceptionIf:Hs,anObject:Gs,anInteger:mm,validIdentifier:pm,not:Ks}});var an=F((gx,Ne)=>{"use strict";function Vs(e,t){for(var r=e.toString();r.length<t;)r="0"+r;return r}function pt(e){return Vs(e,2)}function vm(e){var t=Math.abs(e),r=String(Math.floor(t/60)),n=String(t%60);return r=("0"+r).slice(-2),n=("0"+n).slice(-2),e===0?"Z":(e<0?"+":"-")+r+":"+n}function Ys(e,t){typeof e!="string"&&(t=e,e=Ne.exports.ISO8601_FORMAT),t||(t=Ne.exports.now());var r=pt(t.getDate()),n=pt(t.getMonth()+1),i=pt(t.getFullYear()),o=pt(i.substring(2,4)),s=e.indexOf("yyyy")>-1?i:o,a=pt(t.getHours()),u=pt(t.getMinutes()),d=pt(t.getSeconds()),f=Vs(t.getMilliseconds(),3),h=vm(t.getTimezoneOffset()),l=e.replace(/dd/g,r).replace(/MM/g,n).replace(/y{1,4}/g,s).replace(/hh/g,a).replace(/mm/g,u).replace(/ss/g,d).replace(/SSS/g,f).replace(/O/g,h);return l}function et(e,t,r,n){e["set"+(n?"":"UTC")+t](r)}function wm(e,t,r){var n=e.indexOf("O")<0,i=!1,o=[{pattern:/y{1,4}/,regexp:"\\\\d{1,4}",fn:function(h,l){et(h,"FullYear",l,n)}},{pattern:/MM/,regexp:"\\\\d{1,2}",fn:function(h,l){et(h,"Month",l-1,n),h.getMonth()!==l-1&&(i=!0)}},{pattern:/dd/,regexp:"\\\\d{1,2}",fn:function(h,l){i&&et(h,"Month",h.getMonth()-1,n),et(h,"Date",l,n)}},{pattern:/hh/,regexp:"\\\\d{1,2}",fn:function(h,l){et(h,"Hours",l,n)}},{pattern:/mm/,regexp:"\\\\d\\\\d",fn:function(h,l){et(h,"Minutes",l,n)}},{pattern:/ss/,regexp:"\\\\d\\\\d",fn:function(h,l){et(h,"Seconds",l,n)}},{pattern:/SSS/,regexp:"\\\\d\\\\d\\\\d",fn:function(h,l){et(h,"Milliseconds",l,n)}},{pattern:/O/,regexp:"[+-]\\\\d{1,2}:?\\\\d{2}?|Z",fn:function(h,l){l==="Z"?l=0:l=l.replace(":","");var m=Math.abs(l),g=(l>0?-1:1)*(m%100+Math.floor(m/100)*60);h.setUTCMinutes(h.getUTCMinutes()+g)}}],s=o.reduce(function(h,l){return l.pattern.test(h.regexp)?(l.index=h.regexp.match(l.pattern).index,h.regexp=h.regexp.replace(l.pattern,"("+l.regexp+")")):l.index=-1,h},{regexp:e,index:[]}),a=o.filter(function(h){return h.index>-1});a.sort(function(h,l){return h.index-l.index});var u=new RegExp(s.regexp),d=u.exec(t);if(d){var f=r||Ne.exports.now();return a.forEach(function(h,l){h.fn(f,d[l+1])}),f}throw new Error("String \'"+t+"\' could not be parsed as \'"+e+"\'")}function bm(e,t,r){if(!e)throw new Error("pattern must be supplied");return wm(e,t,r)}function xm(){return new Date}Ne.exports=Ys;Ne.exports.asString=Ys;Ne.exports.parse=bm;Ne.exports.now=xm;Ne.exports.ISO8601_FORMAT="yyyy-MM-ddThh:mm:ss.SSS";Ne.exports.ISO8601_WITH_TZ_OFFSET_FORMAT="yyyy-MM-ddThh:mm:ss.SSSO";Ne.exports.DATETIME_FORMAT="dd MM yyyy hh:mm:ss.SSS";Ne.exports.ABSOLUTETIME_FORMAT="hh:mm:ss.SSS"});var _i=F((yx,ua)=>{var tt=an(),Qs=require("os"),ur=require("util"),ar=require("path"),Zs=require("url"),Xs=me()("log4js:layouts"),ea={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[90,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[91,39],yellow:[33,39]};function ta(e){return e?`\\x1B[${ea[e][0]}m`:""}function ra(e){return e?`\\x1B[${ea[e][1]}m`:""}function Em(e,t){return ta(t)+e+ra(t)}function na(e,t){return Em(ur.format("[%s] [%s] %s - ",tt.asString(e.startTime),e.level.toString(),e.categoryName),t)}function ia(e){return na(e)+ur.format(...e.data)}function un(e){return na(e,e.level.colour)+ur.format(...e.data)}function oa(e){return ur.format(...e.data)}function sa(e){return e.data[0]}function aa(e,t){let r="%r %p %c - %m%n",n=/%(-?[0-9]+)?(\\.?-?[0-9]+)?([[\\]cdhmnprzxXyflos%])(\\{([^}]+)\\})?|([^%]+)/;e=e||r;function i(b,O){let k=b.categoryName;if(O){let W=parseInt(O,10),$=k.split(".");W<$.length&&(k=$.slice($.length-W).join("."))}return k}function o(b,O){let k=tt.ISO8601_FORMAT;if(O)switch(k=O,k){case"ISO8601":case"ISO8601_FORMAT":k=tt.ISO8601_FORMAT;break;case"ISO8601_WITH_TZ_OFFSET":case"ISO8601_WITH_TZ_OFFSET_FORMAT":k=tt.ISO8601_WITH_TZ_OFFSET_FORMAT;break;case"ABSOLUTE":process.emitWarning("Pattern %d{ABSOLUTE} is deprecated in favor of %d{ABSOLUTETIME}. Please use %d{ABSOLUTETIME} instead.","DeprecationWarning","log4js-node-DEP0003"),Xs("[log4js-node-DEP0003]","DEPRECATION: Pattern %d{ABSOLUTE} is deprecated and replaced by %d{ABSOLUTETIME}.");case"ABSOLUTETIME":case"ABSOLUTETIME_FORMAT":k=tt.ABSOLUTETIME_FORMAT;break;case"DATE":process.emitWarning("Pattern %d{DATE} is deprecated due to the confusion it causes when used. Please use %d{DATETIME} instead.","DeprecationWarning","log4js-node-DEP0004"),Xs("[log4js-node-DEP0004]","DEPRECATION: Pattern %d{DATE} is deprecated and replaced by %d{DATETIME}.");case"DATETIME":case"DATETIME_FORMAT":k=tt.DATETIME_FORMAT;break}return tt.asString(k,b.startTime)}function s(){return Qs.hostname().toString()}function a(b){return ur.format(...b.data)}function u(){return Qs.EOL}function d(b){return b.level.toString()}function f(b){return tt.asString("hh:mm:ss",b.startTime)}function h(b){return ta(b.level.colour)}function l(b){return ra(b.level.colour)}function m(){return"%"}function g(b){return b&&b.pid?b.pid.toString():process.pid.toString()}function E(){return g()}function _(b,O){return typeof t[O]!="undefined"?typeof t[O]=="function"?t[O](b):t[O]:null}function A(b,O){let k=b.context[O];return typeof k!="undefined"?typeof k=="function"?k(b):k:null}function q(b,O){let k=b.fileName||"";if(k=function($){let M="file://";return $.startsWith(M)&&(typeof Zs.fileURLToPath=="function"?$=Zs.fileURLToPath($):($=ar.normalize($.replace(new RegExp(`^${M}`),"")),process.platform==="win32"&&($.startsWith("\\\\")?$=$.slice(1):$=ar.sep+ar.sep+$))),$}(k),O){let $=parseInt(O,10),M=k.split(ar.sep);M.length>$&&(k=M.slice(-$).join(ar.sep))}return k}function L(b){return b.lineNumber?`${b.lineNumber}`:""}function G(b){return b.columnNumber?`${b.columnNumber}`:""}function V(b){return b.callStack||""}let R={c:i,d:o,h:s,m:a,n:u,p:d,r:f,"[":h,"]":l,y:E,z:g,"%":m,x:_,X:A,f:q,l:L,o:G,s:V};function K(b,O,k){return R[b](O,k)}function B(b,O){let k;return b?(k=parseInt(b.slice(1),10),k>0?O.slice(0,k):O.slice(k)):O}function S(b,O){let k;if(b)if(b.charAt(0)==="-")for(k=parseInt(b.slice(1),10);O.length<k;)O+=" ";else for(k=parseInt(b,10);O.length<k;)O=` ${O}`;return O}function T(b,O,k){let W=b;return W=B(O,W),W=S(k,W),W}return function(b){let O="",k,W=e;for(;(k=n.exec(W))!==null;){let $=k[1],M=k[2],U=k[3],z=k[5],J=k[6];if(J)O+=J.toString();else{let Pr=K(U,b,z);O+=T(Pr,M,$)}W=W.slice(k.index+k[0].length)}return O}}var Si={messagePassThrough(){return oa},basic(){return ia},colored(){return un},coloured(){return un},pattern(e){return aa(e&&e.pattern,e&&e.tokens)},dummy(){return sa}};ua.exports={basicLayout:ia,messagePassThroughLayout:oa,patternLayout:aa,colouredLayout:un,coloredLayout:un,dummyLayout:sa,addLayout(e,t){Si[e]=t},layout(e,t){return Si[e]&&Si[e](t)}}});var mt=F((vx,fa)=>{var fe=dt(),ca=["white","grey","black","blue","cyan","green","magenta","red","yellow"],le=class{constructor(t,r,n){this.level=t,this.levelStr=r,this.colour=n}toString(){return this.levelStr}static getLevel(t,r){return t?t instanceof le?t:(t instanceof Object&&t.levelStr&&(t=t.levelStr),le[t.toString().toUpperCase()]||r):r}static addLevels(t){t&&(Object.keys(t).forEach(n=>{let i=n.toUpperCase();le[i]=new le(t[n].value,i,t[n].colour);let o=le.levels.findIndex(s=>s.levelStr===i);o>-1?le.levels[o]=le[i]:le.levels.push(le[i])}),le.levels.sort((n,i)=>n.level-i.level))}isLessThanOrEqualTo(t){return typeof t=="string"&&(t=le.getLevel(t)),this.level<=t.level}isGreaterThanOrEqualTo(t){return typeof t=="string"&&(t=le.getLevel(t)),this.level>=t.level}isEqualTo(t){return typeof t=="string"&&(t=le.getLevel(t)),this.level===t.level}};le.levels=[];le.addLevels({ALL:{value:Number.MIN_VALUE,colour:"grey"},TRACE:{value:5e3,colour:"blue"},DEBUG:{value:1e4,colour:"cyan"},INFO:{value:2e4,colour:"green"},WARN:{value:3e4,colour:"yellow"},ERROR:{value:4e4,colour:"red"},FATAL:{value:5e4,colour:"magenta"},MARK:{value:9007199254740992,colour:"grey"},OFF:{value:Number.MAX_VALUE,colour:"grey"}});fe.addListener(e=>{let t=e.levels;t&&(fe.throwExceptionIf(e,fe.not(fe.anObject(t)),"levels must be an object"),Object.keys(t).forEach(n=>{fe.throwExceptionIf(e,fe.not(fe.validIdentifier(n)),`level name "${n}" is not a valid identifier (must start with a letter, only contain A-Z,a-z,0-9,_)`),fe.throwExceptionIf(e,fe.not(fe.anObject(t[n])),`level "${n}" must be an object`),fe.throwExceptionIf(e,fe.not(t[n].value),`level "${n}" must have a \'value\' property`),fe.throwExceptionIf(e,fe.not(fe.anInteger(t[n].value)),`level "${n}".value must have an integer value`),fe.throwExceptionIf(e,fe.not(t[n].colour),`level "${n}" must have a \'colour\' property`),fe.throwExceptionIf(e,fe.not(ca.indexOf(t[n].colour)>-1),`level "${n}".colour must be one of ${ca.join(", ")}`)}))});fe.addListener(e=>{le.addLevels(e.levels)});fa.exports=le});var ba=F(fr=>{"use strict";var{parse:pa,stringify:ma}=JSON,{keys:Sm}=Object,cr=String,ha="string",la={},cn="object",ga=(e,t)=>t,_m=e=>e instanceof cr?cr(e):e,Im=(e,t)=>typeof t===ha?new cr(t):t,ya=(e,t,r,n)=>{let i=[];for(let o=Sm(r),{length:s}=o,a=0;a<s;a++){let u=o[a],d=r[u];if(d instanceof cr){let f=e[d];typeof f===cn&&!t.has(f)?(t.add(f),r[u]=la,i.push({k:u,a:[e,t,f,n]})):r[u]=n.call(r,u,f)}else r[u]!==la&&(r[u]=n.call(r,u,d))}for(let{length:o}=i,s=0;s<o;s++){let{k:a,a:u}=i[s];r[a]=n.call(r,a,ya.apply(null,u))}return r},da=(e,t,r)=>{let n=cr(t.push(r)-1);return e.set(r,n),n},va=(e,t)=>{let r=pa(e,Im).map(_m),n=r[0],i=t||ga,o=typeof n===cn&&n?ya(r,new Set,n,i):n;return i.call({"":o},"",o)};fr.parse=va;var wa=(e,t,r)=>{let n=t&&typeof t===cn?(f,h)=>f===""||-1<t.indexOf(f)?h:void 0:t||ga,i=new Map,o=[],s=[],a=+da(i,o,n.call({"":e},"",e)),u=!a;for(;a<o.length;)u=!0,s[a]=ma(o[a++],d,r);return"["+s.join(",")+"]";function d(f,h){if(u)return u=!u,h;let l=n.call(this,f,h);switch(typeof l){case cn:if(l===null)return l;case ha:return i.get(l)||da(i,o,l)}return l}};fr.stringify=wa;var km=e=>pa(wa(e));fr.toJSON=km;var Om=e=>va(ma(e));fr.fromJSON=Om});var Ii=F((bx,Sa)=>{var xa=ba(),Ea=mt(),At=class{constructor(t,r,n,i,o){this.startTime=new Date,this.categoryName=t,this.data=n,this.level=r,this.context=Object.assign({},i),this.pid=process.pid,o&&(this.functionName=o.functionName,this.fileName=o.fileName,this.lineNumber=o.lineNumber,this.columnNumber=o.columnNumber,this.callStack=o.callStack)}serialise(){return xa.stringify(this,(t,r)=>(r&&r.message&&r.stack?r=Object.assign({message:r.message,stack:r.stack},r):typeof r=="number"&&(Number.isNaN(r)||!Number.isFinite(r))?r=r.toString():typeof r=="undefined"&&(r=typeof r),r))}static deserialise(t){let r;try{let n=xa.parse(t,(i,o)=>{if(o&&o.message&&o.stack){let s=new Error(o);Object.keys(o).forEach(a=>{s[a]=o[a]}),o=s}return o});n.location={functionName:n.functionName,fileName:n.fileName,lineNumber:n.lineNumber,columnNumber:n.columnNumber,callStack:n.callStack},r=new At(n.categoryName,Ea.getLevel(n.level.levelStr),n.data,n.context,n.location),r.startTime=new Date(n.startTime),r.pid=n.pid,r.cluster=n.cluster}catch(n){r=new At("log4js",Ea.ERROR,["Unable to parse log:",t,"because: ",n])}return r}};Sa.exports=At});var ln=F((xx,ka)=>{var Ce=me()("log4js:clustering"),Tm=Ii(),Dm=dt(),Nt=!1,Re=null;try{Re=require("cluster")}catch(e){Ce("cluster module not present"),Nt=!0}var Oi=[],dr=!1,lr="NODE_APP_INSTANCE",_a=()=>dr&&process.env[lr]==="0",ki=()=>Nt||Re&&Re.isMaster||_a(),Ia=e=>{Oi.forEach(t=>t(e))},fn=(e,t)=>{if(Ce("cluster message received from worker ",e,": ",t),e.topic&&e.data&&(t=e,e=void 0),t&&t.topic&&t.topic==="log4js:message"){Ce("received message: ",t.data);let r=Tm.deserialise(t.data);Ia(r)}};Nt||Dm.addListener(e=>{Oi.length=0,{pm2:dr,disableClustering:Nt,pm2InstanceVar:lr="NODE_APP_INSTANCE"}=e,Ce(`clustering disabled ? ${Nt}`),Ce(`cluster.isMaster ? ${Re&&Re.isMaster}`),Ce(`pm2 enabled ? ${dr}`),Ce(`pm2InstanceVar = ${lr}`),Ce(`process.env[${lr}] = ${process.env[lr]}`),dr&&process.removeListener("message",fn),Re&&Re.removeListener&&Re.removeListener("message",fn),Nt||e.disableClustering?Ce("Not listening for cluster messages, because clustering disabled."):_a()?(Ce("listening for PM2 broadcast messages"),process.on("message",fn)):Re&&Re.isMaster?(Ce("listening for cluster messages"),Re.on("message",fn)):Ce("not listening for messages, because we are not a master process")});ka.exports={onlyOnMaster:(e,t)=>ki()?e():t,isMaster:ki,send:e=>{ki()?Ia(e):(dr||(e.cluster={workerId:Re.worker.id,worker:process.pid}),process.send({topic:"log4js:message",data:e.serialise()}))},onMessage:e=>{Oi.push(e)}}});var Da=F((Ex,Ta)=>{function Fm(e){if(typeof e=="number"&&Number.isInteger(e))return e;let t={K:1024,M:1024*1024,G:1024*1024*1024},r=Object.keys(t),n=e.slice(-1).toLocaleUpperCase(),i=e.slice(0,-1).trim();if(r.indexOf(n)<0||!Number.isInteger(Number(i)))throw Error(`maxLogSize: "${e}" is invalid`);return i*t[n]}function Am(e,t){let r=Object.assign({},t);return Object.keys(e).forEach(n=>{r[n]&&(r[n]=e[n](t[n]))}),r}function Ti(e){return Am({maxLogSize:Fm},e)}var Oa={dateFile:Ti,file:Ti,fileSync:Ti};Ta.exports.modifyConfig=e=>Oa[e.type]?Oa[e.type](e):e});var Aa=F((Sx,Fa)=>{var Nm=console.log.bind(console);function Cm(e,t){return r=>{Nm(e(r,t))}}function Rm(e,t){let r=t.colouredLayout;return e.layout&&(r=t.layout(e.layout.type,e.layout)),Cm(r,e.timezoneOffset)}Fa.exports.configure=Rm});var Ca=F(Na=>{function Pm(e,t){return r=>{process.stdout.write(`${e(r,t)}\n`)}}function qm(e,t){let r=t.colouredLayout;return e.layout&&(r=t.layout(e.layout.type,e.layout)),Pm(r,e.timezoneOffset)}Na.configure=qm});var Pa=F((Ix,Ra)=>{function Lm(e,t){return r=>{process.stderr.write(`${e(r,t)}\n`)}}function Mm(e,t){let r=t.colouredLayout;return e.layout&&(r=t.layout(e.layout.type,e.layout)),Lm(r,e.timezoneOffset)}Ra.exports.configure=Mm});var La=F((kx,qa)=>{function $m(e,t,r,n){let i=n.getLevel(e),o=n.getLevel(t,n.FATAL);return s=>{let a=s.level;i.isLessThanOrEqualTo(a)&&o.isGreaterThanOrEqualTo(a)&&r(s)}}function jm(e,t,r,n){let i=r(e.appender);return $m(e.level,e.maxLevel,i,n)}qa.exports.configure=jm});var ja=F((Ox,$a)=>{var Ma=me()("log4js:categoryFilter");function Wm(e,t){return typeof e=="string"&&(e=[e]),r=>{Ma(`Checking ${r.categoryName} against ${e}`),e.indexOf(r.categoryName)===-1&&(Ma("Not excluded, sending to appender"),t(r))}}function Bm(e,t,r){let n=r(e.appender);return Wm(e.exclude,n)}$a.exports.configure=Bm});var Ua=F((Tx,Ba)=>{var Wa=me()("log4js:noLogFilter");function Um(e){return e.filter(r=>r!=null&&r!=="")}function zm(e,t){return r=>{Wa(`Checking data: ${r.data} against filters: ${e}`),typeof e=="string"&&(e=[e]),e=Um(e);let n=new RegExp(e.join("|"),"i");(e.length===0||r.data.findIndex(i=>n.test(i))<0)&&(Wa("Not excluded, sending to appender"),t(r))}}function Km(e,t,r){let n=r(e.appender);return zm(e.exclude,n)}Ba.exports.configure=Km});var _e=F(Di=>{"use strict";Di.fromCallback=function(e){return Object.defineProperty(function(){if(typeof arguments[arguments.length-1]=="function")e.apply(this,arguments);else return new Promise((t,r)=>{arguments[arguments.length]=(n,i)=>{if(n)return r(n);t(i)},arguments.length++,e.apply(this,arguments)})},"name",{value:e.name})};Di.fromPromise=function(e){return Object.defineProperty(function(){let t=arguments[arguments.length-1];if(typeof t!="function")return e.apply(this,arguments);e.apply(this,arguments).then(r=>t(null,r),t)},"name",{value:e.name})}});var Ka=F((Fx,za)=>{var rt=require("constants"),Gm=process.cwd,dn=null,Hm=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return dn||(dn=Gm.call(process)),dn};try{process.cwd()}catch(e){}typeof process.chdir=="function"&&(Fi=process.chdir,process.chdir=function(e){dn=null,Fi.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,Fi));var Fi;za.exports=Jm;function Jm(e){rt.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\\.6\\.[0-2]|^v0\\.5\\./)&&t(e),e.lutimes||r(e),e.chown=o(e.chown),e.fchown=o(e.fchown),e.lchown=o(e.lchown),e.chmod=n(e.chmod),e.fchmod=n(e.fchmod),e.lchmod=n(e.lchmod),e.chownSync=s(e.chownSync),e.fchownSync=s(e.fchownSync),e.lchownSync=s(e.lchownSync),e.chmodSync=i(e.chmodSync),e.fchmodSync=i(e.fchmodSync),e.lchmodSync=i(e.lchmodSync),e.stat=a(e.stat),e.fstat=a(e.fstat),e.lstat=a(e.lstat),e.statSync=u(e.statSync),e.fstatSync=u(e.fstatSync),e.lstatSync=u(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(f,h,l){l&&process.nextTick(l)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(f,h,l,m){m&&process.nextTick(m)},e.lchownSync=function(){}),Hm==="win32"&&(e.rename=typeof e.rename!="function"?e.rename:function(f){function h(l,m,g){var E=Date.now(),_=0;f(l,m,function A(q){if(q&&(q.code==="EACCES"||q.code==="EPERM"||q.code==="EBUSY")&&Date.now()-E<6e4){setTimeout(function(){e.stat(m,function(L,G){L&&L.code==="ENOENT"?f(l,m,A):g(q)})},_),_<100&&(_+=10);return}g&&g(q)})}return Object.setPrototypeOf&&Object.setPrototypeOf(h,f),h}(e.rename)),e.read=typeof e.read!="function"?e.read:function(f){function h(l,m,g,E,_,A){var q;if(A&&typeof A=="function"){var L=0;q=function(G,V,R){if(G&&G.code==="EAGAIN"&&L<10)return L++,f.call(e,l,m,g,E,_,q);A.apply(this,arguments)}}return f.call(e,l,m,g,E,_,q)}return Object.setPrototypeOf&&Object.setPrototypeOf(h,f),h}(e.read),e.readSync=typeof e.readSync!="function"?e.readSync:function(f){return function(h,l,m,g,E){for(var _=0;;)try{return f.call(e,h,l,m,g,E)}catch(A){if(A.code==="EAGAIN"&&_<10){_++;continue}throw A}}}(e.readSync);function t(f){f.lchmod=function(h,l,m){f.open(h,rt.O_WRONLY|rt.O_SYMLINK,l,function(g,E){if(g){m&&m(g);return}f.fchmod(E,l,function(_){f.close(E,function(A){m&&m(_||A)})})})},f.lchmodSync=function(h,l){var m=f.openSync(h,rt.O_WRONLY|rt.O_SYMLINK,l),g=!0,E;try{E=f.fchmodSync(m,l),g=!1}finally{if(g)try{f.closeSync(m)}catch(_){}else f.closeSync(m)}return E}}function r(f){rt.hasOwnProperty("O_SYMLINK")&&f.futimes?(f.lutimes=function(h,l,m,g){f.open(h,rt.O_SYMLINK,function(E,_){if(E){g&&g(E);return}f.futimes(_,l,m,function(A){f.close(_,function(q){g&&g(A||q)})})})},f.lutimesSync=function(h,l,m){var g=f.openSync(h,rt.O_SYMLINK),E,_=!0;try{E=f.futimesSync(g,l,m),_=!1}finally{if(_)try{f.closeSync(g)}catch(A){}else f.closeSync(g)}return E}):f.futimes&&(f.lutimes=function(h,l,m,g){g&&process.nextTick(g)},f.lutimesSync=function(){})}function n(f){return f&&function(h,l,m){return f.call(e,h,l,function(g){d(g)&&(g=null),m&&m.apply(this,arguments)})}}function i(f){return f&&function(h,l){try{return f.call(e,h,l)}catch(m){if(!d(m))throw m}}}function o(f){return f&&function(h,l,m,g){return f.call(e,h,l,m,function(E){d(E)&&(E=null),g&&g.apply(this,arguments)})}}function s(f){return f&&function(h,l,m){try{return f.call(e,h,l,m)}catch(g){if(!d(g))throw g}}}function a(f){return f&&function(h,l,m){typeof l=="function"&&(m=l,l=null);function g(E,_){_&&(_.uid<0&&(_.uid+=4294967296),_.gid<0&&(_.gid+=4294967296)),m&&m.apply(this,arguments)}return l?f.call(e,h,l,g):f.call(e,h,g)}}function u(f){return f&&function(h,l){var m=l?f.call(e,h,l):f.call(e,h);return m&&(m.uid<0&&(m.uid+=4294967296),m.gid<0&&(m.gid+=4294967296)),m}}function d(f){if(!f||f.code==="ENOSYS")return!0;var h=!process.getuid||process.getuid()!==0;return!!(h&&(f.code==="EINVAL"||f.code==="EPERM"))}}});var Ja=F((Ax,Ha)=>{var Ga=require("stream").Stream;Ha.exports=Vm;function Vm(e){return{ReadStream:t,WriteStream:r};function t(n,i){if(!(this instanceof t))return new t(n,i);Ga.call(this);var o=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var s=Object.keys(i),a=0,u=s.length;a<u;a++){var d=s[a];this[d]=i[d]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){o._read()});return}e.open(this.path,this.flags,this.mode,function(f,h){if(f){o.emit("error",f),o.readable=!1;return}o.fd=h,o.emit("open",h),o._read()})}function r(n,i){if(!(this instanceof r))return new r(n,i);Ga.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var o=Object.keys(i),s=0,a=o.length;s<a;s++){var u=o[s];this[u]=i[u]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var Ya=F((Nx,Va)=>{"use strict";Va.exports=Qm;var Ym=Object.getPrototypeOf||function(e){return e.__proto__};function Qm(e){if(e===null||typeof e!="object")return e;if(e instanceof Object)var t={__proto__:Ym(e)};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}),t}});var de=F((Cx,Ci)=>{var ie=require("fs"),Zm=Ka(),Xm=Ja(),eh=Ya(),pn=require("util"),ge,hn;typeof Symbol=="function"&&typeof Symbol.for=="function"?(ge=Symbol.for("graceful-fs.queue"),hn=Symbol.for("graceful-fs.previous")):(ge="___graceful-fs.queue",hn="___graceful-fs.previous");function th(){}function Xa(e,t){Object.defineProperty(e,ge,{get:function(){return t}})}var ht=th;pn.debuglog?ht=pn.debuglog("gfs4"):/\\bgfs4\\b/i.test(process.env.NODE_DEBUG||"")&&(ht=function(){var e=pn.format.apply(pn,arguments);e="GFS4: "+e.split(/\\n/).join(`\nGFS4: `),console.error(e)});ie[ge]||(Qa=global[ge]||[],Xa(ie,Qa),ie.close=function(e){function t(r,n){return e.call(ie,r,function(i){i||Za(),typeof n=="function"&&n.apply(this,arguments)})}return Object.defineProperty(t,hn,{value:e}),t}(ie.close),ie.closeSync=function(e){function t(r){e.apply(ie,arguments),Za()}return Object.defineProperty(t,hn,{value:e}),t}(ie.closeSync),/\\bgfs4\\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){ht(ie[ge]),require("assert").equal(ie[ge].length,0)}));var Qa;global[ge]||Xa(global,ie[ge]);Ci.exports=Ai(eh(ie));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!ie.__patched&&(Ci.exports=Ai(ie),ie.__patched=!0);function Ai(e){Zm(e),e.gracefulify=Ai,e.createReadStream=V,e.createWriteStream=R;var t=e.readFile;e.readFile=r;function r(S,T,b){return typeof T=="function"&&(b=T,T=null),O(S,T,b);function O(k,W,$,M){return t(k,W,function(U){U&&(U.code==="EMFILE"||U.code==="ENFILE")?Ct([O,[k,W,$],U,M||Date.now(),Date.now()]):typeof $=="function"&&$.apply(this,arguments)})}}var n=e.writeFile;e.writeFile=i;function i(S,T,b,O){return typeof b=="function"&&(O=b,b=null),k(S,T,b,O);function k(W,$,M,U,z){return n(W,$,M,function(J){J&&(J.code==="EMFILE"||J.code==="ENFILE")?Ct([k,[W,$,M,U],J,z||Date.now(),Date.now()]):typeof U=="function"&&U.apply(this,arguments)})}}var o=e.appendFile;o&&(e.appendFile=s);function s(S,T,b,O){return typeof b=="function"&&(O=b,b=null),k(S,T,b,O);function k(W,$,M,U,z){return o(W,$,M,function(J){J&&(J.code==="EMFILE"||J.code==="ENFILE")?Ct([k,[W,$,M,U],J,z||Date.now(),Date.now()]):typeof U=="function"&&U.apply(this,arguments)})}}var a=e.copyFile;a&&(e.copyFile=u);function u(S,T,b,O){return typeof b=="function"&&(O=b,b=0),k(S,T,b,O);function k(W,$,M,U,z){return a(W,$,M,function(J){J&&(J.code==="EMFILE"||J.code==="ENFILE")?Ct([k,[W,$,M,U],J,z||Date.now(),Date.now()]):typeof U=="function"&&U.apply(this,arguments)})}}var d=e.readdir;e.readdir=h;var f=/^v[0-5]\\./;function h(S,T,b){typeof T=="function"&&(b=T,T=null);var O=f.test(process.version)?function($,M,U,z){return d($,k($,M,U,z))}:function($,M,U,z){return d($,M,k($,M,U,z))};return O(S,T,b);function k(W,$,M,U){return function(z,J){z&&(z.code==="EMFILE"||z.code==="ENFILE")?Ct([O,[W,$,M],z,U||Date.now(),Date.now()]):(J&&J.sort&&J.sort(),typeof M=="function"&&M.call(this,z,J))}}}if(process.version.substr(0,4)==="v0.8"){var l=Xm(e);A=l.ReadStream,L=l.WriteStream}var m=e.ReadStream;m&&(A.prototype=Object.create(m.prototype),A.prototype.open=q);var g=e.WriteStream;g&&(L.prototype=Object.create(g.prototype),L.prototype.open=G),Object.defineProperty(e,"ReadStream",{get:function(){return A},set:function(S){A=S},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return L},set:function(S){L=S},enumerable:!0,configurable:!0});var E=A;Object.defineProperty(e,"FileReadStream",{get:function(){return E},set:function(S){E=S},enumerable:!0,configurable:!0});var _=L;Object.defineProperty(e,"FileWriteStream",{get:function(){return _},set:function(S){_=S},enumerable:!0,configurable:!0});function A(S,T){return this instanceof A?(m.apply(this,arguments),this):A.apply(Object.create(A.prototype),arguments)}function q(){var S=this;B(S.path,S.flags,S.mode,function(T,b){T?(S.autoClose&&S.destroy(),S.emit("error",T)):(S.fd=b,S.emit("open",b),S.read())})}function L(S,T){return this instanceof L?(g.apply(this,arguments),this):L.apply(Object.create(L.prototype),arguments)}function G(){var S=this;B(S.path,S.flags,S.mode,function(T,b){T?(S.destroy(),S.emit("error",T)):(S.fd=b,S.emit("open",b))})}function V(S,T){return new e.ReadStream(S,T)}function R(S,T){return new e.WriteStream(S,T)}var K=e.open;e.open=B;function B(S,T,b,O){return typeof b=="function"&&(O=b,b=null),k(S,T,b,O);function k(W,$,M,U,z){return K(W,$,M,function(J,Pr){J&&(J.code==="EMFILE"||J.code==="ENFILE")?Ct([k,[W,$,M,U],J,z||Date.now(),Date.now()]):typeof U=="function"&&U.apply(this,arguments)})}}return e}function Ct(e){ht("ENQUEUE",e[0].name,e[1]),ie[ge].push(e),Ni()}var mn;function Za(){for(var e=Date.now(),t=0;t<ie[ge].length;++t)ie[ge][t].length>2&&(ie[ge][t][3]=e,ie[ge][t][4]=e);Ni()}function Ni(){if(clearTimeout(mn),mn=void 0,ie[ge].length!==0){var e=ie[ge].shift(),t=e[0],r=e[1],n=e[2],i=e[3],o=e[4];if(i===void 0)ht("RETRY",t.name,r),t.apply(null,r);else if(Date.now()-i>=6e4){ht("TIMEOUT",t.name,r);var s=r.pop();typeof s=="function"&&s.call(null,n)}else{var a=Date.now()-o,u=Math.max(o-i,1),d=Math.min(u*1.2,100);a>=d?(ht("RETRY",t.name,r),t.apply(null,r.concat([i]))):ie[ge].push(e)}mn===void 0&&(mn=setTimeout(Ni,0))}}});var Ri=F(gt=>{"use strict";var eu=_e().fromCallback,Pe=de(),rh=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchown","lchmod","link","lstat","mkdir","mkdtemp","open","readFile","readdir","readlink","realpath","rename","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(e=>typeof Pe[e]=="function");Object.keys(Pe).forEach(e=>{e!=="promises"&&(gt[e]=Pe[e])});rh.forEach(e=>{gt[e]=eu(Pe[e])});gt.exists=function(e,t){return typeof t=="function"?Pe.exists(e,t):new Promise(r=>Pe.exists(e,r))};gt.read=function(e,t,r,n,i,o){return typeof o=="function"?Pe.read(e,t,r,n,i,o):new Promise((s,a)=>{Pe.read(e,t,r,n,i,(u,d,f)=>{if(u)return a(u);s({bytesRead:d,buffer:f})})})};gt.write=function(e,t,...r){return typeof r[r.length-1]=="function"?Pe.write(e,t,...r):new Promise((n,i)=>{Pe.write(e,t,...r,(o,s,a)=>{if(o)return i(o);n({bytesWritten:s,buffer:a})})})};typeof Pe.realpath.native=="function"&&(gt.realpath.native=eu(Pe.realpath.native))});var qi=F((Px,ru)=>{"use strict";var Pi=require("path");function tu(e){return e=Pi.normalize(Pi.resolve(e)).split(Pi.sep),e.length>0?e[0]:null}var nh=/[<>:"|?*]/;function ih(e){let t=tu(e);return e=e.replace(t,""),nh.test(e)}ru.exports={getRootPath:tu,invalidWin32Path:ih}});var iu=F((qx,nu)=>{"use strict";var oh=de(),Li=require("path"),sh=qi().invalidWin32Path,ah=parseInt("0777",8);function Mi(e,t,r,n){if(typeof t=="function"?(r=t,t={}):(!t||typeof t!="object")&&(t={mode:t}),process.platform==="win32"&&sh(e)){let s=new Error(e+" contains invalid WIN32 path characters.");return s.code="EINVAL",r(s)}let i=t.mode,o=t.fs||oh;i===void 0&&(i=ah&~process.umask()),n||(n=null),r=r||function(){},e=Li.resolve(e),o.mkdir(e,i,s=>{if(!s)return n=n||e,r(null,n);switch(s.code){case"ENOENT":if(Li.dirname(e)===e)return r(s);Mi(Li.dirname(e),t,(a,u)=>{a?r(a,u):Mi(e,t,r,u)});break;default:o.stat(e,(a,u)=>{a||!u.isDirectory()?r(s,n):r(null,n)});break}})}nu.exports=Mi});var su=F((Lx,ou)=>{"use strict";var uh=de(),$i=require("path"),ch=qi().invalidWin32Path,fh=parseInt("0777",8);function ji(e,t,r){(!t||typeof t!="object")&&(t={mode:t});let n=t.mode,i=t.fs||uh;if(process.platform==="win32"&&ch(e)){let o=new Error(e+" contains invalid WIN32 path characters.");throw o.code="EINVAL",o}n===void 0&&(n=fh&~process.umask()),r||(r=null),e=$i.resolve(e);try{i.mkdirSync(e,n),r=r||e}catch(o){if(o.code==="ENOENT"){if($i.dirname(e)===e)throw o;r=ji($i.dirname(e),t,r),ji(e,t,r)}else{let s;try{s=i.statSync(e)}catch(a){throw o}if(!s.isDirectory())throw o}}return r}ou.exports=ji});var Te=F((Mx,au)=>{"use strict";var lh=_e().fromCallback,Wi=lh(iu()),Bi=su();au.exports={mkdirs:Wi,mkdirsSync:Bi,mkdirp:Wi,mkdirpSync:Bi,ensureDir:Wi,ensureDirSync:Bi}});var Ui=F(($x,cu)=>{"use strict";var we=de(),uu=require("os"),gn=require("path");function dh(){let e=gn.join("millis-test-sync"+Date.now().toString()+Math.random().toString().slice(2));e=gn.join(uu.tmpdir(),e);let t=new Date(1435410243862);we.writeFileSync(e,"https://github.com/jprichardson/node-fs-extra/pull/141");let r=we.openSync(e,"r+");return we.futimesSync(r,t,t),we.closeSync(r),we.statSync(e).mtime>1435410243e3}function ph(e){let t=gn.join("millis-test"+Date.now().toString()+Math.random().toString().slice(2));t=gn.join(uu.tmpdir(),t);let r=new Date(1435410243862);we.writeFile(t,"https://github.com/jprichardson/node-fs-extra/pull/141",n=>{if(n)return e(n);we.open(t,"r+",(i,o)=>{if(i)return e(i);we.futimes(o,r,r,s=>{if(s)return e(s);we.close(o,a=>{if(a)return e(a);we.stat(t,(u,d)=>{if(u)return e(u);e(null,d.mtime>1435410243e3)})})})})})}function mh(e){if(typeof e=="number")return Math.floor(e/1e3)*1e3;if(e instanceof Date)return new Date(Math.floor(e.getTime()/1e3)*1e3);throw new Error("fs-extra: timeRemoveMillis() unknown parameter type")}function hh(e,t,r,n){we.open(e,"r+",(i,o)=>{if(i)return n(i);we.futimes(o,t,r,s=>{we.close(o,a=>{n&&n(s||a)})})})}function gh(e,t,r){let n=we.openSync(e,"r+");return we.futimesSync(n,t,r),we.closeSync(n)}cu.exports={hasMillisRes:ph,hasMillisResSync:dh,timeRemoveMillis:mh,utimesMillis:hh,utimesMillisSync:gh}});var hr=F((jx,hu)=>{"use strict";var qe=de(),Ie=require("path"),fu=10,lu=5,yh=0,Ki=process.versions.node.split("."),du=Number.parseInt(Ki[0],10),pu=Number.parseInt(Ki[1],10),vh=Number.parseInt(Ki[2],10);function pr(){if(du>fu)return!0;if(du===fu){if(pu>lu)return!0;if(pu===lu&&vh>=yh)return!0}return!1}function wh(e,t,r){pr()?qe.stat(e,{bigint:!0},(n,i)=>{if(n)return r(n);qe.stat(t,{bigint:!0},(o,s)=>o?o.code==="ENOENT"?r(null,{srcStat:i,destStat:null}):r(o):r(null,{srcStat:i,destStat:s}))}):qe.stat(e,(n,i)=>{if(n)return r(n);qe.stat(t,(o,s)=>o?o.code==="ENOENT"?r(null,{srcStat:i,destStat:null}):r(o):r(null,{srcStat:i,destStat:s}))})}function bh(e,t){let r,n;pr()?r=qe.statSync(e,{bigint:!0}):r=qe.statSync(e);try{pr()?n=qe.statSync(t,{bigint:!0}):n=qe.statSync(t)}catch(i){if(i.code==="ENOENT")return{srcStat:r,destStat:null};throw i}return{srcStat:r,destStat:n}}function xh(e,t,r,n){wh(e,t,(i,o)=>{if(i)return n(i);let{srcStat:s,destStat:a}=o;return a&&a.ino&&a.dev&&a.ino===s.ino&&a.dev===s.dev?n(new Error("Source and destination must not be the same.")):s.isDirectory()&&Gi(e,t)?n(new Error(mr(e,t,r))):n(null,{srcStat:s,destStat:a})})}function Eh(e,t,r){let{srcStat:n,destStat:i}=bh(e,t);if(i&&i.ino&&i.dev&&i.ino===n.ino&&i.dev===n.dev)throw new Error("Source and destination must not be the same.");if(n.isDirectory()&&Gi(e,t))throw new Error(mr(e,t,r));return{srcStat:n,destStat:i}}function zi(e,t,r,n,i){let o=Ie.resolve(Ie.dirname(e)),s=Ie.resolve(Ie.dirname(r));if(s===o||s===Ie.parse(s).root)return i();pr()?qe.stat(s,{bigint:!0},(a,u)=>a?a.code==="ENOENT"?i():i(a):u.ino&&u.dev&&u.ino===t.ino&&u.dev===t.dev?i(new Error(mr(e,r,n))):zi(e,t,s,n,i)):qe.stat(s,(a,u)=>a?a.code==="ENOENT"?i():i(a):u.ino&&u.dev&&u.ino===t.ino&&u.dev===t.dev?i(new Error(mr(e,r,n))):zi(e,t,s,n,i))}function mu(e,t,r,n){let i=Ie.resolve(Ie.dirname(e)),o=Ie.resolve(Ie.dirname(r));if(o===i||o===Ie.parse(o).root)return;let s;try{pr()?s=qe.statSync(o,{bigint:!0}):s=qe.statSync(o)}catch(a){if(a.code==="ENOENT")return;throw a}if(s.ino&&s.dev&&s.ino===t.ino&&s.dev===t.dev)throw new Error(mr(e,r,n));return mu(e,t,o,n)}function Gi(e,t){let r=Ie.resolve(e).split(Ie.sep).filter(i=>i),n=Ie.resolve(t).split(Ie.sep).filter(i=>i);return r.reduce((i,o,s)=>i&&n[s]===o,!0)}function mr(e,t,r){return`Cannot ${r} \'${e}\' to a subdirectory of itself, \'${t}\'.`}hu.exports={checkPaths:xh,checkPathsSync:Eh,checkParentPaths:zi,checkParentPathsSync:mu,isSrcSubdir:Gi}});var yu=F((Wx,gu)=>{"use strict";gu.exports=function(e){if(typeof Buffer.allocUnsafe=="function")try{return Buffer.allocUnsafe(e)}catch(t){return new Buffer(e)}return new Buffer(e)}});var Eu=F((Bx,xu)=>{"use strict";var re=de(),gr=require("path"),Sh=Te().mkdirsSync,_h=Ui().utimesMillisSync,yr=hr();function Ih(e,t,r){typeof r=="function"&&(r={filter:r}),r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269`);let{srcStat:n,destStat:i}=yr.checkPathsSync(e,t,"copy");return yr.checkParentPathsSync(e,n,t,"copy"),kh(i,e,t,r)}function kh(e,t,r,n){if(n.filter&&!n.filter(t,r))return;let i=gr.dirname(r);return re.existsSync(i)||Sh(i),vu(e,t,r,n)}function vu(e,t,r,n){if(!(n.filter&&!n.filter(t,r)))return Oh(e,t,r,n)}function Oh(e,t,r,n){let o=(n.dereference?re.statSync:re.lstatSync)(t);if(o.isDirectory())return Ah(o,e,t,r,n);if(o.isFile()||o.isCharacterDevice()||o.isBlockDevice())return Th(o,e,t,r,n);if(o.isSymbolicLink())return Rh(e,t,r,n)}function Th(e,t,r,n,i){return t?Dh(e,r,n,i):wu(e,r,n,i)}function Dh(e,t,r,n){if(n.overwrite)return re.unlinkSync(r),wu(e,t,r,n);if(n.errorOnExist)throw new Error(`\'${r}\' already exists`)}function wu(e,t,r,n){return typeof re.copyFileSync=="function"?(re.copyFileSync(t,r),re.chmodSync(r,e.mode),n.preserveTimestamps?_h(r,e.atime,e.mtime):void 0):Fh(e,t,r,n)}function Fh(e,t,r,n){let o=yu()(65536),s=re.openSync(t,"r"),a=re.openSync(r,"w",e.mode),u=0;for(;u<e.size;){let d=re.readSync(s,o,0,65536,u);re.writeSync(a,o,0,d),u+=d}n.preserveTimestamps&&re.futimesSync(a,e.atime,e.mtime),re.closeSync(s),re.closeSync(a)}function Ah(e,t,r,n,i){if(!t)return Nh(e,r,n,i);if(t&&!t.isDirectory())throw new Error(`Cannot overwrite non-directory \'${n}\' with directory \'${r}\'.`);return bu(r,n,i)}function Nh(e,t,r,n){return re.mkdirSync(r),bu(t,r,n),re.chmodSync(r,e.mode)}function bu(e,t,r){re.readdirSync(e).forEach(n=>Ch(n,e,t,r))}function Ch(e,t,r,n){let i=gr.join(t,e),o=gr.join(r,e),{destStat:s}=yr.checkPathsSync(i,o,"copy");return vu(s,i,o,n)}function Rh(e,t,r,n){let i=re.readlinkSync(t);if(n.dereference&&(i=gr.resolve(process.cwd(),i)),e){let o;try{o=re.readlinkSync(r)}catch(s){if(s.code==="EINVAL"||s.code==="UNKNOWN")return re.symlinkSync(i,r);throw s}if(n.dereference&&(o=gr.resolve(process.cwd(),o)),yr.isSrcSubdir(i,o))throw new Error(`Cannot copy \'${i}\' to a subdirectory of itself, \'${o}\'.`);if(re.statSync(r).isDirectory()&&yr.isSrcSubdir(o,i))throw new Error(`Cannot overwrite \'${o}\' with \'${i}\'.`);return Ph(i,r)}else return re.symlinkSync(i,r)}function Ph(e,t){return re.unlinkSync(t),re.symlinkSync(e,t)}xu.exports=Ih});var Hi=F((Ux,Su)=>{"use strict";Su.exports={copySync:Eu()}});var Ue=F((zx,Iu)=>{"use strict";var qh=_e().fromPromise,_u=Ri();function Lh(e){return _u.access(e).then(()=>!0).catch(()=>!1)}Iu.exports={pathExists:qh(Lh),pathExistsSync:_u.existsSync}});var Ru=F((Kx,Cu)=>{"use strict";var ye=de(),vr=require("path"),Mh=Te().mkdirs,$h=Ue().pathExists,jh=Ui().utimesMillis,wr=hr();function Wh(e,t,r,n){typeof r=="function"&&!n?(n=r,r={}):typeof r=="function"&&(r={filter:r}),n=n||function(){},r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269`),wr.checkPaths(e,t,"copy",(i,o)=>{if(i)return n(i);let{srcStat:s,destStat:a}=o;wr.checkParentPaths(e,s,t,"copy",u=>u?n(u):r.filter?Tu(ku,a,e,t,r,n):ku(a,e,t,r,n))})}function ku(e,t,r,n,i){let o=vr.dirname(r);$h(o,(s,a)=>{if(s)return i(s);if(a)return Ji(e,t,r,n,i);Mh(o,u=>u?i(u):Ji(e,t,r,n,i))})}function Tu(e,t,r,n,i,o){Promise.resolve(i.filter(r,n)).then(s=>s?e(t,r,n,i,o):o(),s=>o(s))}function Ji(e,t,r,n,i){return n.filter?Tu(Ou,e,t,r,n,i):Ou(e,t,r,n,i)}function Ou(e,t,r,n,i){(n.dereference?ye.stat:ye.lstat)(t,(s,a)=>{if(s)return i(s);if(a.isDirectory())return Kh(a,e,t,r,n,i);if(a.isFile()||a.isCharacterDevice()||a.isBlockDevice())return Bh(a,e,t,r,n,i);if(a.isSymbolicLink())return Jh(e,t,r,n,i)})}function Bh(e,t,r,n,i,o){return t?Uh(e,r,n,i,o):Du(e,r,n,i,o)}function Uh(e,t,r,n,i){if(n.overwrite)ye.unlink(r,o=>o?i(o):Du(e,t,r,n,i));else return n.errorOnExist?i(new Error(`\'${r}\' already exists`)):i()}function Du(e,t,r,n,i){return typeof ye.copyFile=="function"?ye.copyFile(t,r,o=>o?i(o):Fu(e,r,n,i)):zh(e,t,r,n,i)}function zh(e,t,r,n,i){let o=ye.createReadStream(t);o.on("error",s=>i(s)).once("open",()=>{let s=ye.createWriteStream(r,{mode:e.mode});s.on("error",a=>i(a)).on("open",()=>o.pipe(s)).once("close",()=>Fu(e,r,n,i))})}function Fu(e,t,r,n){ye.chmod(t,e.mode,i=>i?n(i):r.preserveTimestamps?jh(t,e.atime,e.mtime,n):n())}function Kh(e,t,r,n,i,o){return t?t&&!t.isDirectory()?o(new Error(`Cannot overwrite non-directory \'${n}\' with directory \'${r}\'.`)):Au(r,n,i,o):Gh(e,r,n,i,o)}function Gh(e,t,r,n,i){ye.mkdir(r,o=>{if(o)return i(o);Au(t,r,n,s=>s?i(s):ye.chmod(r,e.mode,i))})}function Au(e,t,r,n){ye.readdir(e,(i,o)=>i?n(i):Nu(o,e,t,r,n))}function Nu(e,t,r,n,i){let o=e.pop();return o?Hh(e,o,t,r,n,i):i()}function Hh(e,t,r,n,i,o){let s=vr.join(r,t),a=vr.join(n,t);wr.checkPaths(s,a,"copy",(u,d)=>{if(u)return o(u);let{destStat:f}=d;Ji(f,s,a,i,h=>h?o(h):Nu(e,r,n,i,o))})}function Jh(e,t,r,n,i){ye.readlink(t,(o,s)=>{if(o)return i(o);if(n.dereference&&(s=vr.resolve(process.cwd(),s)),e)ye.readlink(r,(a,u)=>a?a.code==="EINVAL"||a.code==="UNKNOWN"?ye.symlink(s,r,i):i(a):(n.dereference&&(u=vr.resolve(process.cwd(),u)),wr.isSrcSubdir(s,u)?i(new Error(`Cannot copy \'${s}\' to a subdirectory of itself, \'${u}\'.`)):e.isDirectory()&&wr.isSrcSubdir(u,s)?i(new Error(`Cannot overwrite \'${u}\' with \'${s}\'.`)):Vh(s,r,i)));else return ye.symlink(s,r,i)})}function Vh(e,t,r){ye.unlink(t,n=>n?r(n):ye.symlink(e,t,r))}Cu.exports=Wh});var Vi=F((Gx,Pu)=>{"use strict";var Yh=_e().fromCallback;Pu.exports={copy:Yh(Ru())}});var zu=F((Hx,Uu)=>{"use strict";var qu=de(),ju=require("path"),Y=require("assert"),br=process.platform==="win32";function Wu(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(r=>{e[r]=e[r]||qu[r],r=r+"Sync",e[r]=e[r]||qu[r]}),e.maxBusyTries=e.maxBusyTries||3}function Yi(e,t,r){let n=0;typeof t=="function"&&(r=t,t={}),Y(e,"rimraf: missing path"),Y.strictEqual(typeof e,"string","rimraf: path should be a string"),Y.strictEqual(typeof r,"function","rimraf: callback function required"),Y(t,"rimraf: invalid options argument provided"),Y.strictEqual(typeof t,"object","rimraf: options should be object"),Wu(t),Lu(e,t,function i(o){if(o){if((o.code==="EBUSY"||o.code==="ENOTEMPTY"||o.code==="EPERM")&&n<t.maxBusyTries){n++;let s=n*100;return setTimeout(()=>Lu(e,t,i),s)}o.code==="ENOENT"&&(o=null)}r(o)})}function Lu(e,t,r){Y(e),Y(t),Y(typeof r=="function"),t.lstat(e,(n,i)=>{if(n&&n.code==="ENOENT")return r(null);if(n&&n.code==="EPERM"&&br)return Mu(e,t,n,r);if(i&&i.isDirectory())return yn(e,t,n,r);t.unlink(e,o=>{if(o){if(o.code==="ENOENT")return r(null);if(o.code==="EPERM")return br?Mu(e,t,o,r):yn(e,t,o,r);if(o.code==="EISDIR")return yn(e,t,o,r)}return r(o)})})}function Mu(e,t,r,n){Y(e),Y(t),Y(typeof n=="function"),r&&Y(r instanceof Error),t.chmod(e,438,i=>{i?n(i.code==="ENOENT"?null:r):t.stat(e,(o,s)=>{o?n(o.code==="ENOENT"?null:r):s.isDirectory()?yn(e,t,r,n):t.unlink(e,n)})})}function $u(e,t,r){let n;Y(e),Y(t),r&&Y(r instanceof Error);try{t.chmodSync(e,438)}catch(i){if(i.code==="ENOENT")return;throw r}try{n=t.statSync(e)}catch(i){if(i.code==="ENOENT")return;throw r}n.isDirectory()?vn(e,t,r):t.unlinkSync(e)}function yn(e,t,r,n){Y(e),Y(t),r&&Y(r instanceof Error),Y(typeof n=="function"),t.rmdir(e,i=>{i&&(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")?Qh(e,t,n):i&&i.code==="ENOTDIR"?n(r):n(i)})}function Qh(e,t,r){Y(e),Y(t),Y(typeof r=="function"),t.readdir(e,(n,i)=>{if(n)return r(n);let o=i.length,s;if(o===0)return t.rmdir(e,r);i.forEach(a=>{Yi(ju.join(e,a),t,u=>{if(!s){if(u)return r(s=u);--o===0&&t.rmdir(e,r)}})})})}function Bu(e,t){let r;t=t||{},Wu(t),Y(e,"rimraf: missing path"),Y.strictEqual(typeof e,"string","rimraf: path should be a string"),Y(t,"rimraf: missing options"),Y.strictEqual(typeof t,"object","rimraf: options should be object");try{r=t.lstatSync(e)}catch(n){if(n.code==="ENOENT")return;n.code==="EPERM"&&br&&$u(e,t,n)}try{r&&r.isDirectory()?vn(e,t,null):t.unlinkSync(e)}catch(n){if(n.code==="ENOENT")return;if(n.code==="EPERM")return br?$u(e,t,n):vn(e,t,n);if(n.code!=="EISDIR")throw n;vn(e,t,n)}}function vn(e,t,r){Y(e),Y(t),r&&Y(r instanceof Error);try{t.rmdirSync(e)}catch(n){if(n.code==="ENOTDIR")throw r;if(n.code==="ENOTEMPTY"||n.code==="EEXIST"||n.code==="EPERM")Zh(e,t);else if(n.code!=="ENOENT")throw n}}function Zh(e,t){if(Y(e),Y(t),t.readdirSync(e).forEach(r=>Bu(ju.join(e,r),t)),br){let r=Date.now();do try{return t.rmdirSync(e,t)}catch(n){}while(Date.now()-r<500)}else return t.rmdirSync(e,t)}Uu.exports=Yi;Yi.sync=Bu});var xr=F((Jx,Gu)=>{"use strict";var Xh=_e().fromCallback,Ku=zu();Gu.exports={remove:Xh(Ku),removeSync:Ku.sync}});var ec=F((Vx,Xu)=>{"use strict";var eg=_e().fromCallback,Vu=de(),Yu=require("path"),Qu=Te(),Zu=xr(),Hu=eg(function(t,r){r=r||function(){},Vu.readdir(t,(n,i)=>{if(n)return Qu.mkdirs(t,r);i=i.map(s=>Yu.join(t,s)),o();function o(){let s=i.pop();if(!s)return r();Zu.remove(s,a=>{if(a)return r(a);o()})}})});function Ju(e){let t;try{t=Vu.readdirSync(e)}catch(r){return Qu.mkdirsSync(e)}t.forEach(r=>{r=Yu.join(e,r),Zu.removeSync(r)})}Xu.exports={emptyDirSync:Ju,emptydirSync:Ju,emptyDir:Hu,emptydir:Hu}});var ic=F((Yx,nc)=>{"use strict";var tg=_e().fromCallback,tc=require("path"),Er=de(),rc=Te(),rg=Ue().pathExists;function ng(e,t){function r(){Er.writeFile(e,"",n=>{if(n)return t(n);t()})}Er.stat(e,(n,i)=>{if(!n&&i.isFile())return t();let o=tc.dirname(e);rg(o,(s,a)=>{if(s)return t(s);if(a)return r();rc.mkdirs(o,u=>{if(u)return t(u);r()})})})}function ig(e){let t;try{t=Er.statSync(e)}catch(n){}if(t&&t.isFile())return;let r=tc.dirname(e);Er.existsSync(r)||rc.mkdirsSync(r),Er.writeFileSync(e,"")}nc.exports={createFile:tg(ng),createFileSync:ig}});var cc=F((Qx,uc)=>{"use strict";var og=_e().fromCallback,sc=require("path"),yt=de(),ac=Te(),oc=Ue().pathExists;function sg(e,t,r){function n(i,o){yt.link(i,o,s=>{if(s)return r(s);r(null)})}oc(t,(i,o)=>{if(i)return r(i);if(o)return r(null);yt.lstat(e,s=>{if(s)return s.message=s.message.replace("lstat","ensureLink"),r(s);let a=sc.dirname(t);oc(a,(u,d)=>{if(u)return r(u);if(d)return n(e,t);ac.mkdirs(a,f=>{if(f)return r(f);n(e,t)})})})})}function ag(e,t){if(yt.existsSync(t))return;try{yt.lstatSync(e)}catch(o){throw o.message=o.message.replace("lstat","ensureLink"),o}let n=sc.dirname(t);return yt.existsSync(n)||ac.mkdirsSync(n),yt.linkSync(e,t)}uc.exports={createLink:og(sg),createLinkSync:ag}});var lc=F((Zx,fc)=>{"use strict";var nt=require("path"),Sr=de(),ug=Ue().pathExists;function cg(e,t,r){if(nt.isAbsolute(e))return Sr.lstat(e,n=>n?(n.message=n.message.replace("lstat","ensureSymlink"),r(n)):r(null,{toCwd:e,toDst:e}));{let n=nt.dirname(t),i=nt.join(n,e);return ug(i,(o,s)=>o?r(o):s?r(null,{toCwd:i,toDst:e}):Sr.lstat(e,a=>a?(a.message=a.message.replace("lstat","ensureSymlink"),r(a)):r(null,{toCwd:e,toDst:nt.relative(n,e)})))}}function fg(e,t){let r;if(nt.isAbsolute(e)){if(r=Sr.existsSync(e),!r)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}else{let n=nt.dirname(t),i=nt.join(n,e);if(r=Sr.existsSync(i),r)return{toCwd:i,toDst:e};if(r=Sr.existsSync(e),!r)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:nt.relative(n,e)}}}fc.exports={symlinkPaths:cg,symlinkPathsSync:fg}});var mc=F((Xx,pc)=>{"use strict";var dc=de();function lg(e,t,r){if(r=typeof t=="function"?t:r,t=typeof t=="function"?!1:t,t)return r(null,t);dc.lstat(e,(n,i)=>{if(n)return r(null,"file");t=i&&i.isDirectory()?"dir":"file",r(null,t)})}function dg(e,t){let r;if(t)return t;try{r=dc.lstatSync(e)}catch(n){return"file"}return r&&r.isDirectory()?"dir":"file"}pc.exports={symlinkType:lg,symlinkTypeSync:dg}});var xc=F((eE,bc)=>{"use strict";var pg=_e().fromCallback,gc=require("path"),Rt=de(),yc=Te(),mg=yc.mkdirs,hg=yc.mkdirsSync,vc=lc(),gg=vc.symlinkPaths,yg=vc.symlinkPathsSync,wc=mc(),vg=wc.symlinkType,wg=wc.symlinkTypeSync,hc=Ue().pathExists;function bg(e,t,r,n){n=typeof r=="function"?r:n,r=typeof r=="function"?!1:r,hc(t,(i,o)=>{if(i)return n(i);if(o)return n(null);gg(e,t,(s,a)=>{if(s)return n(s);e=a.toDst,vg(a.toCwd,r,(u,d)=>{if(u)return n(u);let f=gc.dirname(t);hc(f,(h,l)=>{if(h)return n(h);if(l)return Rt.symlink(e,t,d,n);mg(f,m=>{if(m)return n(m);Rt.symlink(e,t,d,n)})})})})})}function xg(e,t,r){if(Rt.existsSync(t))return;let i=yg(e,t);e=i.toDst,r=wg(i.toCwd,r);let o=gc.dirname(t);return Rt.existsSync(o)||hg(o),Rt.symlinkSync(e,t,r)}bc.exports={createSymlink:pg(bg),createSymlinkSync:xg}});var Sc=F((tE,Ec)=>{"use strict";var wn=ic(),bn=cc(),xn=xc();Ec.exports={createFile:wn.createFile,createFileSync:wn.createFileSync,ensureFile:wn.createFile,ensureFileSync:wn.createFileSync,createLink:bn.createLink,createLinkSync:bn.createLinkSync,ensureLink:bn.createLink,ensureLinkSync:bn.createLinkSync,createSymlink:xn.createSymlink,createSymlinkSync:xn.createSymlinkSync,ensureSymlink:xn.createSymlink,ensureSymlinkSync:xn.createSymlinkSync}});var Oc=F((rE,kc)=>{var Pt;try{Pt=de()}catch(e){Pt=require("fs")}function Eg(e,t,r){r==null&&(r=t,t={}),typeof t=="string"&&(t={encoding:t}),t=t||{};var n=t.fs||Pt,i=!0;"throws"in t&&(i=t.throws),n.readFile(e,t,function(o,s){if(o)return r(o);s=Ic(s);var a;try{a=JSON.parse(s,t?t.reviver:null)}catch(u){return i?(u.message=e+": "+u.message,r(u)):r(null,null)}r(null,a)})}function Sg(e,t){t=t||{},typeof t=="string"&&(t={encoding:t});var r=t.fs||Pt,n=!0;"throws"in t&&(n=t.throws);try{var i=r.readFileSync(e,t);return i=Ic(i),JSON.parse(i,t.reviver)}catch(o){if(n)throw o.message=e+": "+o.message,o;return null}}function _c(e,t){var r,n=`\n`;typeof t=="object"&&t!==null&&(t.spaces&&(r=t.spaces),t.EOL&&(n=t.EOL));var i=JSON.stringify(e,t?t.replacer:null,r);return i.replace(/\\n/g,n)+n}function _g(e,t,r,n){n==null&&(n=r,r={}),r=r||{};var i=r.fs||Pt,o="";try{o=_c(t,r)}catch(s){n&&n(s,null);return}i.writeFile(e,o,r,n)}function Ig(e,t,r){r=r||{};var n=r.fs||Pt,i=_c(t,r);return n.writeFileSync(e,i,r)}function Ic(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e=e.replace(/^\\uFEFF/,""),e}var kg={readFile:Eg,readFileSync:Sg,writeFile:_g,writeFileSync:Ig};kc.exports=kg});var Sn=F((nE,Dc)=>{"use strict";var Tc=_e().fromCallback,En=Oc();Dc.exports={readJson:Tc(En.readFile),readJsonSync:En.readFileSync,writeJson:Tc(En.writeFile),writeJsonSync:En.writeFileSync}});var Nc=F((iE,Ac)=>{"use strict";var Og=require("path"),Tg=Te(),Dg=Ue().pathExists,Fc=Sn();function Fg(e,t,r,n){typeof r=="function"&&(n=r,r={});let i=Og.dirname(e);Dg(i,(o,s)=>{if(o)return n(o);if(s)return Fc.writeJson(e,t,r,n);Tg.mkdirs(i,a=>{if(a)return n(a);Fc.writeJson(e,t,r,n)})})}Ac.exports=Fg});var Rc=F((oE,Cc)=>{"use strict";var Ag=de(),Ng=require("path"),Cg=Te(),Rg=Sn();function Pg(e,t,r){let n=Ng.dirname(e);Ag.existsSync(n)||Cg.mkdirsSync(n),Rg.writeJsonSync(e,t,r)}Cc.exports=Pg});var qc=F((sE,Pc)=>{"use strict";var qg=_e().fromCallback,be=Sn();be.outputJson=qg(Nc());be.outputJsonSync=Rc();be.outputJSON=be.outputJson;be.outputJSONSync=be.outputJsonSync;be.writeJSON=be.writeJson;be.writeJSONSync=be.writeJsonSync;be.readJSON=be.readJson;be.readJSONSync=be.readJsonSync;Pc.exports=be});var Bc=F((aE,Wc)=>{"use strict";var $c=de(),Lg=require("path"),Mg=Hi().copySync,jc=xr().removeSync,$g=Te().mkdirpSync,Lc=hr();function jg(e,t,r){r=r||{};let n=r.overwrite||r.clobber||!1,{srcStat:i}=Lc.checkPathsSync(e,t,"move");return Lc.checkParentPathsSync(e,i,t,"move"),$g(Lg.dirname(t)),Wg(e,t,n)}function Wg(e,t,r){if(r)return jc(t),Mc(e,t,r);if($c.existsSync(t))throw new Error("dest already exists.");return Mc(e,t,r)}function Mc(e,t,r){try{$c.renameSync(e,t)}catch(n){if(n.code!=="EXDEV")throw n;return Bg(e,t,r)}}function Bg(e,t,r){return Mg(e,t,{overwrite:r,errorOnExist:!0}),jc(e)}Wc.exports=jg});var zc=F((uE,Uc)=>{"use strict";Uc.exports={moveSync:Bc()}});var Vc=F((cE,Jc)=>{"use strict";var Ug=de(),zg=require("path"),Kg=Vi().copy,Hc=xr().remove,Gg=Te().mkdirp,Hg=Ue().pathExists,Kc=hr();function Jg(e,t,r,n){typeof r=="function"&&(n=r,r={});let i=r.overwrite||r.clobber||!1;Kc.checkPaths(e,t,"move",(o,s)=>{if(o)return n(o);let{srcStat:a}=s;Kc.checkParentPaths(e,a,t,"move",u=>{if(u)return n(u);Gg(zg.dirname(t),d=>d?n(d):Vg(e,t,i,n))})})}function Vg(e,t,r,n){if(r)return Hc(t,i=>i?n(i):Gc(e,t,r,n));Hg(t,(i,o)=>i?n(i):o?n(new Error("dest already exists.")):Gc(e,t,r,n))}function Gc(e,t,r,n){Ug.rename(e,t,i=>i?i.code!=="EXDEV"?n(i):Yg(e,t,r,n):n())}function Yg(e,t,r,n){Kg(e,t,{overwrite:r,errorOnExist:!0},o=>o?n(o):Hc(e,n))}Jc.exports=Jg});var Qc=F((fE,Yc)=>{"use strict";var Qg=_e().fromCallback;Yc.exports={move:Qg(Vc())}});var tf=F((lE,ef)=>{"use strict";var Zg=_e().fromCallback,_r=de(),Zc=require("path"),Xc=Te(),Xg=Ue().pathExists;function ey(e,t,r,n){typeof r=="function"&&(n=r,r="utf8");let i=Zc.dirname(e);Xg(i,(o,s)=>{if(o)return n(o);if(s)return _r.writeFile(e,t,r,n);Xc.mkdirs(i,a=>{if(a)return n(a);_r.writeFile(e,t,r,n)})})}function ty(e,...t){let r=Zc.dirname(e);if(_r.existsSync(r))return _r.writeFileSync(e,...t);Xc.mkdirsSync(r),_r.writeFileSync(e,...t)}ef.exports={outputFile:Zg(ey),outputFileSync:ty}});var Zi=F((dE,Qi)=>{"use strict";Qi.exports=Object.assign({},Ri(),Hi(),Vi(),ec(),Sc(),qc(),Te(),zc(),Qc(),tf(),Ue(),xr());var rf=require("fs");Object.getOwnPropertyDescriptor(rf,"promises")&&Object.defineProperty(Qi.exports,"promises",{get(){return rf.promises}})});var of=F((pE,nf)=>{nf.exports=()=>new Date});var af=F((mE,sf)=>{var ry=me()("streamroller:fileNameFormatter"),ny=require("path"),iy=".gz",oy=".";sf.exports=({file:e,keepFileExt:t,needsIndex:r,alwaysIncludeDate:n,compress:i,fileNameSep:o})=>{let s=o||oy,a=ny.join(e.dir,e.name),u=m=>m+e.ext,d=(m,g,E)=>(r||!E)&&g?m+s+g:m,f=(m,g,E)=>(g>0||n)&&E?m+s+E:m,h=(m,g)=>g&&i?m+iy:m,l=t?[f,d,u,h]:[u,f,d,h];return({date:m,index:g})=>(ry(`_formatFileName: date=${m}, index=${g}`),l.reduce((E,_)=>_(E,g,m),a))}});var lf=F((hE,ff)=>{var vt=me()("streamroller:fileNameParser"),uf=".gz",cf=an(),sy=".";ff.exports=({file:e,keepFileExt:t,pattern:r,fileNameSep:n})=>{let i=n||sy,o=(l,m)=>l.endsWith(uf)?(vt("it is gzipped"),m.isCompressed=!0,l.slice(0,-1*uf.length)):l,s="__NOT_MATCHING__",h=[o,t?l=>l.startsWith(e.name)&&l.endsWith(e.ext)?(vt("it starts and ends with the right things"),l.slice(e.name.length+1,-1*e.ext.length)):s:l=>l.startsWith(e.base)?(vt("it starts with the right things"),l.slice(e.base.length+1)):s,r?(l,m)=>{let g=l.split(i),E=g[g.length-1];vt("items: ",g,", indexStr: ",E);let _=l;E!==void 0&&E.match(/^\\d+$/)?(_=l.slice(0,-1*(E.length+1)),vt(`dateStr is ${_}`),r&&!_&&(_=E,E="0")):E="0";try{let A=cf.parse(r,_,new Date(0,0));return cf.asString(r,A)!==_?l:(m.index=parseInt(E,10),m.date=_,m.timestamp=A.getTime(),"")}catch(A){return vt(`Problem parsing ${_} as ${r}, error was: `,A),l}}:(l,m)=>l.match(/^\\d+$/)?(vt("it has an index"),m.index=parseInt(l,10),""):l];return l=>{let m={filename:l,index:0,isCompressed:!1};return h.reduce((E,_)=>_(E,m),l)?null:m}}});var pf=F((gE,df)=>{var ke=me()("streamroller:moveAndMaybeCompressFile"),Ve=Zi(),ay=require("zlib"),uy=function(e){let t={mode:parseInt("0600",8),compress:!1},r=Object.assign({},t,e);return ke(`_parseOption: moveAndMaybeCompressFile called with option=${JSON.stringify(r)}`),r},cy=async(e,t,r)=>{if(r=uy(r),e===t){ke("moveAndMaybeCompressFile: source and target are the same, not doing anything");return}if(await Ve.pathExists(e))if(ke(`moveAndMaybeCompressFile: moving file from ${e} to ${t} ${r.compress?"with":"without"} compress`),r.compress)await new Promise((n,i)=>{let o=!1,s=Ve.createWriteStream(t,{mode:r.mode,flags:"wx"}).on("open",()=>{o=!0;let a=Ve.createReadStream(e).on("open",()=>{a.pipe(ay.createGzip()).pipe(s)}).on("error",u=>{ke(`moveAndMaybeCompressFile: error reading ${e}`,u),s.destroy(u)})}).on("finish",()=>{ke(`moveAndMaybeCompressFile: finished compressing ${t}, deleting ${e}`),Ve.unlink(e).then(n).catch(a=>{ke(`moveAndMaybeCompressFile: error deleting ${e}, truncating instead`,a),Ve.truncate(e).then(n).catch(u=>{ke(`moveAndMaybeCompressFile: error truncating ${e}`,u),i(u)})})}).on("error",a=>{o?(ke(`moveAndMaybeCompressFile: error writing ${t}, deleting`,a),Ve.unlink(t).then(()=>{i(a)}).catch(u=>{ke(`moveAndMaybeCompressFile: error deleting ${t}`,u),i(u)})):(ke(`moveAndMaybeCompressFile: error creating ${t}`,a),i(a))})}).catch(()=>{});else{ke(`moveAndMaybeCompressFile: renaming ${e} to ${t}`);try{await Ve.move(e,t,{overwrite:!0})}catch(n){if(ke(`moveAndMaybeCompressFile: error renaming ${e} to ${t}`,n),n.code!=="ENOENT"){ke("moveAndMaybeCompressFile: trying copy+truncate instead");try{await Ve.copy(e,t,{overwrite:!0}),await Ve.truncate(e)}catch(i){ke("moveAndMaybeCompressFile: error copy+truncate",i)}}}}};df.exports=cy});var kn=F((yE,mf)=>{var De=me()("streamroller:RollingFileWriteStream"),bt=Zi(),wt=require("path"),fy=require("os"),_n=of(),In=an(),{Writable:ly}=require("stream"),dy=af(),py=lf(),my=pf(),hy=e=>(De(`deleteFiles: files to delete: ${e}`),Promise.all(e.map(t=>bt.unlink(t).catch(r=>{De(`deleteFiles: error when unlinking ${t}, ignoring. Error was ${r}`)})))),Xi=class extends ly{constructor(t,r){if(De(`constructor: creating RollingFileWriteStream. path=${t}`),typeof t!="string"||t.length===0)throw new Error(`Invalid filename: ${t}`);if(t.endsWith(wt.sep))throw new Error(`Filename is a directory: ${t}`);t.indexOf(`~${wt.sep}`)===0&&(t=t.replace("~",fy.homedir())),super(r),this.options=this._parseOption(r),this.fileObject=wt.parse(t),this.fileObject.dir===""&&(this.fileObject=wt.parse(wt.join(process.cwd(),t))),this.fileFormatter=dy({file:this.fileObject,alwaysIncludeDate:this.options.alwaysIncludePattern,needsIndex:this.options.maxSize<Number.MAX_SAFE_INTEGER,compress:this.options.compress,keepFileExt:this.options.keepFileExt,fileNameSep:this.options.fileNameSep}),this.fileNameParser=py({file:this.fileObject,keepFileExt:this.options.keepFileExt,pattern:this.options.pattern,fileNameSep:this.options.fileNameSep}),this.state={currentSize:0},this.options.pattern&&(this.state.currentDate=In(this.options.pattern,_n())),this.filename=this.fileFormatter({index:0,date:this.state.currentDate}),["a","a+","as","as+"].includes(this.options.flags)&&this._setExistingSizeAndDate(),De(`constructor: create new file ${this.filename}, state=${JSON.stringify(this.state)}`),this._renewWriteStream()}_setExistingSizeAndDate(){try{let t=bt.statSync(this.filename);this.state.currentSize=t.size,this.options.pattern&&(this.state.currentDate=In(this.options.pattern,t.mtime))}catch(t){return}}_parseOption(t){let r={maxSize:0,numToKeep:Number.MAX_SAFE_INTEGER,encoding:"utf8",mode:parseInt("0600",8),flags:"a",compress:!1,keepFileExt:!1,alwaysIncludePattern:!1},n=Object.assign({},r,t);if(!n.maxSize)delete n.maxSize;else if(n.maxSize<=0)throw new Error(`options.maxSize (${n.maxSize}) should be > 0`);if(n.numBackups||n.numBackups===0){if(n.numBackups<0)throw new Error(`options.numBackups (${n.numBackups}) should be >= 0`);if(n.numBackups>=Number.MAX_SAFE_INTEGER)throw new Error(`options.numBackups (${n.numBackups}) should be < Number.MAX_SAFE_INTEGER`);n.numToKeep=n.numBackups+1}else if(n.numToKeep<=0)throw new Error(`options.numToKeep (${n.numToKeep}) should be > 0`);return De(`_parseOption: creating stream with option=${JSON.stringify(n)}`),n}_final(t){this.currentFileStream.end("",this.options.encoding,t)}_write(t,r,n){this._shouldRoll().then(()=>{De(`_write: writing chunk. file=${this.currentFileStream.path} state=${JSON.stringify(this.state)} chunk=${t}`),this.currentFileStream.write(t,r,i=>{this.state.currentSize+=t.length,n(i)})})}async _shouldRoll(){(this._dateChanged()||this._tooBig())&&(De(`_shouldRoll: rolling because dateChanged? ${this._dateChanged()} or tooBig? ${this._tooBig()}`),await this._roll())}_dateChanged(){return this.state.currentDate&&this.state.currentDate!==In(this.options.pattern,_n())}_tooBig(){return this.state.currentSize>=this.options.maxSize}_roll(){return De("_roll: closing the current stream"),new Promise((t,r)=>{this.currentFileStream.end("",this.options.encoding,()=>{this._moveOldFiles().then(t).catch(r)})})}async _moveOldFiles(){let t=await this._getExistingFiles(),r=this.state.currentDate?t.filter(n=>n.date===this.state.currentDate):t;for(let n=r.length;n>=0;n--){De(`_moveOldFiles: i = ${n}`);let i=this.fileFormatter({date:this.state.currentDate,index:n}),o=this.fileFormatter({date:this.state.currentDate,index:n+1}),s={compress:this.options.compress&&n===0,mode:this.options.mode};await my(i,o,s)}this.state.currentSize=0,this.state.currentDate=this.state.currentDate?In(this.options.pattern,_n()):null,De(`_moveOldFiles: finished rolling files. state=${JSON.stringify(this.state)}`),this._renewWriteStream(),await new Promise((n,i)=>{this.currentFileStream.write("","utf8",()=>{this._clean().then(n).catch(i)})})}async _getExistingFiles(){let t=await bt.readdir(this.fileObject.dir).catch(()=>[]);De(`_getExistingFiles: files=${t}`);let r=t.map(i=>this.fileNameParser(i)).filter(i=>i),n=i=>(i.timestamp?i.timestamp:_n().getTime())-i.index;return r.sort((i,o)=>n(i)-n(o)),r}_renewWriteStream(){let t=this.fileFormatter({date:this.state.currentDate,index:0}),r=o=>{try{return bt.mkdirSync(o,{recursive:!0})}catch(s){if(s.code==="ENOENT")return r(wt.dirname(o)),r(o);if(s.code!=="EEXIST"&&s.code!=="EROFS")throw s;try{if(bt.statSync(o).isDirectory())return o;throw s}catch(a){throw s}}};r(this.fileObject.dir);let n={flags:this.options.flags,encoding:this.options.encoding,mode:this.options.mode},i=function(o,s,a){return o[a]=o[s],delete o[s],o};bt.appendFileSync(t,"",i(he({},n),"flags","flag")),this.currentFileStream=bt.createWriteStream(t,n),this.currentFileStream.on("error",o=>{this.emit("error",o)})}async _clean(){let t=await this._getExistingFiles();if(De(`_clean: numToKeep = ${this.options.numToKeep}, existingFiles = ${t.length}`),De("_clean: existing files are: ",t),this._tooManyFiles(t.length)){let r=t.slice(0,t.length-this.options.numToKeep).map(n=>wt.format({dir:this.fileObject.dir,base:n.filename}));await hy(r)}}_tooManyFiles(t){return this.options.numToKeep>0&&t>this.options.numToKeep}};mf.exports=Xi});var gf=F((wE,hf)=>{var gy=kn(),eo=class extends gy{constructor(t,r,n,i){i||(i={}),r&&(i.maxSize=r),!i.numBackups&&i.numBackups!==0&&(!n&&n!==0&&(n=1),i.numBackups=n),super(t,i),this.backups=i.numBackups,this.size=this.options.maxSize}get theStream(){return this.currentFileStream}};hf.exports=eo});var vf=F((bE,yf)=>{var yy=kn(),to=class extends yy{constructor(t,r,n){r&&typeof r=="object"&&(n=r,r=null),n||(n={}),r||(r="yyyy-MM-dd"),n.pattern=r,!n.numBackups&&n.numBackups!==0?(!n.daysToKeep&&n.daysToKeep!==0?n.daysToKeep=1:process.emitWarning("options.daysToKeep is deprecated due to the confusion it causes when used together with file size rolling. Please use options.numBackups instead.","DeprecationWarning","streamroller-DEP0001"),n.numBackups=n.daysToKeep):n.daysToKeep=n.numBackups,super(t,n),this.mode=this.options.mode}get theStream(){return this.currentFileStream}};yf.exports=to});var ro=F((xE,wf)=>{wf.exports={RollingFileWriteStream:kn(),RollingFileStream:gf(),DateRollingFileStream:vf()}});var _f=F((EE,Sf)=>{var bf=me()("log4js:file"),no=require("path"),vy=ro(),Ef=require("os"),wy=Ef.EOL,On=!1,Tn=new Set;function xf(){Tn.forEach(e=>{e.sighupHandler()})}function by(e,t,r,n,i,o){if(typeof e!="string"||e.length===0)throw new Error(`Invalid filename: ${e}`);if(e.endsWith(no.sep))throw new Error(`Filename is a directory: ${e}`);e=e.replace(new RegExp(`^~(?=${no.sep}.+)`),Ef.homedir()),e=no.normalize(e),n=!n&&n!==0?5:n,bf("Creating file appender (",e,", ",r,", ",n,", ",i,", ",o,")");function s(d,f,h,l){let m=new vy.RollingFileStream(d,f,h,l);return m.on("error",g=>{console.error("log4js.fileAppender - Writing to file %s, error happened ",d,g)}),m.on("drain",()=>{process.emit("log4js:pause",!1)}),m}let a=s(e,r,n,i),u=function(d){if(a.writable){if(i.removeColor===!0){let f=/\\x1b[[0-9;]*m/g;d.data=d.data.map(h=>typeof h=="string"?h.replace(f,""):h)}a.write(t(d,o)+wy,"utf8")||process.emit("log4js:pause",!0)}};return u.reopen=function(){a.end(()=>{a=s(e,r,n,i)})},u.sighupHandler=function(){bf("SIGHUP handler called."),u.reopen()},u.shutdown=function(d){Tn.delete(u),Tn.size===0&&On&&(process.removeListener("SIGHUP",xf),On=!1),a.end("","utf-8",d)},Tn.add(u),On||(process.on("SIGHUP",xf),On=!0),u}function xy(e,t){let r=t.basicLayout;return e.layout&&(r=t.layout(e.layout.type,e.layout)),e.mode=e.mode||384,by(e.filename,r,e.maxLogSize,e.backups,e,e.timezoneOffset)}Sf.exports.configure=xy});var kf=F((SE,If)=>{var Ey=ro(),Sy=require("os"),_y=Sy.EOL;function Iy(e,t,r){let n=new Ey.DateRollingFileStream(e,t,r);return n.on("error",i=>{console.error("log4js.dateFileAppender - Writing to file %s, error happened ",e,i)}),n.on("drain",()=>{process.emit("log4js:pause",!1)}),n}function ky(e,t,r,n,i){n.maxSize=n.maxLogSize;let o=Iy(e,t,n),s=function(a){o.writable&&(o.write(r(a,i)+_y,"utf8")||process.emit("log4js:pause",!0))};return s.shutdown=function(a){o.end("","utf-8",a)},s}function Oy(e,t){let r=t.basicLayout;return e.layout&&(r=t.layout(e.layout.type,e.layout)),e.alwaysIncludePattern||(e.alwaysIncludePattern=!1),e.mode=e.mode||384,ky(e.filename,e.pattern,r,e,e.timezoneOffset)}If.exports.configure=Oy});var Ff=F((_E,Df)=>{var Ye=me()("log4js:fileSync"),Ke=require("path"),ze=require("fs"),Of=require("os"),Ty=Of.EOL;function Tf(e,t){let r=n=>{try{return ze.mkdirSync(n,{recursive:!0})}catch(i){if(i.code==="ENOENT")return r(Ke.dirname(n)),r(n);if(i.code!=="EEXIST"&&i.code!=="EROFS")throw i;try{if(ze.statSync(n).isDirectory())return n;throw i}catch(o){throw i}}};r(Ke.dirname(e)),ze.appendFileSync(e,"",{mode:t.mode,flag:t.flags})}var io=class{constructor(t,r,n,i){if(Ye("In RollingFileStream"),r<0)throw new Error(`maxLogSize (${r}) should be > 0`);this.filename=t,this.size=r,this.backups=n,this.options=i,this.currentSize=0;function o(s){let a=0;try{a=ze.statSync(s).size}catch(u){Tf(s,i)}return a}this.currentSize=o(this.filename)}shouldRoll(){return Ye("should roll with current size %d, and max size %d",this.currentSize,this.size),this.currentSize>=this.size}roll(t){let r=this,n=new RegExp(`^${Ke.basename(t)}`);function i(d){return n.test(d)}function o(d){return parseInt(d.slice(`${Ke.basename(t)}.`.length),10)||0}function s(d,f){return o(d)-o(f)}function a(d){let f=o(d);if(Ye(`Index of ${d} is ${f}`),r.backups===0)ze.truncateSync(t,0);else if(f<r.backups){try{ze.unlinkSync(`${t}.${f+1}`)}catch(h){}Ye(`Renaming ${d} -> ${t}.${f+1}`),ze.renameSync(Ke.join(Ke.dirname(t),d),`${t}.${f+1}`)}}function u(){Ye("Renaming the old files"),ze.readdirSync(Ke.dirname(t)).filter(i).sort(s).reverse().forEach(a)}Ye("Rolling, rolling, rolling"),u()}write(t,r){let n=this;function i(){Ye("writing the chunk to the file"),n.currentSize+=t.length,ze.appendFileSync(n.filename,t)}Ye("in write"),this.shouldRoll()&&(this.currentSize=0,this.roll(this.filename)),i()}};function Dy(e,t,r,n,i,o){if(typeof e!="string"||e.length===0)throw new Error(`Invalid filename: ${e}`);if(e.endsWith(Ke.sep))throw new Error(`Filename is a directory: ${e}`);e=e.replace(new RegExp(`^~(?=${Ke.sep}.+)`),Of.homedir()),e=Ke.normalize(e),n=!n&&n!==0?5:n,Ye("Creating fileSync appender (",e,", ",r,", ",n,", ",i,", ",o,")");function s(u,d,f){let h;return d?h=new io(u,d,f,i):h=(l=>(Tf(l,i),{write(m){ze.appendFileSync(l,m)}}))(u),h}let a=s(e,r,n);return u=>{a.write(t(u,o)+Ty)}}function Fy(e,t){let r=t.basicLayout;e.layout&&(r=t.layout(e.layout.type,e.layout));let n={flags:e.flags||"a",encoding:e.encoding||"utf8",mode:e.mode||384};return Dy(e.filename,r,e.maxLogSize,e.backups,n,e.timezoneOffset)}Df.exports.configure=Fy});var Nf=F((IE,Af)=>{var Ge=me()("log4js:tcp"),Ay=require("net");function Ny(e,t){let r=!1,n=[],i,o=3,s="__LOG4JS__";function a(h){Ge("Writing log event to socket"),r=i.write(`${t(h)}${s}`,"utf8")}function u(){let h;for(Ge("emptying buffer");h=n.shift();)a(h)}function d(){Ge(`appender creating socket to ${e.host||"localhost"}:${e.port||5e3}`),s=`${e.endMsg||"__LOG4JS__"}`,i=Ay.createConnection(e.port||5e3,e.host||"localhost"),i.on("connect",()=>{Ge("socket connected"),u(),r=!0}),i.on("drain",()=>{Ge("drain event received, emptying buffer"),r=!0,u()}),i.on("timeout",i.end.bind(i)),i.on("error",h=>{Ge("connection error",h),r=!1,u()}),i.on("close",d)}d();function f(h){r?a(h):(Ge("buffering log event because it cannot write at the moment"),n.push(h))}return f.shutdown=function(h){Ge("shutdown called"),n.length&&o?(Ge("buffer has items, waiting 100ms to empty"),o-=1,setTimeout(()=>{f.shutdown(h)},100)):(i.removeAllListeners("close"),i.end(h))},f}function Cy(e,t){Ge(`configure with config = ${e}`);let r=function(n){return n.serialise()};return e.layout&&(r=t.layout(e.layout.type,e.layout)),Ny(e,r)}Af.exports.configure=Cy});var ao=F((kE,so)=>{var oo=require("path"),it=me()("log4js:appenders"),Le=dt(),Cf=ln(),Ry=mt(),Py=_i(),qy=Da(),je=new Map;je.set("console",Aa());je.set("stdout",Ca());je.set("stderr",Pa());je.set("logLevelFilter",La());je.set("categoryFilter",ja());je.set("noLogFilter",Ua());je.set("file",_f());je.set("dateFile",kf());je.set("fileSync",Ff());je.set("tcp",Nf());var Ir=new Map,Dn=(e,t)=>{let r;try{let n=`${e}.cjs`;r=require.resolve(n),it("Loading module from ",n)}catch(n){r=e,it("Loading module from ",e)}try{return require(r)}catch(n){Le.throwExceptionIf(t,n.code!=="MODULE_NOT_FOUND",`appender "${e}" could not be loaded (error was: ${n})`);return}},Ly=(e,t)=>je.get(e)||Dn(`./${e}`,t)||Dn(e,t)||require.main&&require.main.filename&&Dn(oo.join(oo.dirname(require.main.filename),e),t)||Dn(oo.join(process.cwd(),e),t),Fn=new Set,Rf=(e,t)=>{if(Ir.has(e))return Ir.get(e);if(!t.appenders[e])return!1;if(Fn.has(e))throw new Error(`Dependency loop detected for appender ${e}.`);Fn.add(e),it(`Creating appender ${e}`);let r=My(e,t);return Fn.delete(e),Ir.set(e,r),r},My=(e,t)=>{let r=t.appenders[e],n=r.type.configure?r.type:Ly(r.type,t);return Le.throwExceptionIf(t,Le.not(n),`appender "${e}" is not valid (type "${r.type}" could not be found)`),n.appender&&(process.emitWarning(`Appender ${r.type} exports an appender function.`,"DeprecationWarning","log4js-node-DEP0001"),it("[log4js-node-DEP0001]",`DEPRECATION: Appender ${r.type} exports an appender function.`)),n.shutdown&&(process.emitWarning(`Appender ${r.type} exports a shutdown function.`,"DeprecationWarning","log4js-node-DEP0002"),it("[log4js-node-DEP0002]",`DEPRECATION: Appender ${r.type} exports a shutdown function.`)),it(`${e}: clustering.isMaster ? ${Cf.isMaster()}`),it(`${e}: appenderModule is ${require("util").inspect(n)}`),Cf.onlyOnMaster(()=>(it(`calling appenderModule.configure for ${e} / ${r.type}`),n.configure(qy.modifyConfig(r),Py,i=>Rf(i,t),Ry)),()=>{})},Pf=e=>{if(Ir.clear(),Fn.clear(),!e)return;let t=[];Object.values(e.categories).forEach(r=>{t.push(...r.appenders)}),Object.keys(e.appenders).forEach(r=>{(t.includes(r)||e.appenders[r].type==="tcp-server"||e.appenders[r].type==="multiprocess")&&Rf(r,e)})},qf=()=>{Pf()};qf();Le.addListener(e=>{Le.throwExceptionIf(e,Le.not(Le.anObject(e.appenders)),\'must have a property "appenders" of type object.\');let t=Object.keys(e.appenders);Le.throwExceptionIf(e,Le.not(t.length),"must define at least one appender."),t.forEach(r=>{Le.throwExceptionIf(e,Le.not(e.appenders[r].type),`appender "${r}" is not valid (must be an object with property "type")`)})});Le.addListener(Pf);so.exports=Ir;so.exports.init=qf});var fo=F((OE,An)=>{var kr=me()("log4js:categories"),oe=dt(),uo=mt(),Lf=ao(),ot=new Map;function Mf(e,t,r){if(t.inherit===!1)return;let n=r.lastIndexOf(".");if(n<0)return;let i=r.slice(0,n),o=e.categories[i];o||(o={inherit:!0,appenders:[]}),Mf(e,o,i),!e.categories[i]&&o.appenders&&o.appenders.length&&o.level&&(e.categories[i]=o),t.appenders=t.appenders||[],t.level=t.level||o.level,o.appenders.forEach(s=>{t.appenders.includes(s)||t.appenders.push(s)}),t.parent=o}function $y(e){if(!e.categories)return;Object.keys(e.categories).forEach(r=>{let n=e.categories[r];Mf(e,n,r)})}oe.addPreProcessingListener(e=>$y(e));oe.addListener(e=>{oe.throwExceptionIf(e,oe.not(oe.anObject(e.categories)),\'must have a property "categories" of type object.\');let t=Object.keys(e.categories);oe.throwExceptionIf(e,oe.not(t.length),"must define at least one category."),t.forEach(r=>{let n=e.categories[r];oe.throwExceptionIf(e,[oe.not(n.appenders),oe.not(n.level)],`category "${r}" is not valid (must be an object with properties "appenders" and "level")`),oe.throwExceptionIf(e,oe.not(Array.isArray(n.appenders)),`category "${r}" is not valid (appenders must be an array of appender names)`),oe.throwExceptionIf(e,oe.not(n.appenders.length),`category "${r}" is not valid (appenders must contain at least one appender name)`),Object.prototype.hasOwnProperty.call(n,"enableCallStack")&&oe.throwExceptionIf(e,typeof n.enableCallStack!="boolean",`category "${r}" is not valid (enableCallStack must be boolean type)`),n.appenders.forEach(i=>{oe.throwExceptionIf(e,oe.not(Lf.get(i)),`category "${r}" is not valid (appender "${i}" is not defined)`)}),oe.throwExceptionIf(e,oe.not(uo.getLevel(n.level)),`category "${r}" is not valid (level "${n.level}" not recognised; valid levels are ${uo.levels.join(", ")})`)}),oe.throwExceptionIf(e,oe.not(e.categories.default),\'must define a "default" category.\')});var co=e=>{if(ot.clear(),!e)return;Object.keys(e.categories).forEach(r=>{let n=e.categories[r],i=[];n.appenders.forEach(o=>{i.push(Lf.get(o)),kr(`Creating category ${r}`),ot.set(r,{appenders:i,level:uo.getLevel(n.level),enableCallStack:n.enableCallStack||!1})})})},$f=()=>{co()};$f();oe.addListener(co);var qt=e=>{if(kr(`configForCategory: searching for config for ${e}`),ot.has(e))return kr(`configForCategory: ${e} exists in config, returning it`),ot.get(e);let t;return e.indexOf(".")>0?(kr(`configForCategory: ${e} has hierarchy, cloning from parents`),t=he({},qt(e.slice(0,e.lastIndexOf("."))))):(ot.has("default")||co({categories:{default:{appenders:["out"],level:"OFF"}}}),kr("configForCategory: cloning default category"),t=he({},ot.get("default"))),ot.set(e,t),t},jy=e=>qt(e).appenders,Wy=e=>qt(e).level,By=(e,t)=>{qt(e).level=t},Uy=e=>qt(e).enableCallStack===!0,zy=(e,t)=>{qt(e).enableCallStack=t};An.exports=ot;An.exports=Object.assign(An.exports,{appendersForCategory:jy,getLevelForCategory:Wy,setLevelForCategory:By,getEnableCallStackForCategory:Uy,setEnableCallStackForCategory:zy,init:$f})});var zf=F((DE,Uf)=>{var jf=me()("log4js:logger"),Ky=Ii(),He=mt(),Gy=ln(),Nn=fo(),Wf=dt(),Hy=/at (?:(.+)\\s+\\()?(?:(.+?):(\\d+)(?::(\\d+))?|([^)]+))\\)?/;function Jy(e,t=4){try{let r=e.stack.split(`\n`).slice(t),n=Hy.exec(r[0]);if(n&&n.length===6)return{functionName:n[1],fileName:n[2],lineNumber:parseInt(n[3],10),columnNumber:parseInt(n[4],10),callStack:r.join(`\n`)};console.error("log4js.logger - defaultParseCallStack error")}catch(r){console.error("log4js.logger - defaultParseCallStack error",r)}return null}var Or=class{constructor(t){if(!t)throw new Error("No category provided.");this.category=t,this.context={},this.parseCallStack=Jy,jf(`Logger created (${this.category}, ${this.level})`)}get level(){return He.getLevel(Nn.getLevelForCategory(this.category),He.OFF)}set level(t){Nn.setLevelForCategory(this.category,He.getLevel(t,this.level))}get useCallStack(){return Nn.getEnableCallStackForCategory(this.category)}set useCallStack(t){Nn.setEnableCallStackForCategory(this.category,t===!0)}log(t,...r){let n=He.getLevel(t);n?this.isLevelEnabled(n)&&this._log(n,r):Wf.validIdentifier(t)&&r.length>0?(this.log(He.WARN,"log4js:logger.log: valid log-level not found as first parameter given:",t),this.log(He.INFO,`[${t}]`,...r)):this.log(He.INFO,t,...r)}isLevelEnabled(t){return this.level.isLessThanOrEqualTo(t)}_log(t,r){jf(`sending log data (${t}) to appenders`);let n=new Ky(this.category,t,r,this.context,this.useCallStack&&this.parseCallStack(new Error));Gy.send(n)}addContext(t,r){this.context[t]=r}removeContext(t){delete this.context[t]}clearContext(){this.context={}}setParseCallStackFunction(t){this.parseCallStack=t}};function Bf(e){let t=He.getLevel(e),n=t.toString().toLowerCase().replace(/_([a-z])/g,o=>o[1].toUpperCase()),i=n[0].toUpperCase()+n.slice(1);Or.prototype[`is${i}Enabled`]=function(){return this.isLevelEnabled(t)},Or.prototype[n]=function(...o){this.log(t,...o)}}He.levels.forEach(Bf);Wf.addListener(()=>{He.levels.forEach(Bf)});Uf.exports=Or});var Hf=F((FE,Gf)=>{var Lt=mt(),Vy=\':remote-addr - - ":method :url HTTP/:http-version" :status :content-length ":referrer" ":user-agent"\';function Yy(e){return e.originalUrl||e.url}function Qy(e,t,r){let n=o=>{let s=o.concat();for(let a=0;a<s.length;++a)for(let u=a+1;u<s.length;++u)s[a].token==s[u].token&&s.splice(u--,1);return s},i=[];return i.push({token:":url",replacement:Yy(e)}),i.push({token:":protocol",replacement:e.protocol}),i.push({token:":hostname",replacement:e.hostname}),i.push({token:":method",replacement:e.method}),i.push({token:":status",replacement:t.__statusCode||t.statusCode}),i.push({token:":response-time",replacement:t.responseTime}),i.push({token:":date",replacement:new Date().toUTCString()}),i.push({token:":referrer",replacement:e.headers.referer||e.headers.referrer||""}),i.push({token:":http-version",replacement:`${e.httpVersionMajor}.${e.httpVersionMinor}`}),i.push({token:":remote-addr",replacement:e.headers["x-forwarded-for"]||e.ip||e._remoteAddress||e.socket&&(e.socket.remoteAddress||e.socket.socket&&e.socket.socket.remoteAddress)}),i.push({token:":user-agent",replacement:e.headers["user-agent"]}),i.push({token:":content-length",replacement:t.getHeader("content-length")||t.__headers&&t.__headers["Content-Length"]||"-"}),i.push({token:/:req\\[([^\\]]+)]/g,replacement(o,s){return e.headers[s.toLowerCase()]}}),i.push({token:/:res\\[([^\\]]+)]/g,replacement(o,s){return t.getHeader(s.toLowerCase())||t.__headers&&t.__headers[s]}}),n(r.concat(i))}function Kf(e,t){for(let r=0;r<t.length;r++)e=e.replace(t[r].token,t[r].replacement);return e}function Zy(e){let t=null;if(e instanceof RegExp&&(t=e),typeof e=="string"&&(t=new RegExp(e)),Array.isArray(e)){let r=e.map(n=>n.source?n.source:n);t=new RegExp(r.join("|"))}return t}function Xy(e,t,r){let n=t;if(r){let i=r.find(o=>{let s=!1;return o.from&&o.to?s=e>=o.from&&e<=o.to:s=o.codes.indexOf(e)!==-1,s});i&&(n=Lt.getLevel(i.level,n))}return n}Gf.exports=function(t,r){typeof r=="string"||typeof r=="function"?r={format:r}:r=r||{};let n=t,i=Lt.getLevel(r.level,Lt.INFO),o=r.format||Vy;return(s,a,u)=>{if(s._logging!==void 0)return u();if(typeof r.nolog!="function"){let d=Zy(r.nolog);if(d&&d.test(s.originalUrl))return u()}if(n.isLevelEnabled(i)||r.level==="auto"){let d=new Date,{writeHead:f}=a;s._logging=!0,a.writeHead=(m,g)=>{a.writeHead=f,a.writeHead(m,g),a.__statusCode=m,a.__headers=g||{}};let h=!1,l=()=>{if(h)return;if(h=!0,typeof r.nolog=="function"&&r.nolog(s,a)===!0){s._logging=!1;return}a.responseTime=new Date-d,a.statusCode&&r.level==="auto"&&(i=Lt.INFO,a.statusCode>=300&&(i=Lt.WARN),a.statusCode>=400&&(i=Lt.ERROR)),i=Xy(a.statusCode,i,r.statusRules);let m=Qy(s,a,r.tokens||[]);if(r.context&&n.addContext("res",a),typeof o=="function"){let g=o(s,a,E=>Kf(E,m));g&&n.log(i,g)}else n.log(i,Kf(o,m));r.context&&n.removeContext("res")};a.on("end",l),a.on("finish",l),a.on("error",l),a.on("close",l)}return u()}}});var Zf=F((AE,Qf)=>{var Jf=me()("log4js:recording"),Cn=[];function ev(){return function(e){Jf(`received logEvent, number of events now ${Cn.length+1}`),Jf("log event was ",e),Cn.push(e)}}function Vf(){return Cn.slice()}function Yf(){Cn.length=0}Qf.exports={configure:ev,replay:Vf,playback:Vf,reset:Yf,erase:Yf}});var ol=F((NE,il)=>{var st=me()("log4js:main"),tv=require("fs"),rv=zs()({proto:!0}),nv=dt(),iv=_i(),ov=mt(),Xf=ao(),el=fo(),sv=zf(),av=ln(),uv=Hf(),cv=Zf(),Tr=!1;function fv(e){if(!Tr)return;st("Received log event ",e),el.appendersForCategory(e.categoryName).forEach(r=>{r(e)})}function lv(e){st(`Loading configuration from ${e}`);try{return JSON.parse(tv.readFileSync(e,"utf8"))}catch(t){throw new Error(`Problem reading config from file "${e}". Error was ${t.message}`,t)}}function tl(e){Tr&&rl();let t=e;return typeof t=="string"&&(t=lv(e)),st(`Configuration is ${t}`),nv.configure(rv(t)),av.onMessage(fv),Tr=!0,nl}function dv(){return cv}function rl(e){st("Shutdown called. Disabling all log writing."),Tr=!1;let t=Array.from(Xf.values());Xf.init(),el.init();let r=t.reduceRight((s,a)=>a.shutdown?s+1:s,0);if(r===0)return st("No appenders with shutdown functions found."),e!==void 0&&e();let n=0,i;st(`Found ${r} appenders with shutdown functions.`);function o(s){i=i||s,n+=1,st(`Appender shutdowns complete: ${n} / ${r}`),n>=r&&(st("All shutdown functions completed."),e&&e(i))}return t.filter(s=>s.shutdown).forEach(s=>s.shutdown(o)),null}function pv(e){return Tr||tl(process.env.LOG4JS_CONFIG||{appenders:{out:{type:"stdout"}},categories:{default:{appenders:["out"],level:"OFF"}}}),new sv(e||"default")}var nl={getLogger:pv,configure:tl,shutdown:rl,connectLogger:uv,levels:ov,addLayout:iv.addLayout,recording:dv};il.exports=nl});var jl=F(Hn=>{"use strict";Object.defineProperty(Hn,"__esModule",{value:!0});function $l(e,t){if(t)return e;throw new Error("Unhandled discriminated union member: "+JSON.stringify(e))}Hn.assertNever=$l;Hn.default=$l});var Hl=_t(Ko(),1);var ai={};Xd(ai,{loggerCategory:()=>si});var si=e=>`obsidian-zotero:${e}`;var jr=({key:e,groupID:t,parentItem:r},n=!1)=>{let i=[e];return!n&&r&&i.push(`a${r}`),typeof t=="number"&&i.push(`g${t}`),i.join("")},Go=(e,t,r=!0)=>(n,...i)=>{let o="";for(let s=0;s<n.length;s++)s>0&&(o+=e(i[s-1])),o+=(r?n.raw:n)[s];return t(o)},fi=(e=!0,t)=>Go(r=>r,r=>new RegExp(e?"^"+r+"$":r,t),!0),ui=String.raw`[23456789ABCDEFGHIJKLMNPQRSTUVWXYZ]{8}`,ci=String.raw`\\d+`,Ho=e=>{let t={annotKey:ui,parentKey:ui,groupID:ci,page:ci};if(e)for(let r in t)t[r]=`(${t[r]})`;return Go(r=>t[r],r=>r)`${"annotKey"}a${"parentKey"}(?:g${"groupID"})?(?:p${"page"})?`},Lv=fi()`${ui}(?:g${ci})?`,Mv=fi()`${Ho(!0)}`,$v=fi()`(?:${Ho(!1)}n?)+`;var tp=/^[0-9]{4}\\-(0[0-9]|10|11|12)\\-(0[0-9]|[1-2][0-9]|30|31) /;var rp=/^\\-?[0-9]{4}\\-(0[1-9]|10|11|12)\\-(0[1-9]|[1-2][0-9]|30|31) ([0-1][0-9]|[2][0-3]):([0-5][0-9]):([0-5][0-9])$/,np=/^\\-?[0-9]{4}\\-(0[1-9]|10|11|12)\\-(0[1-9]|[1-2][0-9]|30|31) ([0-1][0-9]|[2][0-3]):([0-5][0-9])$/,ip=e=>op(e)||sp(e)?!1:tp.test(e),Jo=e=>e?ip(e)?e.substring(0,10):"0000-00-00":"";var op=e=>rp.test(e),sp=e=>np.test(e);var Vo=(e,t,{getLogger:r,configure:n})=>{let i=si(e);return n({appenders:{out:{type:"console"}},categories:{default:{appenders:["out"],level:t},[i]:{appenders:["out"],level:t}}}),r(i)};var Yo=()=>(...e)=>e;function Qo(e,t){let r=Object.keys(t).map(n=>ap(e,n,t[n]));return r.length===1?r[0]:function(){r.forEach(n=>n())}}function ap(e,t,r){let n=e[t],i=e.hasOwnProperty(t),o=r(n);return n&&Object.setPrototypeOf(o,n),Object.setPrototypeOf(s,o),e[t]=s,a;function s(...u){return o===n&&e[t]===s&&a(),o.apply(this,u)}function a(){e[t]===s&&(i?e[t]=n:delete e[t]),o!==n&&(o=n,Object.setPrototypeOf(s,n||Function))}}var Zo=e=>{let t=r=>async(...n)=>{try{return await r(...n)}catch(i){throw console.error(i),i}};return Qo(e,Object.fromEntries(Object.keys(e).map(r=>[r,t]))),e};var Xo={};var es;(function(e){e[e.highlight=1]="highlight",e[e.note=2]="note",e[e.image=3]="image",e[e.ink=4]="ink"})(es||(es={}));var ts;(function(e){e[e.manual=0]="manual",e[e.auto=1]="auto"})(ts||(ts={}));var rs;(function(e){e[e.importedFile=0]="importedFile",e[e.importedUrl=1]="importedUrl",e[e.linkedFile=2]="linkedFile",e[e.linkedUrl=3]="linkedUrl",e[e.embeddedImage=4]="embeddedImage"})(rs||(rs={}));var li;(function(e){e[e.fullName=0]="fullName",e[e.nameOnly=1]="nameOnly"})(li||(li={}));var di=["attachment","note","annotation"];var Wr=di.map(e=>`\'${e}\'`).join(",");var Se=(e="itemID")=>`--sql\n  ${e} IS NOT NULL\n  ${e==="itemID"?`AND ${e} NOT IN (SELECT itemID FROM deletedItems)`:""}\n`,Ae=(e,t="$itemId")=>typeof e=="boolean"?"":`AND ${e} = ${t}`;var te=class{constructor(t){ee(this,"statement");this.statement=t.prepare(this.sql())}get database(){return this.statement.database}get(t){return this.statement.get(t)}all(t){return t===void 0?this.statement.all():this.statement.all(t)}},It=class extends te{query(t){return this.all(t)}},Br=class extends te{query(){return this.all(void 0)}},Ur=class extends te{query(t){return this.all(t).map(r=>this.parse(r,t))}};var pi=(e,t)=>{for(let r=0;r<e.length;r++)if(e[r]!==t[r])return e[r]-t[r];return 0};var mi=e=>{var t;return(t=e==null?void 0:e.split("|").map(r=>parseInt(r,10)))!=null?t:[]};var zr=`--sql\n  items.itemID,\n  items.key,\n  items.clientDateModified,\n  items.dateAdded,\n  items.dateModified,\n  annots.type,\n  annots.authorName,\n  annots.text,\n  annots.comment,\n  annots.color,\n  annots.pageLabel,\n  annots.sortIndex,\n  annots.position,\n  annots.isExternal\n`,Kr=`--sql\n  itemAnnotations annots\n  JOIN items USING (itemID)\n`,Gr=(e,t,r)=>Object.assign(e,{sortIndex:mi(e.sortIndex),position:JSON.parse(e.position),libraryID:t,groupID:r,itemType:"annotation"});var up=`--sql\nSELECT\n  ${zr},\n  annots.parentItemID,\n  parentItems.key as parentItem\nFROM\n  ${Kr}\n  JOIN items as parentItems ON annots.parentItemID = parentItems.itemID\nWHERE\n  items.key = $annotKey\n  AND items.libraryID = $libId\n  AND ${Se("items.itemID")}\n`,zt=class extends te{constructor(){super(...arguments);ee(this,"trxCache",{})}sql(){return up}parse(r,n){return Gr(r,n.libId,n.groupID)}query(r){var a,u;let{annotKeys:n,libId:i}=r,o=d=>d.reduce((f,h)=>{let l=this.get({annotKey:h,libId:i});return l&&(f[h]=this.parse(l,r)),f},{});return((u=(a=this.trxCache)[i])!=null?u:a[i]=this.database.transaction(o))(n)}};var cp=`--sql\nSELECT\n  ${zr}\nFROM\n  ${Kr}\nWHERE\n  parentItemID = $attachmentId\n  AND items.libraryID = $libId\n  AND ${Se()}\n`,Kt=class extends Ur{constructor(){super(...arguments);ee(this,"getKeyStatement",this.database.prepare("SELECT key FROM items WHERE itemID = $attachmentId AND libraryID = $libId"))}sql(){return cp}parse(r,n,i){return Object.assign(Gr(r,n.libId,n.groupID),{parentItem:i,parentItemID:n.attachmentId})}query(r){var i;let n=(i=this.getKeyStatement.get(r))==null?void 0:i.key;if(n===void 0)throw new Error("Parent item not found");return this.all(r).map(o=>this.parse(o,r,n)).sort((o,s)=>pi(o.sortIndex,s.sortIndex))}};var fp=`--sql\nSELECT\n  atchs.itemID,\n  atchs.path,\n  items.key,\n  COUNT(atchs.itemID) as annotCount\nFROM\n  itemAttachments atchs\n  JOIN items USING (itemID)\n  LEFT JOIN itemAnnotations annots ON atchs.itemID = annots.parentItemID\nWHERE\n  atchs.parentItemID = $itemId\n  AND libraryID = $libId\n  AND ${Se("atchs.itemID")}\nGROUP BY atchs.itemID\n`,Gt=class extends It{sql(){return fp}};var lp=`--sql\nSELECT\n  citekey\nFROM\n  citekeys\nWHERE\n  itemID = $itemID\n  AND (libraryID IS NULL OR libraryID = $libId)\n`,Ht=class extends te{constructor(){super(...arguments);ee(this,"trxFunc",r=>r.reduce((n,[i,o])=>{let s=this.get({itemID:i,libId:o});return s&&(n[i]=s.citekey),n},{}));ee(this,"trx",this.database.transaction(this.trxFunc))}sql(){return lp}query(r){return this.trx(r.items)}};var dp=`--sql\nSELECT\n  itemID\nFROM\n  citekeys\nWHERE\n  citekey = $citekey\n`,Jt=class extends te{constructor(){super(...arguments);ee(this,"trxFunc",r=>r.reduce((n,i)=>{var s;let o=this.get({citekey:i});return n[i]=(s=o==null?void 0:o.itemID)!=null?s:-1,n},{}));ee(this,"trx",this.database.transaction(this.trxFunc))}sql(){return dp}query(r){return this.trx(r.citekeys)}};var Hr=e=>`--sql\nSELECT\n  itemID,\n  creators.firstName,\n  creators.lastName,\n  creators.fieldMode,\n  creatorTypes.creatorType,\n  orderIndex\nFROM\n  items\n  LEFT JOIN itemCreators USING (itemID)\n  JOIN creators USING (creatorID)\n  JOIN creatorTypes USING (creatorTypeID)\nWHERE\n  libraryID = $libId\n  ${Ae(e||"itemID")}\n  AND ${Se()}\nORDER BY\n  itemID,\n  orderIndex\n`;var jw=Hr(!0);function ns(e){for(var t={},r=e.length,n=0;n<r;++n){var i=e[n];t[i[0]]=i[1]}return t}var at=ns;var pp=Hr(!1),Vt=class extends te{constructor(){super(...arguments);ee(this,"trxFunc",r=>r.map(([n,i])=>[n,this.all({itemId:n,libId:i})]));ee(this,"trx",this.database.transaction(this.trxFunc))}sql(){return pp}query(r){return at(this.trx(r))}};var Jr=e=>`--sql\nSELECT\n  items.itemID,\n  fieldsCombined.fieldName,\n  itemDataValues.value\nFROM\n  items\n  JOIN itemData USING (itemID)\n  JOIN itemDataValues USING (valueID)\n  JOIN fieldsCombined USING (fieldID)\n  JOIN itemTypesCombined USING (itemTypeID)\nWHERE\n  libraryID = $libId\n  ${Ae(e||"items.itemID")}\n  AND itemTypesCombined.typeName NOT IN (${Wr})\n  AND ${Se()}\n`;var Db=Jr(!0);var mp=Jr(!1),Yt=class extends te{constructor(){super(...arguments);ee(this,"trxFunc",r=>r.map(([n,i])=>[n,this.all({itemId:n,libId:i})]));ee(this,"trx",this.database.transaction(this.trxFunc))}sql(){return mp}query(r){return at(this.trx(r))}};var Qt=e=>`--sql\nSELECT\n  items.libraryID,\n  items.itemID,\n  items.key,\n  items.clientDateModified,\n  items.dateAdded,\n  items.dateModified,\n  itemTypesCombined.typeName as itemType,\n  json_group_array(collectionID) filter (where collectionID is not null) as collectionIDs\nFROM \n  items\n  JOIN itemTypesCombined USING (itemTypeID)\n  LEFT JOIN collectionItems USING (itemID)\nWHERE \n  libraryID = $libId\n  ${e==="full"?Ae(!1):e==="id"?Ae("items.itemID"):Ae("items.key","$key")}\n  AND ${Se()}\n  AND itemType NOT IN (${Wr})\nGROUP BY itemID\n`;var hp=Qt("full"),Zt=class extends te{sql(){return hp}query(t){return this.all(t).map(o=>{var s=o,{collectionIDs:n}=s,i=St(s,["collectionIDs"]);return We(he({},i),{collectionIDs:JSON.parse(n)})})}};var gp=Qt("id"),yp=Qt("key"),Xt=class extends te{constructor(){super(...arguments);ee(this,"trxFunc",r=>r.reduce((n,[i,o])=>{let s=this.get({itemId:i,libId:o});return s&&(n[i]=We(he({},s),{collectionIDs:JSON.parse(s.collectionIDs)})),n},{}));ee(this,"trx",this.database.transaction(this.trxFunc))}sql(){return gp}query(r){return this.trx(r)}},er=class extends te{constructor(){super(...arguments);ee(this,"trxFunc",r=>r.reduce((n,[i,o])=>{let s=this.get({key:i,libId:o});return s&&(n[i]=We(he({},s),{collectionIDs:JSON.parse(s.collectionIDs)})),n},{}));ee(this,"trx",this.database.transaction(this.trxFunc))}sql(){return yp}query(r){return this.trx(r)}};var tr=e=>`--sql\nWITH\n  RECURSIVE CollectionPath AS (\n    -- Base case: collections without a parent\n    SELECT\n      collectionID,\n      parentCollectionID,\n      collectionName AS path\n    FROM\n      collections\n    WHERE\n      libraryID = $libId\n      ${e==="full"?Ae(!1):e==="id"?Ae("collectionID","$collectionID"):Ae("key","$key")}\n      AND ${Se("collectionID")}\n    UNION ALL\n    -- Recursive case: join with parent collections\n    SELECT\n      prev.collectionID,\n      c.parentCollectionID,\n      c.collectionName\n    FROM\n      collections c\n      JOIN CollectionPath prev ON c.collectionID = prev.parentCollectionID\n  )\nSELECT\n  p.collectionID,\n  json_group_array(p.path) path,\n  c.key,\n  c.collectionName,\n  c.libraryID\nFROM\n  CollectionPath p\n  JOIN collections c USING (collectionID)\nGROUP BY\n  collectionID\nORDER BY\n  collectionID;\n`;function hi(i){var o=i,{collectionID:e,collectionName:t,path:r}=o,n=St(o,["collectionID","collectionName","path"]);return We(he({},n),{id:e,name:t,path:JSON.parse(r)})}var Qb=tr("full");var vp=tr("id"),t0=tr("key"),rr=class extends te{constructor(){super(...arguments);ee(this,"trxFunc",r=>r.reduce((n,[i,o])=>{let s=this.get({collectionID:i,libId:o});return s&&n.set(i,hi(s)),n},new Map));ee(this,"trx",this.database.transaction(this.trxFunc))}sql(){return vp}query(r){return this.trx(r)}};var wp=`--sql\nSELECT\n  libraries.libraryID,\n  groups.groupID,\n  CASE\n    libraries.type\n    WHEN \'user\' THEN \'My Library\'\n    WHEN \'group\' THEN groups.name\n    ELSE NULL\n  END AS name\nFROM\n  libraries\n  LEFT JOIN groups USING (libraryID)\nWHERE\n  libraries.libraryID IS NOT NULL\nORDER BY\n  libraryID\n`,nr=class extends Br{sql(){return wp}};var bp=`--sql\nSELECT\n  tagID,\n  type,\n  name\nFROM\n  itemTags\n  JOIN items USING (itemID)\n  JOIN tags USING (tagID)\nWHERE\n  itemID = $itemId\n  AND tagID IS NOT NULL\n  AND libraryID = $libId\n`,ir=class extends te{constructor(){super(...arguments);ee(this,"trxFunc",r=>r.map(([n,i])=>[n,this.all({itemId:n,libId:i})]));ee(this,"trx",this.database.transaction(this.trxFunc))}sql(){return bp}query(r){return at(this.trx(r))}};var xp=new Set(Yo()("creators","itemID","itemType","key","libraryID","collections"));var Jl=_t(yi(),1);var cl=require("fs"),fl=_t(Ms(),1);var sl=_t(yi(),1),Rn=_t(ol(),1),mv="INFO",al=Vo("db-worker",mv,Rn.default),lo="log4js_loglevel";sl.default.getItem(lo).then(e=>{typeof e=="string"&&e in Rn.levels&&(al.level=e,console.debug(`Read from localforage: loglevel ${e}`))});var se=al;var Pn=class extends Error{constructor(){super("Database not set")}},ul=e=>(0,cl.statSync)(e).mtimeMs,Mt=class{constructor(){this.database=null;this.nativeBinding=null;this.opened=!1}get instance(){var t;return(t=this.database)==null?void 0:t.instance}isUpToDate(){return this.database?this.database.mtime===ul(this.database.file):null}initDatabase(t,r){return new fl.default(`file:${t}?mode=ro&immutable=1`,{nativeBinding:r,uriPath:!0,verbose:void 0})}open(t){var i,o;let r=t.nativeBinding?this.nativeBinding=t.nativeBinding:this.nativeBinding;if(!r)throw new Error("Failed to open database conn: no native binding provided");let n;if(t.file)n=t.file;else{if(!((i=this.database)!=null&&i.file))throw new Pn;n=this.database.file}try{return(o=this.database)!=null&&o.instance&&(se.debug("Database opened before, closing: ",this.database.instance.name),this.close()),this.database={mtime:ul(n),instance:this.initDatabase(n,r),file:n,prepared:new Map},se.debug("Database opened: ",n),this.opened=!0,!0}catch(s){if(s.code!=="ENOENT")throw console.error("Failed to open database",n),s;return this.opened=!1,!1}}close(){var t;this.opened=!1,(t=this.instance)==null||t.close(),this.database=null}prepare(t){if(!this.database)throw new Pn;let r=this.database.prepared.get(t);if(r)return r;let n=new t(this.database.instance);return this.database.prepared.set(t,n),n}};function Dr(){this.cache=null,this.matcher=null,this.stemmer=null,this.filter=null}Dr.prototype.add;Dr.prototype.append;Dr.prototype.search;Dr.prototype.update;Dr.prototype.remove;function $t(e,t){return typeof e!="undefined"?e:t}function po(e){let t=new Array(e);for(let r=0;r<e;r++)t[r]=Q();return t}function ll(e){return Object.keys(e)}function Q(){return Object.create(null)}function dl(e){return[].concat.apply([],e)}function pl(e,t){return t.length-e.length}function xt(e){return e.constructor===Array}function ue(e){return typeof e=="string"}function Me(e){return typeof e=="object"}function Fr(e){return typeof e=="function"}function hl(e,t,r,n){if(e&&(t&&(e=mo(e,t)),this.matcher&&(e=mo(e,this.matcher)),this.stemmer&&e.length>1&&(e=mo(e,this.stemmer)),n&&e.length>1&&(e=hv(e)),r||r==="")){let i=e.split(r);return this.filter?gv(i,this.filter):i}return e}var gl=/[\\p{Z}\\p{S}\\p{P}\\p{C}]+/u;function yl(e){let t=Q();for(let r=0,n=e.length;r<n;r++)t[e[r]]=1;return t}function ho(e,t){let r=ll(e),n=r.length,i=[],o="",s=0;for(let a=0,u,d;a<n;a++)u=r[a],d=e[u],d?(i[s++]=ml(t?"(?!\\\\b)"+u+"(\\\\b|_)":u),i[s++]=d):o+=(o?"|":"")+u;return o&&(i[s++]=ml(t?"(?!\\\\b)("+o+")(\\\\b|_)":"("+o+")"),i[s]=""),i}function mo(e,t){for(let r=0,n=t.length;r<n&&(e=e.replace(t[r],t[r+1]),!!e);r+=2);return e}function ml(e){return new RegExp(e,"g")}function hv(e){let t="",r="";for(let n=0,i=e.length,o;n<i;n++)(o=e[n])!==r&&(t+=r=o);return t}function gv(e,t){let r=e.length,n=[];for(let i=0,o=0;i<r;i++){let s=e[i];s&&!t[s]&&(n[o++]=s)}return n}var yv=!1,vv="",vl={encode:go,rtl:yv,tokenize:vv};function go(e){return hl.call(this,(""+e).toLowerCase(),!1,gl,!1)}var wl={},bl={};function qn(e){Ar(e,"add"),Ar(e,"append"),Ar(e,"search"),Ar(e,"update"),Ar(e,"remove")}function Ar(e,t){e[t+"Async"]=function(){let r=this,n=arguments,i=n[n.length-1],o;Fr(i)&&(o=i,delete n[n.length-1]);let s=new Promise(function(a){setTimeout(function(){r.async=!0;let u=r[t].apply(r,n);r.async=!1,a(u)})});return o?(s.then(o),this):s}}function Ln(e,t,r,n){let i=e.length,o=[],s,a,u=0;n&&(n=[]);for(let d=i-1;d>=0;d--){let f=e[d],h=f.length,l=Q(),m=!s;for(let g=0;g<h;g++){let E=f[g],_=E.length;if(_)for(let A=0,q,L;A<_;A++)if(L=E[A],s){if(s[L]){if(!d){if(r)r--;else if(o[u++]=L,u===t)return o}(d||n)&&(l[L]=1),m=!0}if(n&&(q=(a[L]||0)+1,a[L]=q,q<i)){let G=n[q-2]||(n[q-2]=[]);G[G.length]=L}}else l[L]=1}if(n)s||(a=l);else if(!m)return[];s=l}if(n)for(let d=n.length-1,f,h;d>=0;d--){f=n[d],h=f.length;for(let l=0,m;l<h;l++)if(m=f[l],!s[m]){if(r)r--;else if(o[u++]=m,u===t)return o;s[m]=1}}return o}function xl(e,t){let r=Q(),n=Q(),i=[];for(let o=0;o<e.length;o++)r[e[o]]=1;for(let o=0,s;o<t.length;o++){s=t[o];for(let a=0,u;a<s.length;a++)u=s[a],r[u]&&(n[u]||(n[u]=1,i[i.length]=u))}return i}function Mn(e){this.limit=e!==!0&&e,this.cache=Q(),this.queue=[]}var $n=Mn;function jn(e,t,r){Me(e)&&(e=e.query);let n=this.cache.get(e);return n||(n=this.search(e,t,r),this.cache.set(e,n)),n}Mn.prototype.set=function(e,t){if(!this.cache[e]){let r=this.queue.length;r===this.limit?delete this.cache[this.queue[r-1]]:r++;for(let n=r-1;n>0;n--)this.queue[n]=this.queue[n-1];this.queue[0]=e}this.cache[e]=t};Mn.prototype.get=function(e){let t=this.cache[e];if(this.limit&&t){let r=this.queue.indexOf(e);if(r){let n=this.queue[r-1];this.queue[r-1]=this.queue[r],this.queue[r]=n}}return t};Mn.prototype.del=function(e){for(let t=0,r,n;t<this.queue.length;t++)n=this.queue[t],r=this.cache[n],r.includes(e)&&(this.queue.splice(t--,1),delete this.cache[n])};var Sl={memory:{charset:"latin:extra",resolution:3,minlength:4,fastupdate:!1},performance:{resolution:3,minlength:3,optimize:!1,context:{depth:2,resolution:1}},match:{charset:"latin:extra",tokenize:"reverse"},score:{charset:"latin:advanced",resolution:20,minlength:3,context:{depth:3,resolution:9}},default:{}};function yo(e){if(ue(e))!1&&!Sl[e]&&console.warn("Preset not found: "+e),e=Sl[e];else{let t=e.preset;t&&(!1&&!t[t]&&console.warn("Preset not found: "+t),e=Object.assign({},t[t],e))}return e}function _l(e,t,r,n,i,o,s){setTimeout(function(){let a=e(r?r+"."+n:n,JSON.stringify(s));a&&a.then?a.then(function(){t.export(e,t,r,i,o+1)}):t.export(e,t,r,i,o+1)})}function Il(e,t,r,n,i){let o,s;switch(i||(i=0)){case 0:if(o="reg",this.fastupdate){s=Q();for(let a in this.register)s[a]=1}else s=this.register;break;case 1:o="cfg",s={doc:0,opt:this.optimize?1:0};break;case 2:o="map",s=this.map;break;case 3:o="ctx",s=this.ctx;break;default:return}return _l(e,t||this,r,o,n,i,s),!0}function kl(e,t){if(t)switch(ue(t)&&(t=JSON.parse(t)),e){case"cfg":this.optimize=!!t.opt;break;case"reg":this.fastupdate=!1,this.register=t;break;case"map":this.map=t;break;case"ctx":this.ctx=t;break}}function Ol(e,t,r,n,i){if(i||(i=0),n||(n=0),n<this.field.length){let o=this.field[n],s=this.index[o];t=this,setTimeout(function(){s.export(e,t,i?o:"",n,i++)||(n++,i=1,t.export(e,t,o,n,i))})}else{let o,s;switch(i){case 1:o="tag",s=this.tagindex;break;case 2:o="store",s=this.store;break;default:return}_l(e,this,r,o,n,i,s)}}function Tl(e,t){if(t)switch(ue(t)&&(t=JSON.parse(t)),e){case"tag":this.tagindex=t;break;case"reg":this.fastupdate=!1,this.register=t;for(let n=0,i;n<this.field.length;n++)i=this.index[this.field[n]],i.register=t,i.fastupdate=!1;break;case"store":this.store=t;break;default:e=e.split(".");let r=e[0];e=e[1],r&&e&&this.index[r].import(e,t)}}function xe(e,t){if(!(this instanceof xe))return new xe(e);let r,n,i;e?(!0&&(e=yo(e)),r=e.charset,n=e.lang,ue(r)&&(r.indexOf(":")===-1&&(r+=":default"),r=bl[r]),ue(n)&&(n=wl[n])):e={};let o,s,a=e.context||{};this.encode=e.encode||r&&r.encode||go,this.register=t||Q(),this.resolution=o=e.resolution||9,this.tokenize=i=r&&r.tokenize||e.tokenize||"strict",this.depth=i==="strict"&&a.depth,this.bidirectional=$t(a.bidirectional,!0),this.optimize=s=$t(e.optimize,!0),this.fastupdate=$t(e.fastupdate,!0),this.minlength=e.minlength||1,this.boost=e.boost,this.map=s?po(o):Q(),this.resolution_ctx=o=a.resolution||1,this.ctx=s?po(o):Q(),this.rtl=r&&r.rtl||e.rtl,this.matcher=(i=e.matcher||n&&n.matcher)&&ho(i,!1),this.stemmer=(i=e.stemmer||n&&n.stemmer)&&ho(i,!0),this.filter=(i=e.filter||n&&n.filter)&&yl(i),!0&&(this.cache=(i=e.cache)&&new $n(i))}var zn=xe;xe.prototype.append=function(e,t){return this.add(e,t,!0)};xe.prototype.add=function(e,t,r,n){if(t&&(e||e===0)){if(!n&&!r&&this.register[e])return this.update(e,t);t=this.encode(""+t);let i=t.length;if(i){let o=Q(),s=Q(),a=this.depth,u=this.resolution;for(let d=0;d<i;d++){let f=t[this.rtl?i-1-d:d],h=f.length;if(f&&h>=this.minlength&&(a||!s[f])){let l=Wn(u,i,d),m="";switch(this.tokenize){case"full":if(h>2){for(let g=0;g<h;g++)for(let E=h;E>g;E--)if(E-g>=this.minlength){let _=Wn(u,i,d,h,g);m=f.substring(g,E),this.push_index(s,m,_,e,r)}break}case"reverse":if(h>1){for(let g=h-1;g>0;g--)if(m=f[g]+m,m.length>=this.minlength){let E=Wn(u,i,d,h,g);this.push_index(s,m,E,e,r)}m=""}case"forward":if(h>1){for(let g=0;g<h;g++)m+=f[g],m.length>=this.minlength&&this.push_index(s,m,l,e,r);break}default:if(this.boost&&(l=Math.min(l/this.boost(t,f,d)|0,u-1)),this.push_index(s,f,l,e,r),a&&i>1&&d<i-1){let g=Q(),E=this.resolution_ctx,_=f,A=Math.min(a+1,i-d);g[_]=1;for(let q=1;q<A;q++)if(f=t[this.rtl?i-1-d-q:d+q],f&&f.length>=this.minlength&&!g[f]){g[f]=1;let L=Wn(E+(i/2>E?0:1),i,d,A-1,q-1),G=this.bidirectional&&f>_;this.push_index(o,G?_:f,L,e,r,G?f:_)}}}}}this.fastupdate||(this.register[e]=1)}}return this};function Wn(e,t,r,n,i){return r&&e>1?t+(n||0)<=e?r+(i||0):(e-1)/(t+(n||0))*(r+(i||0))+1|0:0}xe.prototype.push_index=function(e,t,r,n,i,o){let s=o?this.ctx:this.map;if((!e[t]||o&&!e[t][o])&&(this.optimize&&(s=s[r]),o?(e=e[t]||(e[t]=Q()),e[o]=1,s=s[o]||(s[o]=Q())):e[t]=1,s=s[t]||(s[t]=[]),this.optimize||(s=s[r]||(s[r]=[])),(!i||!s.includes(n))&&(s[s.length]=n,this.fastupdate))){let a=this.register[n]||(this.register[n]=[]);a[a.length]=s}};xe.prototype.search=function(e,t,r){r||(!t&&Me(e)?(r=e,e=r.query):Me(t)&&(r=t));let n=[],i,o,s,a=0;if(r&&(e=r.query||e,t=r.limit,a=r.offset||0,o=r.context,s=!0&&r.suggest),e&&(e=this.encode(""+e),i=e.length,i>1)){let h=Q(),l=[];for(let m=0,g=0,E;m<i;m++)if(E=e[m],E&&E.length>=this.minlength&&!h[E]){if(!this.optimize&&!s&&!this.map[E])return n;l[g++]=E,h[E]=1}e=l,i=e.length}if(!i)return n;t||(t=100);let u=this.depth&&i>1&&o!==!1,d=0,f;u?(f=e[0],d=1):i>1&&e.sort(pl);for(let h,l;d<i;d++){if(l=e[d],u?(h=this.add_result(n,s,t,a,i===2,l,f),(!s||h!==!1||!n.length)&&(f=l)):h=this.add_result(n,s,t,a,i===1,l),h)return h;if(s&&d===i-1){let m=n.length;if(m){if(m===1)return Fl(n[0],t,a)}else{if(u){u=0,d=-1;continue}return n}}}return Ln(n,t,a,s)};xe.prototype.add_result=function(e,t,r,n,i,o,s){let a=[],u=s?this.ctx:this.map;if(this.optimize||(u=Dl(u,o,s,this.bidirectional)),u){let d=0,f=Math.min(u.length,s?this.resolution_ctx:this.resolution);for(let h=0,l=0,m,g;h<f&&(m=u[h],!(m&&(this.optimize&&(m=Dl(m,o,s,this.bidirectional)),n&&m&&i&&(g=m.length,g<=n?(n-=g,m=null):(m=m.slice(n),n=0)),m&&(a[d++]=m,i&&(l+=m.length,l>=r)))));h++);if(d){if(i)return Fl(a,r,0);e[e.length]=a;return}}return!t&&a};function Fl(e,t,r){return e.length===1?e=e[0]:e=dl(e),r||e.length>t?e.slice(r,r+t):e}function Dl(e,t,r,n){if(r){let i=n&&t>r;e=e[i?t:r],e=e&&e[i?r:t]}else e=e[t];return e}xe.prototype.contain=function(e){return!!this.register[e]};xe.prototype.update=function(e,t){return this.remove(e).add(e,t)};xe.prototype.remove=function(e,t){let r=this.register[e];if(r){if(this.fastupdate)for(let n=0,i;n<r.length;n++)i=r[n],i.splice(i.indexOf(e),1);else Bn(this.map,e,this.resolution,this.optimize),this.depth&&Bn(this.ctx,e,this.resolution_ctx,this.optimize);t||delete this.register[e],!0&&this.cache&&this.cache.del(e)}return this};function Bn(e,t,r,n,i){let o=0;if(xt(e))if(i){let s=e.indexOf(t);s!==-1?e.length>1&&(e.splice(s,1),o++):o++}else{i=Math.min(e.length,r);for(let s=0,a;s<i;s++)a=e[s],a&&(o=Bn(a,t,r,n,i),!n&&!o&&delete e[s])}else for(let s in e)o=Bn(e[s],t,r,n,i),o||delete e[s];return o}!0&&(xe.prototype.searchCache=jn);!0&&(xe.prototype.export=Il,xe.prototype.import=kl);!0&&qn(xe.prototype);function Al(e){e=e.data;let t=self._index,r=e.args,n=e.task;switch(n){case"init":let i=e.options||{},o=e.factory,s=i.encode;i.cache=!1,s&&s.indexOf("function")===0&&(i.encode=Function("return "+s)()),o?(Function("return "+o)()(self),self._index=new self.FlexSearch.Index(i),delete self.FlexSearch):self._index=new zn(i);break;default:let a=e.id,u=t[n].apply(t,r);postMessage(n==="search"?{id:a,msg:u}:{id:a})}}var Nl=0;function Nr(e){if(!(this instanceof Nr))return new Nr(e);let t;e?Fr(t=e.encode)&&(e.encode=t.toString()):e={};let r=(self||window)._factory;r&&(r=r.toString());let n=typeof window=="undefined"&&self.exports,i=this;this.worker=xv(r,n,e.worker),this.resolver=Q(),this.worker&&(n?this.worker.on("message",function(o){i.resolver[o.id](o.msg),delete i.resolver[o.id]}):this.worker.onmessage=function(o){o=o.data,i.resolver[o.id](o.msg),delete i.resolver[o.id]},this.worker.postMessage({task:"init",factory:r,options:e}))}var Cl=Nr;Cr("add");Cr("append");Cr("search");Cr("update");Cr("remove");function Cr(e){Nr.prototype[e]=Nr.prototype[e+"Async"]=function(){let t=this,r=[].slice.call(arguments),n=r[r.length-1],i;Fr(n)&&(i=n,r.splice(r.length-1,1));let o=new Promise(function(s){setTimeout(function(){t.resolver[++Nl]=s,t.worker.postMessage({task:e,id:Nl,args:r})})});return i?(o.then(i),this):o}}function xv(factory,is_node_js,worker_path){let worker;try{worker=is_node_js?eval(\'new (require("worker_threads")["Worker"])("../dist/node/node.js")\'):factory?new Worker(URL.createObjectURL(new Blob(["onmessage="+Al.toString()],{type:"text/javascript"}))):new Worker(ue(worker_path)?worker_path:"worker/worker.js",{type:"module"})}catch(e){}return worker}function Ee(e){if(!(this instanceof Ee))return new Ee(e);let t=e.document||e.doc||e,r;this.tree=[],this.field=[],this.marker=[],this.register=Q(),this.key=(r=t.key||t.id)&&Kn(r,this.marker)||"id",this.fastupdate=$t(e.fastupdate,!0),!0&&(this.storetree=(r=t.store)&&r!==!0&&[],this.store=r&&Q()),!0&&(this.tag=(r=t.tag)&&Kn(r,this.marker),this.tagindex=r&&Q()),!0&&(this.cache=(r=e.cache)&&new $n(r),e.cache=!1),!0&&(this.worker=e.worker),!0&&(this.async=!1),this.index=Ev.call(this,e,t)}var Pl=Ee;function Ev(e,t){let r=Q(),n=t.index||t.field||t;ue(n)&&(n=[n]);for(let i=0,o,s;i<n.length;i++)o=n[i],ue(o)||(s=o,o=o.field),s=Me(s)?Object.assign({},e,s):e,!0&&this.worker&&(r[o]=new Cl(s),r[o].worker||(this.worker=!1)),this.worker||(r[o]=new zn(s,this.register)),this.tree[i]=Kn(o,this.marker),this.field[i]=o;if(!0&&this.storetree){let i=t.store;ue(i)&&(i=[i]);for(let o=0;o<i.length;o++)this.storetree[o]=Kn(i[o],this.marker)}return r}function Kn(e,t){let r=e.split(":"),n=0;for(let i=0;i<r.length;i++)e=r[i],e.indexOf("[]")>=0&&(e=e.substring(0,e.length-2),e&&(t[n]=!0)),e&&(r[n++]=e);return n<r.length&&(r.length=n),n>1?r:r[0]}function wo(e,t){if(ue(t))e=e[t];else for(let r=0;e&&r<t.length;r++)e=e[t[r]];return e}function bo(e,t,r,n,i){if(e=e[i],n===r.length-1)t[i]=e;else if(e)if(xt(e)){t=t[i]=new Array(e.length);for(let o=0;o<e.length;o++)bo(e,t,r,n,o)}else t=t[i]||(t[i]=Q()),i=r[++n],bo(e,t,r,n,i)}function xo(e,t,r,n,i,o,s,a){if(e=e[s],e)if(n===t.length-1){if(xt(e)){if(r[n]){for(let u=0;u<e.length;u++)i.add(o,e[u],!0,!0);return}e=e.join(" ")}i.add(o,e,a,!0)}else if(xt(e))for(let u=0;u<e.length;u++)xo(e,t,r,n,i,o,u,a);else s=t[++n],xo(e,t,r,n,i,o,s,a)}Ee.prototype.add=function(e,t,r){if(Me(e)&&(t=e,e=wo(t,this.key)),t&&(e||e===0)){if(!r&&this.register[e])return this.update(e,t);for(let n=0,i,o;n<this.field.length;n++)o=this.field[n],i=this.tree[n],ue(i)&&(i=[i]),xo(t,i,this.marker,0,this.index[o],e,i[0],r);if(!0&&this.tag){let n=wo(t,this.tag),i=Q();ue(n)&&(n=[n]);for(let o=0,s,a;o<n.length;o++)if(s=n[o],!i[s]&&(i[s]=1,a=this.tagindex[s]||(this.tagindex[s]=[]),(!r||!a.includes(e))&&(a[a.length]=e,this.fastupdate))){let u=this.register[e]||(this.register[e]=[]);u[u.length]=a}}if(!0&&this.store&&(!r||!this.store[e])){let n;if(this.storetree){n=Q();for(let i=0,o;i<this.storetree.length;i++)o=this.storetree[i],ue(o)?n[o]=t[o]:bo(t,n,o,0,o[0])}this.store[e]=n||t}}return this};Ee.prototype.append=function(e,t){return this.add(e,t,!0)};Ee.prototype.update=function(e,t){return this.remove(e).add(e,t)};Ee.prototype.remove=function(e){if(Me(e)&&(e=wo(e,this.key)),this.register[e]){for(let t=0;t<this.field.length&&(this.index[this.field[t]].remove(e,!this.worker),!this.fastupdate);t++);if(!0&&this.tag&&!this.fastupdate)for(let t in this.tagindex){let r=this.tagindex[t],n=r.indexOf(e);n!==-1&&(r.length>1?r.splice(n,1):delete this.tagindex[t])}!0&&this.store&&delete this.store[e],delete this.register[e]}return this};Ee.prototype.search=function(e,t,r,n){r||(!t&&Me(e)?(r=e,e=""):Me(t)&&(r=t,t=0));let i=[],o=[],s,a,u,d,f,h,l=0;if(r)if(xt(r))u=r,r=null;else{if(e=r.query||e,s=r.pluck,u=s||r.index||r.field,d=!0&&r.tag,a=!0&&this.store&&r.enrich,f=r.bool==="and",t=r.limit||t||100,h=r.offset||0,d&&(ue(d)&&(d=[d]),!e)){for(let g=0,E;g<d.length;g++)E=Sv.call(this,d[g],t,h,a),E&&(i[i.length]=E,l++);return l?i:[]}ue(u)&&(u=[u])}u||(u=this.field),f=f&&(u.length>1||d&&d.length>1);let m=!n&&(this.worker||this.async)&&[];for(let g=0,E,_,A;g<u.length;g++){let q;if(_=u[g],ue(_)||(q=_,_=q.field,e=q.query||e,t=q.limit||t),m){m[g]=this.index[_].searchAsync(e,t,q||r);continue}else n?E=n[g]:E=this.index[_].search(e,t,q||r);if(A=E&&E.length,d&&A){let L=[],G=0;f&&(L[0]=[E]);for(let V=0,R,K;V<d.length;V++)R=d[V],K=this.tagindex[R],A=K&&K.length,A&&(G++,L[L.length]=f?[K]:K);G&&(f?E=Ln(L,t||100,h||0):E=xl(E,L),A=E.length)}if(A)o[l]=_,i[l++]=E;else if(f)return[]}if(m){let g=this;return new Promise(function(E){Promise.all(m).then(function(_){E(g.search(e,t,r,_))})})}if(!l)return[];if(s&&(!a||!this.store))return i[0];for(let g=0,E;g<o.length;g++){if(E=i[g],E.length&&a&&(E=ql.call(this,E)),s)return E;i[g]={field:o[g],result:E}}return i};function Sv(e,t,r,n){let i=this.tagindex[e],o=i&&i.length-r;if(o&&o>0)return(o>t||r)&&(i=i.slice(r,r+t)),n&&(i=ql.call(this,i)),{tag:e,result:i}}function ql(e){let t=new Array(e.length);for(let r=0,n;r<e.length;r++)n=e[r],t[r]={id:n,doc:this.store[n]};return t}Ee.prototype.contain=function(e){return!!this.register[e]};!0&&(Ee.prototype.get=function(e){return this.store[e]},Ee.prototype.set=function(e,t){return this.store[e]=t,this});!0&&(Ee.prototype.searchCache=jn);!0&&(Ee.prototype.export=Ol,Ee.prototype.import=Tl);!0&&qn(Ee.prototype);var _v=["a","about","above","after","again","against","all","also","am","an","and","any","are","aren\'t","as","at","be","because","been","before","being","below","both","but","by","can","cannot","can\'t","come","could","couldn\'t","did","didn\'t","do","does","doesn\'t","doing","dont","down","during","each","even","few","first","for","from","further","get","go","had","hadn\'t","has","hasn\'t","have","haven\'t","having","he","hed","her","here","here\'s","hers","herself","hes","him","himself","his","how","how\'s","i","id","if","ill","im","in","into","is","isn\'t","it","it\'s","itself","i\'ve","just","know","let\'s","like","make","me","more","most","mustn\'t","my","myself","new","no","nor","not","now","of","off","on","once","only","or","other","ought","our","our\'s","ourselves","out","over","own","same","say","see","shan\'t","she","she\'d","shell","shes","should","shouldn\'t","so","some","such","than","that","that\'s","the","their","theirs","them","themselves","then","there","there\'s","these","they","they\'d","they\'ll","they\'re","they\'ve","this","those","through","time","to","too","until","up","us","very","want","was","wasn\'t","way","we","wed","well","were","weren\'t","we\'ve","what","what\'s","when","when\'s","where","where\'s","which","while","who","whom","who\'s","why","why\'s","will","with","won\'t","would","wouldn\'t","you","you\'d","you\'ll","your","you\'re","your\'s","yourself","yourselves","you\'ve"],Iv={ational:"ate",iveness:"ive",fulness:"ful",ousness:"ous",ization:"ize",tional:"tion",biliti:"ble",icate:"ic",ative:"",alize:"al",iciti:"ic",entli:"ent",ousli:"ous",alism:"al",ation:"ate",aliti:"al",iviti:"ive",ement:"",enci:"ence",anci:"ance",izer:"ize",alli:"al",ator:"ate",logi:"log",ical:"ic",ance:"",ence:"",ness:"",able:"",ible:"",ment:"",eli:"e",bli:"ble",ful:"",ant:"",ent:"",ism:"",ate:"",iti:"",ous:"",ive:"",ize:"",al:"",ou:"",er:"",ic:""},kv={},Ll={filter:_v,stemmer:Iv,matcher:kv};function Ml(){return new Pl({worker:!0,charset:vl,language:Ll,document:{id:"itemID",index:["title","creators[]:firstName","creators[]:lastName","date"]},tokenize:"full",suggest:!0})}var ne={main:new Mt,bbt:new Mt},pe={libraries:null,search:Ml(),items:new Map},Eo=()=>{if(!pe.libraries)throw new Error("Library info not loaded");return pe.libraries},So=e=>{let t=Eo();if(!t[e])throw new Error("Library not found");return t[e].groupID};var Bl=_t(jl(),1);var Ov=(e,t)=>{var n,i;let r;if(typeof e=="number"){let o=(n=pe.items.get(t))==null?void 0:n.byId;if(!o)throw new Error("get item by id before cache ready");r=o.get(e)}else if(typeof e=="string"){let o=(i=pe.items.get(t))==null?void 0:i.byKey;if(!o)throw new Error("get item by key before cache ready");r=o.get(e)}else(0,Bl.assertNever)(e);return r!=null?r:null},Tv=e=>{if(se.debug("Reading Better BibTex database"),!ne.bbt.opened)return se.info("Better BibTex database not enabled, skipping..."),[];let t=ne.bbt.prepare(Ht).query({items:e});return se.info("Finished reading Better BibTex"),t};function Dv(e){let t=e;return Array.isArray(t.accessDate)&&t.accessDate.length===1&&typeof t.accessDate[0]=="string"}function Fv(e){let t=e.replace(" ","T")+"Z";try{return new Date(t)}catch(r){return null}}function Jn(e,t){if(!pe.libraries)throw new Error("Library info not loaded");let r=pe.libraries,n=Tv(t),i=ne.main.prepare(Yt).query(t),o=ne.main.prepare(Vt).query(t),s=Nv(t.flatMap(([u])=>{var d,f,h;return(h=(f=(d=e[u])==null?void 0:d.collectionIDs)==null?void 0:f.map(l=>`${l}-${e[u].libraryID}`))!=null?h:[]})).filter(u=>u!==null),a=ne.main.prepare(rr).query(s.map(u=>u.split("-").map(d=>+d)));return t.reduce((u,[d,f])=>{if(!d)return u;let h=n[d];h||se.warn(`Citekey: No item found for itemID ${d}`,h);let l=i[d].reduce((q,L)=>{var V,R;let{value:G}=L;return L.fieldName==="date"&&(G=Jo(G).split("-")[0]),((R=q[V=L.fieldName])!=null?R:q[V]=[]).push(G),q},{}),A=e[d],{collectionIDs:m}=A,g=St(A,["collectionIDs"]),E=m.map(q=>a.get(q)).filter(q=>q!==void 0),_=We(he(We(he({},g),{libraryID:f,groupID:r[f].groupID,itemID:d,creators:o[d],collections:E,citekey:n[d]}),l),{dateAccessed:Dv(l)?Fv(l.accessDate[0]):null});return u[d]=_,u},{})}var Av=e=>typeof e[0][0]=="string",Ul=(e,t)=>{if(e.length===0)return[];if(!t)return e.map(([o,s])=>Ov(o,s));let r,n,i;if(Av(e)){let o=ne.main.prepare(er).query(e);return n=e.map(([s,a])=>[o[s].itemID,a]),r=n.reduce((s,[a],u)=>{let[d]=e[u];return s[a]=o[d],s},{}),i=Jn(r,n),Wl(i),e.map(([s])=>i[o[s].itemID])}else return n=e,r=ne.main.prepare(Xt).query(n),i=Jn(r,n),Wl(i),e.map(([o])=>i[o])};function Wl(e){for(let t of Object.values(e)){let r=pe.items.get(t.libraryID);if(!r)throw new Error("Cache not initialized");r.byId.set(t.itemID,t),r.byKey.set(jr(t,!0),t)}}function Nv(e){return[...new Set(e)]}var zl=()=>pe.libraries=ne.main.prepare(nr).query().reduce((e,t)=>(e[t.libraryID]=t,e),{});var Kl=e=>{let{nativeBinding:t,mainDbPath:r,bbtDbPath:n}=e!=null?e:{};se.debug("open database",e);let i=ne.main.open({nativeBinding:t,file:r});i||se.error(`Failed to open main database, no database found at ${r}`);let o=ne.bbt.open({file:n,nativeBinding:t});return o||se.debug(`Unable to open bbt database, no database found at ${n}`),zl(),[i,o]};var Cv=async e=>{se.debug("Reading main Zotero database for index");let r=ne.main.prepare(Zt).query({libId:e}).reduce((d,f)=>(d[f.itemID]=f,d),{}),n=Object.keys(r).map(d=>[Number(d),e]),i=Jn(r,n);se.info("Finished reading main Zotero database for index"),se.trace("Start fuse indexing");let o=Object.values(i),s=o.map(d=>d.itemID),a=new Set(s),u=pe.items.get(e);if(pe.items.set(e,{byId:new Map(o.map(d=>[d.itemID,d])),byKey:new Map(o.map(d=>[jr(d,!0),d]))}),!u)await Promise.all([...o.map(d=>pe.search.addAsync(d.itemID,d))]);else{let d=[...u.byId.keys()].filter(f=>!a.has(f));u.byId.clear(),u.byKey.clear(),await Promise.all([...o.map(f=>pe.search.addAsync(f.itemID,f)),...d.map(f=>pe.search.removeAsync(f))])}se.info("Library citation index initialized")},Gl=Cv;function Rr(e,t){return(...r)=>{se.debug(`Reading Zotero database for ${typeof t=="string"?t:t(null,...r)}`);let n=e.apply(null,r);return Promise.resolve(n).then(i=>se.debug(`Finished reading Zotero database for ${typeof t=="string"?t:t(i,...r)}`)),n}}var Rv={getLibs:()=>Object.values(Eo()),initIndex:Gl,openDb:Kl,search:async(e,t)=>{if(!pe.items.has(e))throw new Error("Query before index ready");return await pe.search.searchAsync(t)},getTags:Rr(e=>ne.main.prepare(ir).query(e),"tags"),getItemIDsFromCitekey(e){return ne.bbt.prepare(Jt).query({citekeys:e})},getItemsFromCache:(e,t)=>{let r=pe.items.get(t);if(!r)throw new Error("get items before cache ready");let n=[...r.byId.values()].sort((i,o)=>o.dateAccessed&&i.dateAccessed?o.dateAccessed.getTime()-i.dateAccessed.getTime():0);return e<=0?n:n.slice(0,e)},getAttachments:Rr((e,t)=>ne.main.prepare(Gt).query({itemId:e,libId:t}),(e,t)=>`attachments of item ${t}`+(e?`, count: ${e.length}`:"")),getAnnotations:Rr((e,t)=>ne.main.prepare(Kt).query({attachmentId:e,libId:t,groupID:So(t)}),(e,t)=>`annotations of attachment ${t}`+(e?`, count: ${e.length}`:"")),getAnnotFromKey:Rr((e,t)=>ne.main.prepare(zt).query({annotKeys:e,libId:t,groupID:So(t)}),(e,t)=>`annotations with keys: ${t.join(",")}`+(e?`, count: ${e.length}`:"")),getItems:Ul,isUpToDate:()=>ne.main.isUpToDate(),checkDbStatus:e=>ne[e].opened,raw(e,t,r){let{instance:n}=ne.main;if(!n)throw new Error("failed to query raw: no main database opened");return n.prepare(t)[e](...r)},setLoglevel:e=>{se.level=e,Jl.default.setItem(lo,e)}};(0,Hl.worker)(Zo(Rv));\n/*! Bundled license information:\n\n@aidenlx/workerpool/dist/workerpool.js:\n  (**\n   * workerpool.js\n   * https://github.com/josdejong/workerpool\n   *\n   * Offload tasks to a pool of workers on node.js and in the browser.\n   *\n   * @version 6.2.1-mod.13\n   * @date    2022-10-04\n   *\n   * @license\n   * Copyright (C) 2014-2022 Jos de Jong <wjosdejong@gmail.com>\n   *\n   * Licensed under the Apache License, Version 2.0 (the "License"); you may not\n   * use this file except in compliance with the License. You may obtain a copy\n   * of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n   * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n   * License for the specific language governing permissions and limitations under\n   * the License.\n   *)\n\nlocalforage/dist/localforage.js:\n  (*!\n      localForage -- Offline Storage, Improved\n      Version 1.10.0\n      https://localforage.github.io/localForage\n      (c) 2013-2017 Mozilla, Apache License 2.0\n  *)\n\nflatted/cjs/index.js:\n  (*! (c) 2020 Andrea Giammarchi *)\n*/\n';var X0=ae(We(),1),ew=require("obsidian");function tw(e,t={}){return Ci({...t,register:r=>e.metadataCache.on("initialized",r),unregister:r=>e.metadataCache.offref(r),escape:()=>e.metadataCache.initialized,timeout:t.timeout??null})}function op(e,t={}){return Ci({...t,register:r=>e.vault.on("zotero:db-refresh",r),unregister:r=>e.vault.offref(r)})}function so(e,t={}){return Ci({...t,unregister:r=>e.app.vault.offref(r),escape:()=>e.dbWorker.status===2,register:r=>{let n=e.dbWorker.status;if(n===0)return e.app.vault.on("zotero:db-ready",r);if(n===1)return e.app.vault.on("zotero:db-refresh",r);if(n===2)throw new Error("should not be called when db is ready");(0,X0.assertNever)(n)}})}var rw=e=>new Promise(t=>{e.workspace.onLayoutReady(t)}),Ci=({register:e,unregister:t,escape:r,timeout:n=1e4,waitAfterEvent:o,debounce:i=1e3})=>{let a=null;return[new Promise((u,l)=>{if(r?.()){u();return}a=function(){t(p),l(new Ai)};function c(){t(p),u()}async function f(){o!==void 0&&await sleep(o),c()}let p=e(i?(0,ew.debounce)(f,i,!0):f);n!==null&&sleep(n).then(()=>{t(p),r?.()?c():l(new Ii(n))})}),a]},Ii=class extends Error{constructor(r){super(`Timeout after ${r}ms`);this.timeout=r}},Ai=class extends Error{constructor(){super("Manually cancelled")}};var Gs=e=>{let t={},r=n=>t[n]??=(...o)=>e.exec(n,o);return e.exec("methods").then(n=>n.forEach(r)),new Proxy(t,{get(n,o){if(typeof o=="string")return r(o)}})};var Gw=require("os"),Pi=require("path"),Kw=ae(We(),1);var aw=require("path/posix");var ap=require("obsidian");var ow={"103":{darwin:["arm64","x64"],linux:["x64"],win32:["x64","ia32","arm64"]},"109":{darwin:["arm64","x64"],linux:["x64"],win32:["x64","ia32","arm64"]},"110":{darwin:["arm64","x64"],linux:["x64"],win32:["x64","ia32","arm64"]},"114":{darwin:["arm64","x64"],linux:["x64"],win32:["x64","ia32","arm64"]},"116":{darwin:["arm64","x64"],linux:["x64"],win32:["x64","ia32","arm64"]}};var iw=ap.Platform.isDesktopApp?require("@electron/remote").app.getPath("userData"):null,{arch:mJ,platform:hJ,versions:{modules:E5,electron:gJ}}=process,ip=ow,sw=({modules:e})=>{if(e in ip)return 0;let r=Object.keys(ip).map(o=>parseInt(o,10)).sort((o,i)=>o-i);return parseInt(e,10)>r[r.length-1]?1:-1},uw=({platform:e,arch:t})=>!!ip[E5][e]?.includes(t),cw=()=>ap.Platform.isDesktopApp?{arch:process.arch,platform:process.platform,modules:process.versions.modules,electron:process.versions.electron}:null,sp=e=>e.versions?.["better-sqlite3"],uo=e=>{if(!iw)return null;let t=sp(e);return t?(0,aw.join)(iw,Ag(t)):null};function lw(e){return e===void 0?{BS_PRIVATE_NESTED_SOME_NONE:0}:e!==null&&e.BS_PRIVATE_NESTED_SOME_NONE!==void 0?{BS_PRIVATE_NESTED_SOME_NONE:e.BS_PRIVATE_NESTED_SOME_NONE+1|0}:e}function fw(e,t){for(var r=e.length,n=t.length,o=new Array(r+n|0),i=0;i<r;++i)o[i]=e[i];for(var a=0;a<n;++a)o[r+a|0]=t[a];return o}function up(e,t){for(var r=0,n=e.length;r<n;++r)t(e[r])}function Ks(e,t){for(var r=e.length,n=new Array(r),o=0;o<r;++o)n[o]=t(e[o]);return n}function Ti(e,t,r){for(var n=t,o=0,i=e.length;o<i;++o)n=r(n,e[o]);return n}var pw=function(e,t){for(var r in e)t(r)};function Oi(e,t){if(e===t)return!0;var r=typeof e;if(r==="string"||r==="number"||r==="boolean"||r==="undefined"||e===null)return!1;var n=typeof t;if(r==="function"||n==="function")throw{RE_EXN_ID:"Invalid_argument",_1:"equal: functional value",Error:new Error};if(n==="number"||n==="undefined"||t===null)return!1;var o=0|e.TAG,i=0|t.TAG;if(o===248)return e[1]===t[1];if(o===251)throw{RE_EXN_ID:"Invalid_argument",_1:"equal: abstract value",Error:new Error};if(o!==i)return!1;var a=0|e.length;if(a===(0|t.length))if(Array.isArray(e))for(var s=0;;){var u=s;if(u===a)return!0;if(!Oi(e[u],t[u]))return!1;s=u+1|0}else{if(e instanceof Date&&t instanceof Date)return!(e>t||e<t);var l={contents:!0};return pw(e,function(c){if(!Object.prototype.hasOwnProperty.call(t,c)){l.contents=!1;return}}),l.contents&&pw(t,function(c){if(!Object.prototype.hasOwnProperty.call(e,c)||!Oi(t[c],e[c])){l.contents=!1;return}}),l.contents}else return!1}function Js(e,t){if(t in e)return lw(e[t])}var cp=function(e,t){delete e[t]};function hw(e){for(var t=Object.keys(e),r=t.length,n=new Array(r),o=0;o<r;++o)n[o]=e[t[o]];return n}function co(e){for(var t={},r=e.length,n=0;n<r;++n){var o=e[n];t[o[0]]=o[1]}return t}function dw(e,t){return fw(e,[t])}function Zs(){if(arguments.length===1){let e=arguments;return function(r){return dw(r,e[0])}}return dw(arguments[0],arguments[1])}function mw(e,t){return Ti(e,{},function(r,n){var o=t(n),i=Js(r,o);return i!==void 0?i.push(n):r[o]=[n],r})}function mn(){if(arguments.length===1){let e=arguments;return function(r){return mw(r,e[0])}}return mw(arguments[0],arguments[1])}function Fw(e){}function Pw(e){return{}}function gw(e,t){return e[t]}function Nw(){if(arguments.length===1){let e=arguments;return function(r){return gw(r,e[0])}}return gw(arguments[0],arguments[1])}var yw=Js;function Rw(){if(arguments.length===1){let e=arguments;return function(r){return yw(r,e[0])}}return yw(arguments[0],arguments[1])}function vw(e,t){return e[t]}function Mw(){if(arguments.length===1){let e=arguments;return function(r){return vw(r,e[0])}}return vw(arguments[0],arguments[1])}function qw(e){return Object.entries(e)}var hn=hw;function Di(e){return Object.keys(e)}var $w=co;function bw(e,t){return Object.assign({},e,t)}function gn(){if(arguments.length===1){let e=arguments;return function(r){return bw(r,e[0])}}return bw(arguments[0],arguments[1])}function ww(e,t,r){var n=gn({},e);return n[t]=r,n}function Ys(){if(arguments.length===2){let e=arguments;return function(r){return ww(r,e[0],e[1])}}return ww(arguments[0],arguments[1],arguments[2])}function xw(e,t,r){return Ys(e,t,r(Js(e,t)))}function Lw(){if(arguments.length===2){let e=arguments;return function(r){return xw(r,e[0],e[1])}}return xw(arguments[0],arguments[1],arguments[2])}function Ew(e,t,r){return Ys(e,t,r(e[t]))}function jw(){if(arguments.length===2){let e=arguments;return function(r){return Ew(r,e[0],e[1])}}return Ew(arguments[0],arguments[1],arguments[2])}function Sw(e,t){var r=gn({},e);return cp(r,t),r}function Bw(){if(arguments.length===1){let e=arguments;return function(r){return Sw(r,e[0])}}return Sw(arguments[0],arguments[1])}function kw(e,t){var r=gn({},e);return up(t,function(n){cp(r,n)}),r}function zw(){if(arguments.length===1){let e=arguments;return function(r){return kw(r,e[0])}}return kw(arguments[0],arguments[1])}function _w(e,t){return co(Ks(Object.keys(e),function(r){return[r,t(e[r])]}))}function lo(){if(arguments.length===1){let e=arguments;return function(r){return _w(r,e[0])}}return _w(arguments[0],arguments[1])}function Iw(e,t){return co(Ks(Object.keys(e),function(r){return[r,t(r,e[r])]}))}function nr(){if(arguments.length===1){let e=arguments;return function(r){return Iw(r,e[0])}}return Iw(arguments[0],arguments[1])}function Aw(e,t){return co(Ti(Object.keys(e),[],function(r,n){var o=e[n];return t(o)?Zs(r,[n,o]):r}))}function Fi(){if(arguments.length===1){let e=arguments;return function(r){return Aw(r,e[0])}}return Aw(arguments[0],arguments[1])}function Cw(e,t){return co(Ti(Object.keys(e),[],function(r,n){var o=e[n];return t(n,o)?Zs(r,[n,o]):r}))}function Qs(){if(arguments.length===1){let e=arguments;return function(r){return Cw(r,e[0])}}return Cw(arguments[0],arguments[1])}function Tw(e,t){return Fi(e,function(r){return!t(r)})}function Ww(){if(arguments.length===1){let e=arguments;return function(r){return Tw(r,e[0])}}return Tw(arguments[0],arguments[1])}function Ow(e,t){return Qs(e,function(r,n){return!t(r,n)})}function Uw(){if(arguments.length===1){let e=arguments;return function(r){return Ow(r,e[0])}}return Ow(arguments[0],arguments[1])}function Dw(e,t){return Qs(e,function(r,n){return function(i,a){return a.includes(i)}(r,t)})}function jt(){if(arguments.length===1){let e=arguments;return function(r){return Dw(r,e[0])}}return Dw(arguments[0],arguments[1])}function Hw(e){return Oi(e,{})}function Vw(e){return!Oi(e,{})}var lp={__proto__:null,placeholder:Fw,makeEmpty:Pw,getUnsafe:Nw,get:Rw,prop:Mw,toPairs:qw,values:hn,keys:Di,fromPairs:$w,merge:gn,set:Ys,update:Lw,updateUnsafe:jw,deleteKey:Bw,deleteKeys:zw,map:lo,mapWithKey:nr,filter:Fi,filterWithKey:Qs,reject:Ww,rejectWithKey:Uw,selectKeys:jt,isEmpty:Hw,isNotEmpty:Vw};var fp=class{use=$e.this;get manifest(){return this.use(le).manifest}value;constructor(){let t=this.getDefaults();this.value=t,Object.defineProperties(this,nr(t,r=>({get:()=>this.value[r]})))}setOption(t,r){return this.value[t]===r?{apply:()=>Promise.resolve(!1),changed:!1}:(this.value[t]=r,{apply:()=>this.apply(t).then(()=>!0),changed:!0})}async apply(t){}async applyAll(){await Promise.all(Di(this.value).map(t=>this.apply(t)))}toJSON(){return this.value}fromJSON(t){let r=Di(this.getDefaults());this.value={...this.value,...jt(t,r)}}},Ne=fp;var Tt=class extends Ne{getDefaults(){return{zoteroDataDir:(0,Pi.join)((0,Gw.homedir)(),"Zotero"),citationLibrary:1}}async apply(t){let r=this.use(ot);switch(t){case"zoteroDataDir":return r.status===0?await r.initialize():await r.refresh({task:"full"});case"citationLibrary":return await r.refresh({task:"searchIndex",force:!0});default:(0,Kw.default)(t)}}#e;get nativeBinding(){if(this.#e)return this.#e;let t=uo(this.manifest);if(t)return this.#e=t,this.#e;throw new Error("Failed to get native binding path")}get zoteroDbPath(){return(0,Pi.join)(this.zoteroDataDir,"zotero.sqlite")}get betterBibTexDbPath(){return(0,Pi.join)(this.zoteroDataDir,"better-bibtex-search.sqlite")}get zoteroCacheDirPath(){return(0,Pi.join)(this.zoteroDataDir,"cache")}get dbConnParams(){return{nativeBinding:this.nativeBinding,mainDbPath:this.zoteroDbPath,bbtDbPath:this.betterBibTexDbPath}}};var ot=class extends fe{logSettings=this.use(fo);settings=this.use(Tt);app=this.use(le).app;async onload(){Z.debug("loading DatabaseWorker");let t=(0,Ni.debounce)(()=>{this.refresh({task:"dbConn"})},500,!0);this.registerEvent(this.app.vault.on("zotero:db-updated",()=>t()));let r=process.hrtime();await this.initialize(),Z.debug(`ZoteroDB Initialization complete. Took ${(0,Zw.default)(process.hrtime(r))}`);let n=this.use(le);n.addCommand({id:"refresh-zotero-data",name:"Refresh Zotero Data",callback:async()=>{await this.refresh({task:"full"})}}),n.addCommand({id:"refresh-zotero-search-index",name:"Refresh Zotero Search Index",callback:async()=>{await this.refresh({task:"searchIndex"})}});let o=this.genAutoRefresh(n);this.registerEvent(n.server.on("bg:notify",async(i,a)=>{a.event==="regular-item/update"&&o(a)}))}genAutoRefresh(t){let r=!1,n=null,o=()=>{n&&(Z.debug("unregistering db refresh watcher"),n(),n=null)},i=(0,Ni.debounce)(async()=>{if(o(),Z.debug("Auto Refreshing Zotero Search Index"),!r){r=!1;try{Z.debug("Db not refreshed, waiting before auto refresh");let[a]=op(t.app,{timeout:1e4});await a}catch(a){if(a instanceof Ii){Z.warn("no db refreshed event received in 10s, skip refresh search index");return}else{console.error("error while waiting for db refresh during execute",a);return}}}await this.refresh({task:"searchIndex",force:!0}),Z.debug("Auto Refreshing Zotero Search Index Success")},5e3,!0);return a=>{if(Z.debug(`Request to auto refresh search index: (refreshed ${r})`,a),i(),o(),r)return;Z.debug("watching db refresh while waiting for search index auto refresh");let[s,u]=op(t.app,{timeout:null});n=u,s.then(()=>{Z.debug("db refresh while requesting auto refresh search index"),r=!0,n=null}).catch(l=>{l instanceof Ai||console.error("error while waiting for db refresh during request",l)})}}async onunload(){await this.#t.terminate(),URL.revokeObjectURL(this.#e),this.#r=0,this.#i=null}#e=Vs(Q0);#t=Jw.default.pool(this.#e,{minWorkers:1,maxWorkers:1,workerType:"web",name:"Zotero Database Workers"});api=Gs(this.#t);#r=0;get status(){return this.#r}#n=null;#o=null;toConnectedDbId(t){return[t.mainDbPath,t.bbtDbPath].join()}async#a(t){let r=this.settings.citationLibrary;return!t&&this.#n===r?(Z.debug(`Skipping search index init, lib ${r} already indexed`),!1):(await this.api.initIndex(r),this.#n=r,Z.debug(`Search index init complete for lib ${r}`),!0)}async#u(t=!1){let r=this.settings.dbConnParams,n=this.toConnectedDbId(r),o;t?n!==this.#o?(delete r.nativeBinding,o=await this.api.openDb(r),this.#o=n):o=await this.api.openDb():(o=await this.api.openDb(r),this.#o=n);let[i,a]=o;if(a||Z.debug("Failed to open Better BibTeX database, skipping..."),!i)throw new Error("Failed to init ZoteroDB")}async initialize(){if(this.#r!==0)throw new Error("Calling init on already initialized db, use refresh instead");await this.#u(),this.app.vault.trigger("zotero:db-ready"),await this.#a(!0),this.app.metadataCache.trigger("zotero:search-ready"),Z.info("ZoteroDB Initialization complete."),this.#r=2}#s=null;#i=null;refresh(t){if(this.#r===0)return Promise.reject(new Error("Calling refresh on uninitialized database"));if(this.#r===2){this.#r=1;let r=(async()=>{t.task==="dbConn"?await this.#c():t.task==="searchIndex"?await this.#l(t.force):t.task==="full"?await this.#f():(0,pp.assertNever)(t),this.#r=2;let n=this.#i;n&&(this.#i=null,await this.refresh(n))})();return this.#s=r}else{if(this.#r===1)return this.#s?(this.#i=this.#p(t),this.#s):Promise.reject(new Error("Other task in pending state"));(0,pp.assertNever)(this.#r)}}async#c(){await this.#u(!0),this.app.vault.trigger("zotero:db-refresh")}async#l(t=!1){await this.#a(t)&&this.app.metadataCache.trigger("zotero:search-refresh")}async#f(){await this.#c(),await this.#l(!0),new Ni.Notice("ZoteroDB Refresh complete.")}#p(t){if(!this.#i)return t;let r=this.#i;return r.task==="full"?r:r.task===t.task?r.task==="searchIndex"?{...r,force:r.force||t.force}:r:{task:"full"}}};var Qw="INFO",Xw="log4js_loglevel",S5=()=>{let e=localStorage.getItem(Xw);return typeof e=="string"&&e in eu.levels?(console.debug(`Read from localstorage: loglevel ${e}`),e):Qw},Xs=_g("main",S5(),eu.default),Z=Xs,Re=(e,t,...r)=>{if(!t){Xs.error(e,...r);return}Xs.error(e,t instanceof Error?t.message:String(t),...r),console.error(t)},fo=class extends Ne{getDefaults(){return{level:Qw}}async applyLevel(){Xs.level=this.level,localStorage.setItem(Xw,this.level),await this.use(ot).api.setLoglevel(this.level)}async apply(t){switch(t){case"level":await this.applyLevel();return;default:(0,Yw.assertNever)(t)}}};var N1=require("fs"),gr=require("obsidian");A();var ge={},yo=Symbol(),r1=e=>!!e[yo],Xx=e=>!e[yo].c,ji=e=>{var t;let{b:r,c:n}=e[yo];n&&(n(),(t=W5.get(r))==null||t())},cu=(e,t)=>{let r=e[yo].o,n=t[yo].o;return r===n||e===n||r1(r)&&cu(r,t)},e1=(e,t)=>{let r={b:e,o:t,c:null},n=new Promise(o=>{r.c=()=>{r.c=null,o()},t.finally(r.c)});return n[yo]=r,n},W5=new WeakMap;var uu=e=>"init"in e,Ap="r",Cp="w",Bi="c",Tp="s",t1="h",U5="n",H5="l",V5="a",G5="m",K5=e=>{let t=new WeakMap,r=new WeakMap,n=new Map,o,i;if((ge.env&&ge.env.MODE)!=="production"&&(o=new Set,i=new Set),e)for(let[_,E]of e){let O={v:E,r:0,y:!0,d:new Map};(ge.env&&ge.env.MODE)!=="production"&&(Object.freeze(O),uu(_)||console.warn("Found initial value for derived atom which can cause unexpected behavior",_)),t.set(_,O)}let a=new WeakMap,s=(_,E,O)=>{let F=a.get(E);F||(F=new Map,a.set(E,F)),O.then(()=>{F.get(_)===O&&(F.delete(_),F.size||a.delete(E))}),F.set(_,O)},u=_=>{let E=new Set,O=a.get(_);return O&&(a.delete(_),O.forEach((F,P)=>{ji(F),E.add(P)})),E},l=new WeakMap,c=_=>{let E=l.get(_);return E||(E=new Map,l.set(_,E)),E},f=(_,E)=>{if(_){let O=c(_),F=O.get(E);return F||(F=f(_.p,E),F&&"p"in F&&Xx(F.p)&&(F=void 0),F&&O.set(E,F)),F}return t.get(E)},p=(_,E,O)=>{if((ge.env&&ge.env.MODE)!=="production"&&Object.freeze(O),_)c(_).set(E,O);else{let F=t.get(E);t.set(E,O),n.has(E)||n.set(E,F)}},d=(_,E=new Map,O)=>{if(!O)return E;let F=new Map,P=!1;return O.forEach(N=>{var K;let oe=((K=f(_,N))==null?void 0:K.r)||0;F.set(N,oe),E.get(N)!==oe&&(P=!0)}),E.size===F.size&&!P?E:F},h=(_,E,O,F,P)=>{let N=f(_,E);if(N){if(P&&(!("p"in N)||!cu(N.p,P)))return N;"p"in N&&ji(N.p)}let K={v:O,r:N?.r||0,y:!0,d:d(_,N?.d,F)},oe=!N?.y;return!N||!("v"in N)||!Object.is(N.v,O)?(oe=!0,++K.r,K.d.has(E)&&(K.d=new Map(K.d).set(E,K.r))):K.d!==N.d&&(K.d.size!==N.d.size||!Array.from(K.d.keys()).every(Zt=>N.d.has(Zt)))&&(oe=!0,Promise.resolve().then(()=>{D(_)})),N&&!oe?N:(p(_,E,K),K)},y=(_,E,O,F,P)=>{let N=f(_,E);if(N){if(P&&(!("p"in N)||!cu(N.p,P)))return N;"p"in N&&ji(N.p)}let K={e:O,r:(N?.r||0)+1,y:!0,d:d(_,N?.d,F)};return p(_,E,K),K},v=(_,E,O,F)=>{let P=f(_,E);if(P&&"p"in P){if(cu(P.p,O))return P.y?P:{...P,y:!0};ji(P.p)}s(_,E,O);let N={p:O,r:(P?.r||0)+1,y:!0,d:d(_,P?.d,F)};return p(_,E,N),N},w=(_,E,O,F)=>{if(O instanceof Promise){let P=e1(O,O.then(N=>{h(_,E,N,F,P)}).catch(N=>{if(N instanceof Promise)return r1(N)?N.then(()=>{T(_,E,!0)}):N;y(_,E,N,F,P)}));return v(_,E,P,F)}return h(_,E,O,F)},S=(_,E)=>{let O=f(_,E);if(O){let F={...O,y:!1};p(_,E,F)}else(ge.env&&ge.env.MODE)!=="production"&&console.warn("[Bug] could not invalidate non existing atom",E)},T=(_,E,O)=>{if(!O){let P=f(_,E);if(P){if(P.y&&"p"in P&&!Xx(P.p))return P;if(P.d.forEach((N,K)=>{if(K!==E)if(!r.has(K))T(_,K);else{let oe=f(_,K);oe&&!oe.y&&T(_,K)}}),Array.from(P.d).every(([N,K])=>{let oe=f(_,N);return oe&&!("p"in oe)&&oe.r===K}))return P.y?P:{...P,y:!0}}}let F=new Set;try{let P=E.read(N=>{F.add(N);let K=N===E?f(_,N):T(_,N);if(K){if("e"in K)throw K.e;if("p"in K)throw K.p;return K.v}if(uu(N))return N.init;throw new Error("no atom init")});return w(_,E,P,F)}catch(P){if(P instanceof Promise){let N=e1(P,P);return v(_,E,N,F)}return y(_,E,P,F)}},M=(_,E)=>T(E,_),B=(_,E)=>{let O=r.get(E);return O||(O=k(_,E)),O},Q=(_,E)=>!E.l.size&&(!E.t.size||E.t.size===1&&E.t.has(_)),X=(_,E)=>{let O=r.get(E);O&&Q(E,O)&&I(_,E)},G=(_,E)=>{let O=r.get(E);O?.t.forEach(F=>{F!==E&&(S(_,F),G(_,F))})},x=(_,E,O)=>{let F=!0,P=(oe,Zt)=>{let $t=T(_,oe);if("e"in $t)throw $t.e;if("p"in $t){if(Zt?.unstable_promise)return $t.p.then(()=>{let ls=f(_,oe);return ls&&"p"in ls&&ls.p===$t.p?new Promise(of=>setTimeout(of)).then(()=>P(oe,Zt)):P(oe,Zt)});throw(ge.env&&ge.env.MODE)!=="production"&&console.info("Reading pending atom state in write operation. We throw a promise for now.",oe),$t.p}if("v"in $t)return $t.v;throw(ge.env&&ge.env.MODE)!=="production"&&console.warn("[Bug] no value found while reading atom in write operation. This is probably a bug.",oe),new Error("no value found")},N=(oe,Zt)=>{let $t;if(oe===E){if(!uu(oe))throw new Error("atom not writable");u(oe).forEach(ug=>{ug!==_&&w(ug,oe,Zt)});let of=f(_,oe),BF=w(_,oe,Zt);of!==BF&&G(_,oe)}else $t=x(_,oe,Zt);return F||D(_),$t},K=E.write(P,N,O);return F=!1,K},C=(_,E,O)=>{let F=x(O,_,E);return D(O),F},b=_=>!!_.write,k=(_,E,O)=>{let F={t:new Set(O&&[O]),l:new Set};if(r.set(E,F),(ge.env&&ge.env.MODE)!=="production"&&i.add(E),T(void 0,E).d.forEach((N,K)=>{let oe=r.get(K);oe?oe.t.add(E):K!==E&&k(_,K,E)}),b(E)&&E.onMount){let N=oe=>C(E,oe,_),K=E.onMount(N);_=void 0,K&&(F.u=K)}return F},I=(_,E)=>{var O;let F=(O=r.get(E))==null?void 0:O.u;F&&F(),r.delete(E),(ge.env&&ge.env.MODE)!=="production"&&i.delete(E);let P=f(_,E);P?("p"in P&&ji(P.p),P.d.forEach((N,K)=>{if(K!==E){let oe=r.get(K);oe&&(oe.t.delete(E),Q(K,oe)&&I(_,K))}})):(ge.env&&ge.env.MODE)!=="production"&&console.warn("[Bug] could not find atom state to unmount",E)},R=(_,E,O,F)=>{let P=new Set(O.d.keys());F?.forEach((N,K)=>{if(P.has(K)){P.delete(K);return}let oe=r.get(K);oe&&(oe.t.delete(E),Q(K,oe)&&I(_,K))}),P.forEach(N=>{let K=r.get(N);K?K.t.add(E):r.has(E)&&k(_,N,E)})},D=_=>{if(_){c(_).forEach((O,F)=>{let P=t.get(F);if(O!==P){let N=r.get(F);N?.l.forEach(K=>K(_))}});return}for(;n.size;){let E=Array.from(n);n.clear(),E.forEach(([O,F])=>{let P=f(void 0,O);if(P&&P.d!==F?.d&&R(void 0,O,P,F?.d),F&&!F.y&&P?.y)return;let N=r.get(O);N?.l.forEach(K=>K())})}(ge.env&&ge.env.MODE)!=="production"&&o.forEach(E=>E())},L=_=>{c(_).forEach((O,F)=>{let P=t.get(F);(!P||O.r>P.r||O.y!==P.y||O.r===P.r&&O.d!==P.d)&&(t.set(F,O),O.d!==P?.d&&R(_,F,O,P?.d))})},H=(_,E)=>{E&&L(E),D(void 0)},te=(_,E,O)=>{let P=B(O,_).l;return P.add(E),()=>{P.delete(E),X(O,_)}},ue=(_,E)=>{for(let[O,F]of _)uu(O)&&(w(E,O,F),G(E,O));D(E)};return(ge.env&&ge.env.MODE)!=="production"?{[Ap]:M,[Cp]:C,[Bi]:H,[Tp]:te,[t1]:ue,[U5]:_=>(o.add(_),()=>{o.delete(_)}),[H5]:()=>i.values(),[V5]:_=>t.get(_),[G5]:_=>r.get(_)}:{[Ap]:M,[Cp]:C,[Bi]:H,[Tp]:te,[t1]:ue}};var n1=(e,t)=>({s:t?t(e).SECRET_INTERNAL_store:K5(e)}),Ip=new Map,Op=e=>(Ip.has(e)||Ip.set(e,Oe(n1())),Ip.get(e)),o1=({children:e,initialValues:t,scope:r,unstable_createStore:n,unstable_enableVersionedWrite:o})=>{let[i,a]=q({});J(()=>{let l=s.current;l.w&&(l.s[Bi](null,i),delete i.p,l.v=i)},[i]);let s=W();if(!s.current){let l=n1(t,n);if(o){let c=0;l.w=f=>{a(p=>{let d=c?p:{p};return f(d),d})},l.v=i,l.r=f=>{++c,f(),--c}}s.current=l}let u=Op(r);return Y(u.Provider,{value:s.current},e)},J5=0;function vt(e,t){let r=`atom${++J5}`,n={toString:()=>r};return typeof e=="function"?n.read=e:(n.init=e,n.read=o=>o(n),n.write=(o,i,a)=>i(n,typeof a=="function"?a(o(n)):a)),t&&(n.write=t),n}function Je(e,t){let r=Op(t),n=j(r),{s:o,v:i}=n,a=p=>{let d=o[Ap](e,p);if((ge.env&&ge.env.MODE)!=="production"&&!d.y)throw new Error("should not be invalidated");if("e"in d)throw d.e;if("p"in d)throw d.p;if("v"in d)return d.v;throw new Error("no atom value")},[[s,u,l],c]=ir((p,d)=>{let h=a(d);return Object.is(p[1],h)&&p[2]===e?p:[d,h,e]},i,p=>{let d=a(p);return[p,d,e]}),f=u;return l!==e&&(c(s),f=a(s)),J(()=>{let{v:p}=n;p&&o[Bi](e,p);let d=o[Tp](e,c,p);return c(p),d},[o,e,n]),J(()=>{o[Bi](e,s)}),vn(f),f}function Dp(e,t){let r=Op(t),{s:n,w:o}=j(r);return ee(a=>{if((ge.env&&ge.env.MODE)!=="production"&&!("write"in e))throw new Error("not writable atom");let s=u=>n[Cp](e,a,u);return o?o(s):s()},[n,o,e])}var F1=require("obsidian");A();var i1=()=>{let e=[];return{get:()=>e,set:(n,o)=>{e.push([n,o])}}};var sr=vt(null),Fp=vt(e=>{let{arch:t,platform:r,modules:n}=e(sr).platform;return`${r}-${t}-${n}.node.gz`}),zi=vt(e=>`https://github.com/aidenlx/better-sqlite3/releases/download/${e(sr).binaryVersion}/${e(Fp)}`),jZ=vt(e=>e(zi).replace("github.com","download.fastgit.org")),lu=vt(e=>uo(e(sr).manifest)),a1=vt(e=>e(sr).mode);var O1=ae(We(),1);A();var s1=function(e){return function(t,r){var n=W(!1);e(function(){return function(){n.current=!1}},[]),e(function(){if(!n.current)n.current=!0;else return t()},r)}};function qr(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i}A();var Wi=function(e){return typeof e=="function"};var u1=function(e){return typeof e>"u"};var Z5=!1,c1=Z5;function Y5(e){c1&&(Wi(e)||console.error("useMemoizedFn expected parameter is a function, got ".concat(typeof e)));var t=W(e);t.current=ie(function(){return e},[e]);var r=W();return r.current||(r.current=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return t.current.apply(this,n)}),r.current}var Se=Y5;A();var l1=s1(J);var Q5=!!(typeof window<"u"&&window.document&&window.document.createElement),f1=Q5;A();function p1(e){function t(r,n){var o;try{o=e()}catch(p){console.error(p)}var i=function(p){return n?.serializer?n?.serializer(p):JSON.stringify(p)},a=function(p){return n?.deserializer?n?.deserializer(p):JSON.parse(p)};function s(){try{var p=o?.getItem(r);if(p)return a(p)}catch(d){console.error(d)}return Wi(n?.defaultValue)?n?.defaultValue():n?.defaultValue}var u=qr(q(function(){return s()}),2),l=u[0],c=u[1];l1(function(){c(s())},[r]);var f=function(p){var d=Wi(p)?p(l):p;if(c(d),u1(d))o?.removeItem(r);else try{o?.setItem(r,i(d))}catch(h){console.error(h)}};return[l,Se(f)]}return t}var X5=p1(function(){return f1?localStorage:void 0}),Pp=X5;function d1(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=d1(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function Np(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=d1(e))&&(n&&(n+=" "),n+=t);return n}var vo=Np;var m1=require("obsidian");A();var at=e=>{let t=W(null);return[ee(n=>{t.current&&t.current.empty(),n&&(0,m1.setIcon)(n,e),t.current=n},[e])]};mo();mo();var eM=0;function m(e,t,r,n,o){var i,a,s={};for(a in t)a=="ref"?i=t[a]:s[a]=t[a];var u={type:e,props:s,key:r,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--eM,__source:o,__self:n};if(typeof e=="function"&&(i=e.defaultProps))for(a in i)s[a]===void 0&&(s[a]=i[a]);return V.vnode&&V.vnode(u),u}var Ui=({name:e,desc:t,button:r,onClick:n,icon:o,className:i,...a})=>m("div",{className:vo("setting-item",i),...a,children:[o&&m("div",{className:"setting-icon",children:o}),m("div",{className:"setting-item-info",children:[m("div",{className:"setting-item-name",children:e}),m("div",{className:"setting-item-description",children:t})]}),m("div",{className:"setting-item-control",children:r&&m("button",{className:"mod-cta",onClick:n,children:r})})]});A();var tM=()=>m("svg",{className:"icon-blank svg-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",height:"32",width:"32"}),rM=()=>m("svg",{className:"icon-spin svg-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",height:"32",width:"32",children:[m("path",{opacity:".25",d:"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"}),m("path",{d:"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z",children:m("animateTransform",{attributeName:"transform",type:"rotate",from:"0 16 16",to:"360 16 16",dur:"0.8s",repeatCount:"indefinite"})})]}),h1=({color:e="var(--icon-color, black)",delay:t=0,height:r=16,width:n=16,style:o,...i})=>{let[a,s]=q(t>0);return J(()=>{let u=-1;return a&&(u=window.setTimeout(()=>{s(!1)},t)),()=>{window.clearTimeout(u)}},[]),m("div",{style:{...o,fill:e,height:Number(r)||r,width:Number(n)||n},...i,children:a?m(tM,{}):m(rM,{})})};var y1=require("fs"),v1=require("fs/promises"),b1=require("stream"),qp=require("stream/promises"),w1=require("zlib"),uM=require("@electron/remote");var fu=class extends Error{},Rp=class extends fu{},Mp=class extends fu{},nM=(e,t=",")=>e.join(t),oM={accept:"*",multiple:!1,strict:!1},g1=e=>{let{accept:t,multiple:r,strict:n}={...oM,...e},o=sM({multiple:r,accept:Array.isArray(t)?nM(t):t});return new Promise(i=>{o.onchange=()=>{i(iM(o.files,r,n)),o.remove()},o.click()})},iM=(e,t,r)=>new Promise((n,o)=>{if(!e)return o(new Rp);let i=aM(e,t,r);if(!i)return o(new Mp);n(i)}),aM=(e,t,r)=>!t&&r?e.length===1?e[0]:null:e.length?e:null,sM=({accept:e,multiple:t})=>{let r=document.createElement("input");return r.type="file",r.multiple=t,r.accept=e,r};var x1=require("obsidian"),pu=async(e,t,r)=>{let n=b1.Readable.from(Buffer.from(e)),o=(0,y1.createWriteStream)(t);try{r?await(0,qp.pipeline)(n,o):await(0,qp.pipeline)(n,(0,w1.createGunzip)(),o)}catch(i){throw o.destroy(),await(0,v1.rm)(t,{force:!0}),i}},E1=async()=>{let e=await g1({multiple:!1,accept:[".gz",".node"],strict:!0});return e?{decompressed:!e.name.endsWith(".gz"),arrayBuffer:await e.arrayBuffer()}:null},S1=async e=>(await fetch(e,{method:"HEAD"})).status,k1=async e=>(await(0,x1.requestUrl)({url:e})).arrayBuffer;var _1=(i=>(i[i.Idle=0]="Idle",i[i.Downloading=1]="Downloading",i[i.Importing=2]="Importing",i[i.Success=3]="Success",i[i.Failed=4]="Failed",i))(_1||{}),bo=vt(0),cM=vt(e=>e(bo)===4),I1=vt(null),lM=vt(e=>{switch(e(bo)){case 0:return null;case 1:return"Downloading...";case 2:return"Importing...";case 3:return"Module successfully installed";case 4:return`Module install failed: ${e(I1)}`;default:break}}),fM=vt(null,(e,t,[r,n])=>{t(bo,4);let o="Failed to install module when "+_1[r];Re(o,n),t(I1,o+": "+(n instanceof Error?n.message:`${n}`))}),pM=()=>{let e=Dp(bo),t=Dp(fM),r=Je(zi),n=Je(lu);return Se(async()=>{if(!n){t([0,new Error("Cannot find binary version")]);return}e(1);let o;try{if(await S1(r)===404)throw new Error(`Requested module not available (${r}), please open an issue on GitHub`);o=await k1(r)}catch(i){t([1,i]);return}e(2);try{await pu(o,n,!1)}catch(i){t([2,i]);return}e(3)})},A1=()=>{let e=Je(bo),t=Je(lM),r=Je(sr),n=pM();return m("div",{className:"zt-auto-install",children:[m(Ui,{name:"Auto Install",desc:"Recommended",button:e===0?"Install":void 0,onClick:n}),e!==0&&m(Ui,{className:vo("zt-auto-install-status",{"mod-warning":e===4,"mod-success":e===3}),icon:m(mM,{}),name:t,button:e===3?"Reload Plugin":void 0,onClick:()=>r.reloadPlugin()})]})},dM=()=>{let e=Je(cM),[t]=at(e?"slash":"check");return m("div",{className:"zt-install-done-icon",style:{display:"contents"},ref:t})},mM=()=>{switch(Je(bo)){case 0:return null;case 1:case 2:return m(h1,{className:"zt-install-spin-icon",style:{display:"contents"}});case 3:case 4:return m(dM,{})}};var C1=require("obsidian");A();var hM=async e=>{try{let t=await E1();return t?(await pu(t.arrayBuffer,e,t.decompressed),!0):(Z.info("No file selected, skip import module"),!1)}catch(t){return new C1.Notice(`Failed to import module from ${e}: ${t}`),Re("import module "+e,t),!1}},gM=()=>{let[e,t]=q(!1),r=Je(lu),n=async()=>{if(!r)return;await hM(r)&&t(!0)},o=Je(zi),i=Je(Fp),a=Je(sr);return m("ol",{children:[m("li",{children:["Download ",m("code",{children:".node.gz"})," file from"," ",m("a",{href:o,children:"GitHub"}),"."]}),m("li",{children:["Select downloaded ",m("code",{children:i})," or uncompressed"," ",m("code",{children:"better-sqlite3.node"}),"to install:",m(yM,{onClick:n,done:e})]}),m("li",{children:["Reload ZotLit:",m(vM,{onClick:()=>a.reloadPlugin()})]})]})},T1=()=>{let[e,t]=q(!1);return m("div",{className:"zt-manual-install",children:[m(Ui,{name:"Manual Install",desc:"Use this option if you have trouble downloading the module with auto install.",button:`${e?"Hide":"Show"} Guide`,onClick:()=>t(r=>!r)}),m("div",{hidden:!e,children:m(gM,{})})]})},yM=({done:e,onClick:t})=>m("button",{className:vo({"zt-import-done":e}),onClick:t,children:e?"Library file imported":"Select"}),vM=({disabled:e,onClick:t})=>m("button",{disabled:e,onClick:t,children:"Reload Plugin"});var bM=()=>{let e=Je(a1);switch(e){case"install":return m(z,{children:["ZotLit requires latest version of ",m("code",{children:"better-sqlite3"})," to be installed. Use one of the method below to install or update it."]});case"reset":return m(z,{children:[m("code",{children:"better-sqlite3"})," seems to be broken and failed to load. you can try to use one of the method below to reinstall it."]});default:(0,O1.default)(e)}},D1=()=>m(z,{children:[m("style",{children:`
.modal.mod-zt-install-guide .modal-content {
  display: flex;
  flex-direction: column;
}
.zt-install-methods {
  display: flex;
  flex-direction: column;
  gap: var(--size-4-4);
  flex-grow: 1;
  padding: var(--size-4-4);
  padding-bottom: var(--size-4-2);
}
.zt-install-methods .setting-item {
  padding: 0;
}
.zt-auto-install {
  display: flex;
  flex-direction: column;
  gap: var(--size-4-4);
}
.modal.mod-zt-install-guide button:disabled {
  background-color: var(--background-modifier-cover);
}
.modal.mod-zt-install-guide button:disabled:hover {
  box-shadow: var(--input-shadow);
}
.modal.mod-zt-install-guide button.zt-import-done {
  background-color: var(--background-modifier-success);
}
.zt-auto-install-status {
  border-top: none;
}
.zt-auto-install-status.mod-success .setting-icon ,
.zt-auto-install-status.mod-success .setting-item-name  {
  color: var(--text-success);
}
.zt-auto-install-status.mod-warning .setting-icon ,
.zt-auto-install-status.mod-warning .setting-item-name  {
  color: var(--text-error);
}
.zt-auto-install-status .setting-icon ,
.zt-auto-install-status .setting-item-name  {
  color: var(--text-muted);
}
      `}),m("div",{className:"zt-install-desc",children:m(bM,{})}),m("div",{className:"zt-install-methods",children:[m(A1,{}),m(T1,{})]})]});var Hi=class extends F1.Modal{constructor(r,n,o,i,a){super(a);this.manifest=r;this.platform=n;this.binaryVersion=o;this.mode=i;this.app=a;this.titleEl.setText("Setup ZotLit"),this.modalEl.addClass("mod-zt-install-guide")}onOpen(){let r=i1();r.set(sr,this),$.render(m(o1,{initialValues:r.get(),children:m(D1,{})}),this.contentEl)}onClose(){$.unmountComponentAtNode(this.contentEl)}async reloadPlugin(){await this.app.plugins.disablePlugin(this.manifest.id),this.close(),await this.app.plugins.enablePlugin(this.manifest.id)}};var P1=(e,t,r,n)=>{let o=cw();if(!o)throw new Error("Not in desktop app");let i=sw(o);if(i<0)new gr.Notice(`The electron (electron: ${o.electron}, module version: ${o.modules}) in current version of obsidian is not supported by zotlit, please reinstall using latest obsidian installer from official website`);else if(i>0)new gr.Notice(`The electron (electron: ${o.electron}, module version: ${o.modules}) in current version of obsidian is newer than the one supported by installed zotlit, please update zotlit to the latest version`);else if(!uw(o))new gr.Notice(`Your device (${o.arch}-${o.platform}) is not supported by zotlit`);else{let a=sp(t);if(!a)throw new Error(`Cannot find binary version for ${t.name} v${t.version}`);try{(0,N1.statSync)(e).isFile()?r==="reset"&&new Hi(t,o,a,r,n).open():new gr.Notice("Path to database library occupied, please check the location manually: "+e,2e3)}catch(s){let u=s;u.code==="ENOENT"?new Hi(t,o,a,r,n).open():(new gr.Notice(`Unexpected error while checking path of better-sqlite3, please check the location manually: ${e}, error: ${u}`,2e3),Re("checking better-sqlite3 path:"+e,u))}}},wM=(e,t)=>{if(!gr.Platform.isDesktopApp)throw new Error("Not in desktop app");let r=uo(e);if(!r)throw new Error(`Cannot find binary version for ${e.name} v${e.version}`);try{return require(r),!0}catch(n){return n?.code==="MODULE_NOT_FOUND"?P1(r,e,"install",t):(new gr.Notice(`Failed to load database library: ${n}`),Re("Failed to load database library",n),P1(r,e,"reset",t)),!1}},R1=wM;var ND=require("path/posix");var Cr=require("obsidian");var we;(function(e){e[e.highlight=1]="highlight",e[e.note=2]="note",e[e.image=3]="image",e[e.ink=4]="ink"})(we||(we={}));var bn;(function(e){e[e.manual=0]="manual",e[e.auto=1]="auto"})(bn||(bn={}));var M1;(function(e){e[e.importedFile=0]="importedFile",e[e.importedUrl=1]="importedUrl",e[e.linkedFile=2]="linkedFile",e[e.linkedUrl=3]="linkedUrl",e[e.embeddedImage=4]="embeddedImage"})(M1||(M1={}));var Vi;(function(e){e[e.fullName=0]="fullName",e[e.nameOnly=1]="nameOnly"})(Vi||(Vi={}));var du=["attachment","note","annotation"];var mu=du.map(e=>`'${e}'`).join(",");var st=(e="itemID")=>`--sql
  ${e} IS NOT NULL
  ${e==="itemID"?`AND ${e} NOT IN (SELECT itemID FROM deletedItems)`:""}
`,Dt=(e,t="$itemId")=>typeof e=="boolean"?"":`AND ${e} = ${t}`;var hu=(e,t)=>{for(let r=0;r<e.length;r++)if(e[r]!==t[r])return e[r]-t[r];return 0},Gi=e=>!!e.path,q1=e=>`obzt-active-atch-${e.itemID}-${e.libraryID}`,$p=(e,t)=>{let r=e.getItem(q1(t));if(!r)return null;let n=parseInt(r,10);return n>0?n:null},wo=(e,t,r)=>e.setItem(q1(t),r.toString());var gu=`--sql
  items.itemID,
  items.key,
  items.clientDateModified,
  items.dateAdded,
  items.dateModified,
  annots.type,
  annots.authorName,
  annots.text,
  annots.comment,
  annots.color,
  annots.pageLabel,
  annots.sortIndex,
  annots.position,
  annots.isExternal
`,yu=`--sql
  itemAnnotations annots
  JOIN items USING (itemID)
`;var FQ=`--sql
SELECT
  ${gu},
  annots.parentItemID,
  parentItems.key as parentItem
FROM
  ${yu}
  JOIN items as parentItems ON annots.parentItemID = parentItems.itemID
WHERE
  items.key = $annotKey
  AND items.libraryID = $libId
  AND ${st("items.itemID")}
`;var $Q=`--sql
SELECT
  ${gu}
FROM
  ${yu}
WHERE
  parentItemID = $attachmentId
  AND items.libraryID = $libId
  AND ${st()}
`;var BQ=`--sql
SELECT
  atchs.itemID,
  atchs.path,
  items.key,
  COUNT(atchs.itemID) as annotCount
FROM
  itemAttachments atchs
  JOIN items USING (itemID)
  LEFT JOIN itemAnnotations annots ON atchs.itemID = annots.parentItemID
WHERE
  atchs.parentItemID = $itemId
  AND libraryID = $libId
  AND ${st("atchs.itemID")}
GROUP BY atchs.itemID
`;var vu=e=>`--sql
SELECT
  itemID,
  creators.firstName,
  creators.lastName,
  creators.fieldMode,
  creatorTypes.creatorType,
  orderIndex
FROM
  items
  LEFT JOIN itemCreators USING (itemID)
  JOIN creators USING (creatorID)
  JOIN creatorTypes USING (creatorTypeID)
WHERE
  libraryID = $libId
  ${Dt(e||"itemID")}
  AND ${st()}
ORDER BY
  itemID,
  orderIndex
`;var YQ=vu(!0);var tX=vu(!1);var bu=e=>`--sql
SELECT
  items.itemID,
  fieldsCombined.fieldName,
  itemDataValues.value
FROM
  items
  JOIN itemData USING (itemID)
  JOIN itemDataValues USING (valueID)
  JOIN fieldsCombined USING (fieldID)
  JOIN itemTypesCombined USING (itemTypeID)
WHERE
  libraryID = $libId
  ${Dt(e||"items.itemID")}
  AND itemTypesCombined.typeName NOT IN (${mu})
  AND ${st()}
`;var sX=bu(!0);var fX=bu(!1);var Ki=e=>`--sql
SELECT
  items.libraryID,
  items.itemID,
  items.key,
  items.clientDateModified,
  items.dateAdded,
  items.dateModified,
  itemTypesCombined.typeName as itemType,
  json_group_array(collectionID) filter (where collectionID is not null) as collectionIDs
FROM 
  items
  JOIN itemTypesCombined USING (itemTypeID)
  LEFT JOIN collectionItems USING (itemID)
WHERE 
  libraryID = $libId
  ${e==="full"?Dt(!1):e==="id"?Dt("items.itemID"):Dt("items.key","$key")}
  AND ${st()}
  AND itemType NOT IN (${mu})
GROUP BY itemID
`;var yX=Ki("full");var xX=Ki("id"),EX=Ki("key");var Ji=e=>`--sql
WITH
  RECURSIVE CollectionPath AS (
    -- Base case: collections without a parent
    SELECT
      collectionID,
      parentCollectionID,
      collectionName AS path
    FROM
      collections
    WHERE
      libraryID = $libId
      ${e==="full"?Dt(!1):e==="id"?Dt("collectionID","$collectionID"):Dt("key","$key")}
      AND ${st("collectionID")}
    UNION ALL
    -- Recursive case: join with parent collections
    SELECT
      prev.collectionID,
      c.parentCollectionID,
      c.collectionName
    FROM
      collections c
      JOIN CollectionPath prev ON c.collectionID = prev.parentCollectionID
  )
SELECT
  p.collectionID,
  json_group_array(p.path) path,
  c.key,
  c.collectionName,
  c.libraryID
FROM
  CollectionPath p
  JOIN collections c USING (collectionID)
GROUP BY
  collectionID
ORDER BY
  collectionID;
`;var CX=Ji("full");var FX=Ji("id"),PX=Ji("key");var L1=require("path"),$r=({groupID:e,key:t},r)=>{let n=[r,"cache"];return e?n.push("groups",e.toString()):n.push("library"),(0,L1.join)(...n,t+".png")};var Zi=e=>wu(e)?[e.firstName,e.lastName].join(" "):xu(e)?e.lastName:null,wu=e=>{let t=e;return t.fieldMode===Vi.fullName&&t.firstName!==null&&t.lastName!==null},xu=e=>{let t=e;return t.fieldMode===Vi.nameOnly&&t.lastName!==null},Lp=new Set(Yt()("creators","itemID","itemType","key","libraryID","collections")),jp=e=>!du.includes(e.itemType)&&typeof e.key=="string",Yi=e=>e.itemType==="annotation"&&!!e.parentItem;var j1=e=>typeof e.groupID=="number"?`groups/${e.groupID}`:"library",Lr=e=>{let t;if(jp(e))t=new URL(`zotero://select/${j1(e)}/items/${e.key}`);else if(Yi(e)){t=new URL(`zotero://open-pdf/${j1(e)}/items/${e.parentItem}`);let r;try{r=Jn(e.position.pageIndex,!0)}catch(n){console.warn(n),r=null}typeof r=="number"&&t.searchParams.append("page",r.toString()),e.key&&t.searchParams.append("annotation",e.key)}else return"";return t.toString()};var ku=require("obsidian");var Su=require("obsidian");async function B1(e){let t=await Qi(e);if(!t)return null;let{value:r,evt:n}=t;return{value:r.item,evt:n}}function Qi(e){let t,r=new Promise((o,i)=>{t=o}),n=et(e,{selectSuggestion:o=>function(a,s,...u){return t(a!==null?{value:a,evt:s}:null),o.call(this,a,s,...u)},onClose:o=>function(...a){return t(null),o.call(this,...a)}});return r.finally(n),e.open(),r}var Eu=class extends Su.SuggestModal{initial=!0;async#e(){let t=this.inputEl.value,r=await this.getSuggestions(t);if(r.length!==0){let n=this.limit;n&&n>0&&(r=r.slice(0,n)),this.chooser.setSuggestions(r)}else t?this.onNoSuggestion():this.chooser.setSuggestions(null)}#t=(0,Su.debounce)(this.#e.bind(this),250,!0);updateSuggestions(){this.initial?(this.#e(),this.initial=!1):this.#t()}};var Bp=class extends ku.FuzzySuggestModal{constructor(r,n){super(n);this.attachments=r}getItems(){return this.attachments}renderSuggestion(r,n){n.addClass("mod-complex");let o=n.createDiv("suggestion-content").createDiv("suggestion-title").createSpan(),i=n.createDiv("suggestion-aux");super.renderSuggestion(r,o),i.createEl("kbd","suggestion-hotkey").setText((r.item.annotCount??0).toString())}getItemText(r){return r.path?.replace(/^storage:/,"")??r.key}onChooseItem(){}};async function kM(e,t){return e.length===1?e[0]:e.length?(await B1(new Bp(e,t)))?.value??null:(new ku.Notice("No attachment found for this item"),null)}function xo(e,t){wo(window.localStorage,t,e.itemID)}async function vr(e,t){let r=e.filter(n=>Gi(n)&&n.path?.endsWith(".pdf"));return await kM(r,t)}var vm=require("obsidian");var bt=require("obsidian");var Eo=require("obsidian"),z1=()=>`Press ${Eo.Platform.isMacOS?"\u2318 Cmd":"Ctrl"} + ${Eo.Platform.isMacOS?"\u2325 Option":"Shift"} + I, then go to the "Console" tab to see the log.`;var Ve=e=>e instanceof Eo.TFile&&e.extension==="md",W1=e=>typeof e=="string"?e:e.path;var NM=ae(We(),1),RM=ae(Up(),1),Hp=ae(Up(),1);var c2=Yt()("open","export","update");var u2=(e,t)=>{let r=new RegExp(`^${t}\\[(\\d+)\\]$`);return Object.entries(e).filter(([n])=>r.test(n)).sort(([n],[o])=>Number(n.match(r)[1])-Number(o.match(r)[1])).map(([,n])=>JSON.parse(n))},_u=e=>{if(e.type==="item")return{version:e.version,type:e.type,items:u2(e,"items")};if(e.type==="annotation")return{version:e.version,type:e.type,annots:u2(e,"annots"),parent:JSON.parse(e.parent)};throw new TypeError("Unrecognized query type: "+e.type)};var Vp=/^<!--merge:(\d+)-->/;function Gp(e){let t=mn(e,o=>o.comment?.match(Vp)?.[1]??-1),r=t[-1]??[],n=new Map(r.map(o=>[o.itemID,[o]]));delete t[-1];for(let[o,i]of Object.entries(t)){let a=n.get(+o);i.forEach(s=>{s.comment&&=s.comment.replace(Vp,"")??null}),a?a.push(...i.sort((s,u)=>hu(s.sortIndex,u.sortIndex))):i.forEach(s=>{n.set(s.itemID,[s])})}for(let[o,...i]of n.values())if(!(i.length<=0)){for(let a of i)a.comment&&(o.comment=(o.comment??"")+`
`+a.comment),a.text&&(o.text?o.text.endsWith("-")&&!o.text.endsWith("--")?o.text.substring(0,o.text.length-1)+a.text.trimStart():o.text.match(/[a-zA-Z\d]\s*$/)&&a.text.match(/^\s*[a-zA-Z\d]/)?o.text=o.text.trimEnd()+" "+a.text.trimStart():o.text=o.text.trimEnd()+a.text.trimStart():o.text=a.text);o.comment=o.comment?.replace(/\n+/,`
`).replace(/^\s+|\s+$/g,"")??null}return[...n.values()]}function Kp(e){return e.map(t=>t[0])}function Jp(e,t){let r=e.map(([n,...o])=>{if(o.length===0)return[n.itemID,t[n.itemID]];let i=new Map(t[n.itemID].map(a=>[a.tagID,a]));return o.forEach(a=>{t[a.itemID].forEach(s=>{i.set(s.tagID,s)})}),[n.itemID,Array.from(i.values())]});return Object.fromEntries(r)}function l2(e,t){let r=Gp(e);return{annotations:Kp(r),tags:Jp(r,t)}}var Ou=class{constructor(t){this.cache=void 0,this.cache=t}define(t,r){this.cache[t]=r}get(t){return this.cache[t]}remove(t){delete this.cache[t]}reset(){this.cache={}}load(t){this.cache={...this.cache,...t}}},Be=class extends Error{constructor(t){super(t),this.name="Eta Error"}};function Xi(e,t,r){let n=t.slice(0,r).split(/\n/),o=n.length,i=n[o-1].length+1;throw e+=" at line "+o+" col "+i+`:

  `+t.split(/\n/)[o-1]+`
  `+Array(i).join(" ")+"^",new Be(e)}function MM(e,t,r,n){let o=t.split(`
`),i=Math.max(r-3,0),a=Math.min(o.length,r+3),s=n,u=o.slice(i,a).map(function(f,p){let d=p+i+1;return(d==r?" >> ":"    ")+d+"| "+f}).join(`
`),l=s?s+":"+r+`
`:"line "+r+`
`,c=new Be(l+u+`

`+e.message);throw c.name=e.name,c}var qM=async function(){}.constructor;function $M(e,t){let r=this.config,n=t&&t.async?qM:Function;try{let o=new n(r.varName,"options",this.compileToString.call(this,e,t));return o.mtime=t?.mtime,o}catch(o){throw o instanceof SyntaxError?new Be(`Bad template syntax

`+o.message+`
`+Array(o.message.length+1).join("=")+`
`+this.compileToString.call(this,e,t)+`
`):o}}function LM(e,t){let r=this.config,n=t&&t.async,o=this.compileBody,i=this.parse.call(this,e),a=`${r.functionHeader}
let include = (template, data) => this.render(template, data, options);
let includeAsync = (template, data) => this.renderAsync(template, data, options);

let __eta = {res: "", e: this.config.escapeFunction, f: this.config.filterFunction${r.debug?', line: 1, templateStr: "'+e.replace(/\\|'/g,"\\$&").replace(/\r\n|\n|\r/g,"\\n")+'"':""}};

function layout(path, data) {
  __eta.layout = path;
  __eta.layoutData = data;
}${r.debug?"try {":""}${r.useWith?"with("+r.varName+"||{}){":""}

${o.call(this,i)}
if (__eta.layout) {
  __eta.res = ${n?"await includeAsync":"include"} (__eta.layout, {...${r.varName}, body: __eta.res, ...__eta.layoutData});
}
${r.useWith?"}":""}${r.debug?"} catch (e) { this.RuntimeErr(e, __eta.templateStr, __eta.line, options.filepath) }":""}
return __eta.res;
`;if(r.plugins)for(let s=0;s<r.plugins.length;s++){let u=r.plugins[s];u.processFnString&&(a=u.processFnString(a,r))}return a}function jM(e){let t=this.config,r=0,n=e.length,o="";for(r;r<n;r++){let i=e[r];if(typeof i=="string")o+="__eta.res+='"+i+`'
`;else{let a=i.t,s=i.val||"";t.debug&&(o+="__eta.line="+i.lineNo+`
`),a==="r"?(t.autoFilter&&(s="__eta.f("+s+")"),o+="__eta.res+="+s+`
`):a==="i"?(t.autoFilter&&(s="__eta.f("+s+")"),t.autoEscape&&(s="__eta.e("+s+")"),o+="__eta.res+="+s+`
`):a==="e"&&(o+=s+`
`)}}return o}function BM(e,t,r,n){let o,i;return Array.isArray(t.autoTrim)?(o=t.autoTrim[1],i=t.autoTrim[0]):o=i=t.autoTrim,(r||r===!1)&&(o=r),(n||n===!1)&&(i=n),!i&&!o?e:o==="slurp"&&i==="slurp"?e.trim():(o==="_"||o==="slurp"?e=e.trimStart():(o==="-"||o==="nl")&&(e=e.replace(/^(?:\r\n|\n|\r)/,"")),i==="_"||i==="slurp"?e=e.trimEnd():(i==="-"||i==="nl")&&(e=e.replace(/(?:\r\n|\n|\r)$/,"")),e)}var zM={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function WM(e){return zM[e]}function UM(e){let t=String(e);return/[&<>"']/.test(t)?t.replace(/[&<>"']/g,WM):t}var f2={autoEscape:!0,autoFilter:!1,autoTrim:[!1,"nl"],cache:!1,cacheFilepaths:!0,debug:!1,escapeFunction:UM,filterFunction:e=>String(e),functionHeader:"",parse:{exec:"",interpolate:"=",raw:"~"},plugins:[],rmWhitespace:!1,tags:["<%","%>"],useWith:!1,varName:"it"},Iu=/`(?:\\[\s\S]|\${(?:[^{}]|{(?:[^{}]|{[^}]*})*})*}|(?!\${)[^\\`])*`/g,Au=/'(?:\\[\s\w"'\\`]|[^\n\r'\\])*?'/g,Cu=/"(?:\\[\s\w"'\\`]|[^\n\r"\\])*?"/g;function Tu(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function HM(e,t){return e.slice(0,t).split(`
`).length}function VM(e){let t=this.config,r=[],n=!1,o=0,i=t.parse;if(t.plugins)for(let f=0;f<t.plugins.length;f++){let p=t.plugins[f];p.processTemplate&&(e=p.processTemplate(e,t))}t.rmWhitespace&&(e=e.replace(/[\r\n]+/g,`
`).replace(/^\s+|\s+$/gm,"")),Iu.lastIndex=0,Au.lastIndex=0,Cu.lastIndex=0;function a(f,p){f&&(f=BM(f,t,n,p),f&&(f=f.replace(/\\|'/g,"\\$&").replace(/\r\n|\n|\r/g,"\\n"),r.push(f)))}let s=[i.exec,i.interpolate,i.raw].reduce(function(f,p){return f&&p?f+"|"+Tu(p):p?Tu(p):f},""),u=new RegExp(Tu(t.tags[0])+"(-|_)?\\s*("+s+")?\\s*","g"),l=new RegExp("'|\"|`|\\/\\*|(\\s*(-|_)?"+Tu(t.tags[1])+")","g"),c;for(;c=u.exec(e);){let f=e.slice(o,c.index);o=c[0].length+c.index;let p=c[1],d=c[2]||"";a(f,p),l.lastIndex=o;let h,y=!1;for(;h=l.exec(e);)if(h[1]){let v=e.slice(o,h.index);u.lastIndex=o=l.lastIndex,n=h[2],y={t:d===i.exec?"e":d===i.raw?"r":d===i.interpolate?"i":"",val:v};break}else{let v=h[0];if(v==="/*"){let w=e.indexOf("*/",l.lastIndex);w===-1&&Xi("unclosed comment",e,h.index),l.lastIndex=w}else v==="'"?(Au.lastIndex=h.index,Au.exec(e)?l.lastIndex=Au.lastIndex:Xi("unclosed string",e,h.index)):v==='"'?(Cu.lastIndex=h.index,Cu.exec(e)?l.lastIndex=Cu.lastIndex:Xi("unclosed string",e,h.index)):v==="`"&&(Iu.lastIndex=h.index,Iu.exec(e)?l.lastIndex=Iu.lastIndex:Xi("unclosed string",e,h.index))}y?(t.debug&&(y.lineNo=HM(e,c.index)),r.push(y)):Xi("unclosed tag",e,c.index)}if(a(e.slice(o,e.length),!1),t.plugins)for(let f=0;f<t.plugins.length;f++){let p=t.plugins[f];p.processAST&&(r=p.processAST(r,t))}return r}function p2(e,t){let r=t&&t.async?this.templatesAsync:this.templatesSync;if(this.resolvePath&&this.readFile&&!e.startsWith("@")){let n=t.filepath,o=r.get(n);if(this.config.cache&&o)return o;{let i=this.readFile(n),a=this.compile(i,t);return this.config.cache&&r.define(n,a),a}}else{let n=r.get(e);if(n)return n;throw new Be("Failed to get template '"+e+"'")}}function d2(e,t,r){let n,o={...r,async:!1};return typeof e=="string"?(this.resolvePath&&this.readFile&&!e.startsWith("@")&&(o.filepath=this.resolvePath(e,o)),n=p2.call(this,e,o)):n=e,n.call(this,t,o)}function m2(e,t,r){let n,o={...r,async:!0};typeof e=="string"?(this.resolvePath&&this.readFile&&!e.startsWith("@")&&(o.filepath=this.resolvePath(e,o)),n=p2.call(this,e,o)):n=e;let i=n.call(this,t,o);return Promise.resolve(i)}function GM(e,t){let r=this.compile(e,{async:!1});return d2.call(this,r,t)}function KM(e,t){let r=this.compile(e,{async:!0});return m2.call(this,r,t)}var Du=class{constructor(t){this.config=void 0,this.RuntimeErr=MM,this.compile=$M,this.compileToString=LM,this.compileBody=jM,this.parse=VM,this.render=d2,this.renderAsync=m2,this.renderString=GM,this.renderStringAsync=KM,this.filepathCache={},this.templatesSync=new Ou({}),this.templatesAsync=new Ou({}),this.resolvePath=null,this.readFile=null,t?this.config={...f2,...t}:this.config={...f2}}configure(t){this.config={...this.config,...t}}withConfig(t){return{...this,config:{...this.config,...t}}}loadTemplate(t,r,n){if(typeof r=="string")(n&&n.async?this.templatesAsync:this.templatesSync).define(t,this.compile(r,n));else{let o=this.templatesSync;(r.constructor.name==="AsyncFunction"||n&&n.async)&&(o=this.templatesAsync),o.define(t,r)}}};var wr=require("node:path/posix");var Qp=require("obsidian");var Zp=require("path/posix");var h2=`[!note] Page <%= it.pageLabel %>

<%= it.imgEmbed %><%= it.text %>
<% if (it.comment) { %>
---
<%= it.comment %>
<% } %>`;var g2=`<% for (const annotation of it) { %>
<%~ include("annotation", annotation) %>
<% } %>`;var y2=`title: "<%= it.title %>"
citekey: "<%= it.citekey %>"`;var v2=`# <%= it.title %>

[Zotero](<%= it.backlink %>) <%= it.fileLink %>
<%~ include("annots", it.annotations) %>`;var Ge={Ejectable:{note:v2,field:y2,annots:g2,annotation:h2},Embeded:{filename:"<%= it.citekey ?? it.DOI ?? it.title ?? it.key %>.md",citation:"[@<%= it.citekey %>]",altCitation:"@<%= it.citekey %>"}},ur={Ejectable:Object.keys(Ge.Ejectable),Embeded:Object.keys(Ge.Embeded),All:Object.keys(Ge.Ejectable).concat(Object.keys(Ge.Embeded))};function Yp(e){return Object.hasOwn(Ge.Embeded,e)?`zt-${e}.eta.md`:Object.hasOwn(Ge.Ejectable,e)?e==="annotation"?"zt-annot.eta.md":`zt-${e}.eta.md`:null}function wn(e,t){return(0,Zp.join)(t,Yp(e))}function Ze(e,t){let r=ur.Embeded.find(o=>(0,Zp.join)(t,`zt-${o}.eta.md`)===e);if(r)return{type:"embeded",name:r};let n=ur.Ejectable.find(o=>wn(o,t)===e);return n?{type:"ejectable",name:n}:null}function XM(e){if(!e)return"";let t=Yp(e);return t||(e.endsWith(".eta.md")?e:e.endsWith(".eta")?e+".md":e+".eta.md")}function b2(e){let t=Ze(e,this.settings.folder);if(t?.type==="embeded")return this.settings.templates[t.name];let r=this.getFile(e);if(typeof r=="string"){if(!t)throw new Be(`File '${e}' not found`);return Ge.Ejectable[t.name]}if(!this.tplFileCache.has(r))throw new Be(`File '${e}' not loaded`);return this.tplFileCache.get(r)}function w2(e){let t=Ze(e,this.settings.folder);if(t?.type==="embeded")return-1;let r=this.getFile(e);if(typeof r=="string"){if(!t)throw new Be(`File '${e}' not found`);return}if(!this.tplFileCache.has(r))throw new Be(`File '${e}' not loaded`);return r.stat.mtime}function x2(e,t){let r="",n=this.config.views;if(!n)throw new Be("Views directory is not defined");let o=t&&t.filepath,i=JSON.stringify({filename:o,path:e,views:this.config.views});if(e=XM(e),o){if(this.config.cacheFilepaths&&this.filepathCache[i])return this.filepathCache[i];(0,wr.isAbsolute)(e)?r=(0,wr.join)(n,(0,Qp.normalizePath)(e)):r=(0,wr.join)(o,"..",(0,Qp.normalizePath)(e))}else r=(0,wr.join)(n,e);if(eq(n,r))return o&&this.config.cacheFilepaths&&(this.filepathCache[i]=r),r;throw new Be(`Template '${e}' is not in the views directory`)}function eq(e,t){let r=(0,wr.relative)(e,t);return r&&!r.startsWith("..")&&!(0,wr.isAbsolute)(r)}function E2(e,t){let r=t&&t.async?this.templatesAsync:this.templatesSync;if(e.startsWith("@")){let n=r.get(e);if(n)return n;throw new Be("Failed to get template '"+e+"'")}else{let n=t.filepath,o=r.get(n),i=this.readModTime(n),a=o?.mtime;if(this.config.cache&&o&&(i===void 0||i>0&&a!==void 0&&i<=a))return o;let s=this.readFile(n),u=this.compile(s,t);return this.config.cache&&r.define(n,u),u}}function Xp(e,t,r){let n,o={...r,async:!1};return typeof e=="string"?(e.startsWith("@")||(o.filepath=this.resolvePath(e,o)),n=E2.call(this,e,o)):n=e,n.call(this,t,o)}function ed(e,t,r){let n,o={...r,async:!0};typeof e=="string"?(e.startsWith("@")||(o.filepath=this.resolvePath(e,o)),n=E2.call(this,e,o)):n=e;let i=n.call(this,t,o);return Promise.resolve(i)}function S2(e,t){let r=this.compile(e,{async:!1});return Xp.call(this,r,t)}function k2(e,t){let r=this.compile(e,{async:!0});return ed.call(this,r,t)}var tq={processTemplate:e=>e.replace(/((?:[^\\]|^)(?:\\{2})*)\\n/g,`$1
`)},Fu=class extends Du{use=$e.this;plugin=this.use(le);tplFileCache=new WeakMap;get settings(){return this.plugin.settings.template}constructor(){super();let t=this;this.config={...this.config,cache:!0,autoEscape:!1,autoFilter:!0,filterFunction:r=>r==null?"":r instanceof Date?r.toISOString():r,plugins:[tq],get autoTrim(){return t.settings.autoTrim},get views(){return t.settings.folder}}}resolvePath=x2;readFile=b2;readModTime=w2;render=Xp;renderAsync=ed;renderString=S2;renderStringAsync=k2;getFile(t){let r=this.plugin.app.vault.getAbstractFileByPath(t);if(!r)return t;if(!Ve(r))throw new Be(`'${t}' is not a markdown file`);return r}};var cI=ae(X_(),1),lI=ae(iI(),1);var mc=require("obsidian");var jj="\\ufeff?",Bj=typeof process<"u"?process.platform:"",zj="^("+jj+"(= yaml =|---)$([\\s\\S]*?)^(?:\\2|\\.\\.\\.)\\s*$"+(Bj==="win32"?"\\r?":"")+"(?:\\n)?)",Wj=new RegExp(zj,"m");function uc(e){e=e||"";let t=e.split(/(\r?\n)/);return t[0]&&/= yaml =|---/.test(t[0])?Hj(e):{yaml:null,body:e,bodyBegin:1}}function Uj(e,t){let r=1,n=t.indexOf(`
`),o=e.index+e[0].length;for(;n!==-1;){if(n>=o)return r;r++,n=t.indexOf(`
`,n+1)}return r}function Hj(e){let t=Wj.exec(e);if(!t)return{yaml:null,body:e,bodyBegin:1};let r=t[t.length-1].replace(/^\s+|\s+$/g,""),n=e.replace(t[0],""),o=Uj(t,e);return{yaml:r,body:n,bodyBegin:o}}var lc=require("path"),am=require("url");function nm(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function om(e,t){if(typeof e!="string"||typeof t!="string")throw new TypeError("Expected a string");let r=new RegExp(`(?:${nm(t)}){2,}`,"g");return e.replace(r,t)}function cc(){return/[<>:"/\\|?*\u0000-\u001F]/g}function aI(){return/^(con|prn|aux|nul|com\d|lpt\d)$/i}function im(e,t){if(typeof e!="string"||typeof t!="string")throw new TypeError("Expected a string");return e.startsWith(t)&&(e=e.slice(t.length)),e.endsWith(t)&&(e=e.slice(0,-t.length)),e}var Vj=100,sI=/[\u0000-\u001F\u0080-\u009F]/g,Gj=/^\.+(\\|\/)|^\.+$/,Kj=/\.+$/;function va(e,t={}){if(typeof e!="string")throw new TypeError("Expected a string");let r=t.replacement===void 0?"!":t.replacement;if(cc().test(r)&&sI.test(r))throw new Error("Replacement string cannot contain reserved filename characters");if(e=e.normalize("NFD"),e=e.replace(Gj,r),e=e.replace(cc(),r),e=e.replace(sI,r),e=e.replace(Kj,""),r.length>0){let o=e[0]===".";e=om(e,r),e=e.length>1?im(e,r):e,!o&&e[0]==="."&&(e=r+e),e[e.length-1]==="."&&(e+=r)}e=aI().test(e)?e+r:e;let n=typeof t.maxLength=="number"?t.maxLength:Vj;if(e.length>n){let o=e.lastIndexOf(".");if(o===-1)e=e.slice(0,n);else{let i=e.slice(0,o),a=e.slice(o);e=i.slice(0,Math.max(1,n-a.length))+a}}return e}var sm=e=>encodeURI(e)===e?e:`<${e}>`,fc=e=>e.name.endsWith(".eta.md"),um=(e,t)=>t.path?t.path.startsWith("storage:")?(0,lc.join)(e,"storage",t.key,t.path.replace(/^storage:/,"")):t.path:"",pc=(e,t,r,n=null,o=null)=>{if(!n?.path)return"";let i=o?`#page=${o}`:void 0,a=t.vault.adapter.getBasePath(),s=um(e,n),u=(0,lc.relative)(a,s);if(u.startsWith(".."))return`[attachment](${sm((0,am.pathToFileURL)(s).href+(i??""))})`;{let l=t.metadataCache.getFirstLinkpathDest(u,"");return l?t.fileManager.generateMarkdownLink(l,r??"",i).replace(/^!/,""):(Z.warn("fileLink: file not found",u,s),"")}},uI=e=>va(e,{replacement:"_"}),dc=e=>Yi(e)&&e.type===we.image,Jj=(e,t,r)=>t?`[${r??""}](${sm(e)})`:`[[${e}${r?"|"+r:""}]]`,cm=(e,t)=>{if(dc(e)){let r=t.imgCacheImporter.import(e);if(r)return Jj(r,t.app.vault.getConfig("useMarkdownLinks"));{let n=t.imgCacheImporter.getCachePath(e);return`[Annotation ${e.key}](${sm((0,am.pathToFileURL)(n).href)})`}}else return""};function fI(e){et(e,{compile:t=>function(n,o){let i=this,a=t.call(this,n,o);if(!o?.filepath)return a;let s=o.filepath,u=Ze(s,i.settings.folder);if(!u)return a;let l=a;switch(u.name){case"filename":l=(c,f)=>uI(a.call(this,c,f));break;case"annotation":l=(c,f)=>{let p=a.call(this,c,f),d=!0,{yaml:h,body:y}=uc(p);if(h)try{(0,mc.parseYaml)(h).callout===!1&&(d=!1)}catch(w){new mc.Notice(`Error parsing frontmatter, ${w}`)}if(!d)return y;let v=y.trim().split(`
`);return v.push(`^${c.blockID}`),v.map(w=>`> ${w}`).join(`
`)};break;default:break}return Object.groupBy&&Map.groupBy?l:(c,f)=>{let p=Zj(),d=l.call(this,c,f);return p(),d}}})}function Zj(){let e=[];return Object.groupBy||(Object.groupBy=lI.default,e.push(()=>delete Object.groupBy)),Map.groupBy||(Map.groupBy=cI.default,e.push(()=>delete Map.groupBy)),()=>e.forEach(t=>t())}var An="zotero-key",Co="zt-attachments";var pI=require("url");var dI=require("obsidian");var Wr=e=>e.plugin.settings.database.zoteroDataDir,ba=Symbol("proxied"),hc=e=>!!e[ba];var lm=new Set(Yt()("attachment","tags")),fm=(e,t,r)=>new Proxy({get page(){return Jn(e.position.pageIndex,!0)??NaN},get backlink(){return Lr(e)},get blockID(){let n=Et(e),o=Jn(e.position.pageIndex,!0);return typeof o=="number"&&(n+=`p${o}`),n},get commentMd(){return e.comment?(0,dI.htmlToMarkdown)(e.comment):""},get imgPath(){return dc(this)?$r(this,Wr(r)):""},get imgUrl(){if(dc(this)){let n=$r(this,Wr(r));return(0,pI.pathToFileURL)(n).href}else return""},get imgLink(){return cm(this,r.plugin)},get imgEmbed(){let n=cm(this,r.plugin);return n?`!${n}`:""},get fileLink(){return pc(Wr(r),r.plugin.app,r.sourcePath,t.attachment,Jn(e.position.pageIndex,!0))},get textBlock(){return e.text?`\`\`\`zotero-annot
> ${e.text} [zotero](${Lr(e)})
\`\`\``:""},get colorName(){let n=e.color?.toUpperCase();return Yj[n]||this.color},docItem:"not-loaded"},{get(n,o,i){if(o==="tags"){if(!t.tags[e.itemID])throw console.error(t,e.itemID),new Error("No tags loaded for item "+e.itemID);return t.tags[e.itemID]}if(o==="docItem"){if(n.docItem==="not-loaded")throw new Error("Doc Item not loaded for item "+e.itemID);return n.docItem}return lm.has(o)?Reflect.get(t,o,i):Reflect.get(e,o,i)??Reflect.get(n,o,i)},ownKeys(n){return[...Reflect.ownKeys(e),...lm,...Reflect.ownKeys(n)]},getOwnPropertyDescriptor(n,o){return Object.prototype.hasOwnProperty.call(e,o)?Reflect.getOwnPropertyDescriptor(e,o):lm.has(o)?Reflect.getOwnPropertyDescriptor(t,o):Reflect.getOwnPropertyDescriptor(n,o)}}),Yj={"#FF6666":"red","#FF8C19":"orange","#F19837":"orange","#FFD400":"yellow","#999999":"gray","#AAAAAA":"gray","#5FB236":"green","#009980":"cyan","#2EA8E5":"blue","#576DD9":"navy","#A28AE5":"purple","#A6507B":"brown","#E56EEE":"magenta"};function pm(e,t){return!e||hc(e)?e:new Proxy({get filePath(){return um(Wr(t),e)}},{get(r,n,o){return n===ba?!0:Reflect.get(e,n,o)??Reflect.get(r,n,o)},ownKeys(r){return[...Reflect.ownKeys(e),...Reflect.ownKeys(r)]},getOwnPropertyDescriptor(r,n){return Object.prototype.hasOwnProperty.call(e,n)?Reflect.getOwnPropertyDescriptor(e,n):Reflect.getOwnPropertyDescriptor(r,n)}})}var dm=class extends Array{toString(){return this.join(" > ")}},mm=({path:e,...t})=>{let r={path:dm.from(e),toString(){return t.name}};return new Proxy(r,{get(n,o,i){return Reflect.get(n,o,i)??Reflect.get(t,o,i)},ownKeys(n){return[...Reflect.ownKeys(t),...Reflect.ownKeys(n).filter(o=>!(o==="toJSON"||o==="toString"))]},getOwnPropertyDescriptor(n,o){return Object.prototype.hasOwnProperty.call(t,o)?Reflect.getOwnPropertyDescriptor(t,o):Reflect.getOwnPropertyDescriptor(n,o)}})};var hm=e=>{let t={get fullname(){return Zi(e)??""},toString(){return this.fullname},toJSON(){return this.fullname}};return new Proxy(t,{get(r,n,o){return Reflect.get(r,n,o)??Reflect.get(e,n,o)},ownKeys(r){return[...Reflect.ownKeys(e),...Reflect.ownKeys(r).filter(n=>!(n==="toJSON"||n==="toString"))]},getOwnPropertyDescriptor(r,n){return Object.prototype.hasOwnProperty.call(e,n)?Reflect.getOwnPropertyDescriptor(e,n):Reflect.getOwnPropertyDescriptor(r,n)}})};var gm=new Set(Yt()("attachment","allAttachments","tags")),ym=({creators:e,collections:t,...r},n,o)=>{let i=e.map(a=>hm(a));return new Proxy({get backlink(){return Lr(r)},get fileLink(){return pc(Wr(o),o.plugin.app,o.sourcePath,n.attachment)},get authorsShort(){let a=this.authors;if(!a.length)return"";let s=a[0],u=s.lastName??s.fullname;return a.length===1?u:`${u} et al.`},annotations:"not-loaded",creators:i,collections:t.map(a=>mm(a)),get authors(){return i.filter(a=>a.creatorType==="author")}},{get(a,s,u){if(s==="tags"){if(!n.tags[r.itemID])throw new Error("No tags loaded for item "+r.itemID);return n.tags[r.itemID]}return gm.has(s)?n[s]:s==="annotations"?a.annotations:Reflect.get(r,s,u)??Reflect.get(a,s,u)},ownKeys(a){return[...Reflect.ownKeys(r),...gm,...Reflect.ownKeys(a)]},getOwnPropertyDescriptor(a,s){return Object.prototype.hasOwnProperty.call(r,s)?Reflect.getOwnPropertyDescriptor(r,s):gm.has(s)?Reflect.getOwnPropertyDescriptor(n,s):Reflect.getOwnPropertyDescriptor(a,s)}})};function mI(e){return!e||hc(e)?e:new Proxy({toString(){return e.name},toJSON(){return e.name}},{get(t,r,n){return r===ba?!0:Reflect.get(t,r,n)??Reflect.get(e,r,n)},ownKeys(t){return[...Reflect.ownKeys(e),...Reflect.ownKeys(t).filter(r=>!(r==="toJSON"||r==="toString"))]},getOwnPropertyDescriptor(t,r){return Object.prototype.hasOwnProperty.call(e,r)?Reflect.getOwnPropertyDescriptor(e,r):Reflect.getOwnPropertyDescriptor(t,r)}})}function ct(e,t,r){let n={...e,attachement:pm(e.attachment,t),allAttachments:e.allAttachments.map(s=>pm(s,t)),tags:lo(e.tags,s=>s.map(u=>mI(u)))},o=ym(e.docItem,n,t),i=e.annotations.map(s=>{let u=fm(s,n,t);return u.docItem=o,u}),a=r?i[e.annotations.findIndex(s=>s===r)]:void 0;return o.annotations=i,{annotation:a,annotations:i,docItem:o}}var hI=ae(We(),1);var Cn=class extends Ne{plugin=this.use(le);getDefaults(){return{folder:"ZtTemplates",templates:Ge.Embeded,autoPairEta:!1,updateAnnotBlock:!1,updateOverwrite:!1,autoTrim:[!1,!1]}}async setTemplate(t,r){return this.templates[t]===r?!1:(this.templates[t]=r,this.plugin.app.vault.trigger("zotero:template-updated",t),!0)}async apply(t){let r=this.use(le);switch(t){case"folder":case"templates":case"updateAnnotBlock":case"updateOverwrite":return;case"autoPairEta":return r.templateEditor.setEtaBracketPairing(this.autoPairEta);case"autoTrim":for(let n of ur.All)this.plugin.app.vault.trigger("zotero:template-updated",n);return;default:(0,hI.assertNever)(t)}}async applyAll(){await this.apply("autoPairEta")}toJSON(){return{template:{folder:this.folder,templates:this.templates},autoPairEta:this.autoPairEta,updateAnnotBlock:this.updateAnnotBlock,updateOverwrite:this.updateOverwrite,autoTrim:this.autoTrim}}fromJSON(t){super.fromJSON({...t.template??{},...jt(t,["autoPairEta","updateAnnotBlock","updateOverwrite","autoTrim"])})}};var wa=class extends fe{eta=this.use(Fu);plugin=this.use(le);get vault(){return this.plugin.app.vault}get folder(){return this.use(Cn).folder}async loadTemplates(){let t=this.vault.getAbstractFileByPath(this.folder);if(!t)return;if(!(t instanceof bt.TFolder)){Z.warn("Template folder is occupied by a file");return}let r=[];bt.Vault.recurseChildren(t,async n=>{!Ve(n)||!n.path.endsWith(".eta.md")||r.push(n)}),await Promise.all(r.map(async n=>this.eta.tplFileCache.set(n,await this.vault.cachedRead(n))))}async onload(){fI(this.eta),await this.loadTemplates(),this.registerEvent(this.vault.on("create",this.onFileChange,this)),this.registerEvent(this.vault.on("modify",this.onFileChange,this)),this.registerEvent(this.vault.on("delete",async t=>{if(!Ve(t))return;let r=this.fromPath(t.path);r&&(this.eta.tplFileCache.delete(t),this.vault.trigger("zotero:template-updated",r))})),this.registerEvent(this.vault.on("rename",async(t,r)=>{await this.onFileChange(t);let n=this.fromPath(r);n&&this.vault.trigger("zotero:template-updated",n)}))}async onFileChange(t){if(!Ve(t))return;let r=this.fromPath(t.path);this.eta.tplFileCache.set(t,await this.vault.cachedRead(t)),this.vault.trigger("zotero:template-updated",r)}fromPath(t){let r=Ze(t,this.folder);return r?.type==="ejectable"?r.name:null}onFileUpdate(t){Ve(t)&&this.fromPath(t.path)}onFileRename(t,r){Ve(t)&&this.fromPath(t.path),this.fromPath(r)}mergeAnnotTags(t){if(t.annotations.length===0)return t;let r=l2(t.annotations,t.tags);return t.annotations=r.annotations,t.tags={...t.tags,...r.tags},t}render(t,r){try{return this.eta.render(t,r)}catch(n){throw console.error("Error while rendering",t,n),n}}renderAnnot(t,r,n){n.merge!==!1&&(r=this.mergeAnnotTags(r));let o=ct(r,n,t);return this.render("annotation",o.annotation)}renderNote(t,r,n){r.merge!==!1&&(t=this.mergeAnnotTags(t));let o=ct(t,r),i=this.#e(o.docItem,n),a=this.render("note",o.docItem);return["",i,a].join(`---
`)}renderAnnots(t,r){r.merge!==!1&&(t=this.mergeAnnotTags(t));let n=ct(t,r);return this.render("annots",n.annotations)}renderCitation(t,r,n=!1){let o=ct(t,r);return this.render(n?"altCitation":"citation",o.docItem)}renderFilename(t,r){let n=ct(t,r);return this.render("filename",n.docItem)}toFrontmatterRecord(t){let r=this.render("field",t),n=!1,{yaml:o,body:i}=uc(r);if(o)try{(0,bt.parseYaml)(o).raw===!0&&(n=!0)}catch(f){new bt.Notice(`Error parsing frontmatter, ${f}`)}let a=Et(t,!0),s=t.attachment?[t.attachment.itemID.toString()]:void 0,{[An]:u,[Co]:l,...c}=(0,bt.parseYaml)(i);return{mode:n?"raw":"parsed",yaml:[`${An}: ${a}`,`${Co}: ${s}`,i.trim(),""].join(`
`),data:{[An]:a,[Co]:s,...Fi(c,f=>!(f===""||f===null||f===void 0))}}}renderFrontmatter(t,r,n){let o=ct(t,r);return this.#e(o.docItem,n)}#e(t,r){try{let n=this.toFrontmatterRecord(t);return n.mode==="raw"?n.yaml:(0,bt.stringifyYaml)(r!==void 0?gn(n.data,r):n.data)}catch(n){throw Re("Failed to renderYaml",n,t),new bt.Notice("Failed to renderYaml"),n}}async setFrontmatterTo(t,r){try{let n=this.toFrontmatterRecord(r).data;await this.plugin.app.fileManager.processFrontMatter(t,o=>Object.assign(o,n))}catch(n){Re("Failed to set frontmatter to file "+t.path,n,r),new bt.Notice("Failed to set frontmatter to file "+t.path)}}};var gc=require("@codemirror/state"),gI=require("obsidian");var yI=e=>gc.Prec.highest(gc.EditorState.languageData.of(t=>{let r=[],n=e.getConfig("autoPairBrackets"),o=e.getConfig("autoPairMarkdown");n&&r.push("(","[","{","'",'"'),o&&r.push("*","_","`","```");let i=t.field(gI.editorInfoField);return i?.file&&fc(i?.file)&&r.push("<","%"),[{closeBrackets:{brackets:r}}]}));var bI=require("obsidian");var vI=[{prefix:"=",name:"interpolate tag",description:"An interpolation outputs data into the template"},{prefix:" ",name:"evaluation tag",description:"An evaluate tag inserts its contents into the template function."}],yc=class extends bI.EditorSuggest{onTrigger(t,r,n){if(!n||!fc(n))return null;let o=r.getLine(t.line),a=o.substring(0,t.ch).match(/<%([ =]?)$/);if(!a)return null;let[s,u]=a,l=o.substring(t.ch).match(/^([\w ]*)%>/),c;if(!l)c={...t};else{let[,f]=l;if(u===" "&&f.length===1)return null;c={...t,ch:t.ch+f.length}}return{end:c,start:{ch:a.index+s.length-u.length,line:t.line},query:a[1]}}getSuggestions(t){return t.query?vI.filter(r=>r.prefix===t.query):vI}renderSuggestion({prefix:t,name:r,description:n},o){t===" "?o.createSpan({text:"No Prefix"}):o.createEl("code",{text:t}),o.createDiv({text:r}),o.createDiv({text:n})}selectSuggestion({prefix:t},r){if(!this.context)return;let{editor:n,end:o,start:i}=this.context,a=t===" "?"  ":"= it. ";n.transaction({changes:[{from:i,to:o,text:a}],selection:{from:{...i,ch:i.ch+a.length-1}}})}};var xa=class extends fe{#e=null;plugin=this.use(le);#t(){this.plugin.registerEditorSuggest(new yc(this.plugin.app))}setEtaBracketPairing(t){let r=this.#e!==null;this.#e===null?(this.#e=[],this.plugin.registerEditorExtension(this.#e)):this.#e.length=0,t&&this.#e.push(yI(this.plugin.app.vault)),r&&this.plugin.app.workspace.updateOptions()}onload(){this.#t()}};var bm=e=>{let t=e?.frontmatter?.[An];return t&&typeof t=="string"&&Eg.test(t)?t:null},Tn=(e,t)=>{if(!e)return null;let r=typeof e=="string"?t.getCache(e):e instanceof vm.TFile?t.getFileCache(e):null;return bm(r)},On=(e,t)=>{if(!e)return null;let n=(typeof e=="string"?t.getCache(e):e instanceof vm.TFile?t.getFileCache(e):null)?.frontmatter?.[Co];if(n&&Array.isArray(n)&&n.length>0){let o=[];for(let i of n)if(typeof i=="string"){let a=Number(i);if(!(a>0&&Number.isInteger(a)))return null;o.push(a)}else if(typeof i=="number"){if(!(i>0&&Number.isInteger(i)))return null;o.push(i)}return o}return null},Ea=({id:e})=>!!e&&kg.test(e),Sa=e=>e.split("n").map(t=>{let[,r,,n]=t.split("p")[0].match(Sg);return Et({key:r,groupID:n?+n:void 0},!0)});function ka(e,t){let r=W1(e);return!!Tn(r,t.metadataCache)}function vc(e){return e.workspace.activeLeaf?.containerEl.win??window}var FD=require("url");A();var Ur=Oe({});A();var De=Oe({});A();var wI=function(e){return typeof e=="function"};var Qj=!1,xI=Qj;function Xj(e){xI&&(wI(e)||console.error("useMemoizedFn expected parameter is a function, got ".concat(typeof e)));var t=W(e);t.current=ie(function(){return e},[e]);var r=W();return r.current||(r.current=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return t.current.apply(this,n)}),r.current}var Vt=Xj;A();A();function eB(e,t){e===void 0&&(e=!1);var r=qr(q(e),2),n=r[0],o=r[1],i=ie(function(){var a=t===void 0?!e:t,s=function(){return o(function(f){return f===e?a:e})},u=function(f){return o(f)},l=function(){return o(e)},c=function(){return o(a)};return{toggle:s,set:u,setLeft:l,setRight:c}},[]);return[n,i]}var EI=eB;function bc(e){e===void 0&&(e=!1);var t=qr(EI(!!e),2),r=t[0],n=t[1],o=n.toggle,i=n.set,a=ie(function(){var s=function(){return i(!0)},u=function(){return i(!1)};return{toggle:o,set:function(l){return i(!!l)},setTrue:s,setFalse:u}},[]);return[r,a]}A();function tB(e){var t=function(){return new Set(e)},r=qr(q(t),2),n=r[0],o=r[1],i=function(u){n.has(u)||o(function(l){var c=new Set(l);return c.add(u),c})},a=function(u){n.has(u)&&o(function(l){var c=new Set(l);return c.delete(u),c})},s=function(){return o(t())};return[n,{add:Vt(i),remove:Vt(a),reset:Vt(s)}]}var wm=tB;A();var kI={},SI=e=>{let t,r=new Set,n=(u,l)=>{let c=typeof u=="function"?u(t):u;if(!Object.is(c,t)){let f=t;t=l??typeof c!="object"?c:Object.assign({},t,c),r.forEach(p=>p(t,f))}},o=()=>t,s={setState:n,getState:o,subscribe:u=>(r.add(u),()=>r.delete(u)),destroy:()=>{(kI.env&&kI.env.MODE)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}};return t=e(n,o,s),s},_a=e=>e?SI(e):SI;A();var PI=ae(FI(),1);var{useSyncExternalStoreWithSelector:bB}=PI.default;function lt(e,t=e.getState,r){let n=bB(e.subscribe,e.getState,e.getServerState||e.getState,t,r);return vn(n),n}function Oo(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(let[n,o]of e)if(!Object.is(o,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}let r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(let n=0;n<r.length;n++)if(!Object.prototype.hasOwnProperty.call(t,r[n])||!Object.is(e[r[n]],t[r[n]]))return!1;return!0}A();function NI(){for(var e=0,t,r,n="";e<arguments.length;)(t=arguments[e++])&&(r=RI(t))&&(n&&(n+=" "),n+=r);return n}function RI(e){if(typeof e=="string")return e;for(var t,r="",n=0;n<e.length;n++)e[n]&&(t=RI(e[n]))&&(r&&(r+=" "),r+=t);return r}var Sm="-";function $I(e){var t=xB(e);function r(o){var i=o.split(Sm);return i[0]===""&&i.length!==1&&i.shift(),LI(i,t)||wB(o)}function n(o){return e.conflictingClassGroups[o]||[]}return{getClassGroupId:r,getConflictingClassGroupIds:n}}function LI(e,t){if(e.length===0)return t.classGroupId;var r=e[0],n=t.nextPart.get(r),o=n?LI(e.slice(1),n):void 0;if(o)return o;if(t.validators.length!==0){var i=e.join(Sm);return t.validators.find(function(a){var s=a.validator;return s(i)})?.classGroupId}}var MI=/^\[(.+)\]$/;function wB(e){if(MI.test(e)){var t=MI.exec(e)[1],r=t?.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}}function xB(e){var t=e.theme,r=e.prefix,n={nextPart:new Map,validators:[]},o=SB(Object.entries(e.classGroups),r);return o.forEach(function(i){var a=i[0],s=i[1];Em(s,n,a,t)}),n}function Em(e,t,r,n){e.forEach(function(o){if(typeof o=="string"){var i=o===""?t:qI(t,o);i.classGroupId=r;return}if(typeof o=="function"){if(EB(o)){Em(o(n),t,r,n);return}t.validators.push({validator:o,classGroupId:r});return}Object.entries(o).forEach(function(a){var s=a[0],u=a[1];Em(u,qI(t,s),r,n)})})}function qI(e,t){var r=e;return t.split(Sm).forEach(function(n){r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r}function EB(e){return e.isThemeGetter}function SB(e,t){return t?e.map(function(r){var n=r[0],o=r[1],i=o.map(function(a){return typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(function(s){var u=s[0],l=s[1];return[t+u,l]})):a});return[n,i]}):e}function jI(e){if(e<1)return{get:function(){},set:function(){}};var t=0,r=new Map,n=new Map;function o(i,a){r.set(i,a),t++,t>e&&(t=0,n=r,r=new Map)}return{get:function(a){var s=r.get(a);if(s!==void 0)return s;if((s=n.get(a))!==void 0)return o(a,s),s},set:function(a,s){r.has(a)?r.set(a,s):o(a,s)}}}var km="!";function BI(e){var t=e.separator||":";return function(n){for(var o=0,i=[],a=0,s=0;s<n.length;s++){var u=n[s];o===0&&u===t[0]&&(t.length===1||n.slice(s,s+t.length)===t)&&(i.push(n.slice(a,s)),a=s+t.length),u==="["?o++:u==="]"&&o--}var l=i.length===0?n:n.substring(a),c=l.startsWith(km),f=c?l.substring(1):l;return{modifiers:i,hasImportantModifier:c,baseClassName:f}}}function zI(e){if(e.length<=1)return e;var t=[],r=[];return e.forEach(function(n){var o=n[0]==="[";o?(t.push.apply(t,r.sort().concat([n])),r=[]):r.push(n)}),t.push.apply(t,r.sort()),t}function WI(e){return{cache:jI(e.cacheSize),splitModifiers:BI(e),...$I(e)}}var kB=/\s+/;function UI(e,t){var r=t.splitModifiers,n=t.getClassGroupId,o=t.getConflictingClassGroupIds,i=new Set;return e.trim().split(kB).map(function(a){var s=r(a),u=s.modifiers,l=s.hasImportantModifier,c=s.baseClassName,f=n(c);if(!f)return{isTailwindClass:!1,originalClassName:a};var p=zI(u).join(":"),d=l?p+km:p;return{isTailwindClass:!0,modifierId:d,classGroupId:f,originalClassName:a}}).reverse().filter(function(a){if(!a.isTailwindClass)return!0;var s=a.modifierId,u=a.classGroupId,l=s+u;return i.has(l)?!1:(i.add(l),o(u).forEach(function(c){return i.add(s+c)}),!0)}).reverse().map(function(a){return a.originalClassName}).join(" ")}function HI(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,o,i,a=s;function s(l){var c=t[0],f=t.slice(1),p=f.reduce(function(d,h){return h(d)},c());return n=WI(p),o=n.cache.get,i=n.cache.set,a=u,u(l)}function u(l){var c=o(l);if(c)return c;var f=UI(l,n);return i(l,f),f}return function(){return a(NI.apply(null,arguments))}}function ve(e){var t=function(n){return n[e]||[]};return t.isThemeGetter=!0,t}var GI=/^\[(?:([a-z-]+):)?(.+)\]$/i,_B=/^\d+\/\d+$/,IB=new Set(["px","full","screen"]),AB=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,CB=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh)/,TB=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Nt(e){return Do(e)||IB.has(e)||_B.test(e)||Hr(e)}function Hr(e){return Dn(e,"length",OB)}function KI(e){return Dn(e,"size",QI)}function JI(e){return Dn(e,"position",QI)}function ZI(e){return Dn(e,"url",DB)}function xc(e){return Dn(e,"number",Do)}function Do(e){return!Number.isNaN(Number(e))}function Fo(e){return VI(e)||Dn(e,"number",VI)}function Ie(e){return GI.test(e)}function Po(){return!0}function kr(e){return AB.test(e)}function YI(e){return Dn(e,"",FB)}function Dn(e,t,r){var n=GI.exec(e);return n?n[1]?n[1]===t:r(n[2]):!1}function OB(e){return CB.test(e)}function QI(){return!1}function DB(e){return e.startsWith("url(")}function VI(e){return Number.isInteger(Number(e))}function FB(e){return TB.test(e)}function XI(){var e=ve("colors"),t=ve("spacing"),r=ve("blur"),n=ve("brightness"),o=ve("borderColor"),i=ve("borderRadius"),a=ve("borderSpacing"),s=ve("borderWidth"),u=ve("contrast"),l=ve("grayscale"),c=ve("hueRotate"),f=ve("invert"),p=ve("gap"),d=ve("gradientColorStops"),h=ve("inset"),y=ve("margin"),v=ve("opacity"),w=ve("padding"),S=ve("saturate"),T=ve("scale"),M=ve("sepia"),B=ve("skew"),Q=ve("space"),X=ve("translate"),G=function(){return["auto","contain","none"]},x=function(){return["auto","hidden","clip","visible","scroll"]},C=function(){return["auto",t]},b=function(){return["",Nt]},k=function(){return["auto",Do,Ie]},I=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},R=function(){return["solid","dashed","dotted","double","none"]},D=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},L=function(){return["start","end","center","between","around","evenly"]},H=function(){return["","0",Ie]},te=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},ue=function(){return[Do,xc]},_=function(){return[Do,Ie]};return{cacheSize:500,theme:{colors:[Po],spacing:[Nt],blur:["none","",kr,Hr],brightness:ue(),borderColor:[e],borderRadius:["none","","full",kr,Hr],borderSpacing:[t],borderWidth:b(),contrast:ue(),grayscale:H(),hueRotate:_(),invert:H(),gap:[t],gradientColorStops:[e],inset:C(),margin:C(),opacity:ue(),padding:[t],saturate:ue(),scale:ue(),sepia:H(),skew:_(),space:[t],translate:[t]},classGroups:{aspect:[{aspect:["auto","square","video",Ie]}],container:["container"],columns:[{columns:[kr]}],"break-after":[{"break-after":te()}],"break-before":[{"break-before":te()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(I(),[Ie])}],overflow:[{overflow:x()}],"overflow-x":[{"overflow-x":x()}],"overflow-y":[{"overflow-y":x()}],overscroll:[{overscroll:G()}],"overscroll-x":[{"overscroll-x":G()}],"overscroll-y":[{"overscroll-y":G()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[h]}],"inset-x":[{"inset-x":[h]}],"inset-y":[{"inset-y":[h]}],top:[{top:[h]}],right:[{right:[h]}],bottom:[{bottom:[h]}],left:[{left:[h]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Fo]}],basis:[{basis:[t]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ie]}],grow:[{grow:H()}],shrink:[{shrink:H()}],order:[{order:["first","last","none",Fo]}],"grid-cols":[{"grid-cols":[Po]}],"col-start-end":[{col:["auto",{span:[Fo]},Ie]}],"col-start":[{"col-start":k()}],"col-end":[{"col-end":k()}],"grid-rows":[{"grid-rows":[Po]}],"row-start-end":[{row:["auto",{span:[Fo]},Ie]}],"row-start":[{"row-start":k()}],"row-end":[{"row-end":k()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ie]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ie]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:L()}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:[].concat(L(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(L(),["baseline","stretch"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[Q]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[Q]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",t]}],"min-w":[{"min-w":["min","max","fit",Nt]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[kr]},kr,Hr]}],h:[{h:[t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",Nt]}],"max-h":[{"max-h":[t,"min","max","fit"]}],"font-size":[{text:["base",kr,Hr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",xc]}],"font-family":[{font:[Po]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Hr]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Nt]}],"list-style-type":[{list:["none","disc","decimal",Ie]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(R(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Nt]}],"underline-offset":[{"underline-offset":["auto",Nt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:[t]}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Hr]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap"]}],break:[{break:["normal","words","all","keep"]}],content:[{content:["none",Ie]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(I(),[JI])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",KI]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},ZI]}],"bg-color":[{bg:[e]}],"gradient-from":[{from:[d]}],"gradient-via":[{via:[d]}],"gradient-to":[{to:[d]}],rounded:[{rounded:[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[s]}],"border-w-x":[{"border-x":[s]}],"border-w-y":[{"border-y":[s]}],"border-w-t":[{"border-t":[s]}],"border-w-r":[{"border-r":[s]}],"border-w-b":[{"border-b":[s]}],"border-w-l":[{"border-l":[s]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[].concat(R(),["hidden"])}],"divide-x":[{"divide-x":[s]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[s]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:R()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:[""].concat(R())}],"outline-offset":[{"outline-offset":[Nt]}],"outline-w":[{outline:[Nt]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:b()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Nt]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",kr,YI]}],"shadow-color":[{shadow:[Po]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":D()}],"bg-blend":[{"bg-blend":D()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",kr,Ie]}],grayscale:[{grayscale:[l]}],"hue-rotate":[{"hue-rotate":[c]}],invert:[{invert:[f]}],saturate:[{saturate:[S]}],sepia:[{sepia:[M]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[l]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[c]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[M]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ie]}],duration:[{duration:_()}],ease:[{ease:["linear","in","out","in-out",Ie]}],delay:[{delay:_()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ie]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[T]}],"scale-x":[{"scale-x":[T]}],"scale-y":[{"scale-y":[T]}],rotate:[{rotate:[Fo,Ie]}],"translate-x":[{"translate-x":[X]}],"translate-y":[{"translate-y":[X]}],"skew-x":[{"skew-x":[B]}],"skew-y":[{"skew-y":[B]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ie]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ie]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":[t]}],"scroll-mx":[{"scroll-mx":[t]}],"scroll-my":[{"scroll-my":[t]}],"scroll-mt":[{"scroll-mt":[t]}],"scroll-mr":[{"scroll-mr":[t]}],"scroll-mb":[{"scroll-mb":[t]}],"scroll-ml":[{"scroll-ml":[t]}],"scroll-p":[{"scroll-p":[t]}],"scroll-px":[{"scroll-px":[t]}],"scroll-py":[{"scroll-py":[t]}],"scroll-pt":[{"scroll-pt":[t]}],"scroll-pr":[{"scroll-pr":[t]}],"scroll-pb":[{"scroll-pb":[t]}],"scroll-pl":[{"scroll-pl":[t]}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ie]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Nt,xc]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-t","rounded-r","rounded-b","rounded-l","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]}}}var _m=HI(XI);function ne(...e){return _m(Np(e))}A();A();function Ec(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var Sc=(e,t)=>{let{setIcon:r}=j(Ur),n=W(null);return ee(i=>{n.current&&PB.call(n.current),i&&(r(i,e),t&&i.firstElementChild instanceof SVGSVGElement&&i.firstElementChild.style.setProperty("--icon-size",typeof t=="number"||!Number.isNaN(Number(t))?`${t}px`:t)),n.current=i},[e,t,r])};function PB(){for(;this.lastChild;)this.removeChild(this.lastChild)}var Vr=He(re(function({icon:t,size:r,className:n,...o},i){let a=Sc(t,r),s=Ec(a,i);return m("div",{ref:s,className:ne("zt-icon",n),...o})}));A();var Fn=re(function({onClick:t,onKeyDown:r,className:n,...o},i){return m(Vr,{onClick:t,onKeyDown:r??t,className:ne("clickable-icon",n),...o,ref:i,role:"button",tabIndex:0})});A();A();var eA=He(re(function({icon:t,...r},n){let o=Sc(t);return m("button",{ref:Ec(o,n),...r})}));var Pn=re(function({className:t,active:r=!1,...n},o){return m(eA,{...n,ref:o,className:ne("clickable-icon",{"is-active":r},t)})});function Ia(e){return m(Fn,{size:16,icon:"info","aria-label":"Show details",...e})}function Gr(){let e=arguments[0];for(let t=1,r=arguments.length;t<r;t++)e=arguments[t](e);return e}A();A();var tA=He(function({content:t,className:r,...n}){let{sanitize:o,renderMarkdown:i}=j(Ur),a=ie(()=>o(t).replace(/<\/?b>/g,"**").replace(/<\/?i>/g,"*"),[t,o]);return m("div",{className:ne("annot-comment select-text overflow-x-auto break-words px-2 py-1",r),...n,children:i(a)})});A();var rA=re(function({className:t,...r},n){return m("div",{ref:n,className:ne("annot-excerpt",t),...r})});var nA=ae(We(),1);A();function Im({text:e,pageLabel:t,className:r,collapsed:n=!1,...o}){let i=e??`Area Excerpt for Page ${t??"?"}`;return m("img",{className:ne("w-full",n?"max-h-20 object-cover object-left-top":"object-scale-down",r),alt:i,...o})}var oA=He(function({type:t,text:r,pageLabel:n,imgSrc:o,collapsed:i}){switch(t){case we.highlight:return m("p",{className:"select-text",children:r});case we.image:if(!o)throw new Error("imgSrc is required for image annotation");return m(Im,{collapsed:i,src:o,pageLabel:n,text:r});case we.note:case we.ink:return m(z,{children:["Unsupported Type: ",we[t]]});default:(0,nA.assertNever)(t)}});function Am({checkbox:e,drag:t,buttons:r,onMoreOptions:n,className:o,children:i,onContextMenu:a,...s}){return m("div",{className:ne("annot-header flex cursor-context-menu items-center gap-1",o),onContextMenu:a??n,...s,children:[e,m("div",{className:"annot-header-drag-container flex flex-row items-center gap-1",children:t}),m("div",{className:"annot-header-buttons-container flex flex-row items-center gap-1 opacity-0 transition-opacity hover:opacity-100",children:r}),m("div",{className:"annot-header-space flex-1"}),i]})}var NB=typeof global=="object"&&global&&global.Object===Object&&global,iA=NB;var RB=typeof self=="object"&&self&&self.Object===Object&&self,MB=iA||RB||Function("return this")(),aA=MB;var qB=aA.Symbol,_r=qB;var sA=Object.prototype,$B=sA.hasOwnProperty,LB=sA.toString,Aa=_r?_r.toStringTag:void 0;function jB(e){var t=$B.call(e,Aa),r=e[Aa];try{e[Aa]=void 0;var n=!0}catch{}var o=LB.call(e);return n&&(t?e[Aa]=r:delete e[Aa]),o}var uA=jB;var BB=Object.prototype,zB=BB.toString;function WB(e){return zB.call(e)}var cA=WB;var UB="[object Null]",HB="[object Undefined]",lA=_r?_r.toStringTag:void 0;function VB(e){return e==null?e===void 0?HB:UB:lA&&lA in Object(e)?uA(e):cA(e)}var fA=VB;function GB(e){return e!=null&&typeof e=="object"}var pA=GB;var KB="[object Symbol]";function JB(e){return typeof e=="symbol"||pA(e)&&fA(e)==KB}var dA=JB;function ZB(e,t){for(var r=-1,n=e==null?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}var mA=ZB;var YB=Array.isArray,hA=YB;var QB=1/0,gA=_r?_r.prototype:void 0,yA=gA?gA.toString:void 0;function vA(e){if(typeof e=="string")return e;if(hA(e))return mA(e,vA)+"";if(dA(e))return yA?yA.call(e):"";var t=e+"";return t=="0"&&1/e==-QB?"-0":t}var bA=vA;function XB(e){return e==null?"":bA(e)}var No=XB;function e8(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),r=r>o?o:r,r<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(o);++n<o;)i[n]=e[n+t];return i}var wA=e8;function t8(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:wA(e,t,r)}var xA=t8;var r8="\\ud800-\\udfff",n8="\\u0300-\\u036f",o8="\\ufe20-\\ufe2f",i8="\\u20d0-\\u20ff",a8=n8+o8+i8,s8="\\ufe0e\\ufe0f",u8="\\u200d",c8=RegExp("["+u8+r8+a8+s8+"]");function l8(e){return c8.test(e)}var kc=l8;function f8(e){return e.split("")}var EA=f8;var SA="\\ud800-\\udfff",p8="\\u0300-\\u036f",d8="\\ufe20-\\ufe2f",m8="\\u20d0-\\u20ff",h8=p8+d8+m8,g8="\\ufe0e\\ufe0f",y8="["+SA+"]",Cm="["+h8+"]",Tm="\\ud83c[\\udffb-\\udfff]",v8="(?:"+Cm+"|"+Tm+")",kA="[^"+SA+"]",_A="(?:\\ud83c[\\udde6-\\uddff]){2}",IA="[\\ud800-\\udbff][\\udc00-\\udfff]",b8="\\u200d",AA=v8+"?",CA="["+g8+"]?",w8="(?:"+b8+"(?:"+[kA,_A,IA].join("|")+")"+CA+AA+")*",x8=CA+AA+w8,E8="(?:"+[kA+Cm+"?",Cm,_A,IA,y8].join("|")+")",S8=RegExp(Tm+"(?="+Tm+")|"+E8+x8,"g");function k8(e){return e.match(S8)||[]}var TA=k8;function _8(e){return kc(e)?TA(e):EA(e)}var OA=_8;function I8(e){return function(t){t=No(t);var r=kc(t)?OA(t):void 0,n=r?r[0]:t.charAt(0),o=r?xA(r,1).join(""):t.slice(1);return n[e]()+o}}var DA=I8;var A8=DA("toUpperCase"),FA=A8;function C8(e,t,r,n){var o=-1,i=e==null?0:e.length;for(n&&i&&(r=e[++o]);++o<i;)r=t(r,e[o],o,e);return r}var PA=C8;function T8(e){return function(t){return e?.[t]}}var NA=T8;var O8={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},D8=NA(O8),RA=D8;var F8=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,P8="\\u0300-\\u036f",N8="\\ufe20-\\ufe2f",R8="\\u20d0-\\u20ff",M8=P8+N8+R8,q8="["+M8+"]",$8=RegExp(q8,"g");function L8(e){return e=No(e),e&&e.replace(F8,RA).replace($8,"")}var MA=L8;var j8=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function B8(e){return e.match(j8)||[]}var qA=B8;var z8=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function W8(e){return z8.test(e)}var $A=W8;var WA="\\ud800-\\udfff",U8="\\u0300-\\u036f",H8="\\ufe20-\\ufe2f",V8="\\u20d0-\\u20ff",G8=U8+H8+V8,UA="\\u2700-\\u27bf",HA="a-z\\xdf-\\xf6\\xf8-\\xff",K8="\\xac\\xb1\\xd7\\xf7",J8="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Z8="\\u2000-\\u206f",Y8=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",VA="A-Z\\xc0-\\xd6\\xd8-\\xde",Q8="\\ufe0e\\ufe0f",GA=K8+J8+Z8+Y8,KA="['\u2019]",LA="["+GA+"]",X8="["+G8+"]",JA="\\d+",ez="["+UA+"]",ZA="["+HA+"]",YA="[^"+WA+GA+JA+UA+HA+VA+"]",tz="\\ud83c[\\udffb-\\udfff]",rz="(?:"+X8+"|"+tz+")",nz="[^"+WA+"]",QA="(?:\\ud83c[\\udde6-\\uddff]){2}",XA="[\\ud800-\\udbff][\\udc00-\\udfff]",Ro="["+VA+"]",oz="\\u200d",jA="(?:"+ZA+"|"+YA+")",iz="(?:"+Ro+"|"+YA+")",BA="(?:"+KA+"(?:d|ll|m|re|s|t|ve))?",zA="(?:"+KA+"(?:D|LL|M|RE|S|T|VE))?",eC=rz+"?",tC="["+Q8+"]?",az="(?:"+oz+"(?:"+[nz,QA,XA].join("|")+")"+tC+eC+")*",sz="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",uz="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",cz=tC+eC+az,lz="(?:"+[ez,QA,XA].join("|")+")"+cz,fz=RegExp([Ro+"?"+ZA+"+"+BA+"(?="+[LA,Ro,"$"].join("|")+")",iz+"+"+zA+"(?="+[LA,Ro+jA,"$"].join("|")+")",Ro+"?"+jA+"+"+BA,Ro+"+"+zA,uz,sz,JA,lz].join("|"),"g");function pz(e){return e.match(fz)||[]}var rC=pz;function dz(e,t,r){return e=No(e),t=r?void 0:t,t===void 0?$A(e)?rC(e):qA(e):e.match(t)||[]}var nC=dz;var mz="['\u2019]",hz=RegExp(mz,"g");function gz(e){return function(t){return PA(nC(MA(t).replace(hz,"")),e,"")}}var oC=gz;var yz=oC(function(e,t,r){return e+(r?" ":"")+FA(t)}),Om=yz;A();var iC=He(function({icon:t,color:r,type:n,className:o,...i}){let a=Om(we[n]);return m(Vr,{icon:t,style:{color:r??void 0},className:ne(o,"annot-type-icon","flex h-auto cursor-grab items-center justify-center opacity-[var(--icon-opacity)]"),"aria-label":a,"aria-label-delay":"500",...i})});var aC=ae(We(),1),sC=e=>{switch(e){case we.highlight:return"align-left";case we.image:return"frame";case we.note:case we.ink:return"file-question";default:(0,aC.assertNever)(e)}};A();var uC=e=>{let{annotRenderer:t,store:r}=j(De),n=lt(r,t.storeSelector,Oo);return t.get(e,n)};A();var cC=e=>{let{getImgSrc:t}=j(De);return ie(()=>t(e),[e,t])};function Dm({className:e,...t}){return m(Fn,{icon:"more-vertical",className:ne("annot-header-more-options",e),"aria-label":"More Options",size:"0.9rem","aria-label-delay":"50",...t})}A();var lC=He(function({pageLabel:t,backlink:r,className:n,...o}){let i=t?`Page ${t}`:"";return r?m("a",{className:ne("annot-page","external-link","bg-[length:12px] bg-[center_right_3px] pr-[18px] text-xs",n),href:r,"aria-label":`Open Annotation In Zotero at Page ${t}`,"aria-label-delay":"500",...o,children:i}):m("span",{className:ne("annot-page",n),children:i})});A();function Fm({tags:e}){return e.length===0?null:m("div",{className:"annot-tags-container",children:e.map(t=>m(vz,{...t},t.tagID))})}var vz=He(function({name:t}){return m("a",{className:ne("tag","annot-tag"),children:t})});function Pm({collapsed:e=!1,annotation:t,checkbox:r,tags:n,className:o,...i}){let a=W(null),{onMoreOptions:s,onDragStart:u,onShowDetails:l}=j(De),c=lp.selectKeys(t,["type","text","pageLabel"]),f=uC(t),p=Vt(h=>s(h,t)),d=Vt(()=>l("annot",t.itemID));return m("div",{className:ne("annot-preview","bg-primary shadow-border col-span-1 flex flex-col divide-y overflow-auto rounded-sm transition-colors",o),"data-id":t.itemID,...i,children:[m(Am,{className:"bg-primary-alt py-1 pl-2 pr-1",checkbox:r,drag:m(iC,{type:t.type,color:t.color,icon:sC(t.type),draggable:f!==null,onDragStart:Vt(h=>f&&u(h,f,a.current)),size:16}),buttons:m(z,{children:[m(Ia,{className:"p-0.5",size:14,onClick:d}),m(Dm,{className:"p-0",onClick:p})]}),onMoreOptions:p,children:m(lC,{pageLabel:t.pageLabel,backlink:Lr(t)})}),m(rA,{ref:a,className:"px-2 py-1",children:m("blockquote",{className:ne("border-l-blockquote pl-2 leading-tight",{"line-clamp-3":e}),style:{borderColor:t.color??"var(--interactive-accent)"},children:m(oA,{...c,collapsed:e,imgSrc:cC(t)})})}),t.comment&&m(tA,{content:t.comment}),n&&m(Fm,{tags:n})]})}function Nm({selectable:e=!1,collapsed:t,annotations:r,getTags:n}){let[o,{add:i,remove:a}]=wm();return m("div",{role:"list",className:"@md:grid-cols-2 @md:gap-3 @3xl:grid-cols-4 grid grid-cols-1 gap-2",children:r.map(s=>m(Pm,{checkbox:e&&m(bz,{checked:o.has(s.itemID),onChange:u=>u?i(s.itemID):a(s.itemID)}),collapsed:t,role:"listitem",annotation:s,tags:n(s.itemID)},s.itemID))})}function bz({checked:e,onChange:t}){return m("div",{className:"flex h-5 items-center",children:m("input",{type:"checkbox",className:"m-0 h-4 w-4",checked:e,onChange:r=>t(r.target.checked)})})}A();var wz=()=>lt(j(De).store,e=>({attachments:e.allAttachments,onChange:e.setActiveAtch,value:e.attachmentID}),Oo);function Rm(){let{attachments:e,onChange:t,value:r}=wz();return e?e.length===1?null:e.length<=0?m("span",{className:"atch-select-empty",children:"No attachments available"}):m("select",{className:"atch-select",onChange:n=>t(parseInt(n.target.value,10)),value:r??void 0,children:e.map(({itemID:n,path:o,annotCount:i})=>m("option",{value:n,children:["(",i,") ",o?.replace(/^storage:/,"")]},n))}):m(z,{children:"Loading"})}function Mm({isCollapsed:e,...t}){return m(Pn,{...t,icon:e?"chevrons-up-down":"chevrons-down-up","aria-label":e?"Expand":"Collapse"})}A();function _c(e){let{store:t,onSetFollow:r}=j(De),n=lt(t,a=>a.follow),o=n===null?"Not Following":n==="ob-note"?"Active Literature Note":"Active Literature in Zotero Reader";return m(z,{children:[m(Pn,{...e,onClick:r,icon:n===null?"unlink":"link","aria-label":"Choose Follow Mode"+(n===null?" (Currently linked with literature)":""),"aria-label-delay":"50"}),n!==null&&m("span",{className:"ml-1","aria-label":`Following ${o}`,children:n==="ob-note"?"ob":"zt"})]})}function Ic({children:e,buttons:t}){return m("div",{className:"nav-header",children:[m("div",{className:"nav-buttons-container",children:t}),e]})}function qm(e){return m(Pn,{...e,icon:"refresh-ccw","aria-label":"Refresh Annotation List","aria-label-delay":"50"})}var xz=()=>{let{registerDbUpdate:e,store:t}=j(De),r=lt(t,n=>n.refresh);J(()=>e(r),[e,r])};function Ca(){xz();let{store:e}=j(De),t=lt(e,r=>r.doc);return t?m(Ez,{docItem:t.docItem}):m(z,{children:[m(Ic,{buttons:m(_c,{})}),m("div",{className:"pane-empty p-2",children:"Active file not literature note"})]})}function Ez({docItem:e}){let{refreshConn:t,onShowDetails:r}=j(De),[n,{toggle:o}]=bc(!1),i=Sz();return m(z,{children:[m(Ic,{buttons:m(z,{children:[m(Ia,{className:"nav-action-button",onClick:Vt(()=>r("doc-item",e.itemID))}),m(Mm,{className:"nav-action-button",isCollapsed:n,onClick:o}),m(qm,{className:"nav-action-button",onClick:t}),m(_c,{})]}),children:m(Rm,{})}),m("div",{className:ne("annots-container @container","overflow-auto px-3 pt-1 pb-8 text-xs"),children:i?m(Nm,{collapsed:n,...i}):m(z,{children:"Loading"})})]})}var Sz=()=>lt(j(De).store,e=>!e.doc||!e.annotations||!e.attachment?null:{annotations:e.annotations,getTags:t=>e.tags[t]??[]},Oo);A();function de(){return de=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},de.apply(this,arguments)}function $m(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,i;for(i=0;i<n.length;i++)o=n[i],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function Ac(e,t=166){let r;function n(...o){let i=()=>{e.apply(this,o)};clearTimeout(r),r=setTimeout(i,t)}return n.clear=()=>{clearTimeout(r)},n}function Lm(e){return e&&e.ownerDocument||document}function Ta(e){return Lm(e).defaultView||window}function jm(e,t){typeof e=="function"?e(t):e&&(e.current=t)}A();var kz=typeof window<"u"?it:J,Bm=kz;A();function Cc(...e){return ie(()=>e.every(t=>t==null)?null:t=>{e.forEach(r=>{jm(r,t)})},e)}A();A();var _z=["onChange","maxRows","minRows","style","value"];function Tc(e){return parseInt(e,10)||0}var Iz={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function fC(e){return e==null||Object.keys(e).length===0||e.outerHeightStyle===0&&!e.overflow}var Az=re(function(t,r){let{onChange:n,maxRows:o,minRows:i=1,style:a,value:s}=t,u=$m(t,_z),{current:l}=W(s!=null),c=W(null),f=Cc(r,c),p=W(null),d=W(0),[h,y]=q({outerHeightStyle:0}),v=ee(()=>{let B=c.current,X=Ta(B).getComputedStyle(B);if(X.width==="0px")return{outerHeightStyle:0};let G=p.current;G.style.width=X.width,G.value=B.value||t.placeholder||"x",G.value.slice(-1)===`
`&&(G.value+=" ");let x=X.boxSizing,C=Tc(X.paddingBottom)+Tc(X.paddingTop),b=Tc(X.borderBottomWidth)+Tc(X.borderTopWidth),k=G.scrollHeight;G.value="x";let I=G.scrollHeight,R=k;i&&(R=Math.max(Number(i)*I,R)),o&&(R=Math.min(Number(o)*I,R)),R=Math.max(R,I);let D=R+(x==="border-box"?C+b:0),L=Math.abs(R-k)<=1;return{outerHeightStyle:D,overflow:L}},[o,i,t.placeholder]),w=(B,Q)=>{let{outerHeightStyle:X,overflow:G}=Q;return d.current<20&&(X>0&&Math.abs((B.outerHeightStyle||0)-X)>1||B.overflow!==G)?(d.current+=1,{overflow:G,outerHeightStyle:X}):B},S=ee(()=>{let B=v();fC(B)||y(Q=>w(Q,B))},[v]),T=()=>{let B=v();fC(B)||ar(()=>{y(Q=>w(Q,B))})};return J(()=>{let B=Ac(()=>{d.current=0,c.current&&T()}),Q,X=c.current,G=Ta(X);return G.addEventListener("resize",B),typeof ResizeObserver<"u"&&(Q=new ResizeObserver(B),Q.observe(X)),()=>{B.clear(),G.removeEventListener("resize",B),Q&&Q.disconnect()}}),Bm(()=>{S()}),J(()=>{d.current=0},[s]),m(z,{children:[m("textarea",de({value:s,onChange:B=>{d.current=0,l||S(),n&&n(B)},ref:f,rows:i,style:de({height:h.outerHeightStyle,overflow:h.overflow?"hidden":void 0},a)},u)),m("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:p,tabIndex:-1,style:de({},Iz.shadow,a,{padding:0})})]})}),Oa=Az;A();A();A();A();function Cz(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function zm(...e){return t=>e.forEach(r=>Cz(r,t))}function Oc(...e){return ee(zm(...e),e)}A();function pC(e,t=[]){let r=[];function n(i,a){let s=Oe(a),u=r.length;r=[...r,a];function l(f){let{scope:p,children:d,...h}=f,y=p?.[e][u]||s,v=ie(()=>h,Object.values(h));return Y(y.Provider,{value:v},d)}function c(f,p){let d=p?.[e][u]||s,h=j(d);if(h)return h;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return l.displayName=i+"Provider",[l,c]}let o=()=>{let i=r.map(a=>Oe(a));return function(s){let u=s?.[e]||i;return ie(()=>({[`__scope${e}`]:{...s,[e]:u}}),[s,u])}};return o.scopeName=e,[n,Tz(o,...t)]}function Tz(...e){let t=e[0];if(e.length===1)return t;let r=()=>{let n=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(i){let a=n.reduce((s,{useScope:u,scopeName:l})=>{let f=u(i)[`__scope${l}`];return{...s,...f}},{});return ie(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}function ft(e,t,{checkForDefaultPrevented:r=!0}={}){return function(o){if(e?.(o),r===!1||!o.defaultPrevented)return t?.(o)}}A();A();function Wm(e){let t=W(e);return J(()=>{t.current=e}),ie(()=>(...r)=>{var n;return(n=t.current)===null||n===void 0?void 0:n.call(t,...r)},[])}function dC({prop:e,defaultProp:t,onChange:r=()=>{}}){let[n,o]=Oz({defaultProp:t,onChange:r}),i=e!==void 0,a=i?e:n,s=Wm(r),u=ee(l=>{if(i){let f=typeof l=="function"?l(e):l;f!==e&&s(f)}else o(l)},[i,e,o,s]);return[a,u]}function Oz({defaultProp:e,onChange:t}){let r=q(e),[n]=r,o=W(n),i=Wm(t);return J(()=>{o.current!==n&&(i(n),o.current=n)},[n,o,i]),r}A();function mC(e){let t=W({value:e,previous:e});return ie(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}A();A();var Da=globalThis?.document?it:()=>{};function hC(e){let[t,r]=q(void 0);return Da(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let n=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;let i=o[0],a,s;if("borderBoxSize"in i){let u=i.borderBoxSize,l=Array.isArray(u)?u[0]:u;a=l.inlineSize,s=l.blockSize}else a=e.offsetWidth,s=e.offsetHeight;r({width:a,height:s})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}A();A();function Dz(e,t){return ir((r,n)=>{let o=t[r][n];return o??r},e)}var Um=e=>{let{present:t,children:r}=e,n=Fz(t),o=typeof r=="function"?r({present:n.isPresent}):Me.only(r),i=Oc(n.ref,o.ref);return typeof r=="function"||n.isPresent?Ot(o,{ref:i}):null};Um.displayName="Presence";function Fz(e){let[t,r]=q(),n=W({}),o=W(e),i=W("none"),a=e?"mounted":"unmounted",[s,u]=Dz(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return J(()=>{let l=Dc(n.current);i.current=s==="mounted"?l:"none"},[s]),Da(()=>{let l=n.current,c=o.current;if(c!==e){let p=i.current,d=Dc(l);e?u("MOUNT"):d==="none"||l?.display==="none"?u("UNMOUNT"):u(c&&p!==d?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,u]),Da(()=>{if(t){let l=f=>{let d=Dc(n.current).includes(f.animationName);f.target===t&&d&&ar(()=>u("ANIMATION_END"))},c=f=>{f.target===t&&(i.current=Dc(n.current))};return t.addEventListener("animationstart",c),t.addEventListener("animationcancel",l),t.addEventListener("animationend",l),()=>{t.removeEventListener("animationstart",c),t.removeEventListener("animationcancel",l),t.removeEventListener("animationend",l)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:ee(l=>{l&&(n.current=getComputedStyle(l)),r(l)},[])}}function Dc(e){return e?.animationName||"none"}A();A();A();var Vm=re((e,t)=>{let{children:r,...n}=e,o=Me.toArray(r),i=o.find(Nz);if(i){let a=i.props.children,s=o.map(u=>u===i?Me.count(a)>1?Me.only(null):yt(a)?a.props.children:null:u);return Y(Hm,de({},n,{ref:t}),yt(a)?Ot(a,void 0,s):null)}return Y(Hm,de({},n,{ref:t}),r)});Vm.displayName="Slot";var Hm=re((e,t)=>{let{children:r,...n}=e;return yt(r)?Ot(r,{...Rz(n,r.props),ref:zm(t,r.ref)}):Me.count(r)>1?Me.only(null):null});Hm.displayName="SlotClone";var Pz=({children:e})=>Y(z,null,e);function Nz(e){return yt(e)&&e.type===Pz}function Rz(e,t){let r={...t};for(let n in t){let o=e[n],i=t[n];/^on[A-Z]/.test(n)?o&&i?r[n]=(...s)=>{i(...s),o(...s)}:o&&(r[n]=o):n==="style"?r[n]={...o,...i}:n==="className"&&(r[n]=[o,i].filter(Boolean).join(" "))}return{...e,...r}}var Mz=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Gm=Mz.reduce((e,t)=>{let r=re((n,o)=>{let{asChild:i,...a}=n,s=i?Vm:t;return J(()=>{window[Symbol.for("radix-ui")]=!0},[]),Y(s,de({},a,{ref:o}))});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});var gC="Checkbox",[qz,Ome]=pC(gC),[$z,Lz]=qz(gC),jz=re((e,t)=>{let{__scopeCheckbox:r,name:n,checked:o,defaultChecked:i,required:a,disabled:s,value:u="on",onCheckedChange:l,...c}=e,[f,p]=q(null),d=Oc(t,T=>p(T)),h=W(!1),y=f?!!f.closest("form"):!0,[v=!1,w]=dC({prop:o,defaultProp:i,onChange:l}),S=W(v);return J(()=>{let T=f?.form;if(T){let M=()=>w(S.current);return T.addEventListener("reset",M),()=>T.removeEventListener("reset",M)}},[f,w]),Y($z,{scope:r,state:v,disabled:s},Y(Gm.button,de({type:"button",role:"checkbox","aria-checked":Nn(v)?"mixed":v,"aria-required":a,"data-state":yC(v),"data-disabled":s?"":void 0,disabled:s,value:u},c,{ref:d,onKeyDown:ft(e.onKeyDown,T=>{T.key==="Enter"&&T.preventDefault()}),onClick:ft(e.onClick,T=>{w(M=>Nn(M)?!0:!M),y&&(h.current=T.isPropagationStopped(),h.current||T.stopPropagation())})})),y&&Y(Wz,{control:f,bubbles:!h.current,name:n,value:u,checked:v,required:a,disabled:s,style:{transform:"translateX(-100%)"}}))}),Bz="CheckboxIndicator",zz=re((e,t)=>{let{__scopeCheckbox:r,forceMount:n,...o}=e,i=Lz(Bz,r);return Y(Um,{present:n||Nn(i.state)||i.state===!0},Y(Gm.span,de({"data-state":yC(i.state),"data-disabled":i.disabled?"":void 0},o,{ref:t,style:{pointerEvents:"none",...e.style}})))}),Wz=e=>{let{control:t,checked:r,bubbles:n=!0,...o}=e,i=W(null),a=mC(r),s=hC(t);return J(()=>{let u=i.current,l=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(l,"checked").set;if(a!==r&&f){let p=new Event("click",{bubbles:n});u.indeterminate=Nn(r),f.call(u,Nn(r)?!1:r),u.dispatchEvent(p)}},[a,r,n]),Y("input",de({type:"checkbox","aria-hidden":!0,defaultChecked:Nn(r)?!1:r},o,{tabIndex:-1,ref:i,style:{...e.style,...s,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function Nn(e){return e==="indeterminate"}function yC(e){return Nn(e)?"indeterminate":e?"checked":"unchecked"}var Km=jz,vC=zz;A();var Jm=re(({className:e,checked:t,...r},n)=>m(Km,{ref:n,className:ne("data-[state=checked]:text-mod-error peer h-3 w-3 shrink-0 rounded-sm border disabled:cursor-not-allowed disabled:opacity-50 bg-primary obzt-btn-reset",e),checked:t,...r,children:m(vC,{className:ne("flex items-center justify-center"),children:m(Vr,{icon:"chevrons-down",size:"0.75rem",className:"contents"})})}));Jm.displayName=Km.displayName;var bC=re(({id:e,checked:t,onCheckChange:r,title:n,disabled:o,className:i,...a},s)=>m("div",{className:ne("flex items-center gap-x-1","rounded-sm focus-within:outline-none focus-within:ring-2 focus-within:ring-mod-border-focus focus-within:ring-offset-2",t&&"animate-pulse",i),ref:s,...a,children:[m(Jm,{className:ne("h-3 w-3",o&&"hidden"),id:e,checked:t,disabled:o,onCheckedChange:r}),m("label",{htmlFor:e,className:"peer-[[data-state=checked]]:text-mod-error text-status-bar text-txt-status-bar leading-none peer-disabled:cursor-not-allowed",children:n})]}));bC.displayName="ImportingStatus";var Ml=require("obsidian");A();var Mo=require("obsidian");A();var wC={sanitize:DOMPurify.sanitize.bind(DOMPurify),setIcon:Mo.setIcon,renderMarkdown(e){return m(Hz,{content:e})}};function Hz({content:e}){let t=W(null);return m("div",{className:"contents",ref:n=>{n?(n.empty(),t.current&&t.current.unload(),t.current=new Mo.Component,Mo.MarkdownRenderer.renderMarkdown(e,n,"",t.current)):t.current&&(t.current.unload(),t.current=null)}})}var Rn=require("obsidian"),Fc=class extends Rn.FileView{constructor(t){super(t),this.navigation=!1,this.allowNoFile=!0,this.requestUpdate=(0,Rn.debounce)(()=>this.update(),10)}load(){super.load(),this.registerEvent(this.app.workspace.on("file-open",this.onFileOpen,this))}async setState(t,r){if(!Object.hasOwn(t,"file")&&!Object.hasOwn(t,"group")){let n=this.leaf.workspace.getActiveFile();n&&(t.file=n?.path)}await super.setState(t,r)}onLoadFile(t){return this.requestUpdate()}onUnloadFile(t){return this.requestUpdate()}onFileOpen(t){this.leaf.group||this.leaf.pinned||(t instanceof Rn.TFile?this.loadFile(t):this.loadFile(null),this.requestUpdate())}onGroupChange(){if(super.onGroupChange(),this.leaf.group)for(let t=0,r=this.leaf.workspace.getGroupLeaves(this.leaf.group);t<r.length;t++){let n=r[t];if(n!==this.leaf&&n.view instanceof Rn.FileView){let o=n.view.getSyncViewState();this.leaf.openFile(n.view.file,o)}}else{let t=this.leaf.workspace.getActiveFile();this.loadFile(t)}}};var xC=require("obsidian");var Pc=require("obsidian"),Nc="zt-citations",Rc=async(e,t)=>typeof e=="string"&&e.trim().length>0?await t.database.search(e):await t.database.getItemsOf(50);function Mc({item:e,fields:t},r){r.addClass("mod-complex");let n=r.createDiv("suggestion-content").createDiv("suggestion-title").createSpan(),o=r.createDiv("suggestion-aux");for(let s of t){let u=o.createEl("kbd","suggestion-hotkey");switch(u.setAttribute("aria-label",s),s){case"title":(0,Pc.setIcon)(u,"type");break;case"creators":(0,Pc.setIcon)(u,"user");break;case"date":(0,Pc.setIcon)(u,"calendar");break;default:u.setText(s);break}}let[i]=e.title??[],a=n.createDiv({cls:"title"});typeof i=="string"&&i?a.setText(i):a.setText("Title missing"),this.plugin.settings.suggester.showCitekeyInSuggester&&e.citekey&&n.createDiv({cls:"citekey",text:e.citekey}),Vz(e)&&n.append(Gz(e))}var Vz=e=>e.itemType==="journalArticle",Gz=e=>{let{creators:t,date:r,publicationTitle:n,volume:o,issue:i,pages:a}=e,s={creators:Kz(t),date:r,publication:n,volume:o,issue:i,pages:a},u=(l,c,f)=>s[c]&&l.createSpan({cls:f??c,text:s[c]??void 0});return createDiv({cls:"meta"},l=>{(s.creators||s.date)&&l.createSpan({cls:"author-year"},c=>{u(c,"creators"),u(c,"date")}),u(l,"publication"),(s.volume||s.issue)&&l.createSpan({cls:"vol-issue"},c=>{u(c,"volume"),u(c,"issue")}),u(l,"pages")})},Kz=e=>{if(!e||!e[0])return"";let t=e[0],r=wu(t)||xu(t)?t.lastName:"";return e.length>1&&(r=r.trim()+" et al."),r};var Fa=class extends xC.EditorSuggest{constructor(r){super(r.app);this.plugin=r;this.suggestEl.addClass(Nc)}getSuggestions(r){return Rc(r.query,this.plugin)}renderSuggestion=Mc.bind(this)};var Mn=class extends Eu{constructor(r){super(r.app);this.plugin=r;this.modalEl.addClass(Nc)}getSuggestions(r){return Rc(r,this.plugin)}renderSuggestion=Mc.bind(this);onChooseSuggestion(){}};var kC=require("obsidian");var EC=require("@codemirror/state");async function SC(e,t,r=t.settings.template.updateOverwrite){let{app:n,noteIndex:o,templateRenderer:i}=t,a=o.getNotesFor(e);if(a.length===0)return null;let s=t.database.settings.citationLibrary,u=await t.databaseAPI.getAttachments(e.itemID,s),l=new Set(a.flatMap(y=>On(y,t.app.metadataCache))),c=u.filter(y=>l.has(y.itemID)),f;c.length===0&&(f=await vr(u,t.app),f&&(xo(f,e),c.push(f)));let p=await Pa(e,{all:u,selected:c},t),d=Object.values(p)[0],h={notes:a.length,addedAnnots:0,updatedAnnots:0};for(let y of a){let v=n.metadataCache.getCache(y);if(!v)continue;let w=On(y,t.app.metadataCache);w||(f===void 0&&(f=await vr(c,t.app)),f?w=[f.itemID]:w=[]);let S=n.vault.getAbstractFileByPath(y),T={plugin:t,sourcePath:y};if(r){let b=await i.renderNote(p[w[0]],T);await n.vault.modify(S,b);continue}let M=Gr((v.sections?.filter(Ea)??[]).flatMap(b=>Sa(b.id).map(k=>[k,b.position])),mn(([b])=>b),nr((b,k)=>({key:b,blocks:k.map(([I,R])=>R)}))),B=new Set(Object.values(v.blocks??{})?.filter(Ea).flatMap(b=>Sa(b.id).map(k=>k))),Q=new Map(w.map(b=>[p[b],[]])),X=[];if(await Promise.all(w.map(async b=>{let k=p[b];if(!(!k.annotations||k.annotations.length===0))return await Promise.all(k.annotations.map(async I=>{let R=Et(I,!0),D=M[R];if(D){if(!t.settings.template.updateAnnotBlock)return;let L=await i.renderAnnot(I,k,T);X.push(...D.blocks.map(H=>({from:H.start.offset,to:H.end.offset,insert:L})))}else B.has(R)||Q.get(k).push(I)})??[])})),X.length>0){let b=EC.EditorState.create({doc:await n.vault.read(S)}).update({changes:X}).state.doc.toString();await n.vault.modify(S,b)}await i.setFrontmatterTo(S,ct(d,T).docItem);let G=[...Q].reduce((b,[k,I])=>{if(I.length===0)return b;let R=i.renderAnnots({...k,annotations:I},T);return(b&&b+`
`)+R},"");G&&await n.vault.append(S,G);let x=X.length,C=[...Q.values()].reduce((b,k)=>b+k.length,0);h.updatedAnnots+=x,h.addedAnnots+=C}return h}async function Pa(e,{all:t,selected:r},n){let o=n.database.settings.citationLibrary,i=await n.databaseAPI.getTags([[e.itemID,o]]);if(r.length===0)return{[-1]:{docItem:e,attachment:null,tags:i,allAttachments:t,annotations:[]}};let a={};for(let s of r){let u=s?await n.databaseAPI.getAnnotations(s.itemID,o):[];a[s.itemID]={docItem:e,attachment:s,tags:{...i,...await n.databaseAPI.getTags(u.map(l=>[l.itemID,o]))},allAttachments:t,annotations:u}}return a}async function qc({alt:e,item:t},{start:r,end:n,editor:o,file:i},a){let{plugin:s}=a,u=s.database.settings.citationLibrary,l=await s.databaseAPI.getAttachments(t.itemID,u),c=new Set(On(i,s.app.metadataCache)),f=l.filter(y=>c.has(y.itemID)),p;f.length===0&&(p=await vr(l,s.app),p&&(xo(p,t),f.push(p)));let d=await Pa(t,{all:l,selected:f},a.plugin),h=a.renderCitation(Object.values(d)[0],{plugin:a.plugin},e);o.replaceRange(h,r,n),o.setCursor(o.offsetToPos(o.posToOffset(r)+h.length))}var _C=e=>kC.Keymap.isModifier(e,"Shift");var Jz=[{command:"\u2191\u2193",purpose:"to navigate"},{command:"\u21B5",purpose:"to insert primary Markdown citation"},{command:"\u21B5 (end with /)",purpose:"Insert secondary Markdown citation"}],Na=class extends Fa{constructor(r){super(r);this.plugin=r;this.setInstructions(Jz)}onTrigger(r,n){if(!this.plugin.settings.suggester.citationEditorSuggester)return null;let o=n.getLine(r.line),a=o.substring(0,r.ch).match(/\[@([\w\- ]*)\/?$/);if(!a)return null;let s={...r};return o[r.ch]==="]"&&(s.ch+=1),{end:s,start:{ch:a.index,line:r.line,alt:!!a[0]?.endsWith("/")},query:a[1]}}selectSuggestion(r){this.context&&qc({item:r.item,alt:this.context.start.alt??!1},this.context,this.plugin.templateRenderer)}};var Zz=[{command:"\u2191\u2193",purpose:"to navigate"},{command:"\u21B5",purpose:"to insert Markdown citation"},{command:"shift \u21B5",purpose:"to insert secondary Markdown citation"},{command:"esc",purpose:"to dismiss"}],Zm=class extends Mn{constructor(r){super(r);this.plugin=r;this.setInstructions(Zz)}};async function Ym(e,t,r){let n=await $c(r);if(!n)return!1;let o=e.getCursor();return await qc({item:n.value.item,alt:_C(n.evt)},{start:o,end:o,editor:e,file:t},r.templateRenderer),!0}async function $c(e){return await Qi(new Zm(e))}var IC=ae(We(),1);var Ra=class extends Ne{getDefaults(){return{citationEditorSuggester:!0,showCitekeyInSuggester:!1}}async apply(t){switch(t){case"citationEditorSuggester":case"showCitekeyInSuggester":return;default:(0,IC.default)(t)}}};var Bn=require("obsidian");A();A();A();A();var Jr=ae(Kr());A();function Xm(e){let t=Object.prototype.toString.call(e).slice(8,-1);return t==="Object"&&typeof e[Symbol.iterator]=="function"?"Iterable":t==="Custom"&&e.constructor!==Object&&e instanceof Object?"Object":t}var OC=ae(Kr());A();var qa=ae(Kr());A();var AC=ae(Kr());A();function Ma(e){let{styling:t,arrowStyle:r="single",expanded:n,nodeType:o,onClick:i}=e;return $.createElement("div",(0,AC.default)({},t("arrowContainer",r),{onClick:i}),$.createElement("div",t(["arrow","arrowSign"],o,n,r),"\u25B6",r==="double"&&$.createElement("div",t(["arrowSign","arrowSignInner"]),"\u25B6")))}function Yz(e,t){return e==="Object"?Object.keys(t).length:e==="Array"?t.length:1/0}function Qz(e){return typeof e.set=="function"}function Xz(e,t,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1/0,i;if(e==="Object"){let a=Object.getOwnPropertyNames(t);r&&a.sort(r===!0?void 0:r),a=a.slice(n,o+1),i={entries:a.map(s=>({key:s,value:t[s]}))}}else if(e==="Array")i={entries:t.slice(n,o+1).map((a,s)=>({key:s+n,value:a}))};else{let a=0,s=[],u=!0,l=Qz(t);for(let c of t){if(a>o){u=!1;break}n<=a&&(l&&Array.isArray(c)?typeof c[0]=="string"||typeof c[0]=="number"?s.push({key:c[0],value:c[1]}):s.push({key:`[entry ${a}]`,value:{"[key]":c[0],"[value]":c[1]}}):s.push({key:a,value:c})),a++}i={hasMore:!u,entries:s}}return i}function eh(e,t,r){let n=[];for(;t-e>r*r;)r=r*r;for(let o=e;o<=t;o+=r)n.push({from:o,to:Math.min(t,o+r-1)});return n}function th(e,t,r,n){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1/0,a=Xz.bind(null,e,t,r);if(!n)return a().entries;let s=i<1/0,u=Math.min(i-o,Yz(e,t));if(e!=="Iterable"){if(u<=n||n<7)return a(o,i).entries}else if(u<=n&&!s)return a(o,i).entries;let l;if(e==="Iterable"){let{hasMore:c,entries:f}=a(o,o+n-1);l=c?[...f,...eh(o+n,o+2*n-1,n)]:f}else l=s?eh(o,i,n):[...a(0,n-5).entries,...eh(n-4,u-5,n),...a(u-4,u-1).entries];return l}var CC=ae(Kr());A();function rh(e){let{styling:t,from:r,to:n,renderChildNodes:o,nodeType:i}=e,[a,s]=q(!1),u=ee(()=>{s(!a)},[a]);return a?$.createElement("div",t("itemRange",a),o(e,r,n)):$.createElement("div",(0,CC.default)({},t("itemRange",a),{onClick:u}),$.createElement(Ma,{nodeType:i,styling:t,expanded:!1,onClick:u,arrowStyle:"double"}),`${r} ... ${n}`)}function e7(e){return e.to!==void 0}function TC(e,t,r){let{nodeType:n,data:o,collectionLimit:i,circularCache:a,keyPath:s,postprocessValue:u,sortObjectKeys:l}=e,c=[];return th(n,o,l,i,t,r).forEach(f=>{if(e7(f))c.push($.createElement(rh,(0,qa.default)({},e,{key:`ItemRange--${f.from}-${f.to}`,from:f.from,to:f.to,renderChildNodes:TC})));else{let{key:p,value:d}=f,h=a.indexOf(d)!==-1;c.push($.createElement($a,(0,qa.default)({},e,{postprocessValue:u,collectionLimit:i,key:`Node--${p}`,keyPath:[p,...s],value:u(d),circularCache:[...a,d],isCircular:h,hideRoot:!1})))}}),c}function qn(e){let{circularCache:t=[],collectionLimit:r,createItemString:n,data:o,expandable:i,getItemString:a,hideRoot:s,isCircular:u,keyPath:l,labelRenderer:c,level:f=0,nodeType:p,nodeTypeIndicator:d,shouldExpandNodeInitially:h,styling:y}=e,[v,w]=q(u?!1:h(l,o,f)),S=ee(()=>{i&&w(!v)},[i,v]),T=v||s&&f===0?TC({...e,circularCache:t,level:f+1}):null,M=$.createElement("span",y("nestedNodeItemType",v),d),B=a(p,o,M,n(o,r),l),Q=[l,p,v,i];return s?$.createElement("li",y("rootNode",...Q),$.createElement("ul",y("rootNodeChildren",...Q),T)):$.createElement("li",y("nestedNode",...Q),i&&$.createElement(Ma,{styling:y,nodeType:p,expanded:v,onClick:S}),$.createElement("label",(0,qa.default)({},y(["label","nestedNodeLabel"],...Q),{onClick:S}),c(...Q)),$.createElement("span",(0,qa.default)({},y("nestedNodeItemString",...Q),{onClick:S}),B),$.createElement("ul",y("nestedNodeChildren",...Q),T))}function t7(e){let t=Object.getOwnPropertyNames(e).length;return`${t} ${t!==1?"keys":"key"}`}function nh(e){let{data:t,...r}=e;return $.createElement(qn,(0,OC.default)({},r,{data:t,nodeType:"Object",nodeTypeIndicator:r.nodeType==="Error"?"Error()":"{}",createItemString:t7,expandable:Object.getOwnPropertyNames(t).length>0}))}var DC=ae(Kr());A();function r7(e){return`${e.length} ${e.length!==1?"items":"item"}`}function oh(e){let{data:t,...r}=e;return $.createElement(qn,(0,DC.default)({},r,{data:t,nodeType:"Array",nodeTypeIndicator:"[]",createItemString:r7,expandable:t.length>0}))}var FC=ae(Kr());A();function n7(e,t){let r=0,n=!1;if(Number.isSafeInteger(e.size))r=e.size;else for(let o of e){if(t&&r+1>t){n=!0;break}r+=1}return`${n?">":""}${r} ${r!==1?"entries":"entry"}`}function ih(e){return $.createElement(qn,(0,FC.default)({},e,{nodeType:"Iterable",nodeTypeIndicator:"()",createItemString:n7,expandable:!0}))}A();function Gt(e){let{nodeType:t,styling:r,labelRenderer:n,keyPath:o,valueRenderer:i,value:a,valueGetter:s=u=>u}=e;return $.createElement("li",r("value",t,o),$.createElement("label",r(["label","valueLabel"],t,o),n(o,t,!1,!1)),$.createElement("span",r("valueText",t,o),i(s(a),a,...o)))}function $a(e){let{getItemString:t,keyPath:r,labelRenderer:n,styling:o,value:i,valueRenderer:a,isCustomNode:s,...u}=e,l=s(i)?"Custom":Xm(i),c={getItemString:t,key:r[0],keyPath:r,labelRenderer:n,nodeType:l,styling:o,value:i,valueRenderer:a},f={...u,...c,data:i,isCustomNode:s};switch(l){case"Object":case"Error":case"WeakMap":case"WeakSet":return $.createElement(nh,f);case"Array":return $.createElement(oh,f);case"Iterable":case"Map":case"Set":return $.createElement(ih,f);case"String":return $.createElement(Gt,(0,Jr.default)({},c,{valueGetter:p=>`"${p}"`}));case"Number":return $.createElement(Gt,c);case"Boolean":return $.createElement(Gt,(0,Jr.default)({},c,{valueGetter:p=>p?"true":"false"}));case"Date":return $.createElement(Gt,(0,Jr.default)({},c,{valueGetter:p=>p.toISOString()}));case"Null":return $.createElement(Gt,(0,Jr.default)({},c,{valueGetter:()=>"null"}));case"Undefined":return $.createElement(Gt,(0,Jr.default)({},c,{valueGetter:()=>"undefined"}));case"Function":case"Symbol":return $.createElement(Gt,(0,Jr.default)({},c,{valueGetter:p=>p.toString()}));case"Custom":return $.createElement(Gt,c);default:return $.createElement(Gt,(0,Jr.default)({},c,{valueGetter:()=>`<${l}>`}))}}var Ol=ae(Lc()),oD=ae(MC()),vh=ae(WC()),bh=ae(lO()),hh=ae(NO()),gh=ae(XO());function eD(e){var t=e[0],r=e[1],n=e[2],o,i,a;return o=t*1+r*0+n*1.13983,i=t*1+r*-.39465+n*-.5806,a=t*1+r*2.02311+n*0,o=Math.min(Math.max(0,o),1),i=Math.min(Math.max(0,i),1),a=Math.min(Math.max(0,a),1),[o*255,i*255,a*255]}function tD(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,o=t*.299+r*.587+n*.114,i=t*-.14713+r*-.28886+n*.436,a=t*.615+r*-.51499+n*-.10001;return[o,i,a]}function rD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function pt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rD(Object(r),!0).forEach(function(n){(0,oD.default)(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var iD=bh.default,nD=Object.keys(iD),EU=function(t){return t<.25?1:t<.5?.9-t:1.1-t},SU=function(t){var r=(0,hh.default)(t),n=tD(r.array()),o=(0,vh.default)(n,3),i=o[0],a=o[1],s=o[2],u=[EU(i),a,s],l=eD(u);return hh.default.rgb(l).hex()},jo=function(t){return function(r){return{className:[r.className,t.className].filter(Boolean).join(" "),style:pt(pt({},r.style||{}),t.style||{})}}},kU=function(t,r){if(t===void 0)return r;if(r===void 0)return t;var n=(0,Ol.default)(t),o=(0,Ol.default)(r);switch(n){case"string":switch(o){case"string":return[r,t].filter(Boolean).join(" ");case"object":return jo({className:t,style:r});case"function":return function(i){for(var a=arguments.length,s=new Array(a>1?a-1:0),u=1;u<a;u++)s[u-1]=arguments[u];return jo({className:t})(r.apply(void 0,[i].concat(s)))}}break;case"object":switch(o){case"string":return jo({className:r,style:t});case"object":return pt(pt({},r),t);case"function":return function(i){for(var a=arguments.length,s=new Array(a>1?a-1:0),u=1;u<a;u++)s[u-1]=arguments[u];return jo({style:t})(r.apply(void 0,[i].concat(s)))}}break;case"function":switch(o){case"string":return function(i){for(var a=arguments.length,s=new Array(a>1?a-1:0),u=1;u<a;u++)s[u-1]=arguments[u];return t.apply(void 0,[jo(i)({className:r})].concat(s))};case"object":return function(i){for(var a=arguments.length,s=new Array(a>1?a-1:0),u=1;u<a;u++)s[u-1]=arguments[u];return t.apply(void 0,[jo(i)({style:r})].concat(s))};case"function":return function(i){for(var a=arguments.length,s=new Array(a>1?a-1:0),u=1;u<a;u++)s[u-1]=arguments[u];return t.apply(void 0,[r.apply(void 0,[i].concat(s))].concat(s))}}}},_U=function(t,r){var n=Object.keys(r);for(var o in t)n.indexOf(o)===-1&&n.push(o);return n.reduce(function(i,a){return i[a]=kU(t[a],r[a]),i},{})},IU=function(t,r){for(var n=arguments.length,o=new Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];if(r===null)return t;Array.isArray(r)||(r=[r]);var a=r.map(function(u){return t[u]}).filter(Boolean),s=a.reduce(function(u,l){return typeof l=="string"?u.className=[u.className,l].filter(Boolean).join(" "):(0,Ol.default)(l)==="object"?u.style=pt(pt({},u.style),l):typeof l=="function"&&(u=pt(pt({},u),l.apply(void 0,[u].concat(o)))),u},{className:"",style:{}});return s.className||delete s.className,Object.keys(s.style).length===0&&delete s.style,s},yh=function(t){return Object.keys(t).reduce(function(r,n){return r[n]=/^base/.test(n)?SU(t[n]):n==="scheme"?t[n]+":inverted":t[n],r},{})},aD=(0,gh.default)(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=t.defaultBase16,o=n===void 0?iD:n,i=t.base16Themes,a=i===void 0?null:i,s=AU(r,a);s&&(r=pt(pt({},s),r));for(var u=nD.reduce(function(y,v){return y[v]=r[v]||o[v],y},{}),l=Object.keys(r).reduce(function(y,v){return nD.indexOf(v)===-1&&(y[v]=r[v]),y},{}),c=e(u),f=_U(l,c),p=arguments.length,d=new Array(p>3?p-3:0),h=3;h<p;h++)d[h-3]=arguments[h];return(0,gh.default)(IU,2).apply(void 0,[f].concat(d))},3),sD=function(t){return!!t.extend},AU=function(t,r){if(t&&sD(t)&&t.extend&&(t=t.extend),typeof t=="string"){var n=t.split(":"),o=(0,vh.default)(n,2),i=o[0],a=o[1];r?t=r[i]:t=bh[i],a==="inverted"&&(t=yh(t))}return t&&Object.prototype.hasOwnProperty.call(t,"base00")?t:void 0},uD=function(t){return typeof t=="string"?"".concat(t,":inverted"):t&&sD(t)&&t.extend?typeof t.extend=="string"?pt(pt({},t),{},{extend:"".concat(t.extend,":inverted")}):pt(pt({},t),{},{extend:yh(t.extend)}):t&&yh(t)};var cD={scheme:"solarized",author:"ethan schoonover (http://ethanschoonover.com/solarized)",base00:"#002b36",base01:"#073642",base02:"#586e75",base03:"#657b83",base04:"#839496",base05:"#93a1a1",base06:"#eee8d5",base07:"#fdf6e3",base08:"#dc322f",base09:"#cb4b16",base0A:"#b58900",base0B:"#859900",base0C:"#2aa198",base0D:"#268bd2",base0E:"#6c71c4",base0F:"#d33682"};var CU=e=>({BACKGROUND_COLOR:e.base00,TEXT_COLOR:e.base07,STRING_COLOR:e.base0B,DATE_COLOR:e.base0B,NUMBER_COLOR:e.base09,BOOLEAN_COLOR:e.base09,NULL_COLOR:e.base08,UNDEFINED_COLOR:e.base08,FUNCTION_COLOR:e.base08,SYMBOL_COLOR:e.base08,LABEL_COLOR:e.base0D,ARROW_COLOR:e.base0D,ITEM_STRING_COLOR:e.base0B,ITEM_STRING_EXPANDED_COLOR:e.base03}),TU=e=>({String:e.STRING_COLOR,Date:e.DATE_COLOR,Number:e.NUMBER_COLOR,Boolean:e.BOOLEAN_COLOR,Null:e.NULL_COLOR,Undefined:e.UNDEFINED_COLOR,Function:e.FUNCTION_COLOR,Symbol:e.SYMBOL_COLOR}),OU=e=>{let t=CU(e);return{tree:{border:0,padding:0,marginTop:"0.5em",marginBottom:"0.5em",marginLeft:"0.125em",marginRight:0,listStyle:"none",MozUserSelect:"none",WebkitUserSelect:"none",backgroundColor:t.BACKGROUND_COLOR},value:(r,n,o)=>{let{style:i}=r;return{style:{...i,paddingTop:"0.25em",paddingRight:0,marginLeft:"0.875em",WebkitUserSelect:"text",MozUserSelect:"text",wordWrap:"break-word",paddingLeft:o.length>1?"2.125em":"1.25em",textIndent:"-0.5em",wordBreak:"break-all"}}},label:{display:"inline-block",color:t.LABEL_COLOR},valueLabel:{margin:"0 0.5em 0 0"},valueText:(r,n)=>{let{style:o}=r;return{style:{...o,color:TU(t)[n]}}},itemRange:(r,n)=>({style:{paddingTop:n?0:"0.25em",cursor:"pointer",color:t.LABEL_COLOR}}),arrow:(r,n,o)=>{let{style:i}=r;return{style:{...i,marginLeft:0,transition:"150ms",WebkitTransition:"150ms",MozTransition:"150ms",WebkitTransform:o?"rotateZ(90deg)":"rotateZ(0deg)",MozTransform:o?"rotateZ(90deg)":"rotateZ(0deg)",transform:o?"rotateZ(90deg)":"rotateZ(0deg)",transformOrigin:"45% 50%",WebkitTransformOrigin:"45% 50%",MozTransformOrigin:"45% 50%",position:"relative",lineHeight:"1.1em",fontSize:"0.75em"}}},arrowContainer:(r,n)=>{let{style:o}=r;return{style:{...o,display:"inline-block",paddingRight:"0.5em",paddingLeft:n==="double"?"1em":0,cursor:"pointer"}}},arrowSign:{color:t.ARROW_COLOR},arrowSignInner:{position:"absolute",top:0,left:"-0.4em"},nestedNode:(r,n,o,i,a)=>{let{style:s}=r;return{style:{...s,position:"relative",paddingTop:"0.25em",marginLeft:n.length>1?"0.875em":0,paddingLeft:a?0:"1.125em"}}},rootNode:{padding:0,margin:0},nestedNodeLabel:(r,n,o,i,a)=>{let{style:s}=r;return{style:{...s,margin:0,padding:0,WebkitUserSelect:a?"inherit":"text",MozUserSelect:a?"inherit":"text",cursor:a?"pointer":"default"}}},nestedNodeItemString:(r,n,o,i)=>{let{style:a}=r;return{style:{...a,paddingLeft:"0.5em",cursor:"default",color:i?t.ITEM_STRING_EXPANDED_COLOR:t.ITEM_STRING_COLOR}}},nestedNodeItemType:{marginLeft:"0.3em",marginRight:"0.3em"},nestedNodeChildren:(r,n,o)=>{let{style:i}=r;return{style:{...i,padding:0,margin:0,listStyle:"none",display:o?"block":"none"}}},rootNodeChildren:{padding:0,margin:0,listStyle:"none"}}},DU=aD(OU,{defaultBase16:cD}),lD=DU;var fD=e=>e,FU=(e,t,r)=>r===0,PU=(e,t,r,n)=>$.createElement("span",null,r," ",n),NU=e=>{let[t]=e;return $.createElement("span",null,t,":")},RU=()=>!1;function pD(e){let{data:t,theme:r,invertTheme:n,keyPath:o=["root"],labelRenderer:i=NU,valueRenderer:a=fD,shouldExpandNodeInitially:s=FU,hideRoot:u=!1,getItemString:l=PU,postprocessValue:c=fD,isCustomNode:f=RU,collectionLimit:p=50,sortObjectKeys:d=!1}=e,h=ie(()=>lD(n?uD(r):r),[r,n]);return $.createElement("ul",h("tree"),$.createElement($a,{keyPath:u?[]:o,value:c(t),isCustomNode:f,styling:h,labelRenderer:i,valueRenderer:a,shouldExpandNodeInitially:s,hideRoot:u,getItemString:l,postprocessValue:c,collectionLimit:p,sortObjectKeys:d}))}var dD=require("obsidian");var MU=()=>{let[e]=at("clipboard-copy");return m("span",{ref:e})},mD=(e,t,r,n,o)=>{if(o.length===1){let i=async a=>{a.preventDefault(),a.stopPropagation(),await navigator.clipboard.writeText("```json\n"+JSON.stringify(t,null,2)+"\n```"),new dD.Notice("Copied JSON code block to clipboard")};return m("span",{role:"button",tabIndex:0,onClick:i,onKeyDown:i,"aria-label":"Copy Item Details in JSON",children:[n," ",m(MU,{})]})}if(o[1]==="creators"&&o.length===3){let i=Zi(t);if(i)return m("span",{children:i})}if(o[1]==="tags"&&o.length===3){let i=t;return m("span",{children:['"',i.name,'"" (',bn[i.type],")"]})}if(o[0]==="sortIndex"&&o.length===2)return m("span",{children:["[",t.join(", "),"]"]});if(o.length===2&&Array.isArray(t)&&t.length===1){let i=JSON.stringify(t[0]);return m("span",{children:[r," ",i.length>100?i.slice(0,100)+"...":i]})}return m("span",{children:[r," ",n]})};var gD=require("obsidian");var yD=(e,t,r,n)=>{let o=e.length===1,i=e.slice(0,-1),a=hD(i);return m("span",{...o?void 0:{onContextMenu:l=>{let c=new gD.Menu().addItem(f=>f.setTitle("Copy Template").onClick(()=>{navigator.clipboard.writeText(`<%= ${a} %>`)}));n&&t!=="Array"&&c.addItem(f=>f.setTitle("Copy Template (using with)").onClick(()=>{let[p,...d]=i,h=typeof p=="string"&&vD.test(p)?p:`'${p}'`,y=hD(d);navigator.clipboard.writeText(`<% { const { ${h}: $it } = ${y}; %>
  <%= $it %>
<% } %>`)})),t==="Array"&&c.addItem(f=>f.setTitle("Copy Template (using for-of loop)").onClick(()=>{navigator.clipboard.writeText(`<% for (const $it of ${a}) { %>
  <%= $it %>
<% } %>`)})).addItem(f=>f.setTitle("Copy Template (using forEach)").onClick(()=>{navigator.clipboard.writeText(`<% ${a}.forEach(($it, i) => { %>
  <%= $it %>
<% }) %>`)})).addItem(f=>f.setTitle("Copy Template (pick first element)").onClick(()=>{navigator.clipboard.writeText(`<%= ${a}.first() %>`)})).addItem(f=>f.setTitle("Copy Template (pick last element)").onClick(()=>{navigator.clipboard.writeText(`<%= ${a}.last() %>`)})),Lp.has(i[0])||c.addItem(f=>f.setTitle("Copy Template (render when present)").onClick(()=>{navigator.clipboard.writeText(`<% if (${a}) { %>
  <%= ${a} %>
<% } %>`)})),l.preventDefault(),c.showAtMouseEvent(l.nativeEvent)},style:{cursor:"context-menu"}},children:[e[0],": "]})},hD=e=>"it"+e.map(qU).reverse().join(""),vD=/^[$_\p{ID_Start}][$\u200c\u200d\p{ID_Continue}]*$/u,qU=e=>typeof e=="number"?`[${e}]`:vD.test(e)?`.${e}`:`[${JSON.stringify(e)}]`;var $U=new Set(["sortIndex"]),LU=new Set(["creators","tags"]),jU=new Set(["position"]),bD=(e,t,r)=>{let n=e[0];return $U.has(n)||LU.has(n)&&Array.isArray(t)&&t.length>6?!1:!!(jU.has(n)||r<1||r<2&&Array.isArray(t)&&t.length>1)};var BU=/^#(?:[\dA-F]{3}){1,2}$|^#(?:[\dA-F]{4}){1,2}$/i,zU=e=>{let t=e.charAt(0)==="#"?e.substring(1,7):e,r=parseInt(t.substring(0,2),16),n=parseInt(t.substring(2,4),16),o=parseInt(t.substring(4,6),16);return r*.299+n*.587+o*.114>186},wD=(e,t,...r)=>{if(typeof t=="string"&&BU.test(t))return m("span",{style:{backgroundColor:t,padding:"0 0.5em",color:zU(t)?"black":"white"},children:t});if(r[0]==="type"&&typeof t=="number"){let n="";if(r.length===2&&we[t]?n=we[t]:r.length===4&&typeof r[1]=="number"&&r[2]==="tags"&&bn[t]&&(n=bn[t]),n)return m(z,{children:[e," ",m("span",{children:["(",n,")"]})]})}return e};var xD=()=>document.body.classList.contains("theme-dark"),WU={scheme:"Solarized Light",author:"Ethan Schoonover (modified by aramisgithub)",base00:"transparent",base01:"#eee8d5",base02:"#93a1a1",base03:"#839496",base04:"#657b83",base05:"#586e75",base06:"#073642",base07:"#002b36",base08:"#dc322f",base09:"#cb4b16",base0A:"#b58900",base0B:"#859900",base0C:"#2aa198",base0D:"#268bd2",base0E:"#6c71c4",base0F:"#d33682"},UU={scheme:"Solarized Dark",author:"Ethan Schoonover (modified by aramisgithub)",base00:"transparent",base01:"#073642",base02:"#586e75",base03:"#657b83",base04:"#839496",base05:"#93a1a1",base06:"#eee8d5",base07:"#fdf6e3",base08:"#dc322f",base09:"#cb4b16",base0A:"#b58900",base0B:"#859900",base0C:"#2aa198",base0D:"#268bd2",base0E:"#6c71c4",base0F:"#d33682"};function wh({item:e,registerCssChange:t}){let[r,n]=q(()=>xD());return J(()=>t?.(()=>n(xD())),[t]),e?m(pD,{data:e,theme:r?UU:WU,invertTheme:!1,keyPath:["Zotero Item Data"],shouldExpandNodeInitially:bD,valueRenderer:wD,labelRenderer:yD,getItemString:mD}):m("div",{children:"No Details Available"})}var ED=require("obsidian");var Dl=e=>({plugin:e,sourcePath:""});function HU(){return _a((e,t)=>({preview:null,templateType:null,setTemplateType(r){e(n=>({...n,templateType:r||void 0}))},setPreview(r){e(({...n})=>({...n,preview:r??null}))},async setPreviewFromState(r,n){let o=t().preview;if(o?.docItem.itemID===r?.docItem&&o?.attachment?.itemID===r?.attachment&&o?.annot?.itemID===r?.annot)return!1;let i=n.database.settings.citationLibrary;if(!r.docItem)return console.error("TemplatePreview: no docItem provided"),!1;let[a]=await n.databaseAPI.getItems([[r.docItem,i]]);if(!a)return console.error("TemplatePreview: no docItem found for id "+r.docItem),!1;let s=await n.databaseAPI.getAttachments(r.docItem,i),u=s.find(p=>p.itemID===r.attachment)??null;r.attachment&&!u&&console.error("TemplatePreview: no attachment found for id "+r.attachment);let l=u?await n.databaseAPI.getAnnotations(u.itemID,i):[],c=l.find(p=>p.itemID===r.annot);r.annot&&!c&&console.error("TemplatePreview: no annotation found for id "+r.annot);let f=await n.databaseAPI.getTags([[r.docItem,i],...l.map(p=>[p.itemID,i])]);return e(()=>({preview:{docItem:a,allAttachments:s,annotations:l,attachment:u,tags:f,annot:l.find(p=>p.itemID===r.annot)}})),!0}}))}function SD(e,t){let r=null,n=null,o=null;return function(...i){if(r&&window.clearTimeout(r),n){o=i;return}r=window.setTimeout(()=>{r=null,n=e(...i).then(()=>{o?n=e(...o):n=null}).catch(a=>{console.error(a),n=null})},t)}}var Bo=class extends ED.FileView{constructor(r,n){super(r);this.plugin=n;this.store=HU()}store;canAcceptExtension(r){return r==="md"}getTemplateType(r){if(!r)return!1;let n=Ze(r.path,this.plugin.settings.template.folder);return n?.type!=="ejectable"?!1:n.name}setTemplateType(r){this.store.getState().setTemplateType(r)}async onLoadFile(r){await super.onLoadFile(r),this.setTemplateType(this.getTemplateType(r))}getState(){let r=super.getState(),{preview:n}=this.store.getState(),o;if(!n)o={preview:null};else{let{docItem:i,attachment:a,annot:s}=n;o={preview:{docItem:i.itemID,attachment:a?.itemID,annot:s?.itemID}}}return{...r,...o}}async setState(r,n){if(await super.setState(r,n),r.preview===void 0)return;let o=this.store.getState();r.preview===null?o.setPreview(null):await o.setPreviewFromState(r.preview,this.plugin)}setPreview(r){this.store.getState().setPreview(r)}async onOpen(){await super.onOpen();let[r,n]=so(this.plugin);n&&this.register(n),await r}};var zo="zotero-item-details",kD=({templateType:e})=>e==="annotation"?e:"note",Fl=class extends Bo{getViewType(){return zo}getDisplayText(){let t=this.store.getState();return t.templateType?"Zotero Item Details: "+kD(t):"Zotero Item Details"}async onOpen(){await super.onOpen();let[t,r]=so(this.plugin);r&&this.register(r),await t,$.render(m(VU,{store:this.store,plugin:this.plugin}),this.contentEl)}async onClose(){$.unmountComponentAtNode(this.contentEl),await super.onClose()}};function VU({store:e,plugin:t}){let r=lt(e,kD),n=lt(e,i=>i.preview),o=ie(()=>{let i=Dl(t);if(!n)return null;switch(r){case"note":{let a=ct(n,i);return a.docItem.annotations=void 0,a.docItem}case"annotation":{let a=ct(n,i),s=n.annot?a.annotations.find(u=>u.itemID===n.annot?.itemID):a.annotations[0];return s?(s.docItem=void 0,s):null}default:throw new Error("Unsupported template type")}},[t,n,r]);return o?m(wh,{item:o,registerCssChange:i=>(t.app.workspace.on("css-change",i),()=>t.app.workspace.off("css-change",i))}):m("div",{})}var _D=ae(We(),1),Rt=require("obsidian");var Wo="zotero-template-preview",Pl=class extends Bo{getViewType(){return Wo}getDisplayText(){let t=this.store.getState().templateType;return t?"Zotero Template Preview: "+t:"Zotero Template Preview"}async switchToTemplate(t){if(!this.leaf.group)return!1;let r=ID(this.leaf.group,this.plugin);if(!r)return!1;let n=Eh(t,this.plugin);if(!n||!(n instanceof Rt.TFile)){new Rt.Notice("Template file not found: "+t);return}return await r.openFile(n),!0}onload(){let t={annots:this.addAction("list-ordered","Open Template for Annotations",async()=>await this.switchToTemplate("annots")||new Rt.Notice("Cannot switch to template")),note:this.addAction("file-input","Open Note Template",async()=>await this.switchToTemplate("note")||new Rt.Notice("Cannot switch to template")),annotation:this.addAction("highlighter","Open Template for Single Annotation",async()=>await this.switchToTemplate("annotation")||new Rt.Notice("Cannot switch to template")),field:this.addAction("info","Open Template for Note Properties",async()=>await this.switchToTemplate("field")||new Rt.Notice("Cannot switch to template"))};Object.values(t).forEach(r=>r.hide()),this.register(this.store.subscribe((r,n)=>{if(r.templateType!==n.templateType)for(let[o,i]of Object.entries(t))i.toggle(o!==r.templateType)})),this.registerEvent(this.app.vault.on("zotero:template-updated",r=>{let n=this.getTemplateType(this.file);n&&r===n&&(this.setTemplateType(n),this.requestRender())}))}content=null;async render(){let{preview:t,templateType:r}=this.store.getState();if(!r){this.contentEl.empty(),this.contentEl.setText("No template preview available");return}if(!t){this.contentEl.empty(),this.contentEl.setText("No preview data available");return}let n="",o=Dl(this.plugin),i=this.plugin.templateRenderer;switch(r){case"annotation":{let u=t.annot??t.annotations[0];if(!u){this.contentEl.setText("No annotation data available");return}n=i.renderAnnot(u,t,o);break}case"annots":n=i.renderAnnots(t,o);break;case"note":n=i.renderNote(t,o);break;case"field":n=i.renderFrontmatter(t,o);break;default:(0,_D.assertNever)(r)}if(n===this.content?.markdown)return;this.content?.unload(),this.contentEl.empty();let a=await(0,Rt.loadPrism)(),s=a.highlight(n,a.languages.markdown,"markdown");this.content=new xh(n),this.contentEl.createEl("pre").createEl("code",{cls:"language-markdown"}).innerHTML=s}requestRender=SD(()=>this.render(),200);async onOpen(){await super.onOpen(),this.register(this.store.subscribe((t,r)=>{t.templateType!==r.templateType?this.requestRender():t.preview!==r.preview&&this.requestRender()}))}},xh=class extends Rt.Component{constructor(r){super();this.markdown=r}};async function zn(e,t,r){let{workspace:n}=r.app,o=Eh(e,r);if(!o||!(o instanceof Bn.TFile)){new Bn.Notice("Template file not found: "+e);return}let i=n.getLeavesOfType("markdown").filter(l=>{let c=l.view;return c.file?Ze(c.file.path,r.settings.template.folder)?.type==="ejectable"&&l.getRoot().type==="floating":!1});if(i.length>0){let l=i[0];if(await l.openFile(o),!l.group)return;let c=n.getGroupLeaves(l.group);for(let f of c){let p=f.view.getViewType();if(p===Wo||p===zo){let d=f.view.getState();await f.view.setState({...d,preview:t},{})}}return}let a=n.openPopoutLeaf(),s=n.createLeafBySplit(a,"vertical"),u=n.createLeafBySplit(s,"vertical");await Promise.all([a.openFile(o,{active:!0}),s.setViewState({type:Wo,state:{file:o.path,preview:t},group:a}),u.setViewState({type:zo,state:{file:o.path,preview:t},group:a})])}function Eh(e,t){let r=wn(e,t.settings.template.folder),n=t.app.vault.getAbstractFileByPath(r);return n instanceof Bn.TFile?n:null}function ID(e,t){return t.app.workspace.getGroupLeaves(e).find(n=>n.view instanceof Bn.MarkdownView&&n.view.file&&Ze(n.view.file.path,t.settings.template.folder)?.type==="ejectable")}var AD=e=>(t,r,n)=>{let{imgCacheImporter:o}=e,i=String(t.timeStamp),a="drag-source";t.dataTransfer.setData("text/plain",r()),t.dataTransfer.setData(a,i),t.dataTransfer.dropEffect="copy";let s=t.target.win,{workspace:u}=e.app,l=p=>{p.dataTransfer?.getData(a)===i&&o.flush(),u.off("editor-drop",l),s.removeEventListener("dragend",c)},c=()=>{o.cancel(),u.off("editor-drop",l)},f=u.on("editor-drop",p=>{p.dataTransfer?.getData("drag-source")===i&&o.flush(),u.offref(f)});s.addEventListener("dragend",c,{once:!0}),n&&t.dataTransfer.setDragImage(n,0,0)},CD=e=>({storeSelector:t=>jt(t,["doc","attachment","allAttachments","tags","annotations"]),get:(t,{allAttachments:r,attachment:n,doc:o,tags:i,annotations:a})=>!r||!n||!o||!i[t.itemID]||!a?null:()=>{let s=e.app.workspace.getActiveFile(),u=s&&Ve(s)?s.path:null;return e.templateRenderer.renderAnnot(t,{tags:i,attachment:n,allAttachments:r,annotations:a,docItem:o.docItem},{plugin:e,sourcePath:u,merge:!1})}});var Uo=require("obsidian");var TD=e=>(t,r)=>{let n=new Uo.Menu;if(n.addItem(o=>o.setTitle("Jump to Note").setIcon("links-going-out").onClick(GU(r,e))),e.app.workspace.trigger("zotero:open-annot-menu",r,n),t.nativeEvent instanceof MouseEvent)n.showAtMouseEvent(t.nativeEvent);else{let o=t.currentTarget.getBoundingClientRect();n.showAtPosition({x:o.left,y:o.bottom})}},GU=(e,t)=>async()=>{let r=t.app.workspace.getActiveFile(),n=r&&Ve(r)?r.path:void 0,o=t.plugin.noteIndex.getBlocksFor({item:e,file:n}).shift();if(!o){new Uo.Notice("No embed for this annotation in current note");return}let i=o.blocks.sort((p,d)=>{let h=p.start.offset-d.start.offset;return h!==0?h:p.end.offset-d.end.offset})[0];await sleep(10);let{leaf:a}=t,{workspace:s,vault:u}=t.app,l;if(a.group)l=s.getGroupLeaves(a.group);else{l=[];let p=s.getActiveFileView();p&&l.push(p.leaf)}let c=!1,f=i.end.line+1;for(let p of l)p&&p.view instanceof Uo.MarkdownView&&p.view.file?.path===o.file&&(p.view.setEphemeralState({line:f}),c=!0);if(!c){let p=u.getAbstractFileByPath(o.file);if(!p||!Ve(p))throw new Error("File from block info not found: "+o.file);s.getLeaf().openFile(p,{eState:{line:f}})}};var OD=(e,t)=>t.length===0?null:e?t.find(r=>r.itemID===e)??t[0]:t[0],Nl=()=>({doc:null,allAttachments:null,attachmentID:null,annotations:null,attachment:null,tags:{}}),KU=()=>({follow:"zt-reader",doc:null,allAttachments:null,attachmentID:null,annotations:null,attachment:null,tags:{}}),ts=e=>e.databaseAPI,DD=e=>_a((t,r)=>{let n=async(a,s)=>{let u=(await ts(e).getAttachments(a,s)).filter(l=>Gi(l)&&l.path?.endsWith(".pdf"));t(l=>({...l,allAttachments:u,attachment:OD(l.attachmentID,u)}))},o=async(a,s)=>{let u=await ts(e).getTags([[a,s]]);return t(l=>({...l,tags:u})),u},i=async a=>{let{attachment:s}=r();if(!s)return;let u=await ts(e).getAnnotations(s.itemID,a),l=Gp(u);t(p=>({...p,annotations:Kp(l),attachment:s}));let c=await ts(e).getTags(u.map(p=>[p.itemID,a])),f=Jp(l,c);t(p=>({...p,tags:{...p.tags,...f}}))};return{...KU(),loadDocItem:async(a,s,u,l=!1)=>{if(a<0)return t(Nl());if(r().doc?.docItem.itemID===a&&!l)return;let c=(await ts(e).getItems([[a,u]]))[0];if(!c)return t(Nl());let f={docItem:c,lib:u};if(s<0){let p=$p(window.localStorage,c);t({...Nl(),doc:f,attachmentID:p})}else wo(window.localStorage,c,s),t({...Nl(),doc:f,attachmentID:s});await n(c.itemID,u),await o(c.itemID,u),await i(u)},refresh:async()=>{let{doc:a,attachment:s}=r();if(!a)return;let{docItem:u,lib:l}=a;await n(u.itemID,l),await o(u.itemID,l),s&&await i(l)},setActiveAtch:a=>{let{doc:s,allAttachments:u}=r();if(s)if(wo(window.localStorage,s.docItem,a),!u)t(l=>({...l,attachment:null,attachmentID:a}));else{let l=OD(a,u);t(c=>({...c,attachment:l,attachmentID:a}))}},setFollow:a=>t({follow:a})}});var ql="zotero-annotation-view",Rl=class extends Fc{constructor(r,n){super(r);this.plugin=n;this.store=DD(n)}update(){if(this.follow!=="ob-note")return;let r=this.plugin.settings.database.citationLibrary;(async()=>{if(this.file?.extension!=="md")return!1;let n=Tn(this.file,this.app.metadataCache),o=On(this.file,this.app.metadataCache);if(!n)return!1;let[i]=await this.plugin.databaseAPI.getItems([[n,r]]);return i?(this.setStatePrev(a=>({...a,follow:"ob-note",itemId:i.itemID,attachmentId:o?.[0]??void 0})),!0):!1})().then(n=>{n||this.setStatePrev(o=>({...o,follow:"ob-note",itemId:-1}))})}getViewType(){return ql}#e=null;onload(){super.onload(),this.contentEl.addClass("obzt");let r=null,n=!1,o=i=>{if(n)r=i;else{n=!0;let{itemId:a,attachmentId:s}=i;this.setStatePrev(u=>({...u,itemId:a,attachmentId:s})).then(()=>{if(n=!1,r===null)return;let u=r;r=null,o(u)})}};this.registerEvent(this.plugin.server.on("bg:notify",(i,a)=>{a.event==="reader/active"&&(this.#e=a.itemId,!(this.follow!=="zt-reader"||a.itemId<0||a.attachmentId<0)&&o(a))}))}getDisplayText(){return this.follow!=="ob-note"||!this.file?.basename?"Zotero Annotations":`Zotero Annotations for ${this.file.basename}`}getIcon(){return"highlighter"}get lib(){return this.plugin.settings.database.citationLibrary}store;get follow(){return this.store.getState().follow}getState(){let r=super.getState(),n=this.store.getState(),o={itemId:n.doc?.docItem.itemID??-1,attachmentId:n.attachment?.itemID??-1,follow:n.follow};return{...r&&typeof r=="object"?r:{},...o}}async setState(r,n){await super.setState(r,n??{});let{itemId:o=-1,attachmentId:i=-1,follow:a="zt-reader"}=r;this.store.getState().setFollow(a),await this.store.getState().loadDocItem(o,i,this.lib)}async setStatePrev(r){await this.setState(r(this.getState()))}onSetFollowZt=async()=>{this.setStatePrev(r=>({...r,follow:"zt-reader"})),await this.setStatePrev(({attachmentId:r,...n})=>({...n,follow:"zt-reader",...this.#e===null?{attachmentId:r}:{itemId:this.#e}}))};onSetFollowOb=()=>{this.store.getState().setFollow("ob-note"),this.update()};onSetFollowNull=async()=>{let{plugin:r}=this,n=await $c(r);if(!n)return;let{itemID:o}=n.value.item,i=r.settings.database.citationLibrary,a=await r.databaseAPI.getAttachments(o,i),s=await vr(a,this.app);s&&await this.setStatePrev(({attachmentId:u,...l})=>({...l,follow:null,itemId:o,attachmentId:s.itemID}))};getContext(){let r=this,{plugin:n,store:o,app:i}=r;return{store:o,registerDbUpdate(a){return i.vault.on("zotero:db-refresh",a),()=>i.vault.off("zotero:db-refresh",a)},refreshConn:async()=>{await n.dbWorker.refresh({task:"dbConn"})},getImgSrc:a=>{let s=$r(a,n.settings.database.zoteroDataDir);return JU(s)},onShowDetails:async(a,s)=>{let u=o.getState(),l=u.attachmentID??void 0;if(a==="doc-item")await zn("note",{docItem:s,attachment:l},n);else{let c=u.doc?.docItem.itemID;if(!c)throw new Error("Missing doc item when showing annotation details");await zn("annotation",{docItem:c,attachment:l,annot:s},n)}},onDragStart:AD(n),onMoreOptions:TD(r),annotRenderer:CD(n),onSetFollow(a){let s=new Ml.Menu,u=o.getState().follow;if(u!=="zt-reader"&&s.addItem(l=>l.setIcon("book").setTitle("Follow Active Literature in Zotero Reader").onClick(r.onSetFollowZt)),u!=="ob-note"&&s.addItem(l=>l.setIcon("file-edit").setTitle("Follow Active Literature Note").onClick(r.onSetFollowOb)),s.addItem(l=>l.setIcon("file-lock-2").setTitle("Link with Selected Literature").onClick(async()=>{a.target.blur(),await r.onSetFollowNull()})),a.nativeEvent instanceof MouseEvent)s.showAtMouseEvent(a.nativeEvent);else{let c=a.target.getBoundingClientRect();s.showAtPosition({x:c.x,y:c.y})}}}}async onOpen(){await super.onOpen();let[r,n]=so(this.plugin);n&&this.register(n),this.contentEl.empty(),this.contentEl.createDiv({cls:"pane-empty p-2",text:"Loading..."}),r.then(()=>{this.contentEl.empty(),$.render(m(Ur.Provider,{value:wC,children:m(De.Provider,{value:this.getContext(),children:m(Ca,{})})}),this.contentEl)}).catch(o=>{this.contentEl.empty(),console.error("Failed to load annot view: ",o),this.contentEl.createDiv({cls:"pane-empty p-2",text:"Failed to load, Check console for details"})}),this.registerEvent(this.plugin.server.on("bg:notify",(o,i)=>{if(i.event!=="reader/annot-select")return;let a=i.updates.filter(([,u])=>u).pop();if(!a)return;let[s]=a;this.highlightAnnot(s)}))}async onClose(){$.unmountComponentAtNode(this.contentEl),await super.onClose()}async highlightAnnot(r){let n=this.contentEl.querySelector(`.annot-preview[data-id="${r}"]`);n instanceof HTMLElement&&(n.addClass("select-flashing"),n.scrollIntoView({behavior:"smooth",block:"center"}),await sleep(1500),n.removeClass("select-flashing"))}};function JU(e){return(Ml.Platform.resourcePathPrefix??"app://local/")+(0,FD.pathToFileURL)(e).pathname.substring(1)+`?${Date.now()}`}var lr=require("obsidian");var $l=class extends fe{plugin=this.use(le);onload(){this.registerEvent(this.plugin.server.on("zotero/open",t=>this.onZtOpen(_u(t)))),this.registerEvent(this.plugin.server.on("zotero/export",t=>this.onZtExport(_u(t)))),this.registerEvent(this.plugin.server.on("zotero/update",t=>this.onZtExport(_u(t))))}async onZtOpen(t){if(t.type==="annotation"){new lr.Notice("Not implemented yet");return}if(t.items.length<1){new lr.Notice("No items to open");return}await this.plugin.noteFeatures.openNote(t.items[0])}async onZtUpdate(t){if(t.type==="annotation"){new lr.Notice("Single annotation update not yet supported");return}if(t.items.length<1){new lr.Notice("No items to open");return}if(t.items.length>1){new lr.Notice("Multiple literature note update not yet supported");return}await this.plugin.noteFeatures.updateNoteFromId(t.items[0])}async onZtExport(t){if(t.type==="annotation"){new lr.Notice("Not implemented yet");return}t.items.length<1?new lr.Notice("No items to open"):t.items.length>1&&new lr.Notice("Multiple items not yet supported");let{libraryID:r,id:n}=t.items[0],[o]=await this.plugin.databaseAPI.getItems([[n,r]]);if(!o){new lr.Notice("Item not found: "+n);return}let i=await this.plugin.noteFeatures.createNoteForDocItemFull(o);await this.plugin.app.workspace.openLinkText(i,"",!1,{active:!0})}};var PD=require("obsidian");var ZU=[{command:"\u2191\u2193",purpose:"to navigate"},{command:"\u21B5",purpose:"to open/create literature note"},{command:"esc",purpose:"to dismiss"}],Sh=class extends Mn{constructor(r){super(r);this.plugin=r;this.setInstructions(ZU)}};async function kh(e){let t=await Qi(new Sh(e));if(!t)return!1;let{value:{item:r},evt:n}=t;if(await e.noteFeatures.openNote(r,!0))return!0;let o=await e.noteFeatures.createNoteForDocItemFull(r);return await e.app.workspace.openLinkText(o,"",PD.Keymap.isModEvent(n),{active:!0}),!0}var _h=class extends fe{plugin=this.use(le);protocol=this.use($l);onload(){let{plugin:t}=this,{app:r}=t;t.addCommand({id:"note-quick-switcher",name:"Open quick switcher for literature notes",callback:()=>kh(t)}),t.registerView(ql,o=>new Rl(o,t)),t.registerView(Wo,o=>new Pl(o,t)),t.registerView(zo,o=>new Fl(o,t)),t.registerEvent(t.app.workspace.on("file-menu",(o,i)=>{let a=Ze(i.path,t.settings.template.folder);a?.type==="ejectable"&&o.addItem(s=>s.setIcon("edit").setTitle("Open Template Preview").onClick(()=>{zn(a.name,null,t)}))})),t.addCommand({id:"zotero-annot-view",name:"Open Zotero Annotation View in Side Panel",callback:()=>{r.workspace.ensureSideLeaf(ql,"right",{active:!0,state:{file:r.workspace.getActiveFile()?.path}})}}),t.addCommand({id:"insert-markdown-citation",name:"Insert Markdown citation",editorCallback:(o,i)=>Ym(o,i.file,t)}),t.registerEditorSuggest(new Na(t));let n=async(o,i)=>{let a=t.settings.database.citationLibrary,s=Tn(o,r.metadataCache);if(!s)return new Cr.Notice("Cannot get zotero item key from file name"),!1;let[u]=await t.databaseAPI.getItems([[s,a]]);if(!u)return new Cr.Notice("Cannot find zotero item with key "+s),!1;await this.updateNote(u,i)};t.addCommand({id:"update-literature-note",name:"Update Literature Note",editorCheckCallback(o,i,a){let s=a.file&&ka(a.file,r);if(o)return!!s;s&&n(a.file)}}),t.addCommand({id:"overwrite-update-literature-note",name:"Force Update Literature Note by Overwriting",editorCheckCallback(o,i,a){let s=a.file&&ka(a.file,r);if(o)return!!s;s&&n(a.file,!0)}}),t.registerEvent(t.app.workspace.on("file-menu",(o,i)=>{ka(i,r)&&(o.addItem(a=>a.setTitle("Update Literature Note").setIcon("sync").onClick(()=>n(i))),t.settings.template.updateOverwrite||o.addItem(a=>a.setTitle("Force Update by Overwriting").setIcon("sync").onClick(()=>n(i,!0))))})),t.registerEvent(t.app.workspace.on("file-menu",(o,i)=>{let a=Ze(i.path,t.settings.template.folder);a?.type==="ejectable"&&o.addItem(s=>s.setTitle("Reset to default").setIcon("reset").onClick(async()=>{vc(r).confirm("Reset template to default?")&&await t.app.vault.modify(i,Ge.Ejectable[a.name])}))}))}async openNote(t,r=!1){let{workspace:n}=this.plugin.app,{noteIndex:o}=this.plugin,i=o.getNotesFor(t);if(!i.length)return!r&&new Cr.Notice(`No literature note found for zotero item with key ${t.key}`),!1;let a=i.sort().shift();return await n.openLinkText(a,"",!1,{active:!0}),!0}async createNoteForDocItem(t,r){let{noteIndex:n}=this.plugin,o=n.getNotesFor(t);if(o.length)throw new Ll(o,t.key);let{vault:i,fileManager:a}=this.plugin.app,{literatureNoteFolder:s}=this.plugin.settings.noteIndex,u=this.plugin.templateRenderer,l=(0,ND.join)(s,r.filename(u,{plugin:this.plugin})),c=i.getAbstractFileByPath(l);if(c&&Tn(c,this.plugin.app.metadataCache))throw new Ll([l],t.key);return await a.createNewMarkdownFile(i.getRoot(),l,r.note(u,{plugin:this.plugin,sourcePath:l}))}async createNoteForDocItemFull(t){let r=this.plugin.database.settings.citationLibrary,n=await this.plugin.databaseAPI.getAttachments(t.itemID,r),o=await vr(n,this.plugin.app);o&&xo(o,t);let i=await Pa(t,{all:n,selected:o?[o]:[]},this.plugin),a=Object.values(i)[0];return(await this.createNoteForDocItem(t,{note:(u,l)=>u.renderNote(a,l),filename:(u,l)=>u.renderFilename(a,l)})).path}async updateNoteFromId(t){let{noteIndex:r,databaseAPI:n}=this.plugin;if(!r.getNotesFor(t).length){new Cr.Notice(`No literature note found for zotero item with key ${t.key}`);return}let[i]=await n.getItems([[t.key,t.libraryID]]);if(!i){new Cr.Notice(`Cannot find zotero item with key ${t.key}`);return}await this.updateNote(i)}async updateNote(t,r){let n=await SC(t,this.plugin,r);n?n.addedAnnots>0||n.updatedAnnots>0?new Cr.Notice(`Affected ${n.notes} notes, annotations: ${n.addedAnnots} added, ${n.updatedAnnots} updated`):new Cr.Notice(`Affected ${n.notes} notes, no annotation updated`):new Cr.Notice("No note found for this literature")}},RD=_h,Ll=class extends Error{constructor(r,n){super(`Note linked to ${n} already exists: ${r.join(",")}`);this.targets=r;this.key=n;this.name="NoteExistsError"}};var qD=ae(np(),1);var Bl=require("obsidian");var MD='"use strict";var Jn=Object.create;var Ge=Object.defineProperty,Yn=Object.defineProperties,Xn=Object.getOwnPropertyDescriptor,ei=Object.getOwnPropertyDescriptors,ri=Object.getOwnPropertyNames,ct=Object.getOwnPropertySymbols,ti=Object.getPrototypeOf,ft=Object.prototype.hasOwnProperty,ni=Object.prototype.propertyIsEnumerable;var pt=(e,r,t)=>r in e?Ge(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,Ee=(e,r)=>{for(var t in r||(r={}))ft.call(r,t)&&pt(e,t,r[t]);if(ct)for(var t of ct(r))ni.call(r,t)&&pt(e,t,r[t]);return e},Se=(e,r)=>Yn(e,ei(r));var fe=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),ht=(e,r)=>{for(var t in r)Ge(e,t,{get:r[t],enumerable:!0})},ii=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let i of ri(r))!ft.call(e,i)&&i!==t&&Ge(e,i,{get:()=>r[i],enumerable:!(n=Xn(r,i))||n.enumerable});return e};var he=(e,r,t)=>(t=e!=null?Jn(ti(e)):{},ii(r||!e||!e.__esModule?Ge(t,"default",{value:e,enumerable:!0}):t,e));var mt=fe((exports,module)=>{(function(r,t){typeof exports=="object"&&typeof module=="object"?module.exports=t():typeof define=="function"&&define.amd?define("workerpool",[],t):typeof exports=="object"?exports.workerpool=t():r.workerpool=t()})(typeof self!="undefined"?self:exports,function(){return function(){var __webpack_modules__={162:function(e,r,t){"use strict";t.r(r),t.d(r,{IFrameWorker:function(){return i}});function n(){let o=document.createElement("iframe");return o.width=o.height=o.frameBorder="0",o.classList.add("iframe-worker"),o.style.display="contents",o}class i{constructor(a,u){if(this.scriptText=a,this.onerror=null,this.onmessage=null,this.onmessageerror=null,this.handleMessage=f=>{f.source===this.worker&&(f.stopImmediatePropagation(),this.dispatchEvent(new MessageEvent("message",{data:f.data})),this.onmessage&&this.onmessage(f))},this.handleError=(f,l,E,g,h)=>{if(l===this.scriptText.toString()){let m=new ErrorEvent("error",{message:f,filename:l,lineno:E,colno:g,error:h});this.dispatchEvent(m),this.onerror&&this.onerror(m)}},typeof u!="undefined")throw new TypeError("Options are not supported for iframe workers");let s=new EventTarget;this.addEventListener=s.addEventListener.bind(s),this.removeEventListener=s.removeEventListener.bind(s),this.dispatchEvent=s.dispatchEvent.bind(s),document.body.appendChild(this.iframe=n()),this.worker.document.open(),this.worker.document.write(`<html><body><script>window.postMessage=\n(message, origin) => {\n  parent.postMessage(message, origin || "*")\n};window.importScripts=\n(...urls) => urls.reduce((promise, url) => (\n  promise.then(() => new Promise(resolve => {\n    const script = document.createElement("script")\n    script.src = url\n    script.addEventListener("load", () => resolve())\n    document.body.appendChild(script)\n  }))\n), Promise.resolve());addEventListener("error",ev=>{parent.dispatchEvent(new ErrorEvent("error",{filename:"${a.substring(0,50)}",error:ev.error}))})</script><script type="module">${a}</script></body></html>`),this.worker.document.close(),window.addEventListener("message",this.handleMessage),window.onerror=this.handleError,this.ready=new Promise((f,l)=>{this.worker.onload=f,this.worker.onerror=l})}terminate(){document.body.removeChild(this.iframe),window.removeEventListener("message",this.handleMessage),window.onerror=null}postMessage(a){(async()=>{try{await this.ready}catch(u){}finally{this.worker.dispatchEvent(new MessageEvent("message",{data:a}))}})()}get worker(){return this.iframe.contentWindow}}},799:function(e,r,t){var n=t(446),i=t(518),o=t(722),a=t(393),u=new a;function s(h,m){typeof h=="string"?this.script=h||null:(this.script=null,m=h),this.workers=[],this.tasks=[],m=m||{},this.name=m.name,this.forkArgs=Object.freeze(m.forkArgs||[]),this.forkOpts=Object.freeze(m.forkOpts||{}),this.debugPortStart=m.debugPortStart||43210,this.nodeWorker=m.nodeWorker,this.workerType=m.workerType||m.nodeWorker||"auto",this.maxQueueSize=m.maxQueueSize||1/0,this.onCreateWorker=m.onCreateWorker||function(){return null},this.onTerminateWorker=m.onTerminateWorker||function(){return null},m&&"maxWorkers"in m?(f(m.maxWorkers),this.maxWorkers=m.maxWorkers):this.maxWorkers=Math.max((o.cpus||4)-1,1),m&&"minWorkers"in m&&(m.minWorkers==="max"?this.minWorkers=this.maxWorkers:(l(m.minWorkers),this.minWorkers=m.minWorkers,this.maxWorkers=Math.max(this.minWorkers,this.maxWorkers)),this._ensureMinWorkers()),this._boundNext=this._next.bind(this),this.workerType==="thread"&&i.ensureWorkerThreads()}s.prototype.exec=function(h,m,d){if(m&&!Array.isArray(m))throw new TypeError(\'Array expected as argument "params"\');if(typeof h=="string"){var b=n.defer();if(this.tasks.length>=this.maxQueueSize)throw new Error("Max queue size of "+this.maxQueueSize+" reached");var x=this.tasks,q={method:h,params:m,resolver:b,timeout:null,options:d};x.push(q);var C=b.promise.timeout;return b.promise.timeout=function(I){return x.indexOf(q)!==-1?(q.timeout=I,b.promise):C.call(b.promise,I)},this._next(),b.promise}else{if(typeof h=="function")return this.exec("run",[String(h),m]);throw new TypeError(\'Function or string expected as argument "method"\')}},s.prototype.proxy=function(){if(arguments.length>0)throw new Error("No arguments expected");var h=this;return this.exec("methods").then(function(m){var d={};return m.forEach(function(b){d[b]=function(){return h.exec(b,Array.prototype.slice.call(arguments))}}),d})},s.prototype._next=function(){if(this.tasks.length>0){var h=this._getWorker();if(h){var m=this,d=this.tasks.shift();if(d.resolver.promise.pending){var b=h.exec(d.method,d.params,d.resolver,d.options).then(m._boundNext).catch(function(){if(h.terminated)return m._removeWorker(h)}).then(function(){m._next()});typeof d.timeout=="number"&&b.timeout(d.timeout)}else m._next()}}},s.prototype._getWorker=function(){for(var h=this.workers,m=0;m<h.length;m++){var d=h[m];if(d.busy()===!1)return d}return h.length<this.maxWorkers?(d=this._createWorkerHandler(),h.push(d),d):null},s.prototype._removeWorker=function(h){var m=this;return u.releasePort(h.debugPort),this._removeWorkerFromList(h),this._ensureMinWorkers(),new n(function(d,b){h.terminate(!1,function(x){m.onTerminateWorker({forkArgs:h.forkArgs,forkOpts:h.forkOpts,script:h.script}),x?b(x):d(h)})})},s.prototype._removeWorkerFromList=function(h){var m=this.workers.indexOf(h);m!==-1&&this.workers.splice(m,1)},s.prototype.terminate=function(h,m){var d=this;this.tasks.forEach(function(L){L.resolver.reject(new Error("Pool terminated"))}),this.tasks.length=0;var b=function(I){this._removeWorkerFromList(I)},x=b.bind(this),q=[],C=this.workers.slice();return C.forEach(function(L){var I=L.terminateAndNotify(h,m).then(x).always(function(){d.onTerminateWorker({forkArgs:L.forkArgs,forkOpts:L.forkOpts,script:L.script})});q.push(I)}),n.all(q)},s.prototype.stats=function(){var h=this.workers.length,m=this.workers.filter(function(d){return d.busy()}).length;return{totalWorkers:h,busyWorkers:m,idleWorkers:h-m,pendingTasks:this.tasks.length,activeTasks:m}},s.prototype._ensureMinWorkers=function(){if(this.minWorkers)for(var h=this.workers.length;h<this.minWorkers;h++)this.workers.push(this._createWorkerHandler())},s.prototype._createWorkerHandler=function(){var h=this.onCreateWorker({forkArgs:this.forkArgs,forkOpts:this.forkOpts,script:this.script})||{};return new i(h.script||this.script,{forkArgs:h.forkArgs||this.forkArgs,forkOpts:h.forkOpts||this.forkOpts,debugPort:u.nextAvailableStartingAt(this.debugPortStart),workerType:this.workerType,name:this.name})};function f(h){if(!E(h)||!g(h)||h<1)throw new TypeError("Option maxWorkers must be an integer number >= 1")}function l(h){if(!E(h)||!g(h)||h<0)throw new TypeError("Option minWorkers must be an integer number >= 0")}function E(h){return typeof h=="number"}function g(h){return Math.round(h)==h}e.exports=s},446:function(e){"use strict";function r(o,a){var u=this;if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(typeof o!="function")throw new SyntaxError("Function parameter handler(resolve, reject) missing");var s=[],f=[];this.resolved=!1,this.rejected=!1,this.pending=!0;var l=function(m,d){s.push(m),f.push(d)};this.then=function(h,m){return new r(function(d,b){var x=h?t(h,d,b):d,q=m?t(m,d,b):b;l(x,q)},u)};var E=function(m){return u.resolved=!0,u.rejected=!1,u.pending=!1,s.forEach(function(d){d(m)}),l=function(b,x){b(m)},E=g=function(){},u},g=function(m){return u.resolved=!1,u.rejected=!0,u.pending=!1,f.forEach(function(d){d(m)}),l=function(b,x){x(m)},E=g=function(){},u};this.cancel=function(){return a?a.cancel():g(new n),u},this.timeout=function(h){if(a)a.timeout(h);else{var m=setTimeout(function(){g(new i("Promise timed out after "+h+" ms"))},h);u.always(function(){clearTimeout(m)})}return u},o(function(h){E(h)},function(h){g(h)})}function t(o,a,u){return function(s){try{var f=o(s);f&&typeof f.then=="function"&&typeof f.catch=="function"?f.then(a,u):a(f)}catch(l){u(l)}}}r.prototype.catch=function(o){return this.then(null,o)},r.prototype.always=function(o){return this.then(o,o)},r.all=function(o){return new r(function(a,u){var s=o.length,f=[];s?o.forEach(function(l,E){l.then(function(g){f[E]=g,s--,s==0&&a(f)},function(g){s=0,u(g)})}):a(f)})},r.defer=function(){var o={};return o.promise=new r(function(a,u){o.resolve=a,o.reject=u}),o};function n(o){this.message=o||"promise cancelled",this.stack=new Error().stack}n.prototype=new Error,n.prototype.constructor=Error,n.prototype.name="CancellationError",r.CancellationError=n;function i(o){this.message=o||"timeout exceeded",this.stack=new Error().stack}i.prototype=new Error,i.prototype.constructor=Error,i.prototype.name="TimeoutError",r.TimeoutError=i,e.exports=r},518:function(e,r,t){"use strict";function n(S,T){var k=typeof Symbol!="undefined"&&S[Symbol.iterator]||S["@@iterator"];if(!k){if(Array.isArray(S)||(k=i(S))||T&&S&&typeof S.length=="number"){k&&(S=k);var _=0,v=function(){};return{s:v,n:function(){return _>=S.length?{done:!0}:{done:!1,value:S[_++]}},e:function(N){throw N},f:v}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var O=!0,M=!1,z;return{s:function(){k=k.call(S)},n:function(){var N=k.next();return O=N.done,N},e:function(N){M=!0,z=N},f:function(){try{!O&&k.return!=null&&k.return()}finally{if(M)throw z}}}}function i(S,T){if(S){if(typeof S=="string")return o(S,T);var k=Object.prototype.toString.call(S).slice(8,-1);if(k==="Object"&&S.constructor&&(k=S.constructor.name),k==="Map"||k==="Set")return Array.from(S);if(k==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k))return o(S,T)}}function o(S,T){(T==null||T>S.length)&&(T=S.length);for(var k=0,_=new Array(T);k<T;k++)_[k]=S[k];return _}function a(S){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},a(S)}var u=t(446),s=t(722),f=t(781),l=t(162),E=l.IFrameWorker,g="__workerpool-terminate__",h=1e3;function m(){var S=b();if(!S)throw new Error("WorkerPool: workerType = \'thread\' is not supported, Node >= 11.7.0 required");return S}function d(){if(typeof Worker!="function"&&((typeof Worker=="undefined"?"undefined":a(Worker))!=="object"||typeof Worker.prototype.constructor!="function"))throw new Error("WorkerPool: Web Workers not supported")}function b(){try{return f("worker_threads")}catch(S){if(a(S)==="object"&&S!==null&&S.code==="MODULE_NOT_FOUND")return null;throw S}}function x(){if(s.platform==="browser"){if(typeof Blob=="undefined")throw new Error("Blob not supported by the browser");if(!window.URL||typeof window.URL.createObjectURL!="function")throw new Error("URL.createObjectURL not supported by the browser");var S=new Blob([t(710)],{type:"text/javascript"});return window.URL.createObjectURL(S)}else return __dirname+"/worker.js"}function q(S,T){if(T.workerType==="iframe")return C(S,E,T);if(T.workerType==="web")return d(),C(S,Worker,T);if(T.workerType==="thread")return k=m(),L(S,k);if(T.workerType==="process"||!T.workerType)return I(S,y(T),f("child_process"));if(s.platform==="browser")return d(),C(S,Worker);var k=b();return k?L(S,k):I(S,y(T),f("child_process"))}function C(S,T,k){var _=new T(S,k!=null&&k.name?{name:"".concat(k.name,"-").concat(Date.now())}:void 0);return _.isBrowserWorker=!0,_.on=function(v,O){this.addEventListener(v,function(M){O(M.data)})},_.send=function(v){this.postMessage(v)},_}function L(S,T){var k=new T.Worker(S,{stdout:!1,stderr:!1});return k.isWorkerThread=!0,k.send=function(_){this.postMessage(_)},k.kill=function(){return this.terminate(),!0},k.disconnect=function(){this.terminate()},k}function I(S,T,k){var _=k.fork(S,T.forkArgs,T.forkOpts);return _.isChildProcess=!0,_}function y(S){S=S||{};var T=process.execArgv.join(" "),k=T.indexOf("--inspect")!==-1,_=T.indexOf("--debug-brk")!==-1,v=[];return k&&(v.push("--inspect="+S.debugPort),_&&v.push("--debug-brk")),process.execArgv.forEach(function(O){O.indexOf("--max-old-space-size")>-1&&v.push(O)}),Object.assign({},S,{forkArgs:S.forkArgs,forkOpts:Object.assign({},S.forkOpts,{execArgv:(S.forkOpts&&S.forkOpts.execArgv||[]).concat(v)})})}function D(S){for(var T=new Error(""),k=Object.keys(S),_=0;_<k.length;_++)T[k[_]]=S[k[_]];return T}function B(S,T){var k=this,_=T||{};this.script=S||x(),this.worker=q(this.script,_),this.debugPort=_.debugPort,this.forkOpts=_.forkOpts,this.forkArgs=_.forkArgs,S||(this.worker.ready=!0),this.requestQueue=[],this.worker.on("message",function(z){if(!k.terminated)if(typeof z=="string"&&z==="ready")k.worker.ready=!0,O();else{var W=z.id,N=k.processing[W];N!==void 0&&(z.isEvent?N.options&&typeof N.options.on=="function"&&N.options.on(z.payload):(delete k.processing[W],k.terminating===!0&&k.terminate(),z.error?N.resolver.reject(D(z.error)):N.resolver.resolve(z.result)))}});function v(z){k.terminated=!0;for(var W in k.processing)k.processing[W]!==void 0&&k.processing[W].resolver.reject(z);k.processing=Object.create(null)}function O(){var z=n(k.requestQueue.splice(0)),W;try{for(z.s();!(W=z.n()).done;){var N=W.value;k.worker.send(N)}}catch($){z.e($)}finally{z.f()}}var M=this.worker;this.worker.on("error",v),this.worker.on("exit",function(z,W){var N=`Workerpool Worker terminated Unexpectedly\n`;N+="    exitCode: `"+z+"`\\n",N+="    signalCode: `"+W+"`\\n",N+="    workerpool.script: `"+k.script+"`\\n",N+="    spawnArgs: `"+M.spawnargs+"`\\n",N+="    spawnfile: `"+M.spawnfile+"`\\n",N+="    stdout: `"+M.stdout+"`\\n",N+="    stderr: `"+M.stderr+"`\\n",v(new Error(N))}),this.processing=Object.create(null),this.terminating=!1,this.terminated=!1,this.terminationHandler=null,this.lastId=0}B.prototype.methods=function(){return this.exec("methods")},B.prototype.exec=function(S,T,k,_){k||(k=u.defer());var v=++this.lastId;this.processing[v]={id:v,resolver:k,options:_};var O={id:v,method:S,params:T};this.terminated?k.reject(new Error("Worker is terminated")):this.worker.ready?this.worker.send(O):this.requestQueue.push(O);var M=this;return k.promise.catch(function(z){if(z instanceof u.CancellationError||z instanceof u.TimeoutError)return delete M.processing[v],M.terminateAndNotify(!0).then(function(){throw z},function(W){throw W});throw z})},B.prototype.busy=function(){return Object.keys(this.processing).length>0},B.prototype.terminate=function(S,T){var k=this;if(S){for(var _ in this.processing)this.processing[_]!==void 0&&this.processing[_].resolver.reject(new Error("Worker terminated"));this.processing=Object.create(null)}if(typeof T=="function"&&(this.terminationHandler=T),this.busy())this.terminating=!0;else{var v=function(z){if(k.terminated=!0,k.worker!=null&&k.worker.removeAllListeners&&k.worker.removeAllListeners("message"),k.worker=null,k.terminating=!1,k.terminationHandler)k.terminationHandler(z,k);else if(z)throw z};if(this.worker)if(typeof this.worker.kill=="function"){if(this.worker.killed){v(new Error("worker already killed!"));return}if(this.worker.isChildProcess){var O=setTimeout(function(){k.worker&&k.worker.kill()},h);this.worker.once("exit",function(){clearTimeout(O),k.worker&&(k.worker.killed=!0),v()}),this.worker.ready?this.worker.send(g):this.requestQueue.push(g)}else this.worker.kill(),this.worker.killed=!0,v();return}else if(typeof this.worker.terminate=="function")this.worker.terminate(),this.worker.killed=!0;else throw new Error("Failed to terminate worker");v()}},B.prototype.terminateAndNotify=function(S,T){var k=u.defer();return T&&(k.promise.timeout=T),this.terminate(S,function(_,v){_?k.reject(_):k.resolve(v)}),k.promise},e.exports=B,e.exports._tryRequireWorkerThreads=b,e.exports._setupProcessWorker=I,e.exports._setupBrowserWorker=C,e.exports._setupWorkerThreadWorker=L,e.exports.ensureWorkerThreads=m},393:function(e){"use strict";var r=65535;e.exports=t;function t(){this.ports=Object.create(null),this.length=0}t.prototype.nextAvailableStartingAt=function(n){for(;this.ports[n]===!0;)n++;if(n>=r)throw new Error("WorkerPool debug port limit reached: "+n+">= "+r);return this.ports[n]=!0,this.length++,n},t.prototype.releasePort=function(n){delete this.ports[n],this.length--}},722:function(e,r,t){var n=t(781),i=function(s){return typeof s!="undefined"&&s.versions!=null&&s.versions.node!=null};e.exports.isNode=i,e.exports.platform=typeof process!="undefined"&&i(process)?"node":"browser";var o=a("worker_threads");e.exports.isMainThread=e.exports.platform==="node"?(!o||o.isMainThread)&&!process.connected:typeof Window!="undefined",e.exports.cpus=e.exports.platform==="browser"?self.navigator.hardwareConcurrency:n("os").cpus().length;function a(u){try{return n(u)}catch(s){return null}}},710:function(e){e.exports=`!function(){var __webpack_exports__={};!function(){var exports=__webpack_exports__,__webpack_unused_export__;function _typeof(r){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}var requireFoolWebpack=eval("typeof require !== \'undefined\' ? require : function (module) { throw new Error(\'Module \\\\" + module + \\\\" not found.\') }"),TERMINATE_METHOD_ID="__workerpool-terminate__",worker={exit:function(){}},WorkerThreads,parentPort;if("undefined"!=typeof self&&"function"==typeof postMessage&&"function"==typeof addEventListener)worker.on=function(r,e){addEventListener(r,function(r){e(r.data)})},worker.send=function(r){postMessage(r)};else{if("undefined"==typeof process)throw new Error("Script must be executed as a worker");try{WorkerThreads=requireFoolWebpack("worker_threads")}catch(error){if("object"!==_typeof(error)||null===error||"MODULE_NOT_FOUND"!==error.code)throw error}WorkerThreads&&null!==WorkerThreads.parentPort?(parentPort=WorkerThreads.parentPort,worker.send=parentPort.postMessage.bind(parentPort),worker.on=parentPort.on.bind(parentPort)):(worker.on=process.on.bind(process),worker.send=process.send.bind(process),worker.on("disconnect",function(){process.exit(1)}),worker.exit=process.exit.bind(process))}function convertError(o){return Object.getOwnPropertyNames(o).reduce(function(r,e){return Object.defineProperty(r,e,{value:o[e],enumerable:!0})},{})}function isPromise(r){return r&&"function"==typeof r.then&&"function"==typeof r.catch}worker.methods={},worker.methods.run=function(r,e){r=new Function("return ("+r+").apply(null, arguments);");return r.apply(r,e)},worker.methods.methods=function(){return Object.keys(worker.methods)};var currentRequestId=null;worker.on("message",function(e){if(e===TERMINATE_METHOD_ID)return worker.exit(0);try{var r=worker.methods[e.method];if(!r)throw new Error(\'Unknown method "\'+e.method+\'"\');currentRequestId=e.id;var o=r.apply(r,e.params);isPromise(o)?o.then(function(r){worker.send({id:e.id,result:r,error:null}),currentRequestId=null}).catch(function(r){worker.send({id:e.id,result:null,error:convertError(r)}),currentRequestId=null}):(worker.send({id:e.id,result:o,error:null}),currentRequestId=null)}catch(r){worker.send({id:e.id,result:null,error:convertError(r)})}}),worker.register=function(r){if(r)for(var e in r)r.hasOwnProperty(e)&&(worker.methods[e]=r[e]);worker.send("ready")},worker.emit=function(r){currentRequestId&&worker.send({id:currentRequestId,isEvent:!0,payload:r})},__webpack_unused_export__=worker.register,worker.emit}()}();`},781:function(module){var requireFoolWebpack=eval(`typeof require !== \'undefined\' ? require : function (module) { throw new Error(\'Module " + module + " not found.\') }`);module.exports=requireFoolWebpack},52:function(__unused_webpack_module,exports){function _typeof(e){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_typeof(e)}var requireFoolWebpack=eval(`typeof require !== \'undefined\' ? require : function (module) { throw new Error(\'Module " + module + " not found.\') }`),TERMINATE_METHOD_ID="__workerpool-terminate__",worker={exit:function e(){}};if(typeof self!="undefined"&&typeof postMessage=="function"&&typeof addEventListener=="function")worker.on=function(e,r){addEventListener(e,function(t){r(t.data)})},worker.send=function(e){postMessage(e)};else if(typeof process!="undefined"){var WorkerThreads;try{WorkerThreads=requireFoolWebpack("worker_threads")}catch(e){if(!(_typeof(e)==="object"&&e!==null&&e.code==="MODULE_NOT_FOUND"))throw e}if(WorkerThreads&&WorkerThreads.parentPort!==null){var parentPort=WorkerThreads.parentPort;worker.send=parentPort.postMessage.bind(parentPort),worker.on=parentPort.on.bind(parentPort)}else worker.on=process.on.bind(process),worker.send=process.send.bind(process),worker.on("disconnect",function(){process.exit(1)}),worker.exit=process.exit.bind(process)}else throw new Error("Script must be executed as a worker");function convertError(e){return Object.getOwnPropertyNames(e).reduce(function(r,t){return Object.defineProperty(r,t,{value:e[t],enumerable:!0})},{})}function isPromise(e){return e&&typeof e.then=="function"&&typeof e.catch=="function"}worker.methods={},worker.methods.run=function e(r,t){var n=new Function("return ("+r+").apply(null, arguments);");return n.apply(n,t)},worker.methods.methods=function e(){return Object.keys(worker.methods)};var currentRequestId=null;worker.on("message",function(e){if(e===TERMINATE_METHOD_ID)return worker.exit(0);try{var r=worker.methods[e.method];if(r){currentRequestId=e.id;var t=r.apply(r,e.params);isPromise(t)?t.then(function(n){worker.send({id:e.id,result:n,error:null}),currentRequestId=null}).catch(function(n){worker.send({id:e.id,result:null,error:convertError(n)}),currentRequestId=null}):(worker.send({id:e.id,result:t,error:null}),currentRequestId=null)}else throw new Error(\'Unknown method "\'+e.method+\'"\')}catch(n){worker.send({id:e.id,result:null,error:convertError(n)})}}),worker.register=function(e){if(e)for(var r in e)e.hasOwnProperty(r)&&(worker.methods[r]=e[r]);worker.send("ready")},worker.emit=function(e){currentRequestId&&worker.send({id:currentRequestId,isEvent:!0,payload:e})},exports.add=worker.register,exports.emit=worker.emit}},__webpack_module_cache__={};function __webpack_require__(e){var r=__webpack_module_cache__[e];if(r!==void 0)return r.exports;var t=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](t,t.exports,__webpack_require__),t.exports}(function(){__webpack_require__.d=function(e,r){for(var t in r)__webpack_require__.o(r,t)&&!__webpack_require__.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}})(),function(){__webpack_require__.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)}}(),function(){__webpack_require__.r=function(e){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}();var __webpack_exports__={};return function(){var e=__webpack_exports__,r=__webpack_require__(722);e.pool=function(n,i){var o=__webpack_require__(799);return new o(n,i)},e.worker=function(n){var i=__webpack_require__(52);i.add(n)},e.workerEmit=function(n){var i=__webpack_require__(52);i.emit(n)},e.Promise=__webpack_require__(446),e.platform=r.platform,e.isMainThread=r.isMainThread,e.cpus=r.cpus}(),__webpack_exports__}()})});var Nr=fe((hc,Yt)=>{Yt.exports=function(r){return r!=null&&r.constructor!=null&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}});var sn=fe((mc,an)=>{"use strict";var ir=Object.prototype.hasOwnProperty,un=Object.prototype.toString,Xt=Object.defineProperty,en=Object.getOwnPropertyDescriptor,rn=function(r){return typeof Array.isArray=="function"?Array.isArray(r):un.call(r)==="[object Array]"},tn=function(r){if(!r||un.call(r)!=="[object Object]")return!1;var t=ir.call(r,"constructor"),n=r.constructor&&r.constructor.prototype&&ir.call(r.constructor.prototype,"isPrototypeOf");if(r.constructor&&!t&&!n)return!1;var i;for(i in r);return typeof i=="undefined"||ir.call(r,i)},nn=function(r,t){Xt&&t.name==="__proto__"?Xt(r,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):r[t.name]=t.newValue},on=function(r,t){if(t==="__proto__")if(ir.call(r,t)){if(en)return en(r,t).value}else return;return r[t]};an.exports=function e(){var r,t,n,i,o,a,u=arguments[0],s=1,f=arguments.length,l=!1;for(typeof u=="boolean"&&(l=u,u=arguments[1]||{},s=2),(u==null||typeof u!="object"&&typeof u!="function")&&(u={});s<f;++s)if(r=arguments[s],r!=null)for(t in r)n=on(u,t),i=on(r,t),u!==i&&(l&&i&&(tn(i)||(o=rn(i)))?(o?(o=!1,a=n&&rn(n)?n:[]):a=n&&tn(n)?n:{},nn(u,{name:t,newValue:e(l,a,i)})):typeof i!="undefined"&&nn(u,{name:t,newValue:i}));return u}});var An=fe((Vc,vn)=>{vn.exports={trueFunc:function(){return!0},falseFunc:function(){return!1}}});var et=fe(te=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});function fu(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="-"||e==="_"}te.isIdentStart=fu;function hu(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||e==="-"||e==="_"}te.isIdent=hu;function mu(e){return e>="a"&&e<="f"||e>="A"&&e<="F"||e>="0"&&e<="9"}te.isHex=mu;function du(e){for(var r=e.length,t="",n=0;n<r;){var i=e.charAt(n);if(te.identSpecialChars[i])t+="\\\\"+i;else if(i==="_"||i==="-"||i>="A"&&i<="Z"||i>="a"&&i<="z"||n!==0&&i>="0"&&i<="9")t+=i;else{var o=i.charCodeAt(0);if((o&63488)===55296){var a=e.charCodeAt(n++);if((o&64512)!==55296||(a&64512)!==56320)throw Error("UCS-2(decode): illegal sequence");o=((o&1023)<<10)+(a&1023)+65536}t+="\\\\"+o.toString(16)+" "}n++}return t}te.escapeIdentifier=du;function gu(e){for(var r=e.length,t="",n=0,i;n<r;){var o=e.charAt(n);o===\'"\'?o=\'\\\\"\':o==="\\\\"?o="\\\\\\\\":(i=te.strReplacementsRev[o])!==void 0&&(o=i),t+=o,n++}return\'"\'+t+\'"\'}te.escapeStr=gu;te.identSpecialChars={"!":!0,\'"\':!0,"#":!0,$:!0,"%":!0,"&":!0,"\'":!0,"(":!0,")":!0,"*":!0,"+":!0,",":!0,".":!0,"/":!0,";":!0,"<":!0,"=":!0,">":!0,"?":!0,"@":!0,"[":!0,"\\\\":!0,"]":!0,"^":!0,"`":!0,"{":!0,"|":!0,"}":!0,"~":!0};te.strReplacementsRev={"\\n":"\\\\n","\\r":"\\\\r","	":"\\\\t","\\f":"\\\\f","\\v":"\\\\v"};te.singleQuoteEscapeChars={n:`\n`,r:"\\r",t:"	",f:"\\f","\\\\":"\\\\","\'":"\'"};te.doubleQuotesEscapeChars={n:`\n`,r:"\\r",t:"	",f:"\\f","\\\\":"\\\\",\'"\':\'"\'}});var In=fe(rt=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0});var ue=et();function xu(e,r,t,n,i,o){var a=e.length,u="";function s(d,b){var x="";for(r++,u=e.charAt(r);r<a;){if(u===d)return r++,x;if(u==="\\\\"){r++,u=e.charAt(r);var q=void 0;if(u===d)x+=d;else if((q=b[u])!==void 0)x+=q;else if(ue.isHex(u)){var C=u;for(r++,u=e.charAt(r);ue.isHex(u);)C+=u,r++,u=e.charAt(r);u===" "&&(r++,u=e.charAt(r)),x+=String.fromCharCode(parseInt(C,16));continue}else x+=u}else x+=u;r++,u=e.charAt(r)}return x}function f(){var d="";for(u=e.charAt(r);r<a;){if(ue.isIdent(u))d+=u;else if(u==="\\\\"){if(r++,r>=a)throw Error("Expected symbol but end of file reached.");if(u=e.charAt(r),ue.identSpecialChars[u])d+=u;else if(ue.isHex(u)){var b=u;for(r++,u=e.charAt(r);ue.isHex(u);)b+=u,r++,u=e.charAt(r);u===" "&&(r++,u=e.charAt(r)),d+=String.fromCharCode(parseInt(b,16));continue}else d+=u}else return d;r++,u=e.charAt(r)}return d}function l(){u=e.charAt(r);for(var d=!1;u===" "||u==="	"||u===`\n`||u==="\\r"||u==="\\f";)d=!0,r++,u=e.charAt(r);return d}function E(){var d=g();if(r<a)throw Error(\'Rule expected but "\'+e.charAt(r)+\'" found.\');return d}function g(){var d=h();if(!d)return null;var b=d;for(u=e.charAt(r);u===",";){if(r++,l(),b.type!=="selectors"&&(b={type:"selectors",selectors:[d]}),d=h(),!d)throw Error(\'Rule expected after ",".\');b.selectors.push(d)}return b}function h(){l();var d={type:"ruleSet"},b=m();if(!b)return null;for(var x=d;b&&(b.type="rule",x.rule=b,x=b,l(),u=e.charAt(r),!(r>=a||u===","||u===")"));)if(i[u]){var q=u;if(r++,l(),b=m(),!b)throw Error(\'Rule expected after "\'+q+\'".\');b.nestingOperator=q}else b=m(),b&&(b.nestingOperator=null);return d}function m(){for(var d=null;r<a;)if(u=e.charAt(r),u==="*")r++,(d=d||{}).tagName="*";else if(ue.isIdentStart(u)||u==="\\\\")(d=d||{}).tagName=f();else if(u===".")r++,d=d||{},(d.classNames=d.classNames||[]).push(f());else if(u==="#")r++,(d=d||{}).id=f();else if(u==="["){r++,l();var b={name:f()};if(l(),u==="]")r++;else{var x="";if(n[u]&&(x=u,r++,u=e.charAt(r)),r>=a)throw Error(\'Expected "=" but end of file reached.\');if(u!=="=")throw Error(\'Expected "=" but "\'+u+\'" found.\');b.operator=x+"=",r++,l();var q="";if(b.valueType="string",u===\'"\')q=s(\'"\',ue.doubleQuotesEscapeChars);else if(u==="\'")q=s("\'",ue.singleQuoteEscapeChars);else if(o&&u==="$")r++,q=f(),b.valueType="substitute";else{for(;r<a&&u!=="]";)q+=u,r++,u=e.charAt(r);q=q.trim()}if(l(),r>=a)throw Error(\'Expected "]" but end of file reached.\');if(u!=="]")throw Error(\'Expected "]" but "\'+u+\'" found.\');r++,b.value=q}d=d||{},(d.attrs=d.attrs||[]).push(b)}else if(u===":"){r++;var C=f(),L={name:C};if(u==="("){r++;var I="";if(l(),t[C]==="selector")L.valueType="selector",I=g();else{if(L.valueType=t[C]||"string",u===\'"\')I=s(\'"\',ue.doubleQuotesEscapeChars);else if(u==="\'")I=s("\'",ue.singleQuoteEscapeChars);else if(o&&u==="$")r++,I=f(),L.valueType="substitute";else{for(;r<a&&u!==")";)I+=u,r++,u=e.charAt(r);I=I.trim()}l()}if(r>=a)throw Error(\'Expected ")" but end of file reached.\');if(u!==")")throw Error(\'Expected ")" but "\'+u+\'" found.\');r++,L.value=I}d=d||{},(d.pseudos=d.pseudos||[]).push(L)}else break;return d}return E()}rt.parseCssSelector=xu});var Ln=fe(tt=>{"use strict";Object.defineProperty(tt,"__esModule",{value:!0});var ne=et();function cr(e){var r="";switch(e.type){case"ruleSet":for(var t=e.rule,n=[];t;)t.nestingOperator&&n.push(t.nestingOperator),n.push(cr(t)),t=t.rule;r=n.join(" ");break;case"selectors":r=e.selectors.map(cr).join(", ");break;case"rule":e.tagName&&(e.tagName==="*"?r="*":r=ne.escapeIdentifier(e.tagName)),e.id&&(r+="#"+ne.escapeIdentifier(e.id)),e.classNames&&(r+=e.classNames.map(function(i){return"."+ne.escapeIdentifier(i)}).join("")),e.attrs&&(r+=e.attrs.map(function(i){return"operator"in i?i.valueType==="substitute"?"["+ne.escapeIdentifier(i.name)+i.operator+"$"+i.value+"]":"["+ne.escapeIdentifier(i.name)+i.operator+ne.escapeStr(i.value)+"]":"["+ne.escapeIdentifier(i.name)+"]"}).join("")),e.pseudos&&(r+=e.pseudos.map(function(i){return i.valueType?i.valueType==="selector"?":"+ne.escapeIdentifier(i.name)+"("+cr(i.value)+")":i.valueType==="substitute"?":"+ne.escapeIdentifier(i.name)+"($"+i.value+")":i.valueType==="numeric"?":"+ne.escapeIdentifier(i.name)+"("+i.value+")":":"+ne.escapeIdentifier(i.name)+"("+ne.escapeIdentifier(i.value)+")":":"+ne.escapeIdentifier(i.name)}).join(""));break;default:throw Error(\'Unknown entity type: "\'+e.type+\'".\')}return r}tt.renderEntity=cr});var On=fe(nt=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});var ku=In(),wu=Ln(),yu=function(){function e(){this.pseudos={},this.attrEqualityMods={},this.ruleNestingOperators={},this.substitutesEnabled=!1}return e.prototype.registerSelectorPseudos=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var n=0,i=r;n<i.length;n++){var o=i[n];this.pseudos[o]="selector"}return this},e.prototype.unregisterSelectorPseudos=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var n=0,i=r;n<i.length;n++){var o=i[n];delete this.pseudos[o]}return this},e.prototype.registerNumericPseudos=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var n=0,i=r;n<i.length;n++){var o=i[n];this.pseudos[o]="numeric"}return this},e.prototype.unregisterNumericPseudos=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var n=0,i=r;n<i.length;n++){var o=i[n];delete this.pseudos[o]}return this},e.prototype.registerNestingOperators=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var n=0,i=r;n<i.length;n++){var o=i[n];this.ruleNestingOperators[o]=!0}return this},e.prototype.unregisterNestingOperators=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var n=0,i=r;n<i.length;n++){var o=i[n];delete this.ruleNestingOperators[o]}return this},e.prototype.registerAttrEqualityMods=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var n=0,i=r;n<i.length;n++){var o=i[n];this.attrEqualityMods[o]=!0}return this},e.prototype.unregisterAttrEqualityMods=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var n=0,i=r;n<i.length;n++){var o=i[n];delete this.attrEqualityMods[o]}return this},e.prototype.enableSubstitutes=function(){return this.substitutesEnabled=!0,this},e.prototype.disableSubstitutes=function(){return this.substitutesEnabled=!1,this},e.prototype.parse=function(r){return ku.parseCssSelector(r,0,this.pseudos,this.attrEqualityMods,this.ruleNestingOperators,this.substitutesEnabled)},e.prototype.render=function(r){return wu.renderEntity(r).trim()},e}();nt.CssSelectorParser=yu});var Nn=fe(fr=>{"use strict";Object.defineProperty(fr,"__esModule",{value:!0});function Bn(e,r){if(r)return e;throw new Error("Unhandled discriminated union member: "+JSON.stringify(e))}fr.assertNever=Bn;fr.default=Bn});var jn=he(mt(),1);var dr={};ht(dr,{loggerCategory:()=>dt});var dt=e=>`obsidian-zotero:${e}`;var gt=(e,r,t=!0)=>(n,...i)=>{let o="";for(let a=0;a<n.length;a++)a>0&&(o+=e(i[a-1])),o+=(t?n.raw:n)[a];return r(o)},kr=(e=!0,r)=>gt(t=>t,t=>new RegExp(e?"^"+t+"$":t,r),!0),gr=String.raw`[23456789ABCDEFGHIJKLMNPQRSTUVWXYZ]{8}`,xr=String.raw`\\d+`,xt=e=>{let r={annotKey:gr,parentKey:gr,groupID:xr,page:xr};if(e)for(let t in r)r[t]=`(${r[t]})`;return gt(t=>r[t],t=>t)`${"annotKey"}a${"parentKey"}(?:g${"groupID"})?(?:p${"page"})?`},Fu=kr()`${gr}(?:g${xr})?`,_u=kr()`${xt(!0)}`,Iu=kr()`(?:${xt(!1)}n?)+`;function kt(e,r){let t=Object.keys(r).map(n=>oi(e,n,r[n]));return t.length===1?t[0]:function(){t.forEach(n=>n())}}function oi(e,r,t){let n=e[r],i=e.hasOwnProperty(r),o=t(n);return n&&Object.setPrototypeOf(o,n),Object.setPrototypeOf(a,o),e[r]=a,u;function a(...s){return o===n&&e[r]===a&&u(),o.apply(this,s)}function u(){e[r]===a&&(i?e[r]=n:delete e[r]),o!==n&&(o=n,Object.setPrototypeOf(a,n||Function))}}var wt=e=>{let r=t=>async(...n)=>{try{return await t(...n)}catch(i){throw console.error(i),i}};return kt(e,Object.fromEntries(Object.keys(e).map(t=>[t,r]))),e};function wr(e,r){let t=(r||{}).includeImageAlt;return bt(e,typeof t=="boolean"?t:!0)}function bt(e,r){return ui(e)&&("value"in e&&e.value||r&&"alt"in e&&e.alt||"children"in e&&yt(e.children,r))||Array.isArray(e)&&yt(e,r)||""}function yt(e,r){let t=[],n=-1;for(;++n<e.length;)t[n]=bt(e[n],r);return t.join("")}function ui(e){return!!(e&&typeof e=="object")}function Z(e,r,t,n){let i=e.length,o=0,a;if(r<0?r=-r>i?0:i+r:r=r>i?i:r,t=t>0?t:0,n.length<1e4)a=Array.from(n),a.unshift(r,t),[].splice.apply(e,a);else for(t&&[].splice.apply(e,[r,t]);o<n.length;)a=n.slice(o,o+1e4),a.unshift(r,0),[].splice.apply(e,a),o+=1e4,r+=1e4}function X(e,r){return e.length>0?(Z(e,e.length,0,r),e):r}var Et={}.hasOwnProperty;function St(e){let r={},t=-1;for(;++t<e.length;)ai(r,e[t]);return r}function ai(e,r){let t;for(t in r){let i=(Et.call(e,t)?e[t]:void 0)||(e[t]={}),o=r[t],a;for(a in o){Et.call(i,a)||(i[a]=[]);let u=o[a];si(i[a],Array.isArray(u)?u:u?[u]:[])}}}function si(e,r){let t=-1,n=[];for(;++t<r.length;)(r[t].add==="after"?e:n).push(r[t]);Z(e,0,0,n)}var vt=/[!-/:-@[-`{-~\\u00A1\\u00A7\\u00AB\\u00B6\\u00B7\\u00BB\\u00BF\\u037E\\u0387\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061E\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u09FD\\u0A76\\u0AF0\\u0C77\\u0C84\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F14\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1360-\\u1368\\u1400\\u166E\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CC0-\\u1CC7\\u1CD3\\u2010-\\u2027\\u2030-\\u2043\\u2045-\\u2051\\u2053-\\u205E\\u207D\\u207E\\u208D\\u208E\\u2308-\\u230B\\u2329\\u232A\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30-\\u2E4F\\u2E52\\u3001-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA8FC\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uAAF0\\uAAF1\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uFF3F\\uFF5B\\uFF5D\\uFF5F-\\uFF65]/;var re=ge(/[A-Za-z]/),Re=ge(/\\d/),At=ge(/[\\dA-Fa-f]/),ee=ge(/[\\dA-Za-z]/),Ct=ge(/[!-/:-@[-`{-~]/),yr=ge(/[#-\'*+\\--9=?A-Z^-~]/);function Be(e){return e!==null&&(e<32||e===127)}function G(e){return e!==null&&(e<0||e===32)}function F(e){return e!==null&&e<-2}function j(e){return e===-2||e===-1||e===32}var Tt=ge(/\\s/),qt=ge(vt);function ge(e){return r;function r(t){return t!==null&&e.test(String.fromCharCode(t))}}function R(e,r,t,n){let i=n?n-1:Number.POSITIVE_INFINITY,o=0;return a;function a(s){return j(s)?(e.enter(t),u(s)):r(s)}function u(s){return j(s)&&o++<i?(e.consume(s),u):(e.exit(t),r(s))}}var Ft={tokenize:li};function li(e){let r=e.attempt(this.parser.constructs.contentInitial,n,i),t;return r;function n(u){if(u===null){e.consume(u);return}return e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),R(e,r,"linePrefix")}function i(u){return e.enter("paragraph"),o(u)}function o(u){let s=e.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=s),t=s,a(u)}function a(u){if(u===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(u);return}return F(u)?(e.consume(u),e.exit("chunkText"),o):(e.consume(u),a)}}var It={tokenize:ci},_t={tokenize:pi};function ci(e){let r=this,t=[],n=0,i,o,a;return u;function u(C){if(n<t.length){let L=t[n];return r.containerState=L[1],e.attempt(L[0].continuation,s,f)(C)}return f(C)}function s(C){if(n++,r.containerState._closeFlow){r.containerState._closeFlow=void 0,i&&q();let L=r.events.length,I=L,y;for(;I--;)if(r.events[I][0]==="exit"&&r.events[I][1].type==="chunkFlow"){y=r.events[I][1].end;break}x(n);let D=L;for(;D<r.events.length;)r.events[D][1].end=Object.assign({},y),D++;return Z(r.events,I+1,0,r.events.slice(L)),r.events.length=D,f(C)}return u(C)}function f(C){if(n===t.length){if(!i)return g(C);if(i.currentConstruct&&i.currentConstruct.concrete)return m(C);r.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return r.containerState={},e.check(_t,l,E)(C)}function l(C){return i&&q(),x(n),g(C)}function E(C){return r.parser.lazy[r.now().line]=n!==t.length,a=r.now().offset,m(C)}function g(C){return r.containerState={},e.attempt(_t,h,m)(C)}function h(C){return n++,t.push([r.currentConstruct,r.containerState]),g(C)}function m(C){if(C===null){i&&q(),x(0),e.consume(C);return}return i=i||r.parser.flow(r.now()),e.enter("chunkFlow",{contentType:"flow",previous:o,_tokenizer:i}),d(C)}function d(C){if(C===null){b(e.exit("chunkFlow"),!0),x(0),e.consume(C);return}return F(C)?(e.consume(C),b(e.exit("chunkFlow")),n=0,r.interrupt=void 0,u):(e.consume(C),d)}function b(C,L){let I=r.sliceStream(C);if(L&&I.push(null),C.previous=o,o&&(o.next=C),o=C,i.defineSkip(C.start),i.write(I),r.parser.lazy[C.start.line]){let y=i.events.length;for(;y--;)if(i.events[y][1].start.offset<a&&(!i.events[y][1].end||i.events[y][1].end.offset>a))return;let D=r.events.length,B=D,S,T;for(;B--;)if(r.events[B][0]==="exit"&&r.events[B][1].type==="chunkFlow"){if(S){T=r.events[B][1].end;break}S=!0}for(x(n),y=D;y<r.events.length;)r.events[y][1].end=Object.assign({},T),y++;Z(r.events,B+1,0,r.events.slice(D)),r.events.length=y}}function x(C){let L=t.length;for(;L-- >C;){let I=t[L];r.containerState=I[1],I[0].exit.call(r,e)}t.length=C}function q(){i.write([null]),o=void 0,i=void 0,r.containerState._closeFlow=void 0}}function pi(e,r,t){return R(e,e.attempt(this.parser.constructs.document,r,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function br(e){if(e===null||G(e)||Tt(e))return 1;if(qt(e))return 2}function _e(e,r,t){let n=[],i=-1;for(;++i<e.length;){let o=e[i].resolveAll;o&&!n.includes(o)&&(r=o(r,t),n.push(o))}return r}var Ne={name:"attention",tokenize:hi,resolveAll:fi};function fi(e,r){let t=-1,n,i,o,a,u,s,f,l;for(;++t<e.length;)if(e[t][0]==="enter"&&e[t][1].type==="attentionSequence"&&e[t][1]._close){for(n=t;n--;)if(e[n][0]==="exit"&&e[n][1].type==="attentionSequence"&&e[n][1]._open&&r.sliceSerialize(e[n][1]).charCodeAt(0)===r.sliceSerialize(e[t][1]).charCodeAt(0)){if((e[n][1]._close||e[t][1]._open)&&(e[t][1].end.offset-e[t][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[t][1].end.offset-e[t][1].start.offset)%3))continue;s=e[n][1].end.offset-e[n][1].start.offset>1&&e[t][1].end.offset-e[t][1].start.offset>1?2:1;let E=Object.assign({},e[n][1].end),g=Object.assign({},e[t][1].start);Lt(E,-s),Lt(g,s),a={type:s>1?"strongSequence":"emphasisSequence",start:E,end:Object.assign({},e[n][1].end)},u={type:s>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[t][1].start),end:g},o={type:s>1?"strongText":"emphasisText",start:Object.assign({},e[n][1].end),end:Object.assign({},e[t][1].start)},i={type:s>1?"strong":"emphasis",start:Object.assign({},a.start),end:Object.assign({},u.end)},e[n][1].end=Object.assign({},a.start),e[t][1].start=Object.assign({},u.end),f=[],e[n][1].end.offset-e[n][1].start.offset&&(f=X(f,[["enter",e[n][1],r],["exit",e[n][1],r]])),f=X(f,[["enter",i,r],["enter",a,r],["exit",a,r],["enter",o,r]]),f=X(f,_e(r.parser.constructs.insideSpan.null,e.slice(n+1,t),r)),f=X(f,[["exit",o,r],["enter",u,r],["exit",u,r],["exit",i,r]]),e[t][1].end.offset-e[t][1].start.offset?(l=2,f=X(f,[["enter",e[t][1],r],["exit",e[t][1],r]])):l=0,Z(e,n-1,t-n+3,f),t=n+f.length-l-2;break}}for(t=-1;++t<e.length;)e[t][1].type==="attentionSequence"&&(e[t][1].type="data");return e}function hi(e,r){let t=this.parser.constructs.attentionMarkers.null,n=this.previous,i=br(n),o;return a;function a(s){return e.enter("attentionSequence"),o=s,u(s)}function u(s){if(s===o)return e.consume(s),u;let f=e.exit("attentionSequence"),l=br(s),E=!l||l===2&&i||t.includes(s),g=!i||i===2&&l||t.includes(n);return f._open=!!(o===42?E:E&&(i||!g)),f._close=!!(o===42?g:g&&(l||!E)),r(s)}}function Lt(e,r){e.column+=r,e.offset+=r,e._bufferIndex+=r}var Er={name:"autolink",tokenize:mi};function mi(e,r,t){let n=1;return i;function i(m){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),o}function o(m){return re(m)?(e.consume(m),a):yr(m)?f(m):t(m)}function a(m){return m===43||m===45||m===46||ee(m)?u(m):f(m)}function u(m){return m===58?(e.consume(m),s):(m===43||m===45||m===46||ee(m))&&n++<32?(e.consume(m),u):f(m)}function s(m){return m===62?(e.exit("autolinkProtocol"),h(m)):m===null||m===32||m===60||Be(m)?t(m):(e.consume(m),s)}function f(m){return m===64?(e.consume(m),n=0,l):yr(m)?(e.consume(m),f):t(m)}function l(m){return ee(m)?E(m):t(m)}function E(m){return m===46?(e.consume(m),n=0,l):m===62?(e.exit("autolinkProtocol").type="autolinkEmail",h(m)):g(m)}function g(m){return(m===45||ee(m))&&n++<63?(e.consume(m),m===45?g:E):t(m)}function h(m){return e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.exit("autolink"),r}}var xe={tokenize:di,partial:!0};function di(e,r,t){return R(e,n,"linePrefix");function n(i){return i===null||F(i)?r(i):t(i)}}var $e={name:"blockQuote",tokenize:gi,continuation:{tokenize:xi},exit:ki};function gi(e,r,t){let n=this;return i;function i(a){if(a===62){let u=n.containerState;return u.open||(e.enter("blockQuote",{_container:!0}),u.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(a),e.exit("blockQuoteMarker"),o}return t(a)}function o(a){return j(a)?(e.enter("blockQuotePrefixWhitespace"),e.consume(a),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),r):(e.exit("blockQuotePrefix"),r(a))}}function xi(e,r,t){return R(e,e.attempt($e,r,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function ki(e){e.exit("blockQuote")}var Ke={name:"characterEscape",tokenize:wi};function wi(e,r,t){return n;function n(o){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(o),e.exit("escapeMarker"),i}function i(o){return Ct(o)?(e.enter("characterEscapeValue"),e.consume(o),e.exit("characterEscapeValue"),e.exit("characterEscape"),r):t(o)}}var Sr={AElig:"\\xC6",AMP:"&",Aacute:"\\xC1",Abreve:"\\u0102",Acirc:"\\xC2",Acy:"\\u0410",Afr:"\\u{1D504}",Agrave:"\\xC0",Alpha:"\\u0391",Amacr:"\\u0100",And:"\\u2A53",Aogon:"\\u0104",Aopf:"\\u{1D538}",ApplyFunction:"\\u2061",Aring:"\\xC5",Ascr:"\\u{1D49C}",Assign:"\\u2254",Atilde:"\\xC3",Auml:"\\xC4",Backslash:"\\u2216",Barv:"\\u2AE7",Barwed:"\\u2306",Bcy:"\\u0411",Because:"\\u2235",Bernoullis:"\\u212C",Beta:"\\u0392",Bfr:"\\u{1D505}",Bopf:"\\u{1D539}",Breve:"\\u02D8",Bscr:"\\u212C",Bumpeq:"\\u224E",CHcy:"\\u0427",COPY:"\\xA9",Cacute:"\\u0106",Cap:"\\u22D2",CapitalDifferentialD:"\\u2145",Cayleys:"\\u212D",Ccaron:"\\u010C",Ccedil:"\\xC7",Ccirc:"\\u0108",Cconint:"\\u2230",Cdot:"\\u010A",Cedilla:"\\xB8",CenterDot:"\\xB7",Cfr:"\\u212D",Chi:"\\u03A7",CircleDot:"\\u2299",CircleMinus:"\\u2296",CirclePlus:"\\u2295",CircleTimes:"\\u2297",ClockwiseContourIntegral:"\\u2232",CloseCurlyDoubleQuote:"\\u201D",CloseCurlyQuote:"\\u2019",Colon:"\\u2237",Colone:"\\u2A74",Congruent:"\\u2261",Conint:"\\u222F",ContourIntegral:"\\u222E",Copf:"\\u2102",Coproduct:"\\u2210",CounterClockwiseContourIntegral:"\\u2233",Cross:"\\u2A2F",Cscr:"\\u{1D49E}",Cup:"\\u22D3",CupCap:"\\u224D",DD:"\\u2145",DDotrahd:"\\u2911",DJcy:"\\u0402",DScy:"\\u0405",DZcy:"\\u040F",Dagger:"\\u2021",Darr:"\\u21A1",Dashv:"\\u2AE4",Dcaron:"\\u010E",Dcy:"\\u0414",Del:"\\u2207",Delta:"\\u0394",Dfr:"\\u{1D507}",DiacriticalAcute:"\\xB4",DiacriticalDot:"\\u02D9",DiacriticalDoubleAcute:"\\u02DD",DiacriticalGrave:"`",DiacriticalTilde:"\\u02DC",Diamond:"\\u22C4",DifferentialD:"\\u2146",Dopf:"\\u{1D53B}",Dot:"\\xA8",DotDot:"\\u20DC",DotEqual:"\\u2250",DoubleContourIntegral:"\\u222F",DoubleDot:"\\xA8",DoubleDownArrow:"\\u21D3",DoubleLeftArrow:"\\u21D0",DoubleLeftRightArrow:"\\u21D4",DoubleLeftTee:"\\u2AE4",DoubleLongLeftArrow:"\\u27F8",DoubleLongLeftRightArrow:"\\u27FA",DoubleLongRightArrow:"\\u27F9",DoubleRightArrow:"\\u21D2",DoubleRightTee:"\\u22A8",DoubleUpArrow:"\\u21D1",DoubleUpDownArrow:"\\u21D5",DoubleVerticalBar:"\\u2225",DownArrow:"\\u2193",DownArrowBar:"\\u2913",DownArrowUpArrow:"\\u21F5",DownBreve:"\\u0311",DownLeftRightVector:"\\u2950",DownLeftTeeVector:"\\u295E",DownLeftVector:"\\u21BD",DownLeftVectorBar:"\\u2956",DownRightTeeVector:"\\u295F",DownRightVector:"\\u21C1",DownRightVectorBar:"\\u2957",DownTee:"\\u22A4",DownTeeArrow:"\\u21A7",Downarrow:"\\u21D3",Dscr:"\\u{1D49F}",Dstrok:"\\u0110",ENG:"\\u014A",ETH:"\\xD0",Eacute:"\\xC9",Ecaron:"\\u011A",Ecirc:"\\xCA",Ecy:"\\u042D",Edot:"\\u0116",Efr:"\\u{1D508}",Egrave:"\\xC8",Element:"\\u2208",Emacr:"\\u0112",EmptySmallSquare:"\\u25FB",EmptyVerySmallSquare:"\\u25AB",Eogon:"\\u0118",Eopf:"\\u{1D53C}",Epsilon:"\\u0395",Equal:"\\u2A75",EqualTilde:"\\u2242",Equilibrium:"\\u21CC",Escr:"\\u2130",Esim:"\\u2A73",Eta:"\\u0397",Euml:"\\xCB",Exists:"\\u2203",ExponentialE:"\\u2147",Fcy:"\\u0424",Ffr:"\\u{1D509}",FilledSmallSquare:"\\u25FC",FilledVerySmallSquare:"\\u25AA",Fopf:"\\u{1D53D}",ForAll:"\\u2200",Fouriertrf:"\\u2131",Fscr:"\\u2131",GJcy:"\\u0403",GT:">",Gamma:"\\u0393",Gammad:"\\u03DC",Gbreve:"\\u011E",Gcedil:"\\u0122",Gcirc:"\\u011C",Gcy:"\\u0413",Gdot:"\\u0120",Gfr:"\\u{1D50A}",Gg:"\\u22D9",Gopf:"\\u{1D53E}",GreaterEqual:"\\u2265",GreaterEqualLess:"\\u22DB",GreaterFullEqual:"\\u2267",GreaterGreater:"\\u2AA2",GreaterLess:"\\u2277",GreaterSlantEqual:"\\u2A7E",GreaterTilde:"\\u2273",Gscr:"\\u{1D4A2}",Gt:"\\u226B",HARDcy:"\\u042A",Hacek:"\\u02C7",Hat:"^",Hcirc:"\\u0124",Hfr:"\\u210C",HilbertSpace:"\\u210B",Hopf:"\\u210D",HorizontalLine:"\\u2500",Hscr:"\\u210B",Hstrok:"\\u0126",HumpDownHump:"\\u224E",HumpEqual:"\\u224F",IEcy:"\\u0415",IJlig:"\\u0132",IOcy:"\\u0401",Iacute:"\\xCD",Icirc:"\\xCE",Icy:"\\u0418",Idot:"\\u0130",Ifr:"\\u2111",Igrave:"\\xCC",Im:"\\u2111",Imacr:"\\u012A",ImaginaryI:"\\u2148",Implies:"\\u21D2",Int:"\\u222C",Integral:"\\u222B",Intersection:"\\u22C2",InvisibleComma:"\\u2063",InvisibleTimes:"\\u2062",Iogon:"\\u012E",Iopf:"\\u{1D540}",Iota:"\\u0399",Iscr:"\\u2110",Itilde:"\\u0128",Iukcy:"\\u0406",Iuml:"\\xCF",Jcirc:"\\u0134",Jcy:"\\u0419",Jfr:"\\u{1D50D}",Jopf:"\\u{1D541}",Jscr:"\\u{1D4A5}",Jsercy:"\\u0408",Jukcy:"\\u0404",KHcy:"\\u0425",KJcy:"\\u040C",Kappa:"\\u039A",Kcedil:"\\u0136",Kcy:"\\u041A",Kfr:"\\u{1D50E}",Kopf:"\\u{1D542}",Kscr:"\\u{1D4A6}",LJcy:"\\u0409",LT:"<",Lacute:"\\u0139",Lambda:"\\u039B",Lang:"\\u27EA",Laplacetrf:"\\u2112",Larr:"\\u219E",Lcaron:"\\u013D",Lcedil:"\\u013B",Lcy:"\\u041B",LeftAngleBracket:"\\u27E8",LeftArrow:"\\u2190",LeftArrowBar:"\\u21E4",LeftArrowRightArrow:"\\u21C6",LeftCeiling:"\\u2308",LeftDoubleBracket:"\\u27E6",LeftDownTeeVector:"\\u2961",LeftDownVector:"\\u21C3",LeftDownVectorBar:"\\u2959",LeftFloor:"\\u230A",LeftRightArrow:"\\u2194",LeftRightVector:"\\u294E",LeftTee:"\\u22A3",LeftTeeArrow:"\\u21A4",LeftTeeVector:"\\u295A",LeftTriangle:"\\u22B2",LeftTriangleBar:"\\u29CF",LeftTriangleEqual:"\\u22B4",LeftUpDownVector:"\\u2951",LeftUpTeeVector:"\\u2960",LeftUpVector:"\\u21BF",LeftUpVectorBar:"\\u2958",LeftVector:"\\u21BC",LeftVectorBar:"\\u2952",Leftarrow:"\\u21D0",Leftrightarrow:"\\u21D4",LessEqualGreater:"\\u22DA",LessFullEqual:"\\u2266",LessGreater:"\\u2276",LessLess:"\\u2AA1",LessSlantEqual:"\\u2A7D",LessTilde:"\\u2272",Lfr:"\\u{1D50F}",Ll:"\\u22D8",Lleftarrow:"\\u21DA",Lmidot:"\\u013F",LongLeftArrow:"\\u27F5",LongLeftRightArrow:"\\u27F7",LongRightArrow:"\\u27F6",Longleftarrow:"\\u27F8",Longleftrightarrow:"\\u27FA",Longrightarrow:"\\u27F9",Lopf:"\\u{1D543}",LowerLeftArrow:"\\u2199",LowerRightArrow:"\\u2198",Lscr:"\\u2112",Lsh:"\\u21B0",Lstrok:"\\u0141",Lt:"\\u226A",Map:"\\u2905",Mcy:"\\u041C",MediumSpace:"\\u205F",Mellintrf:"\\u2133",Mfr:"\\u{1D510}",MinusPlus:"\\u2213",Mopf:"\\u{1D544}",Mscr:"\\u2133",Mu:"\\u039C",NJcy:"\\u040A",Nacute:"\\u0143",Ncaron:"\\u0147",Ncedil:"\\u0145",Ncy:"\\u041D",NegativeMediumSpace:"\\u200B",NegativeThickSpace:"\\u200B",NegativeThinSpace:"\\u200B",NegativeVeryThinSpace:"\\u200B",NestedGreaterGreater:"\\u226B",NestedLessLess:"\\u226A",NewLine:`\n`,Nfr:"\\u{1D511}",NoBreak:"\\u2060",NonBreakingSpace:"\\xA0",Nopf:"\\u2115",Not:"\\u2AEC",NotCongruent:"\\u2262",NotCupCap:"\\u226D",NotDoubleVerticalBar:"\\u2226",NotElement:"\\u2209",NotEqual:"\\u2260",NotEqualTilde:"\\u2242\\u0338",NotExists:"\\u2204",NotGreater:"\\u226F",NotGreaterEqual:"\\u2271",NotGreaterFullEqual:"\\u2267\\u0338",NotGreaterGreater:"\\u226B\\u0338",NotGreaterLess:"\\u2279",NotGreaterSlantEqual:"\\u2A7E\\u0338",NotGreaterTilde:"\\u2275",NotHumpDownHump:"\\u224E\\u0338",NotHumpEqual:"\\u224F\\u0338",NotLeftTriangle:"\\u22EA",NotLeftTriangleBar:"\\u29CF\\u0338",NotLeftTriangleEqual:"\\u22EC",NotLess:"\\u226E",NotLessEqual:"\\u2270",NotLessGreater:"\\u2278",NotLessLess:"\\u226A\\u0338",NotLessSlantEqual:"\\u2A7D\\u0338",NotLessTilde:"\\u2274",NotNestedGreaterGreater:"\\u2AA2\\u0338",NotNestedLessLess:"\\u2AA1\\u0338",NotPrecedes:"\\u2280",NotPrecedesEqual:"\\u2AAF\\u0338",NotPrecedesSlantEqual:"\\u22E0",NotReverseElement:"\\u220C",NotRightTriangle:"\\u22EB",NotRightTriangleBar:"\\u29D0\\u0338",NotRightTriangleEqual:"\\u22ED",NotSquareSubset:"\\u228F\\u0338",NotSquareSubsetEqual:"\\u22E2",NotSquareSuperset:"\\u2290\\u0338",NotSquareSupersetEqual:"\\u22E3",NotSubset:"\\u2282\\u20D2",NotSubsetEqual:"\\u2288",NotSucceeds:"\\u2281",NotSucceedsEqual:"\\u2AB0\\u0338",NotSucceedsSlantEqual:"\\u22E1",NotSucceedsTilde:"\\u227F\\u0338",NotSuperset:"\\u2283\\u20D2",NotSupersetEqual:"\\u2289",NotTilde:"\\u2241",NotTildeEqual:"\\u2244",NotTildeFullEqual:"\\u2247",NotTildeTilde:"\\u2249",NotVerticalBar:"\\u2224",Nscr:"\\u{1D4A9}",Ntilde:"\\xD1",Nu:"\\u039D",OElig:"\\u0152",Oacute:"\\xD3",Ocirc:"\\xD4",Ocy:"\\u041E",Odblac:"\\u0150",Ofr:"\\u{1D512}",Ograve:"\\xD2",Omacr:"\\u014C",Omega:"\\u03A9",Omicron:"\\u039F",Oopf:"\\u{1D546}",OpenCurlyDoubleQuote:"\\u201C",OpenCurlyQuote:"\\u2018",Or:"\\u2A54",Oscr:"\\u{1D4AA}",Oslash:"\\xD8",Otilde:"\\xD5",Otimes:"\\u2A37",Ouml:"\\xD6",OverBar:"\\u203E",OverBrace:"\\u23DE",OverBracket:"\\u23B4",OverParenthesis:"\\u23DC",PartialD:"\\u2202",Pcy:"\\u041F",Pfr:"\\u{1D513}",Phi:"\\u03A6",Pi:"\\u03A0",PlusMinus:"\\xB1",Poincareplane:"\\u210C",Popf:"\\u2119",Pr:"\\u2ABB",Precedes:"\\u227A",PrecedesEqual:"\\u2AAF",PrecedesSlantEqual:"\\u227C",PrecedesTilde:"\\u227E",Prime:"\\u2033",Product:"\\u220F",Proportion:"\\u2237",Proportional:"\\u221D",Pscr:"\\u{1D4AB}",Psi:"\\u03A8",QUOT:\'"\',Qfr:"\\u{1D514}",Qopf:"\\u211A",Qscr:"\\u{1D4AC}",RBarr:"\\u2910",REG:"\\xAE",Racute:"\\u0154",Rang:"\\u27EB",Rarr:"\\u21A0",Rarrtl:"\\u2916",Rcaron:"\\u0158",Rcedil:"\\u0156",Rcy:"\\u0420",Re:"\\u211C",ReverseElement:"\\u220B",ReverseEquilibrium:"\\u21CB",ReverseUpEquilibrium:"\\u296F",Rfr:"\\u211C",Rho:"\\u03A1",RightAngleBracket:"\\u27E9",RightArrow:"\\u2192",RightArrowBar:"\\u21E5",RightArrowLeftArrow:"\\u21C4",RightCeiling:"\\u2309",RightDoubleBracket:"\\u27E7",RightDownTeeVector:"\\u295D",RightDownVector:"\\u21C2",RightDownVectorBar:"\\u2955",RightFloor:"\\u230B",RightTee:"\\u22A2",RightTeeArrow:"\\u21A6",RightTeeVector:"\\u295B",RightTriangle:"\\u22B3",RightTriangleBar:"\\u29D0",RightTriangleEqual:"\\u22B5",RightUpDownVector:"\\u294F",RightUpTeeVector:"\\u295C",RightUpVector:"\\u21BE",RightUpVectorBar:"\\u2954",RightVector:"\\u21C0",RightVectorBar:"\\u2953",Rightarrow:"\\u21D2",Ropf:"\\u211D",RoundImplies:"\\u2970",Rrightarrow:"\\u21DB",Rscr:"\\u211B",Rsh:"\\u21B1",RuleDelayed:"\\u29F4",SHCHcy:"\\u0429",SHcy:"\\u0428",SOFTcy:"\\u042C",Sacute:"\\u015A",Sc:"\\u2ABC",Scaron:"\\u0160",Scedil:"\\u015E",Scirc:"\\u015C",Scy:"\\u0421",Sfr:"\\u{1D516}",ShortDownArrow:"\\u2193",ShortLeftArrow:"\\u2190",ShortRightArrow:"\\u2192",ShortUpArrow:"\\u2191",Sigma:"\\u03A3",SmallCircle:"\\u2218",Sopf:"\\u{1D54A}",Sqrt:"\\u221A",Square:"\\u25A1",SquareIntersection:"\\u2293",SquareSubset:"\\u228F",SquareSubsetEqual:"\\u2291",SquareSuperset:"\\u2290",SquareSupersetEqual:"\\u2292",SquareUnion:"\\u2294",Sscr:"\\u{1D4AE}",Star:"\\u22C6",Sub:"\\u22D0",Subset:"\\u22D0",SubsetEqual:"\\u2286",Succeeds:"\\u227B",SucceedsEqual:"\\u2AB0",SucceedsSlantEqual:"\\u227D",SucceedsTilde:"\\u227F",SuchThat:"\\u220B",Sum:"\\u2211",Sup:"\\u22D1",Superset:"\\u2283",SupersetEqual:"\\u2287",Supset:"\\u22D1",THORN:"\\xDE",TRADE:"\\u2122",TSHcy:"\\u040B",TScy:"\\u0426",Tab:"	",Tau:"\\u03A4",Tcaron:"\\u0164",Tcedil:"\\u0162",Tcy:"\\u0422",Tfr:"\\u{1D517}",Therefore:"\\u2234",Theta:"\\u0398",ThickSpace:"\\u205F\\u200A",ThinSpace:"\\u2009",Tilde:"\\u223C",TildeEqual:"\\u2243",TildeFullEqual:"\\u2245",TildeTilde:"\\u2248",Topf:"\\u{1D54B}",TripleDot:"\\u20DB",Tscr:"\\u{1D4AF}",Tstrok:"\\u0166",Uacute:"\\xDA",Uarr:"\\u219F",Uarrocir:"\\u2949",Ubrcy:"\\u040E",Ubreve:"\\u016C",Ucirc:"\\xDB",Ucy:"\\u0423",Udblac:"\\u0170",Ufr:"\\u{1D518}",Ugrave:"\\xD9",Umacr:"\\u016A",UnderBar:"_",UnderBrace:"\\u23DF",UnderBracket:"\\u23B5",UnderParenthesis:"\\u23DD",Union:"\\u22C3",UnionPlus:"\\u228E",Uogon:"\\u0172",Uopf:"\\u{1D54C}",UpArrow:"\\u2191",UpArrowBar:"\\u2912",UpArrowDownArrow:"\\u21C5",UpDownArrow:"\\u2195",UpEquilibrium:"\\u296E",UpTee:"\\u22A5",UpTeeArrow:"\\u21A5",Uparrow:"\\u21D1",Updownarrow:"\\u21D5",UpperLeftArrow:"\\u2196",UpperRightArrow:"\\u2197",Upsi:"\\u03D2",Upsilon:"\\u03A5",Uring:"\\u016E",Uscr:"\\u{1D4B0}",Utilde:"\\u0168",Uuml:"\\xDC",VDash:"\\u22AB",Vbar:"\\u2AEB",Vcy:"\\u0412",Vdash:"\\u22A9",Vdashl:"\\u2AE6",Vee:"\\u22C1",Verbar:"\\u2016",Vert:"\\u2016",VerticalBar:"\\u2223",VerticalLine:"|",VerticalSeparator:"\\u2758",VerticalTilde:"\\u2240",VeryThinSpace:"\\u200A",Vfr:"\\u{1D519}",Vopf:"\\u{1D54D}",Vscr:"\\u{1D4B1}",Vvdash:"\\u22AA",Wcirc:"\\u0174",Wedge:"\\u22C0",Wfr:"\\u{1D51A}",Wopf:"\\u{1D54E}",Wscr:"\\u{1D4B2}",Xfr:"\\u{1D51B}",Xi:"\\u039E",Xopf:"\\u{1D54F}",Xscr:"\\u{1D4B3}",YAcy:"\\u042F",YIcy:"\\u0407",YUcy:"\\u042E",Yacute:"\\xDD",Ycirc:"\\u0176",Ycy:"\\u042B",Yfr:"\\u{1D51C}",Yopf:"\\u{1D550}",Yscr:"\\u{1D4B4}",Yuml:"\\u0178",ZHcy:"\\u0416",Zacute:"\\u0179",Zcaron:"\\u017D",Zcy:"\\u0417",Zdot:"\\u017B",ZeroWidthSpace:"\\u200B",Zeta:"\\u0396",Zfr:"\\u2128",Zopf:"\\u2124",Zscr:"\\u{1D4B5}",aacute:"\\xE1",abreve:"\\u0103",ac:"\\u223E",acE:"\\u223E\\u0333",acd:"\\u223F",acirc:"\\xE2",acute:"\\xB4",acy:"\\u0430",aelig:"\\xE6",af:"\\u2061",afr:"\\u{1D51E}",agrave:"\\xE0",alefsym:"\\u2135",aleph:"\\u2135",alpha:"\\u03B1",amacr:"\\u0101",amalg:"\\u2A3F",amp:"&",and:"\\u2227",andand:"\\u2A55",andd:"\\u2A5C",andslope:"\\u2A58",andv:"\\u2A5A",ang:"\\u2220",ange:"\\u29A4",angle:"\\u2220",angmsd:"\\u2221",angmsdaa:"\\u29A8",angmsdab:"\\u29A9",angmsdac:"\\u29AA",angmsdad:"\\u29AB",angmsdae:"\\u29AC",angmsdaf:"\\u29AD",angmsdag:"\\u29AE",angmsdah:"\\u29AF",angrt:"\\u221F",angrtvb:"\\u22BE",angrtvbd:"\\u299D",angsph:"\\u2222",angst:"\\xC5",angzarr:"\\u237C",aogon:"\\u0105",aopf:"\\u{1D552}",ap:"\\u2248",apE:"\\u2A70",apacir:"\\u2A6F",ape:"\\u224A",apid:"\\u224B",apos:"\'",approx:"\\u2248",approxeq:"\\u224A",aring:"\\xE5",ascr:"\\u{1D4B6}",ast:"*",asymp:"\\u2248",asympeq:"\\u224D",atilde:"\\xE3",auml:"\\xE4",awconint:"\\u2233",awint:"\\u2A11",bNot:"\\u2AED",backcong:"\\u224C",backepsilon:"\\u03F6",backprime:"\\u2035",backsim:"\\u223D",backsimeq:"\\u22CD",barvee:"\\u22BD",barwed:"\\u2305",barwedge:"\\u2305",bbrk:"\\u23B5",bbrktbrk:"\\u23B6",bcong:"\\u224C",bcy:"\\u0431",bdquo:"\\u201E",becaus:"\\u2235",because:"\\u2235",bemptyv:"\\u29B0",bepsi:"\\u03F6",bernou:"\\u212C",beta:"\\u03B2",beth:"\\u2136",between:"\\u226C",bfr:"\\u{1D51F}",bigcap:"\\u22C2",bigcirc:"\\u25EF",bigcup:"\\u22C3",bigodot:"\\u2A00",bigoplus:"\\u2A01",bigotimes:"\\u2A02",bigsqcup:"\\u2A06",bigstar:"\\u2605",bigtriangledown:"\\u25BD",bigtriangleup:"\\u25B3",biguplus:"\\u2A04",bigvee:"\\u22C1",bigwedge:"\\u22C0",bkarow:"\\u290D",blacklozenge:"\\u29EB",blacksquare:"\\u25AA",blacktriangle:"\\u25B4",blacktriangledown:"\\u25BE",blacktriangleleft:"\\u25C2",blacktriangleright:"\\u25B8",blank:"\\u2423",blk12:"\\u2592",blk14:"\\u2591",blk34:"\\u2593",block:"\\u2588",bne:"=\\u20E5",bnequiv:"\\u2261\\u20E5",bnot:"\\u2310",bopf:"\\u{1D553}",bot:"\\u22A5",bottom:"\\u22A5",bowtie:"\\u22C8",boxDL:"\\u2557",boxDR:"\\u2554",boxDl:"\\u2556",boxDr:"\\u2553",boxH:"\\u2550",boxHD:"\\u2566",boxHU:"\\u2569",boxHd:"\\u2564",boxHu:"\\u2567",boxUL:"\\u255D",boxUR:"\\u255A",boxUl:"\\u255C",boxUr:"\\u2559",boxV:"\\u2551",boxVH:"\\u256C",boxVL:"\\u2563",boxVR:"\\u2560",boxVh:"\\u256B",boxVl:"\\u2562",boxVr:"\\u255F",boxbox:"\\u29C9",boxdL:"\\u2555",boxdR:"\\u2552",boxdl:"\\u2510",boxdr:"\\u250C",boxh:"\\u2500",boxhD:"\\u2565",boxhU:"\\u2568",boxhd:"\\u252C",boxhu:"\\u2534",boxminus:"\\u229F",boxplus:"\\u229E",boxtimes:"\\u22A0",boxuL:"\\u255B",boxuR:"\\u2558",boxul:"\\u2518",boxur:"\\u2514",boxv:"\\u2502",boxvH:"\\u256A",boxvL:"\\u2561",boxvR:"\\u255E",boxvh:"\\u253C",boxvl:"\\u2524",boxvr:"\\u251C",bprime:"\\u2035",breve:"\\u02D8",brvbar:"\\xA6",bscr:"\\u{1D4B7}",bsemi:"\\u204F",bsim:"\\u223D",bsime:"\\u22CD",bsol:"\\\\",bsolb:"\\u29C5",bsolhsub:"\\u27C8",bull:"\\u2022",bullet:"\\u2022",bump:"\\u224E",bumpE:"\\u2AAE",bumpe:"\\u224F",bumpeq:"\\u224F",cacute:"\\u0107",cap:"\\u2229",capand:"\\u2A44",capbrcup:"\\u2A49",capcap:"\\u2A4B",capcup:"\\u2A47",capdot:"\\u2A40",caps:"\\u2229\\uFE00",caret:"\\u2041",caron:"\\u02C7",ccaps:"\\u2A4D",ccaron:"\\u010D",ccedil:"\\xE7",ccirc:"\\u0109",ccups:"\\u2A4C",ccupssm:"\\u2A50",cdot:"\\u010B",cedil:"\\xB8",cemptyv:"\\u29B2",cent:"\\xA2",centerdot:"\\xB7",cfr:"\\u{1D520}",chcy:"\\u0447",check:"\\u2713",checkmark:"\\u2713",chi:"\\u03C7",cir:"\\u25CB",cirE:"\\u29C3",circ:"\\u02C6",circeq:"\\u2257",circlearrowleft:"\\u21BA",circlearrowright:"\\u21BB",circledR:"\\xAE",circledS:"\\u24C8",circledast:"\\u229B",circledcirc:"\\u229A",circleddash:"\\u229D",cire:"\\u2257",cirfnint:"\\u2A10",cirmid:"\\u2AEF",cirscir:"\\u29C2",clubs:"\\u2663",clubsuit:"\\u2663",colon:":",colone:"\\u2254",coloneq:"\\u2254",comma:",",commat:"@",comp:"\\u2201",compfn:"\\u2218",complement:"\\u2201",complexes:"\\u2102",cong:"\\u2245",congdot:"\\u2A6D",conint:"\\u222E",copf:"\\u{1D554}",coprod:"\\u2210",copy:"\\xA9",copysr:"\\u2117",crarr:"\\u21B5",cross:"\\u2717",cscr:"\\u{1D4B8}",csub:"\\u2ACF",csube:"\\u2AD1",csup:"\\u2AD0",csupe:"\\u2AD2",ctdot:"\\u22EF",cudarrl:"\\u2938",cudarrr:"\\u2935",cuepr:"\\u22DE",cuesc:"\\u22DF",cularr:"\\u21B6",cularrp:"\\u293D",cup:"\\u222A",cupbrcap:"\\u2A48",cupcap:"\\u2A46",cupcup:"\\u2A4A",cupdot:"\\u228D",cupor:"\\u2A45",cups:"\\u222A\\uFE00",curarr:"\\u21B7",curarrm:"\\u293C",curlyeqprec:"\\u22DE",curlyeqsucc:"\\u22DF",curlyvee:"\\u22CE",curlywedge:"\\u22CF",curren:"\\xA4",curvearrowleft:"\\u21B6",curvearrowright:"\\u21B7",cuvee:"\\u22CE",cuwed:"\\u22CF",cwconint:"\\u2232",cwint:"\\u2231",cylcty:"\\u232D",dArr:"\\u21D3",dHar:"\\u2965",dagger:"\\u2020",daleth:"\\u2138",darr:"\\u2193",dash:"\\u2010",dashv:"\\u22A3",dbkarow:"\\u290F",dblac:"\\u02DD",dcaron:"\\u010F",dcy:"\\u0434",dd:"\\u2146",ddagger:"\\u2021",ddarr:"\\u21CA",ddotseq:"\\u2A77",deg:"\\xB0",delta:"\\u03B4",demptyv:"\\u29B1",dfisht:"\\u297F",dfr:"\\u{1D521}",dharl:"\\u21C3",dharr:"\\u21C2",diam:"\\u22C4",diamond:"\\u22C4",diamondsuit:"\\u2666",diams:"\\u2666",die:"\\xA8",digamma:"\\u03DD",disin:"\\u22F2",div:"\\xF7",divide:"\\xF7",divideontimes:"\\u22C7",divonx:"\\u22C7",djcy:"\\u0452",dlcorn:"\\u231E",dlcrop:"\\u230D",dollar:"$",dopf:"\\u{1D555}",dot:"\\u02D9",doteq:"\\u2250",doteqdot:"\\u2251",dotminus:"\\u2238",dotplus:"\\u2214",dotsquare:"\\u22A1",doublebarwedge:"\\u2306",downarrow:"\\u2193",downdownarrows:"\\u21CA",downharpoonleft:"\\u21C3",downharpoonright:"\\u21C2",drbkarow:"\\u2910",drcorn:"\\u231F",drcrop:"\\u230C",dscr:"\\u{1D4B9}",dscy:"\\u0455",dsol:"\\u29F6",dstrok:"\\u0111",dtdot:"\\u22F1",dtri:"\\u25BF",dtrif:"\\u25BE",duarr:"\\u21F5",duhar:"\\u296F",dwangle:"\\u29A6",dzcy:"\\u045F",dzigrarr:"\\u27FF",eDDot:"\\u2A77",eDot:"\\u2251",eacute:"\\xE9",easter:"\\u2A6E",ecaron:"\\u011B",ecir:"\\u2256",ecirc:"\\xEA",ecolon:"\\u2255",ecy:"\\u044D",edot:"\\u0117",ee:"\\u2147",efDot:"\\u2252",efr:"\\u{1D522}",eg:"\\u2A9A",egrave:"\\xE8",egs:"\\u2A96",egsdot:"\\u2A98",el:"\\u2A99",elinters:"\\u23E7",ell:"\\u2113",els:"\\u2A95",elsdot:"\\u2A97",emacr:"\\u0113",empty:"\\u2205",emptyset:"\\u2205",emptyv:"\\u2205",emsp13:"\\u2004",emsp14:"\\u2005",emsp:"\\u2003",eng:"\\u014B",ensp:"\\u2002",eogon:"\\u0119",eopf:"\\u{1D556}",epar:"\\u22D5",eparsl:"\\u29E3",eplus:"\\u2A71",epsi:"\\u03B5",epsilon:"\\u03B5",epsiv:"\\u03F5",eqcirc:"\\u2256",eqcolon:"\\u2255",eqsim:"\\u2242",eqslantgtr:"\\u2A96",eqslantless:"\\u2A95",equals:"=",equest:"\\u225F",equiv:"\\u2261",equivDD:"\\u2A78",eqvparsl:"\\u29E5",erDot:"\\u2253",erarr:"\\u2971",escr:"\\u212F",esdot:"\\u2250",esim:"\\u2242",eta:"\\u03B7",eth:"\\xF0",euml:"\\xEB",euro:"\\u20AC",excl:"!",exist:"\\u2203",expectation:"\\u2130",exponentiale:"\\u2147",fallingdotseq:"\\u2252",fcy:"\\u0444",female:"\\u2640",ffilig:"\\uFB03",fflig:"\\uFB00",ffllig:"\\uFB04",ffr:"\\u{1D523}",filig:"\\uFB01",fjlig:"fj",flat:"\\u266D",fllig:"\\uFB02",fltns:"\\u25B1",fnof:"\\u0192",fopf:"\\u{1D557}",forall:"\\u2200",fork:"\\u22D4",forkv:"\\u2AD9",fpartint:"\\u2A0D",frac12:"\\xBD",frac13:"\\u2153",frac14:"\\xBC",frac15:"\\u2155",frac16:"\\u2159",frac18:"\\u215B",frac23:"\\u2154",frac25:"\\u2156",frac34:"\\xBE",frac35:"\\u2157",frac38:"\\u215C",frac45:"\\u2158",frac56:"\\u215A",frac58:"\\u215D",frac78:"\\u215E",frasl:"\\u2044",frown:"\\u2322",fscr:"\\u{1D4BB}",gE:"\\u2267",gEl:"\\u2A8C",gacute:"\\u01F5",gamma:"\\u03B3",gammad:"\\u03DD",gap:"\\u2A86",gbreve:"\\u011F",gcirc:"\\u011D",gcy:"\\u0433",gdot:"\\u0121",ge:"\\u2265",gel:"\\u22DB",geq:"\\u2265",geqq:"\\u2267",geqslant:"\\u2A7E",ges:"\\u2A7E",gescc:"\\u2AA9",gesdot:"\\u2A80",gesdoto:"\\u2A82",gesdotol:"\\u2A84",gesl:"\\u22DB\\uFE00",gesles:"\\u2A94",gfr:"\\u{1D524}",gg:"\\u226B",ggg:"\\u22D9",gimel:"\\u2137",gjcy:"\\u0453",gl:"\\u2277",glE:"\\u2A92",gla:"\\u2AA5",glj:"\\u2AA4",gnE:"\\u2269",gnap:"\\u2A8A",gnapprox:"\\u2A8A",gne:"\\u2A88",gneq:"\\u2A88",gneqq:"\\u2269",gnsim:"\\u22E7",gopf:"\\u{1D558}",grave:"`",gscr:"\\u210A",gsim:"\\u2273",gsime:"\\u2A8E",gsiml:"\\u2A90",gt:">",gtcc:"\\u2AA7",gtcir:"\\u2A7A",gtdot:"\\u22D7",gtlPar:"\\u2995",gtquest:"\\u2A7C",gtrapprox:"\\u2A86",gtrarr:"\\u2978",gtrdot:"\\u22D7",gtreqless:"\\u22DB",gtreqqless:"\\u2A8C",gtrless:"\\u2277",gtrsim:"\\u2273",gvertneqq:"\\u2269\\uFE00",gvnE:"\\u2269\\uFE00",hArr:"\\u21D4",hairsp:"\\u200A",half:"\\xBD",hamilt:"\\u210B",hardcy:"\\u044A",harr:"\\u2194",harrcir:"\\u2948",harrw:"\\u21AD",hbar:"\\u210F",hcirc:"\\u0125",hearts:"\\u2665",heartsuit:"\\u2665",hellip:"\\u2026",hercon:"\\u22B9",hfr:"\\u{1D525}",hksearow:"\\u2925",hkswarow:"\\u2926",hoarr:"\\u21FF",homtht:"\\u223B",hookleftarrow:"\\u21A9",hookrightarrow:"\\u21AA",hopf:"\\u{1D559}",horbar:"\\u2015",hscr:"\\u{1D4BD}",hslash:"\\u210F",hstrok:"\\u0127",hybull:"\\u2043",hyphen:"\\u2010",iacute:"\\xED",ic:"\\u2063",icirc:"\\xEE",icy:"\\u0438",iecy:"\\u0435",iexcl:"\\xA1",iff:"\\u21D4",ifr:"\\u{1D526}",igrave:"\\xEC",ii:"\\u2148",iiiint:"\\u2A0C",iiint:"\\u222D",iinfin:"\\u29DC",iiota:"\\u2129",ijlig:"\\u0133",imacr:"\\u012B",image:"\\u2111",imagline:"\\u2110",imagpart:"\\u2111",imath:"\\u0131",imof:"\\u22B7",imped:"\\u01B5",in:"\\u2208",incare:"\\u2105",infin:"\\u221E",infintie:"\\u29DD",inodot:"\\u0131",int:"\\u222B",intcal:"\\u22BA",integers:"\\u2124",intercal:"\\u22BA",intlarhk:"\\u2A17",intprod:"\\u2A3C",iocy:"\\u0451",iogon:"\\u012F",iopf:"\\u{1D55A}",iota:"\\u03B9",iprod:"\\u2A3C",iquest:"\\xBF",iscr:"\\u{1D4BE}",isin:"\\u2208",isinE:"\\u22F9",isindot:"\\u22F5",isins:"\\u22F4",isinsv:"\\u22F3",isinv:"\\u2208",it:"\\u2062",itilde:"\\u0129",iukcy:"\\u0456",iuml:"\\xEF",jcirc:"\\u0135",jcy:"\\u0439",jfr:"\\u{1D527}",jmath:"\\u0237",jopf:"\\u{1D55B}",jscr:"\\u{1D4BF}",jsercy:"\\u0458",jukcy:"\\u0454",kappa:"\\u03BA",kappav:"\\u03F0",kcedil:"\\u0137",kcy:"\\u043A",kfr:"\\u{1D528}",kgreen:"\\u0138",khcy:"\\u0445",kjcy:"\\u045C",kopf:"\\u{1D55C}",kscr:"\\u{1D4C0}",lAarr:"\\u21DA",lArr:"\\u21D0",lAtail:"\\u291B",lBarr:"\\u290E",lE:"\\u2266",lEg:"\\u2A8B",lHar:"\\u2962",lacute:"\\u013A",laemptyv:"\\u29B4",lagran:"\\u2112",lambda:"\\u03BB",lang:"\\u27E8",langd:"\\u2991",langle:"\\u27E8",lap:"\\u2A85",laquo:"\\xAB",larr:"\\u2190",larrb:"\\u21E4",larrbfs:"\\u291F",larrfs:"\\u291D",larrhk:"\\u21A9",larrlp:"\\u21AB",larrpl:"\\u2939",larrsim:"\\u2973",larrtl:"\\u21A2",lat:"\\u2AAB",latail:"\\u2919",late:"\\u2AAD",lates:"\\u2AAD\\uFE00",lbarr:"\\u290C",lbbrk:"\\u2772",lbrace:"{",lbrack:"[",lbrke:"\\u298B",lbrksld:"\\u298F",lbrkslu:"\\u298D",lcaron:"\\u013E",lcedil:"\\u013C",lceil:"\\u2308",lcub:"{",lcy:"\\u043B",ldca:"\\u2936",ldquo:"\\u201C",ldquor:"\\u201E",ldrdhar:"\\u2967",ldrushar:"\\u294B",ldsh:"\\u21B2",le:"\\u2264",leftarrow:"\\u2190",leftarrowtail:"\\u21A2",leftharpoondown:"\\u21BD",leftharpoonup:"\\u21BC",leftleftarrows:"\\u21C7",leftrightarrow:"\\u2194",leftrightarrows:"\\u21C6",leftrightharpoons:"\\u21CB",leftrightsquigarrow:"\\u21AD",leftthreetimes:"\\u22CB",leg:"\\u22DA",leq:"\\u2264",leqq:"\\u2266",leqslant:"\\u2A7D",les:"\\u2A7D",lescc:"\\u2AA8",lesdot:"\\u2A7F",lesdoto:"\\u2A81",lesdotor:"\\u2A83",lesg:"\\u22DA\\uFE00",lesges:"\\u2A93",lessapprox:"\\u2A85",lessdot:"\\u22D6",lesseqgtr:"\\u22DA",lesseqqgtr:"\\u2A8B",lessgtr:"\\u2276",lesssim:"\\u2272",lfisht:"\\u297C",lfloor:"\\u230A",lfr:"\\u{1D529}",lg:"\\u2276",lgE:"\\u2A91",lhard:"\\u21BD",lharu:"\\u21BC",lharul:"\\u296A",lhblk:"\\u2584",ljcy:"\\u0459",ll:"\\u226A",llarr:"\\u21C7",llcorner:"\\u231E",llhard:"\\u296B",lltri:"\\u25FA",lmidot:"\\u0140",lmoust:"\\u23B0",lmoustache:"\\u23B0",lnE:"\\u2268",lnap:"\\u2A89",lnapprox:"\\u2A89",lne:"\\u2A87",lneq:"\\u2A87",lneqq:"\\u2268",lnsim:"\\u22E6",loang:"\\u27EC",loarr:"\\u21FD",lobrk:"\\u27E6",longleftarrow:"\\u27F5",longleftrightarrow:"\\u27F7",longmapsto:"\\u27FC",longrightarrow:"\\u27F6",looparrowleft:"\\u21AB",looparrowright:"\\u21AC",lopar:"\\u2985",lopf:"\\u{1D55D}",loplus:"\\u2A2D",lotimes:"\\u2A34",lowast:"\\u2217",lowbar:"_",loz:"\\u25CA",lozenge:"\\u25CA",lozf:"\\u29EB",lpar:"(",lparlt:"\\u2993",lrarr:"\\u21C6",lrcorner:"\\u231F",lrhar:"\\u21CB",lrhard:"\\u296D",lrm:"\\u200E",lrtri:"\\u22BF",lsaquo:"\\u2039",lscr:"\\u{1D4C1}",lsh:"\\u21B0",lsim:"\\u2272",lsime:"\\u2A8D",lsimg:"\\u2A8F",lsqb:"[",lsquo:"\\u2018",lsquor:"\\u201A",lstrok:"\\u0142",lt:"<",ltcc:"\\u2AA6",ltcir:"\\u2A79",ltdot:"\\u22D6",lthree:"\\u22CB",ltimes:"\\u22C9",ltlarr:"\\u2976",ltquest:"\\u2A7B",ltrPar:"\\u2996",ltri:"\\u25C3",ltrie:"\\u22B4",ltrif:"\\u25C2",lurdshar:"\\u294A",luruhar:"\\u2966",lvertneqq:"\\u2268\\uFE00",lvnE:"\\u2268\\uFE00",mDDot:"\\u223A",macr:"\\xAF",male:"\\u2642",malt:"\\u2720",maltese:"\\u2720",map:"\\u21A6",mapsto:"\\u21A6",mapstodown:"\\u21A7",mapstoleft:"\\u21A4",mapstoup:"\\u21A5",marker:"\\u25AE",mcomma:"\\u2A29",mcy:"\\u043C",mdash:"\\u2014",measuredangle:"\\u2221",mfr:"\\u{1D52A}",mho:"\\u2127",micro:"\\xB5",mid:"\\u2223",midast:"*",midcir:"\\u2AF0",middot:"\\xB7",minus:"\\u2212",minusb:"\\u229F",minusd:"\\u2238",minusdu:"\\u2A2A",mlcp:"\\u2ADB",mldr:"\\u2026",mnplus:"\\u2213",models:"\\u22A7",mopf:"\\u{1D55E}",mp:"\\u2213",mscr:"\\u{1D4C2}",mstpos:"\\u223E",mu:"\\u03BC",multimap:"\\u22B8",mumap:"\\u22B8",nGg:"\\u22D9\\u0338",nGt:"\\u226B\\u20D2",nGtv:"\\u226B\\u0338",nLeftarrow:"\\u21CD",nLeftrightarrow:"\\u21CE",nLl:"\\u22D8\\u0338",nLt:"\\u226A\\u20D2",nLtv:"\\u226A\\u0338",nRightarrow:"\\u21CF",nVDash:"\\u22AF",nVdash:"\\u22AE",nabla:"\\u2207",nacute:"\\u0144",nang:"\\u2220\\u20D2",nap:"\\u2249",napE:"\\u2A70\\u0338",napid:"\\u224B\\u0338",napos:"\\u0149",napprox:"\\u2249",natur:"\\u266E",natural:"\\u266E",naturals:"\\u2115",nbsp:"\\xA0",nbump:"\\u224E\\u0338",nbumpe:"\\u224F\\u0338",ncap:"\\u2A43",ncaron:"\\u0148",ncedil:"\\u0146",ncong:"\\u2247",ncongdot:"\\u2A6D\\u0338",ncup:"\\u2A42",ncy:"\\u043D",ndash:"\\u2013",ne:"\\u2260",neArr:"\\u21D7",nearhk:"\\u2924",nearr:"\\u2197",nearrow:"\\u2197",nedot:"\\u2250\\u0338",nequiv:"\\u2262",nesear:"\\u2928",nesim:"\\u2242\\u0338",nexist:"\\u2204",nexists:"\\u2204",nfr:"\\u{1D52B}",ngE:"\\u2267\\u0338",nge:"\\u2271",ngeq:"\\u2271",ngeqq:"\\u2267\\u0338",ngeqslant:"\\u2A7E\\u0338",nges:"\\u2A7E\\u0338",ngsim:"\\u2275",ngt:"\\u226F",ngtr:"\\u226F",nhArr:"\\u21CE",nharr:"\\u21AE",nhpar:"\\u2AF2",ni:"\\u220B",nis:"\\u22FC",nisd:"\\u22FA",niv:"\\u220B",njcy:"\\u045A",nlArr:"\\u21CD",nlE:"\\u2266\\u0338",nlarr:"\\u219A",nldr:"\\u2025",nle:"\\u2270",nleftarrow:"\\u219A",nleftrightarrow:"\\u21AE",nleq:"\\u2270",nleqq:"\\u2266\\u0338",nleqslant:"\\u2A7D\\u0338",nles:"\\u2A7D\\u0338",nless:"\\u226E",nlsim:"\\u2274",nlt:"\\u226E",nltri:"\\u22EA",nltrie:"\\u22EC",nmid:"\\u2224",nopf:"\\u{1D55F}",not:"\\xAC",notin:"\\u2209",notinE:"\\u22F9\\u0338",notindot:"\\u22F5\\u0338",notinva:"\\u2209",notinvb:"\\u22F7",notinvc:"\\u22F6",notni:"\\u220C",notniva:"\\u220C",notnivb:"\\u22FE",notnivc:"\\u22FD",npar:"\\u2226",nparallel:"\\u2226",nparsl:"\\u2AFD\\u20E5",npart:"\\u2202\\u0338",npolint:"\\u2A14",npr:"\\u2280",nprcue:"\\u22E0",npre:"\\u2AAF\\u0338",nprec:"\\u2280",npreceq:"\\u2AAF\\u0338",nrArr:"\\u21CF",nrarr:"\\u219B",nrarrc:"\\u2933\\u0338",nrarrw:"\\u219D\\u0338",nrightarrow:"\\u219B",nrtri:"\\u22EB",nrtrie:"\\u22ED",nsc:"\\u2281",nsccue:"\\u22E1",nsce:"\\u2AB0\\u0338",nscr:"\\u{1D4C3}",nshortmid:"\\u2224",nshortparallel:"\\u2226",nsim:"\\u2241",nsime:"\\u2244",nsimeq:"\\u2244",nsmid:"\\u2224",nspar:"\\u2226",nsqsube:"\\u22E2",nsqsupe:"\\u22E3",nsub:"\\u2284",nsubE:"\\u2AC5\\u0338",nsube:"\\u2288",nsubset:"\\u2282\\u20D2",nsubseteq:"\\u2288",nsubseteqq:"\\u2AC5\\u0338",nsucc:"\\u2281",nsucceq:"\\u2AB0\\u0338",nsup:"\\u2285",nsupE:"\\u2AC6\\u0338",nsupe:"\\u2289",nsupset:"\\u2283\\u20D2",nsupseteq:"\\u2289",nsupseteqq:"\\u2AC6\\u0338",ntgl:"\\u2279",ntilde:"\\xF1",ntlg:"\\u2278",ntriangleleft:"\\u22EA",ntrianglelefteq:"\\u22EC",ntriangleright:"\\u22EB",ntrianglerighteq:"\\u22ED",nu:"\\u03BD",num:"#",numero:"\\u2116",numsp:"\\u2007",nvDash:"\\u22AD",nvHarr:"\\u2904",nvap:"\\u224D\\u20D2",nvdash:"\\u22AC",nvge:"\\u2265\\u20D2",nvgt:">\\u20D2",nvinfin:"\\u29DE",nvlArr:"\\u2902",nvle:"\\u2264\\u20D2",nvlt:"<\\u20D2",nvltrie:"\\u22B4\\u20D2",nvrArr:"\\u2903",nvrtrie:"\\u22B5\\u20D2",nvsim:"\\u223C\\u20D2",nwArr:"\\u21D6",nwarhk:"\\u2923",nwarr:"\\u2196",nwarrow:"\\u2196",nwnear:"\\u2927",oS:"\\u24C8",oacute:"\\xF3",oast:"\\u229B",ocir:"\\u229A",ocirc:"\\xF4",ocy:"\\u043E",odash:"\\u229D",odblac:"\\u0151",odiv:"\\u2A38",odot:"\\u2299",odsold:"\\u29BC",oelig:"\\u0153",ofcir:"\\u29BF",ofr:"\\u{1D52C}",ogon:"\\u02DB",ograve:"\\xF2",ogt:"\\u29C1",ohbar:"\\u29B5",ohm:"\\u03A9",oint:"\\u222E",olarr:"\\u21BA",olcir:"\\u29BE",olcross:"\\u29BB",oline:"\\u203E",olt:"\\u29C0",omacr:"\\u014D",omega:"\\u03C9",omicron:"\\u03BF",omid:"\\u29B6",ominus:"\\u2296",oopf:"\\u{1D560}",opar:"\\u29B7",operp:"\\u29B9",oplus:"\\u2295",or:"\\u2228",orarr:"\\u21BB",ord:"\\u2A5D",order:"\\u2134",orderof:"\\u2134",ordf:"\\xAA",ordm:"\\xBA",origof:"\\u22B6",oror:"\\u2A56",orslope:"\\u2A57",orv:"\\u2A5B",oscr:"\\u2134",oslash:"\\xF8",osol:"\\u2298",otilde:"\\xF5",otimes:"\\u2297",otimesas:"\\u2A36",ouml:"\\xF6",ovbar:"\\u233D",par:"\\u2225",para:"\\xB6",parallel:"\\u2225",parsim:"\\u2AF3",parsl:"\\u2AFD",part:"\\u2202",pcy:"\\u043F",percnt:"%",period:".",permil:"\\u2030",perp:"\\u22A5",pertenk:"\\u2031",pfr:"\\u{1D52D}",phi:"\\u03C6",phiv:"\\u03D5",phmmat:"\\u2133",phone:"\\u260E",pi:"\\u03C0",pitchfork:"\\u22D4",piv:"\\u03D6",planck:"\\u210F",planckh:"\\u210E",plankv:"\\u210F",plus:"+",plusacir:"\\u2A23",plusb:"\\u229E",pluscir:"\\u2A22",plusdo:"\\u2214",plusdu:"\\u2A25",pluse:"\\u2A72",plusmn:"\\xB1",plussim:"\\u2A26",plustwo:"\\u2A27",pm:"\\xB1",pointint:"\\u2A15",popf:"\\u{1D561}",pound:"\\xA3",pr:"\\u227A",prE:"\\u2AB3",prap:"\\u2AB7",prcue:"\\u227C",pre:"\\u2AAF",prec:"\\u227A",precapprox:"\\u2AB7",preccurlyeq:"\\u227C",preceq:"\\u2AAF",precnapprox:"\\u2AB9",precneqq:"\\u2AB5",precnsim:"\\u22E8",precsim:"\\u227E",prime:"\\u2032",primes:"\\u2119",prnE:"\\u2AB5",prnap:"\\u2AB9",prnsim:"\\u22E8",prod:"\\u220F",profalar:"\\u232E",profline:"\\u2312",profsurf:"\\u2313",prop:"\\u221D",propto:"\\u221D",prsim:"\\u227E",prurel:"\\u22B0",pscr:"\\u{1D4C5}",psi:"\\u03C8",puncsp:"\\u2008",qfr:"\\u{1D52E}",qint:"\\u2A0C",qopf:"\\u{1D562}",qprime:"\\u2057",qscr:"\\u{1D4C6}",quaternions:"\\u210D",quatint:"\\u2A16",quest:"?",questeq:"\\u225F",quot:\'"\',rAarr:"\\u21DB",rArr:"\\u21D2",rAtail:"\\u291C",rBarr:"\\u290F",rHar:"\\u2964",race:"\\u223D\\u0331",racute:"\\u0155",radic:"\\u221A",raemptyv:"\\u29B3",rang:"\\u27E9",rangd:"\\u2992",range:"\\u29A5",rangle:"\\u27E9",raquo:"\\xBB",rarr:"\\u2192",rarrap:"\\u2975",rarrb:"\\u21E5",rarrbfs:"\\u2920",rarrc:"\\u2933",rarrfs:"\\u291E",rarrhk:"\\u21AA",rarrlp:"\\u21AC",rarrpl:"\\u2945",rarrsim:"\\u2974",rarrtl:"\\u21A3",rarrw:"\\u219D",ratail:"\\u291A",ratio:"\\u2236",rationals:"\\u211A",rbarr:"\\u290D",rbbrk:"\\u2773",rbrace:"}",rbrack:"]",rbrke:"\\u298C",rbrksld:"\\u298E",rbrkslu:"\\u2990",rcaron:"\\u0159",rcedil:"\\u0157",rceil:"\\u2309",rcub:"}",rcy:"\\u0440",rdca:"\\u2937",rdldhar:"\\u2969",rdquo:"\\u201D",rdquor:"\\u201D",rdsh:"\\u21B3",real:"\\u211C",realine:"\\u211B",realpart:"\\u211C",reals:"\\u211D",rect:"\\u25AD",reg:"\\xAE",rfisht:"\\u297D",rfloor:"\\u230B",rfr:"\\u{1D52F}",rhard:"\\u21C1",rharu:"\\u21C0",rharul:"\\u296C",rho:"\\u03C1",rhov:"\\u03F1",rightarrow:"\\u2192",rightarrowtail:"\\u21A3",rightharpoondown:"\\u21C1",rightharpoonup:"\\u21C0",rightleftarrows:"\\u21C4",rightleftharpoons:"\\u21CC",rightrightarrows:"\\u21C9",rightsquigarrow:"\\u219D",rightthreetimes:"\\u22CC",ring:"\\u02DA",risingdotseq:"\\u2253",rlarr:"\\u21C4",rlhar:"\\u21CC",rlm:"\\u200F",rmoust:"\\u23B1",rmoustache:"\\u23B1",rnmid:"\\u2AEE",roang:"\\u27ED",roarr:"\\u21FE",robrk:"\\u27E7",ropar:"\\u2986",ropf:"\\u{1D563}",roplus:"\\u2A2E",rotimes:"\\u2A35",rpar:")",rpargt:"\\u2994",rppolint:"\\u2A12",rrarr:"\\u21C9",rsaquo:"\\u203A",rscr:"\\u{1D4C7}",rsh:"\\u21B1",rsqb:"]",rsquo:"\\u2019",rsquor:"\\u2019",rthree:"\\u22CC",rtimes:"\\u22CA",rtri:"\\u25B9",rtrie:"\\u22B5",rtrif:"\\u25B8",rtriltri:"\\u29CE",ruluhar:"\\u2968",rx:"\\u211E",sacute:"\\u015B",sbquo:"\\u201A",sc:"\\u227B",scE:"\\u2AB4",scap:"\\u2AB8",scaron:"\\u0161",sccue:"\\u227D",sce:"\\u2AB0",scedil:"\\u015F",scirc:"\\u015D",scnE:"\\u2AB6",scnap:"\\u2ABA",scnsim:"\\u22E9",scpolint:"\\u2A13",scsim:"\\u227F",scy:"\\u0441",sdot:"\\u22C5",sdotb:"\\u22A1",sdote:"\\u2A66",seArr:"\\u21D8",searhk:"\\u2925",searr:"\\u2198",searrow:"\\u2198",sect:"\\xA7",semi:";",seswar:"\\u2929",setminus:"\\u2216",setmn:"\\u2216",sext:"\\u2736",sfr:"\\u{1D530}",sfrown:"\\u2322",sharp:"\\u266F",shchcy:"\\u0449",shcy:"\\u0448",shortmid:"\\u2223",shortparallel:"\\u2225",shy:"\\xAD",sigma:"\\u03C3",sigmaf:"\\u03C2",sigmav:"\\u03C2",sim:"\\u223C",simdot:"\\u2A6A",sime:"\\u2243",simeq:"\\u2243",simg:"\\u2A9E",simgE:"\\u2AA0",siml:"\\u2A9D",simlE:"\\u2A9F",simne:"\\u2246",simplus:"\\u2A24",simrarr:"\\u2972",slarr:"\\u2190",smallsetminus:"\\u2216",smashp:"\\u2A33",smeparsl:"\\u29E4",smid:"\\u2223",smile:"\\u2323",smt:"\\u2AAA",smte:"\\u2AAC",smtes:"\\u2AAC\\uFE00",softcy:"\\u044C",sol:"/",solb:"\\u29C4",solbar:"\\u233F",sopf:"\\u{1D564}",spades:"\\u2660",spadesuit:"\\u2660",spar:"\\u2225",sqcap:"\\u2293",sqcaps:"\\u2293\\uFE00",sqcup:"\\u2294",sqcups:"\\u2294\\uFE00",sqsub:"\\u228F",sqsube:"\\u2291",sqsubset:"\\u228F",sqsubseteq:"\\u2291",sqsup:"\\u2290",sqsupe:"\\u2292",sqsupset:"\\u2290",sqsupseteq:"\\u2292",squ:"\\u25A1",square:"\\u25A1",squarf:"\\u25AA",squf:"\\u25AA",srarr:"\\u2192",sscr:"\\u{1D4C8}",ssetmn:"\\u2216",ssmile:"\\u2323",sstarf:"\\u22C6",star:"\\u2606",starf:"\\u2605",straightepsilon:"\\u03F5",straightphi:"\\u03D5",strns:"\\xAF",sub:"\\u2282",subE:"\\u2AC5",subdot:"\\u2ABD",sube:"\\u2286",subedot:"\\u2AC3",submult:"\\u2AC1",subnE:"\\u2ACB",subne:"\\u228A",subplus:"\\u2ABF",subrarr:"\\u2979",subset:"\\u2282",subseteq:"\\u2286",subseteqq:"\\u2AC5",subsetneq:"\\u228A",subsetneqq:"\\u2ACB",subsim:"\\u2AC7",subsub:"\\u2AD5",subsup:"\\u2AD3",succ:"\\u227B",succapprox:"\\u2AB8",succcurlyeq:"\\u227D",succeq:"\\u2AB0",succnapprox:"\\u2ABA",succneqq:"\\u2AB6",succnsim:"\\u22E9",succsim:"\\u227F",sum:"\\u2211",sung:"\\u266A",sup1:"\\xB9",sup2:"\\xB2",sup3:"\\xB3",sup:"\\u2283",supE:"\\u2AC6",supdot:"\\u2ABE",supdsub:"\\u2AD8",supe:"\\u2287",supedot:"\\u2AC4",suphsol:"\\u27C9",suphsub:"\\u2AD7",suplarr:"\\u297B",supmult:"\\u2AC2",supnE:"\\u2ACC",supne:"\\u228B",supplus:"\\u2AC0",supset:"\\u2283",supseteq:"\\u2287",supseteqq:"\\u2AC6",supsetneq:"\\u228B",supsetneqq:"\\u2ACC",supsim:"\\u2AC8",supsub:"\\u2AD4",supsup:"\\u2AD6",swArr:"\\u21D9",swarhk:"\\u2926",swarr:"\\u2199",swarrow:"\\u2199",swnwar:"\\u292A",szlig:"\\xDF",target:"\\u2316",tau:"\\u03C4",tbrk:"\\u23B4",tcaron:"\\u0165",tcedil:"\\u0163",tcy:"\\u0442",tdot:"\\u20DB",telrec:"\\u2315",tfr:"\\u{1D531}",there4:"\\u2234",therefore:"\\u2234",theta:"\\u03B8",thetasym:"\\u03D1",thetav:"\\u03D1",thickapprox:"\\u2248",thicksim:"\\u223C",thinsp:"\\u2009",thkap:"\\u2248",thksim:"\\u223C",thorn:"\\xFE",tilde:"\\u02DC",times:"\\xD7",timesb:"\\u22A0",timesbar:"\\u2A31",timesd:"\\u2A30",tint:"\\u222D",toea:"\\u2928",top:"\\u22A4",topbot:"\\u2336",topcir:"\\u2AF1",topf:"\\u{1D565}",topfork:"\\u2ADA",tosa:"\\u2929",tprime:"\\u2034",trade:"\\u2122",triangle:"\\u25B5",triangledown:"\\u25BF",triangleleft:"\\u25C3",trianglelefteq:"\\u22B4",triangleq:"\\u225C",triangleright:"\\u25B9",trianglerighteq:"\\u22B5",tridot:"\\u25EC",trie:"\\u225C",triminus:"\\u2A3A",triplus:"\\u2A39",trisb:"\\u29CD",tritime:"\\u2A3B",trpezium:"\\u23E2",tscr:"\\u{1D4C9}",tscy:"\\u0446",tshcy:"\\u045B",tstrok:"\\u0167",twixt:"\\u226C",twoheadleftarrow:"\\u219E",twoheadrightarrow:"\\u21A0",uArr:"\\u21D1",uHar:"\\u2963",uacute:"\\xFA",uarr:"\\u2191",ubrcy:"\\u045E",ubreve:"\\u016D",ucirc:"\\xFB",ucy:"\\u0443",udarr:"\\u21C5",udblac:"\\u0171",udhar:"\\u296E",ufisht:"\\u297E",ufr:"\\u{1D532}",ugrave:"\\xF9",uharl:"\\u21BF",uharr:"\\u21BE",uhblk:"\\u2580",ulcorn:"\\u231C",ulcorner:"\\u231C",ulcrop:"\\u230F",ultri:"\\u25F8",umacr:"\\u016B",uml:"\\xA8",uogon:"\\u0173",uopf:"\\u{1D566}",uparrow:"\\u2191",updownarrow:"\\u2195",upharpoonleft:"\\u21BF",upharpoonright:"\\u21BE",uplus:"\\u228E",upsi:"\\u03C5",upsih:"\\u03D2",upsilon:"\\u03C5",upuparrows:"\\u21C8",urcorn:"\\u231D",urcorner:"\\u231D",urcrop:"\\u230E",uring:"\\u016F",urtri:"\\u25F9",uscr:"\\u{1D4CA}",utdot:"\\u22F0",utilde:"\\u0169",utri:"\\u25B5",utrif:"\\u25B4",uuarr:"\\u21C8",uuml:"\\xFC",uwangle:"\\u29A7",vArr:"\\u21D5",vBar:"\\u2AE8",vBarv:"\\u2AE9",vDash:"\\u22A8",vangrt:"\\u299C",varepsilon:"\\u03F5",varkappa:"\\u03F0",varnothing:"\\u2205",varphi:"\\u03D5",varpi:"\\u03D6",varpropto:"\\u221D",varr:"\\u2195",varrho:"\\u03F1",varsigma:"\\u03C2",varsubsetneq:"\\u228A\\uFE00",varsubsetneqq:"\\u2ACB\\uFE00",varsupsetneq:"\\u228B\\uFE00",varsupsetneqq:"\\u2ACC\\uFE00",vartheta:"\\u03D1",vartriangleleft:"\\u22B2",vartriangleright:"\\u22B3",vcy:"\\u0432",vdash:"\\u22A2",vee:"\\u2228",veebar:"\\u22BB",veeeq:"\\u225A",vellip:"\\u22EE",verbar:"|",vert:"|",vfr:"\\u{1D533}",vltri:"\\u22B2",vnsub:"\\u2282\\u20D2",vnsup:"\\u2283\\u20D2",vopf:"\\u{1D567}",vprop:"\\u221D",vrtri:"\\u22B3",vscr:"\\u{1D4CB}",vsubnE:"\\u2ACB\\uFE00",vsubne:"\\u228A\\uFE00",vsupnE:"\\u2ACC\\uFE00",vsupne:"\\u228B\\uFE00",vzigzag:"\\u299A",wcirc:"\\u0175",wedbar:"\\u2A5F",wedge:"\\u2227",wedgeq:"\\u2259",weierp:"\\u2118",wfr:"\\u{1D534}",wopf:"\\u{1D568}",wp:"\\u2118",wr:"\\u2240",wreath:"\\u2240",wscr:"\\u{1D4CC}",xcap:"\\u22C2",xcirc:"\\u25EF",xcup:"\\u22C3",xdtri:"\\u25BD",xfr:"\\u{1D535}",xhArr:"\\u27FA",xharr:"\\u27F7",xi:"\\u03BE",xlArr:"\\u27F8",xlarr:"\\u27F5",xmap:"\\u27FC",xnis:"\\u22FB",xodot:"\\u2A00",xopf:"\\u{1D569}",xoplus:"\\u2A01",xotime:"\\u2A02",xrArr:"\\u27F9",xrarr:"\\u27F6",xscr:"\\u{1D4CD}",xsqcup:"\\u2A06",xuplus:"\\u2A04",xutri:"\\u25B3",xvee:"\\u22C1",xwedge:"\\u22C0",yacute:"\\xFD",yacy:"\\u044F",ycirc:"\\u0177",ycy:"\\u044B",yen:"\\xA5",yfr:"\\u{1D536}",yicy:"\\u0457",yopf:"\\u{1D56A}",yscr:"\\u{1D4CE}",yucy:"\\u044E",yuml:"\\xFF",zacute:"\\u017A",zcaron:"\\u017E",zcy:"\\u0437",zdot:"\\u017C",zeetrf:"\\u2128",zeta:"\\u03B6",zfr:"\\u{1D537}",zhcy:"\\u0436",zigrarr:"\\u21DD",zopf:"\\u{1D56B}",zscr:"\\u{1D4CF}",zwj:"\\u200D",zwnj:"\\u200C"};var yi={}.hasOwnProperty;function Ie(e){return yi.call(Sr,e)?Sr[e]:!1}var Ze={name:"characterReference",tokenize:bi};function bi(e,r,t){let n=this,i=0,o,a;return u;function u(E){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(E),e.exit("characterReferenceMarker"),s}function s(E){return E===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(E),e.exit("characterReferenceMarkerNumeric"),f):(e.enter("characterReferenceValue"),o=31,a=ee,l(E))}function f(E){return E===88||E===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(E),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),o=6,a=At,l):(e.enter("characterReferenceValue"),o=7,a=Re,l(E))}function l(E){let g;return E===59&&i?(g=e.exit("characterReferenceValue"),a===ee&&!Ie(n.sliceSerialize(g))?t(E):(e.enter("characterReferenceMarker"),e.consume(E),e.exit("characterReferenceMarker"),e.exit("characterReference"),r)):a(E)&&i++<o?(e.consume(E),l):t(E)}}var Je={name:"codeFenced",tokenize:Ei,concrete:!0};function Ei(e,r,t){let n=this,i={tokenize:I,partial:!0},o={tokenize:L,partial:!0},a=this.events[this.events.length-1],u=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,s=0,f;return l;function l(y){return e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),f=y,E(y)}function E(y){return y===f?(e.consume(y),s++,E):(e.exit("codeFencedFenceSequence"),s<3?t(y):R(e,g,"whitespace")(y))}function g(y){return y===null||F(y)?b(y):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===null||G(y)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),R(e,m,"whitespace")(y)):y===96&&y===f?t(y):(e.consume(y),h)}function m(y){return y===null||F(y)?b(y):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),d(y))}function d(y){return y===null||F(y)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),b(y)):y===96&&y===f?t(y):(e.consume(y),d)}function b(y){return e.exit("codeFencedFence"),n.interrupt?r(y):x(y)}function x(y){return y===null?C(y):F(y)?e.attempt(o,e.attempt(i,C,u?R(e,x,"linePrefix",u+1):x),C)(y):(e.enter("codeFlowValue"),q(y))}function q(y){return y===null||F(y)?(e.exit("codeFlowValue"),x(y)):(e.consume(y),q)}function C(y){return e.exit("codeFenced"),r(y)}function L(y,D,B){let S=this;return T;function T(_){return y.enter("lineEnding"),y.consume(_),y.exit("lineEnding"),k}function k(_){return S.parser.lazy[S.now().line]?B(_):D(_)}}function I(y,D,B){let S=0;return R(y,T,"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function T(v){return y.enter("codeFencedFence"),y.enter("codeFencedFenceSequence"),k(v)}function k(v){return v===f?(y.consume(v),S++,k):S<s?B(v):(y.exit("codeFencedFenceSequence"),R(y,_,"whitespace")(v))}function _(v){return v===null||F(v)?(y.exit("codeFencedFence"),D(v)):B(v)}}}var Me={name:"codeIndented",tokenize:vi},Si={tokenize:Ai,partial:!0};function vi(e,r,t){let n=this;return i;function i(f){return e.enter("codeIndented"),R(e,o,"linePrefix",4+1)(f)}function o(f){let l=n.events[n.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?a(f):t(f)}function a(f){return f===null?s(f):F(f)?e.attempt(Si,a,s)(f):(e.enter("codeFlowValue"),u(f))}function u(f){return f===null||F(f)?(e.exit("codeFlowValue"),a(f)):(e.consume(f),u)}function s(f){return e.exit("codeIndented"),r(f)}}function Ai(e,r,t){let n=this;return i;function i(a){return n.parser.lazy[n.now().line]?t(a):F(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),i):R(e,o,"linePrefix",4+1)(a)}function o(a){let u=n.events[n.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?r(a):F(a)?i(a):t(a)}}var vr={name:"codeText",tokenize:qi,resolve:Ci,previous:Ti};function Ci(e){let r=e.length-4,t=3,n,i;if((e[t][1].type==="lineEnding"||e[t][1].type==="space")&&(e[r][1].type==="lineEnding"||e[r][1].type==="space")){for(n=t;++n<r;)if(e[n][1].type==="codeTextData"){e[t][1].type="codeTextPadding",e[r][1].type="codeTextPadding",t+=2,r-=2;break}}for(n=t-1,r++;++n<=r;)i===void 0?n!==r&&e[n][1].type!=="lineEnding"&&(i=n):(n===r||e[n][1].type==="lineEnding")&&(e[i][1].type="codeTextData",n!==i+2&&(e[i][1].end=e[n-1][1].end,e.splice(i+2,n-i-2),r-=n-i-2,n=i+2),i=void 0);return e}function Ti(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function qi(e,r,t){let n=this,i=0,o,a;return u;function u(g){return e.enter("codeText"),e.enter("codeTextSequence"),s(g)}function s(g){return g===96?(e.consume(g),i++,s):(e.exit("codeTextSequence"),f(g))}function f(g){return g===null?t(g):g===96?(a=e.enter("codeTextSequence"),o=0,E(g)):g===32?(e.enter("space"),e.consume(g),e.exit("space"),f):F(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),f):(e.enter("codeTextData"),l(g))}function l(g){return g===null||g===32||g===96||F(g)?(e.exit("codeTextData"),f(g)):(e.consume(g),l)}function E(g){return g===96?(e.consume(g),o++,E):o===i?(e.exit("codeTextSequence"),e.exit("codeText"),r(g)):(a.type="codeTextData",l(g))}}function Ye(e){let r={},t=-1,n,i,o,a,u,s,f;for(;++t<e.length;){for(;t in r;)t=r[t];if(n=e[t],t&&n[1].type==="chunkFlow"&&e[t-1][1].type==="listItemPrefix"&&(s=n[1]._tokenizer.events,o=0,o<s.length&&s[o][1].type==="lineEndingBlank"&&(o+=2),o<s.length&&s[o][1].type==="content"))for(;++o<s.length&&s[o][1].type!=="content";)s[o][1].type==="chunkText"&&(s[o][1]._isInFirstContentOfListItem=!0,o++);if(n[0]==="enter")n[1].contentType&&(Object.assign(r,Fi(e,t)),t=r[t],f=!0);else if(n[1]._container){for(o=t,i=void 0;o--&&(a=e[o],a[1].type==="lineEnding"||a[1].type==="lineEndingBlank");)a[0]==="enter"&&(i&&(e[i][1].type="lineEndingBlank"),a[1].type="lineEnding",i=o);i&&(n[1].end=Object.assign({},e[i][1].start),u=e.slice(i,t),u.unshift(n),Z(e,i,t-i+1,u))}}return!f}function Fi(e,r){let t=e[r][1],n=e[r][2],i=r-1,o=[],a=t._tokenizer||n.parser[t.contentType](t.start),u=a.events,s=[],f={},l,E,g=-1,h=t,m=0,d=0,b=[d];for(;h;){for(;e[++i][1]!==h;);o.push(i),h._tokenizer||(l=n.sliceStream(h),h.next||l.push(null),E&&a.defineSkip(h.start),h._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(l),h._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),E=h,h=h.next}for(h=t;++g<u.length;)u[g][0]==="exit"&&u[g-1][0]==="enter"&&u[g][1].type===u[g-1][1].type&&u[g][1].start.line!==u[g][1].end.line&&(d=g+1,b.push(d),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(a.events=[],h?(h._tokenizer=void 0,h.previous=void 0):b.pop(),g=b.length;g--;){let x=u.slice(b[g],b[g+1]),q=o.pop();s.unshift([q,q+x.length-1]),Z(e,q,2,x)}for(g=-1;++g<s.length;)f[m+s[g][0]]=m+s[g][1],m+=s[g][1]-s[g][0]-1;return f}var Ar={tokenize:Li,resolve:Ii},_i={tokenize:Oi,partial:!0};function Ii(e){return Ye(e),e}function Li(e,r){let t;return n;function n(u){return e.enter("content"),t=e.enter("chunkContent",{contentType:"content"}),i(u)}function i(u){return u===null?o(u):F(u)?e.check(_i,a,o)(u):(e.consume(u),i)}function o(u){return e.exit("chunkContent"),e.exit("content"),r(u)}function a(u){return e.consume(u),e.exit("chunkContent"),t.next=e.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,i}}function Oi(e,r,t){let n=this;return i;function i(a){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),R(e,o,"linePrefix")}function o(a){if(a===null||F(a))return t(a);let u=n.events[n.events.length-1];return!n.parser.constructs.disable.null.includes("codeIndented")&&u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?r(a):e.interrupt(n.parser.constructs.flow,t,r)(a)}}function Xe(e,r,t,n,i,o,a,u,s){let f=s||Number.POSITIVE_INFINITY,l=0;return E;function E(x){return x===60?(e.enter(n),e.enter(i),e.enter(o),e.consume(x),e.exit(o),g):x===null||x===41||Be(x)?t(x):(e.enter(n),e.enter(a),e.enter(u),e.enter("chunkString",{contentType:"string"}),d(x))}function g(x){return x===62?(e.enter(o),e.consume(x),e.exit(o),e.exit(i),e.exit(n),r):(e.enter(u),e.enter("chunkString",{contentType:"string"}),h(x))}function h(x){return x===62?(e.exit("chunkString"),e.exit(u),g(x)):x===null||x===60||F(x)?t(x):(e.consume(x),x===92?m:h)}function m(x){return x===60||x===62||x===92?(e.consume(x),h):h(x)}function d(x){return x===40?++l>f?t(x):(e.consume(x),d):x===41?l--?(e.consume(x),d):(e.exit("chunkString"),e.exit(u),e.exit(a),e.exit(n),r(x)):x===null||G(x)?l?t(x):(e.exit("chunkString"),e.exit(u),e.exit(a),e.exit(n),r(x)):Be(x)?t(x):(e.consume(x),x===92?b:d)}function b(x){return x===40||x===41||x===92?(e.consume(x),d):d(x)}}function er(e,r,t,n,i,o){let a=this,u=0,s;return f;function f(h){return e.enter(n),e.enter(i),e.consume(h),e.exit(i),e.enter(o),l}function l(h){return h===null||h===91||h===93&&!s||h===94&&!u&&"_hiddenFootnoteSupport"in a.parser.constructs||u>999?t(h):h===93?(e.exit(o),e.enter(i),e.consume(h),e.exit(i),e.exit(n),r):F(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),l):(e.enter("chunkString",{contentType:"string"}),E(h))}function E(h){return h===null||h===91||h===93||F(h)||u++>999?(e.exit("chunkString"),l(h)):(e.consume(h),s=s||!j(h),h===92?g:E)}function g(h){return h===91||h===92||h===93?(e.consume(h),u++,E):E(h)}}function rr(e,r,t,n,i,o){let a;return u;function u(g){return e.enter(n),e.enter(i),e.consume(g),e.exit(i),a=g===40?41:g,s}function s(g){return g===a?(e.enter(i),e.consume(g),e.exit(i),e.exit(n),r):(e.enter(o),f(g))}function f(g){return g===a?(e.exit(o),s(a)):g===null?t(g):F(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),R(e,f,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),l(g))}function l(g){return g===a||g===null||F(g)?(e.exit("chunkString"),f(g)):(e.consume(g),g===92?E:l)}function E(g){return g===a||g===92?(e.consume(g),l):l(g)}}function ve(e,r){let t;return n;function n(i){return F(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t=!0,n):j(i)?R(e,n,t?"linePrefix":"lineSuffix")(i):r(i)}}function me(e){return e.replace(/[\\t\\n\\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}var Cr={name:"definition",tokenize:Di},Pi={tokenize:zi,partial:!0};function Di(e,r,t){let n=this,i;return o;function o(s){return e.enter("definition"),er.call(n,e,a,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(s)}function a(s){return i=me(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)),s===58?(e.enter("definitionMarker"),e.consume(s),e.exit("definitionMarker"),ve(e,Xe(e,e.attempt(Pi,R(e,u,"whitespace"),R(e,u,"whitespace")),t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString"))):t(s)}function u(s){return s===null||F(s)?(e.exit("definition"),n.parser.defined.includes(i)||n.parser.defined.push(i),r(s)):t(s)}}function zi(e,r,t){return n;function n(a){return G(a)?ve(e,i)(a):t(a)}function i(a){return a===34||a===39||a===40?rr(e,R(e,o,"whitespace"),t,"definitionTitle","definitionTitleMarker","definitionTitleString")(a):t(a)}function o(a){return a===null||F(a)?r(a):t(a)}}var Tr={name:"hardBreakEscape",tokenize:Ri};function Ri(e,r,t){return n;function n(o){return e.enter("hardBreakEscape"),e.enter("escapeMarker"),e.consume(o),i}function i(o){return F(o)?(e.exit("escapeMarker"),e.exit("hardBreakEscape"),r(o)):t(o)}}var qr={name:"headingAtx",tokenize:Ni,resolve:Bi};function Bi(e,r){let t=e.length-2,n=3,i,o;return e[n][1].type==="whitespace"&&(n+=2),t-2>n&&e[t][1].type==="whitespace"&&(t-=2),e[t][1].type==="atxHeadingSequence"&&(n===t-1||t-4>n&&e[t-2][1].type==="whitespace")&&(t-=n+1===t?2:4),t>n&&(i={type:"atxHeadingText",start:e[n][1].start,end:e[t][1].end},o={type:"chunkText",start:e[n][1].start,end:e[t][1].end,contentType:"text"},Z(e,n,t-n+1,[["enter",i,r],["enter",o,r],["exit",o,r],["exit",i,r]])),e}function Ni(e,r,t){let n=this,i=0;return o;function o(l){return e.enter("atxHeading"),e.enter("atxHeadingSequence"),a(l)}function a(l){return l===35&&i++<6?(e.consume(l),a):l===null||G(l)?(e.exit("atxHeadingSequence"),n.interrupt?r(l):u(l)):t(l)}function u(l){return l===35?(e.enter("atxHeadingSequence"),s(l)):l===null||F(l)?(e.exit("atxHeading"),r(l)):j(l)?R(e,u,"whitespace")(l):(e.enter("atxHeadingText"),f(l))}function s(l){return l===35?(e.consume(l),s):(e.exit("atxHeadingSequence"),u(l))}function f(l){return l===null||l===35||G(l)?(e.exit("atxHeadingText"),u(l)):(e.consume(l),f)}}var Ot=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Fr=["pre","script","style","textarea"];var _r={name:"htmlFlow",tokenize:ji,resolveTo:Wi,concrete:!0},Mi={tokenize:Ui,partial:!0};function Wi(e){let r=e.length;for(;r--&&!(e[r][0]==="enter"&&e[r][1].type==="htmlFlow"););return r>1&&e[r-2][1].type==="linePrefix"&&(e[r][1].start=e[r-2][1].start,e[r+1][1].start=e[r-2][1].start,e.splice(r-2,2)),e}function ji(e,r,t){let n=this,i,o,a,u,s;return f;function f(c){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(c),l}function l(c){return c===33?(e.consume(c),E):c===47?(e.consume(c),m):c===63?(e.consume(c),i=3,n.interrupt?r:$):re(c)?(e.consume(c),a=String.fromCharCode(c),o=!0,d):t(c)}function E(c){return c===45?(e.consume(c),i=2,g):c===91?(e.consume(c),i=5,a="CDATA[",u=0,h):re(c)?(e.consume(c),i=4,n.interrupt?r:$):t(c)}function g(c){return c===45?(e.consume(c),n.interrupt?r:$):t(c)}function h(c){return c===a.charCodeAt(u++)?(e.consume(c),u===a.length?n.interrupt?r:k:h):t(c)}function m(c){return re(c)?(e.consume(c),a=String.fromCharCode(c),d):t(c)}function d(c){return c===null||c===47||c===62||G(c)?c!==47&&o&&Fr.includes(a.toLowerCase())?(i=1,n.interrupt?r(c):k(c)):Ot.includes(a.toLowerCase())?(i=6,c===47?(e.consume(c),b):n.interrupt?r(c):k(c)):(i=7,n.interrupt&&!n.parser.lazy[n.now().line]?t(c):o?q(c):x(c)):c===45||ee(c)?(e.consume(c),a+=String.fromCharCode(c),d):t(c)}function b(c){return c===62?(e.consume(c),n.interrupt?r:k):t(c)}function x(c){return j(c)?(e.consume(c),x):S(c)}function q(c){return c===47?(e.consume(c),S):c===58||c===95||re(c)?(e.consume(c),C):j(c)?(e.consume(c),q):S(c)}function C(c){return c===45||c===46||c===58||c===95||ee(c)?(e.consume(c),C):L(c)}function L(c){return c===61?(e.consume(c),I):j(c)?(e.consume(c),L):q(c)}function I(c){return c===null||c===60||c===61||c===62||c===96?t(c):c===34||c===39?(e.consume(c),s=c,y):j(c)?(e.consume(c),I):(s=null,D(c))}function y(c){return c===null||F(c)?t(c):c===s?(e.consume(c),B):(e.consume(c),y)}function D(c){return c===null||c===34||c===39||c===60||c===61||c===62||c===96||G(c)?L(c):(e.consume(c),D)}function B(c){return c===47||c===62||j(c)?q(c):t(c)}function S(c){return c===62?(e.consume(c),T):t(c)}function T(c){return j(c)?(e.consume(c),T):c===null||F(c)?k(c):t(c)}function k(c){return c===45&&i===2?(e.consume(c),M):c===60&&i===1?(e.consume(c),z):c===62&&i===4?(e.consume(c),Q):c===63&&i===3?(e.consume(c),$):c===93&&i===5?(e.consume(c),N):F(c)&&(i===6||i===7)?e.check(Mi,Q,_)(c):c===null||F(c)?_(c):(e.consume(c),k)}function _(c){return e.exit("htmlFlowData"),v(c)}function v(c){return c===null?p(c):F(c)?e.attempt({tokenize:O,partial:!0},v,p)(c):(e.enter("htmlFlowData"),k(c))}function O(c,Le,ye){return qe;function qe(ae){return c.enter("lineEnding"),c.consume(ae),c.exit("lineEnding"),Oe}function Oe(ae){return n.parser.lazy[n.now().line]?ye(ae):Le(ae)}}function M(c){return c===45?(e.consume(c),$):k(c)}function z(c){return c===47?(e.consume(c),a="",W):k(c)}function W(c){return c===62&&Fr.includes(a.toLowerCase())?(e.consume(c),Q):re(c)&&a.length<8?(e.consume(c),a+=String.fromCharCode(c),W):k(c)}function N(c){return c===93?(e.consume(c),$):k(c)}function $(c){return c===62?(e.consume(c),Q):c===45&&i===2?(e.consume(c),$):k(c)}function Q(c){return c===null||F(c)?(e.exit("htmlFlowData"),p(c)):(e.consume(c),Q)}function p(c){return e.exit("htmlFlow"),r(c)}}function Ui(e,r,t){return n;function n(i){return e.exit("htmlFlowData"),e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),e.attempt(xe,r,t)}}var Ir={name:"htmlText",tokenize:Hi};function Hi(e,r,t){let n=this,i,o,a,u;return s;function s(p){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(p),f}function f(p){return p===33?(e.consume(p),l):p===47?(e.consume(p),D):p===63?(e.consume(p),I):re(p)?(e.consume(p),T):t(p)}function l(p){return p===45?(e.consume(p),E):p===91?(e.consume(p),o="CDATA[",a=0,b):re(p)?(e.consume(p),L):t(p)}function E(p){return p===45?(e.consume(p),g):t(p)}function g(p){return p===null||p===62?t(p):p===45?(e.consume(p),h):m(p)}function h(p){return p===null||p===62?t(p):m(p)}function m(p){return p===null?t(p):p===45?(e.consume(p),d):F(p)?(u=m,N(p)):(e.consume(p),m)}function d(p){return p===45?(e.consume(p),Q):m(p)}function b(p){return p===o.charCodeAt(a++)?(e.consume(p),a===o.length?x:b):t(p)}function x(p){return p===null?t(p):p===93?(e.consume(p),q):F(p)?(u=x,N(p)):(e.consume(p),x)}function q(p){return p===93?(e.consume(p),C):x(p)}function C(p){return p===62?Q(p):p===93?(e.consume(p),C):x(p)}function L(p){return p===null||p===62?Q(p):F(p)?(u=L,N(p)):(e.consume(p),L)}function I(p){return p===null?t(p):p===63?(e.consume(p),y):F(p)?(u=I,N(p)):(e.consume(p),I)}function y(p){return p===62?Q(p):I(p)}function D(p){return re(p)?(e.consume(p),B):t(p)}function B(p){return p===45||ee(p)?(e.consume(p),B):S(p)}function S(p){return F(p)?(u=S,N(p)):j(p)?(e.consume(p),S):Q(p)}function T(p){return p===45||ee(p)?(e.consume(p),T):p===47||p===62||G(p)?k(p):t(p)}function k(p){return p===47?(e.consume(p),Q):p===58||p===95||re(p)?(e.consume(p),_):F(p)?(u=k,N(p)):j(p)?(e.consume(p),k):Q(p)}function _(p){return p===45||p===46||p===58||p===95||ee(p)?(e.consume(p),_):v(p)}function v(p){return p===61?(e.consume(p),O):F(p)?(u=v,N(p)):j(p)?(e.consume(p),v):k(p)}function O(p){return p===null||p===60||p===61||p===62||p===96?t(p):p===34||p===39?(e.consume(p),i=p,M):F(p)?(u=O,N(p)):j(p)?(e.consume(p),O):(e.consume(p),i=void 0,W)}function M(p){return p===i?(e.consume(p),z):p===null?t(p):F(p)?(u=M,N(p)):(e.consume(p),M)}function z(p){return p===62||p===47||G(p)?k(p):t(p)}function W(p){return p===null||p===34||p===39||p===60||p===61||p===96?t(p):p===62||G(p)?k(p):(e.consume(p),W)}function N(p){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),R(e,$,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function $(p){return e.enter("htmlTextData"),u(p)}function Q(p){return p===62?(e.consume(p),e.exit("htmlTextData"),e.exit("htmlText"),r):t(p)}}var Ae={name:"labelEnd",tokenize:Zi,resolveTo:Ki,resolveAll:$i},Vi={tokenize:Ji},Qi={tokenize:Yi},Gi={tokenize:Xi};function $i(e){let r=-1,t;for(;++r<e.length;)t=e[r][1],(t.type==="labelImage"||t.type==="labelLink"||t.type==="labelEnd")&&(e.splice(r+1,t.type==="labelImage"?4:2),t.type="data",r++);return e}function Ki(e,r){let t=e.length,n=0,i,o,a,u;for(;t--;)if(i=e[t][1],o){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[t][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(a){if(e[t][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(o=t,i.type!=="labelLink")){n=2;break}}else i.type==="labelEnd"&&(a=t);let s={type:e[o][1].type==="labelLink"?"link":"image",start:Object.assign({},e[o][1].start),end:Object.assign({},e[e.length-1][1].end)},f={type:"label",start:Object.assign({},e[o][1].start),end:Object.assign({},e[a][1].end)},l={type:"labelText",start:Object.assign({},e[o+n+2][1].end),end:Object.assign({},e[a-2][1].start)};return u=[["enter",s,r],["enter",f,r]],u=X(u,e.slice(o+1,o+n+3)),u=X(u,[["enter",l,r]]),u=X(u,_e(r.parser.constructs.insideSpan.null,e.slice(o+n+4,a-3),r)),u=X(u,[["exit",l,r],e[a-2],e[a-1],["exit",f,r]]),u=X(u,e.slice(a+1)),u=X(u,[["exit",s,r]]),Z(e,o,e.length,u),e}function Zi(e,r,t){let n=this,i=n.events.length,o,a;for(;i--;)if((n.events[i][1].type==="labelImage"||n.events[i][1].type==="labelLink")&&!n.events[i][1]._balanced){o=n.events[i][1];break}return u;function u(l){return o?o._inactive?f(l):(a=n.parser.defined.includes(me(n.sliceSerialize({start:o.end,end:n.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelEnd"),s):t(l)}function s(l){return l===40?e.attempt(Vi,r,a?r:f)(l):l===91?e.attempt(Qi,r,a?e.attempt(Gi,r,f):f)(l):a?r(l):f(l)}function f(l){return o._balanced=!0,t(l)}}function Ji(e,r,t){return n;function n(s){return e.enter("resource"),e.enter("resourceMarker"),e.consume(s),e.exit("resourceMarker"),ve(e,i)}function i(s){return s===41?u(s):Xe(e,o,t,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(s)}function o(s){return G(s)?ve(e,a)(s):u(s)}function a(s){return s===34||s===39||s===40?rr(e,ve(e,u),t,"resourceTitle","resourceTitleMarker","resourceTitleString")(s):u(s)}function u(s){return s===41?(e.enter("resourceMarker"),e.consume(s),e.exit("resourceMarker"),e.exit("resource"),r):t(s)}}function Yi(e,r,t){let n=this;return i;function i(a){return er.call(n,e,o,t,"reference","referenceMarker","referenceString")(a)}function o(a){return n.parser.defined.includes(me(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)))?r(a):t(a)}}function Xi(e,r,t){return n;function n(o){return e.enter("reference"),e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),i}function i(o){return o===93?(e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),e.exit("reference"),r):t(o)}}var Lr={name:"labelStartImage",tokenize:eo,resolveAll:Ae.resolveAll};function eo(e,r,t){let n=this;return i;function i(u){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(u),e.exit("labelImageMarker"),o}function o(u){return u===91?(e.enter("labelMarker"),e.consume(u),e.exit("labelMarker"),e.exit("labelImage"),a):t(u)}function a(u){return u===94&&"_hiddenFootnoteSupport"in n.parser.constructs?t(u):r(u)}}var Or={name:"labelStartLink",tokenize:ro,resolveAll:Ae.resolveAll};function ro(e,r,t){let n=this;return i;function i(a){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelLink"),o}function o(a){return a===94&&"_hiddenFootnoteSupport"in n.parser.constructs?t(a):r(a)}}var We={name:"lineEnding",tokenize:to};function to(e,r){return t;function t(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),R(e,r,"linePrefix")}}var Ce={name:"thematicBreak",tokenize:no};function no(e,r,t){let n=0,i;return o;function o(s){return e.enter("thematicBreak"),i=s,a(s)}function a(s){return s===i?(e.enter("thematicBreakSequence"),u(s)):j(s)?R(e,a,"whitespace")(s):n<3||s!==null&&!F(s)?t(s):(e.exit("thematicBreak"),r(s))}function u(s){return s===i?(e.consume(s),n++,u):(e.exit("thematicBreakSequence"),a(s))}}var J={name:"list",tokenize:uo,continuation:{tokenize:ao},exit:lo},io={tokenize:co,partial:!0},oo={tokenize:so,partial:!0};function uo(e,r,t){let n=this,i=n.events[n.events.length-1],o=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,a=0;return u;function u(h){let m=n.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(m==="listUnordered"?!n.containerState.marker||h===n.containerState.marker:Re(h)){if(n.containerState.type||(n.containerState.type=m,e.enter(m,{_container:!0})),m==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(Ce,t,f)(h):f(h);if(!n.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),s(h)}return t(h)}function s(h){return Re(h)&&++a<10?(e.consume(h),s):(!n.interrupt||a<2)&&(n.containerState.marker?h===n.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),f(h)):t(h)}function f(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),n.containerState.marker=n.containerState.marker||h,e.check(xe,n.interrupt?t:l,e.attempt(io,g,E))}function l(h){return n.containerState.initialBlankLine=!0,o++,g(h)}function E(h){return j(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),g):t(h)}function g(h){return n.containerState.size=o+n.sliceSerialize(e.exit("listItemPrefix"),!0).length,r(h)}}function ao(e,r,t){let n=this;return n.containerState._closeFlow=void 0,e.check(xe,i,o);function i(u){return n.containerState.furtherBlankLines=n.containerState.furtherBlankLines||n.containerState.initialBlankLine,R(e,r,"listItemIndent",n.containerState.size+1)(u)}function o(u){return n.containerState.furtherBlankLines||!j(u)?(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,a(u)):(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,e.attempt(oo,r,a)(u))}function a(u){return n.containerState._closeFlow=!0,n.interrupt=void 0,R(e,e.attempt(J,r,t),"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u)}}function so(e,r,t){let n=this;return R(e,i,"listItemIndent",n.containerState.size+1);function i(o){let a=n.events[n.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===n.containerState.size?r(o):t(o)}}function lo(e){e.exit(this.containerState.type)}function co(e,r,t){let n=this;return R(e,i,"listItemPrefixWhitespace",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4+1);function i(o){let a=n.events[n.events.length-1];return!j(o)&&a&&a[1].type==="listItemPrefixWhitespace"?r(o):t(o)}}var tr={name:"setextUnderline",tokenize:fo,resolveTo:po};function po(e,r){let t=e.length,n,i,o;for(;t--;)if(e[t][0]==="enter"){if(e[t][1].type==="content"){n=t;break}e[t][1].type==="paragraph"&&(i=t)}else e[t][1].type==="content"&&e.splice(t,1),!o&&e[t][1].type==="definition"&&(o=t);let a={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",o?(e.splice(i,0,["enter",a,r]),e.splice(o+1,0,["exit",e[n][1],r]),e[n][1].end=Object.assign({},e[o][1].end)):e[n][1]=a,e.push(["exit",a,r]),e}function fo(e,r,t){let n=this,i=n.events.length,o,a;for(;i--;)if(n.events[i][1].type!=="lineEnding"&&n.events[i][1].type!=="linePrefix"&&n.events[i][1].type!=="content"){a=n.events[i][1].type==="paragraph";break}return u;function u(l){return!n.parser.lazy[n.now().line]&&(n.interrupt||a)?(e.enter("setextHeadingLine"),e.enter("setextHeadingLineSequence"),o=l,s(l)):t(l)}function s(l){return l===o?(e.consume(l),s):(e.exit("setextHeadingLineSequence"),R(e,f,"lineSuffix")(l))}function f(l){return l===null||F(l)?(e.exit("setextHeadingLine"),r(l)):t(l)}}var Pt={tokenize:ho};function ho(e){let r=this,t=e.attempt(xe,n,e.attempt(this.parser.constructs.flowInitial,i,R(e,e.attempt(this.parser.constructs.flow,i,e.attempt(Ar,i)),"linePrefix")));return t;function n(o){if(o===null){e.consume(o);return}return e.enter("lineEndingBlank"),e.consume(o),e.exit("lineEndingBlank"),r.currentConstruct=void 0,t}function i(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),r.currentConstruct=void 0,t}}var Dt={resolveAll:Nt()},zt=Bt("string"),Rt=Bt("text");function Bt(e){return{tokenize:r,resolveAll:Nt(e==="text"?mo:void 0)};function r(t){let n=this,i=this.parser.constructs[e],o=t.attempt(i,a,u);return a;function a(l){return f(l)?o(l):u(l)}function u(l){if(l===null){t.consume(l);return}return t.enter("data"),t.consume(l),s}function s(l){return f(l)?(t.exit("data"),o(l)):(t.consume(l),s)}function f(l){if(l===null)return!0;let E=i[l],g=-1;if(E)for(;++g<E.length;){let h=E[g];if(!h.previous||h.previous.call(n,n.previous))return!0}return!1}}}function Nt(e){return r;function r(t,n){let i=-1,o;for(;++i<=t.length;)o===void 0?t[i]&&t[i][1].type==="data"&&(o=i,i++):(!t[i]||t[i][1].type!=="data")&&(i!==o+2&&(t[o][1].end=t[i-1][1].end,t.splice(o+2,i-o-2),i=o+2),o=void 0);return e?e(t,n):t}}function mo(e,r){let t=0;for(;++t<=e.length;)if((t===e.length||e[t][1].type==="lineEnding")&&e[t-1][1].type==="data"){let n=e[t-1][1],i=r.sliceStream(n),o=i.length,a=-1,u=0,s;for(;o--;){let f=i[o];if(typeof f=="string"){for(a=f.length;f.charCodeAt(a-1)===32;)u++,a--;if(a)break;a=-1}else if(f===-2)s=!0,u++;else if(f!==-1){o++;break}}if(u){let f={type:t===e.length||s||u<2?"lineSuffix":"hardBreakTrailing",start:{line:n.end.line,column:n.end.column-u,offset:n.end.offset-u,_index:n.start._index+o,_bufferIndex:o?a:n.start._bufferIndex+a},end:Object.assign({},n.end)};n.end=Object.assign({},f.start),n.start.offset===n.end.offset?Object.assign(n,f):(e.splice(t,0,["enter",f,r],["exit",f,r]),t+=2)}t++}return e}function Mt(e,r,t){let n=Object.assign(t?Object.assign({},t):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1}),i={},o=[],a=[],u=[],s=!0,f={consume:L,enter:I,exit:y,attempt:S(D),check:S(B),interrupt:S(B,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:d,sliceSerialize:m,now:b,defineSkip:x,write:h},E=r.tokenize.call(l,f),g;return r.resolveAll&&o.push(r),l;function h(v){return a=X(a,v),q(),a[a.length-1]!==null?[]:(T(r,0),l.events=_e(o,l.events,l),l.events)}function m(v,O){return xo(d(v),O)}function d(v){return go(a,v)}function b(){return Object.assign({},n)}function x(v){i[v.line]=v.column,_()}function q(){let v;for(;n._index<a.length;){let O=a[n._index];if(typeof O=="string")for(v=n._index,n._bufferIndex<0&&(n._bufferIndex=0);n._index===v&&n._bufferIndex<O.length;)C(O.charCodeAt(n._bufferIndex));else C(O)}}function C(v){s=void 0,g=v,E=E(v)}function L(v){F(v)?(n.line++,n.column=1,n.offset+=v===-3?2:1,_()):v!==-1&&(n.column++,n.offset++),n._bufferIndex<0?n._index++:(n._bufferIndex++,n._bufferIndex===a[n._index].length&&(n._bufferIndex=-1,n._index++)),l.previous=v,s=!0}function I(v,O){let M=O||{};return M.type=v,M.start=b(),l.events.push(["enter",M,l]),u.push(M),M}function y(v){let O=u.pop();return O.end=b(),l.events.push(["exit",O,l]),O}function D(v,O){T(v,O.from)}function B(v,O){O.restore()}function S(v,O){return M;function M(z,W,N){let $,Q,p,c;return Array.isArray(z)?ye(z):"tokenize"in z?ye([z]):Le(z);function Le(K){return Pe;function Pe(le){let Fe=le!==null&&K[le],be=le!==null&&K.null,hr=[...Array.isArray(Fe)?Fe:Fe?[Fe]:[],...Array.isArray(be)?be:be?[be]:[]];return ye(hr)(le)}}function ye(K){return $=K,Q=0,K.length===0?N:qe(K[Q])}function qe(K){return Pe;function Pe(le){return c=k(),p=K,K.partial||(l.currentConstruct=K),K.name&&l.parser.constructs.disable.null.includes(K.name)?ae(le):K.tokenize.call(O?Object.assign(Object.create(l),O):l,f,Oe,ae)(le)}}function Oe(K){return s=!0,v(p,c),W}function ae(K){return s=!0,c.restore(),++Q<$.length?qe($[Q]):N}}}function T(v,O){v.resolveAll&&!o.includes(v)&&o.push(v),v.resolve&&Z(l.events,O,l.events.length-O,v.resolve(l.events.slice(O),l)),v.resolveTo&&(l.events=v.resolveTo(l.events,l))}function k(){let v=b(),O=l.previous,M=l.currentConstruct,z=l.events.length,W=Array.from(u);return{restore:N,from:z};function N(){n=v,l.previous=O,l.currentConstruct=M,l.events.length=z,u=W,_()}}function _(){n.line in i&&n.column<2&&(n.column=i[n.line],n.offset+=i[n.line]-1)}}function go(e,r){let t=r.start._index,n=r.start._bufferIndex,i=r.end._index,o=r.end._bufferIndex,a;return t===i?a=[e[t].slice(n,o)]:(a=e.slice(t,i),n>-1&&(a[0]=a[0].slice(n)),o>0&&a.push(e[i].slice(0,o))),a}function xo(e,r){let t=-1,n=[],i;for(;++t<e.length;){let o=e[t],a;if(typeof o=="string")a=o;else switch(o){case-5:{a="\\r";break}case-4:{a=`\n`;break}case-3:{a=`\\r\n`;break}case-2:{a=r?" ":"	";break}case-1:{if(!r&&i)continue;a=" ";break}default:a=String.fromCharCode(o)}i=o===-2,n.push(a)}return n.join("")}var Pr={};ht(Pr,{attentionMarkers:()=>Ao,contentInitial:()=>wo,disable:()=>Co,document:()=>ko,flow:()=>bo,flowInitial:()=>yo,insideSpan:()=>vo,string:()=>Eo,text:()=>So});var ko={[42]:J,[43]:J,[45]:J,[48]:J,[49]:J,[50]:J,[51]:J,[52]:J,[53]:J,[54]:J,[55]:J,[56]:J,[57]:J,[62]:$e},wo={[91]:Cr},yo={[-2]:Me,[-1]:Me,[32]:Me},bo={[35]:qr,[42]:Ce,[45]:[tr,Ce],[60]:_r,[61]:tr,[95]:Ce,[96]:Je,[126]:Je},Eo={[38]:Ze,[92]:Ke},So={[-5]:We,[-4]:We,[-3]:We,[33]:Lr,[38]:Ze,[42]:Ne,[60]:[Er,Ir],[91]:Or,[92]:[Tr,Ke],[93]:Ae,[95]:Ne,[96]:vr},vo={null:[Ne,Dt]},Ao={null:[42,95]},Co={null:[]};function Wt(e={}){let r=St([Pr].concat(e.extensions||[])),t={defined:[],lazy:{},constructs:r,content:n(Ft),document:n(It),flow:n(Pt),string:n(zt),text:n(Rt)};return t;function n(i){return o;function o(a){return Mt(t,i,a)}}}var jt=/[\\0\\t\\n\\r]/g;function Ut(){let e=1,r="",t=!0,n;return i;function i(o,a,u){let s=[],f,l,E,g,h;for(o=r+o.toString(a),E=0,r="",t&&(o.charCodeAt(0)===65279&&E++,t=void 0);E<o.length;){if(jt.lastIndex=E,f=jt.exec(o),g=f&&f.index!==void 0?f.index:o.length,h=o.charCodeAt(g),!f){r=o.slice(E);break}if(h===10&&E===g&&n)s.push(-3),n=void 0;else switch(n&&(s.push(-5),n=void 0),E<g&&(s.push(o.slice(E,g)),e+=g-E),h){case 0:{s.push(65533),e++;break}case 9:{for(l=Math.ceil(e/4)*4,s.push(-2);e++<l;)s.push(-1);break}case 10:{s.push(-4),e=1;break}default:n=!0,e=1}E=g+1}return u&&(n&&s.push(-5),r&&s.push(r),s.push(null)),s}}function Ht(e){for(;!Ye(e););return e}function nr(e,r){let t=Number.parseInt(e,r);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"\\uFFFD":String.fromCharCode(t)}var To=/\\\\([!-/:-@[-`{-~])|&(#(?:\\d{1,7}|x[\\da-f]{1,6})|[\\da-z]{1,31});/gi;function Vt(e){return e.replace(To,qo)}function qo(e,r,t){if(r)return r;if(t.charCodeAt(0)===35){let i=t.charCodeAt(1),o=i===120||i===88;return nr(t.slice(o?2:1),o?16:10)}return Ie(t)||e}function ke(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Qt(e.position):"start"in e||"end"in e?Qt(e):"line"in e||"column"in e?Dr(e):""}function Dr(e){return Gt(e&&e.line)+":"+Gt(e&&e.column)}function Qt(e){return Dr(e&&e.start)+"-"+Dr(e&&e.end)}function Gt(e){return e&&typeof e=="number"?e:1}var Kt={}.hasOwnProperty,zr=function(e,r,t){return typeof r!="string"&&(t=r,r=void 0),Fo(t)(Ht(Wt(t).document().write(Ut()(e,r,!0))))};function Fo(e){let r={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:u(st),autolinkProtocol:k,autolinkEmail:k,atxHeading:u(ot),blockQuote:u(Fe),characterEscape:k,characterReference:k,codeFenced:u(be),codeFencedFenceInfo:s,codeFencedFenceMeta:s,codeIndented:u(be,s),codeText:u(hr,s),codeTextData:k,data:k,codeFlowValue:k,definition:u(Un),definitionDestinationString:s,definitionLabelString:s,definitionTitleString:s,emphasis:u(Hn),hardBreakEscape:u(ut),hardBreakTrailing:u(ut),htmlFlow:u(at,s),htmlFlowData:k,htmlText:u(at,s),htmlTextData:k,image:u(Vn),label:s,link:u(st),listItem:u(Qn),listItemValue:m,listOrdered:u(lt,h),listUnordered:u(lt),paragraph:u(Gn),reference:qe,referenceString:s,resourceDestinationString:s,resourceTitleString:s,setextHeading:u(ot),strong:u($n),thematicBreak:u(Zn)},exit:{atxHeading:l(),atxHeadingSequence:D,autolink:l(),autolinkEmail:le,autolinkProtocol:Pe,blockQuote:l(),characterEscapeValue:_,characterReferenceMarkerHexadecimal:ae,characterReferenceMarkerNumeric:ae,characterReferenceValue:K,codeFenced:l(q),codeFencedFence:x,codeFencedFenceInfo:d,codeFencedFenceMeta:b,codeFlowValue:_,codeIndented:l(C),codeText:l(W),codeTextData:_,data:_,definition:l(),definitionDestinationString:y,definitionLabelString:L,definitionTitleString:I,emphasis:l(),hardBreakEscape:l(O),hardBreakTrailing:l(O),htmlFlow:l(M),htmlFlowData:_,htmlText:l(z),htmlTextData:_,image:l($),label:p,labelText:Q,lineEnding:v,link:l(N),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:Oe,resourceDestinationString:c,resourceTitleString:Le,resource:ye,setextHeading:l(T),setextHeadingLineSequence:S,setextHeadingText:B,strong:l(),thematicBreak:l()}};Zt(r,(e||{}).mdastExtensions||[]);let t={};return n;function n(w){let A={type:"root",children:[]},P={stack:[A],tokenStack:[],config:r,enter:f,exit:E,buffer:s,resume:g,setData:o,getData:a},U=[],H=-1;for(;++H<w.length;)if(w[H][1].type==="listOrdered"||w[H][1].type==="listUnordered")if(w[H][0]==="enter")U.push(H);else{let oe=U.pop();H=i(w,oe,H)}for(H=-1;++H<w.length;){let oe=r[w[H][0]];Kt.call(oe,w[H][1].type)&&oe[w[H][1].type].call(Object.assign({sliceSerialize:w[H][2].sliceSerialize},P),w[H][1])}if(P.tokenStack.length>0){let oe=P.tokenStack[P.tokenStack.length-1];(oe[1]||$t).call(P,void 0,oe[0])}for(A.position={start:we(w.length>0?w[0][1].start:{line:1,column:1,offset:0}),end:we(w.length>0?w[w.length-2][1].end:{line:1,column:1,offset:0})},H=-1;++H<r.transforms.length;)A=r.transforms[H](A)||A;return A}function i(w,A,P){let U=A-1,H=-1,oe=!1,de,ce,De,ze;for(;++U<=P;){let V=w[U];if(V[1].type==="listUnordered"||V[1].type==="listOrdered"||V[1].type==="blockQuote"?(V[0]==="enter"?H++:H--,ze=void 0):V[1].type==="lineEndingBlank"?V[0]==="enter"&&(de&&!ze&&!H&&!De&&(De=U),ze=void 0):V[1].type==="linePrefix"||V[1].type==="listItemValue"||V[1].type==="listItemMarker"||V[1].type==="listItemPrefix"||V[1].type==="listItemPrefixWhitespace"||(ze=void 0),!H&&V[0]==="enter"&&V[1].type==="listItemPrefix"||H===-1&&V[0]==="exit"&&(V[1].type==="listUnordered"||V[1].type==="listOrdered")){if(de){let mr=U;for(ce=void 0;mr--;){let pe=w[mr];if(pe[1].type==="lineEnding"||pe[1].type==="lineEndingBlank"){if(pe[0]==="exit")continue;ce&&(w[ce][1].type="lineEndingBlank",oe=!0),pe[1].type="lineEnding",ce=mr}else if(!(pe[1].type==="linePrefix"||pe[1].type==="blockQuotePrefix"||pe[1].type==="blockQuotePrefixWhitespace"||pe[1].type==="blockQuoteMarker"||pe[1].type==="listItemIndent"))break}De&&(!ce||De<ce)&&(de._spread=!0),de.end=Object.assign({},ce?w[ce][1].start:V[1].end),w.splice(ce||U,0,["exit",de,V[2]]),U++,P++}V[1].type==="listItemPrefix"&&(de={type:"listItem",_spread:!1,start:Object.assign({},V[1].start)},w.splice(U,0,["enter",de,V[2]]),U++,P++,De=void 0,ze=!0)}}return w[A][1]._spread=oe,P}function o(w,A){t[w]=A}function a(w){return t[w]}function u(w,A){return P;function P(U){f.call(this,w(U),U),A&&A.call(this,U)}}function s(){this.stack.push({type:"fragment",children:[]})}function f(w,A,P){return this.stack[this.stack.length-1].children.push(w),this.stack.push(w),this.tokenStack.push([A,P]),w.position={start:we(A.start)},w}function l(w){return A;function A(P){w&&w.call(this,P),E.call(this,P)}}function E(w,A){let P=this.stack.pop(),U=this.tokenStack.pop();if(U)U[0].type!==w.type&&(A?A.call(this,w,U[0]):(U[1]||$t).call(this,w,U[0]));else throw new Error("Cannot close `"+w.type+"` ("+ke({start:w.start,end:w.end})+"): it\\u2019s not open");return P.position.end=we(w.end),P}function g(){return wr(this.stack.pop())}function h(){o("expectingFirstListItemValue",!0)}function m(w){if(a("expectingFirstListItemValue")){let A=this.stack[this.stack.length-2];A.start=Number.parseInt(this.sliceSerialize(w),10),o("expectingFirstListItemValue")}}function d(){let w=this.resume(),A=this.stack[this.stack.length-1];A.lang=w}function b(){let w=this.resume(),A=this.stack[this.stack.length-1];A.meta=w}function x(){a("flowCodeInside")||(this.buffer(),o("flowCodeInside",!0))}function q(){let w=this.resume(),A=this.stack[this.stack.length-1];A.value=w.replace(/^(\\r?\\n|\\r)|(\\r?\\n|\\r)$/g,""),o("flowCodeInside")}function C(){let w=this.resume(),A=this.stack[this.stack.length-1];A.value=w.replace(/(\\r?\\n|\\r)$/g,"")}function L(w){let A=this.resume(),P=this.stack[this.stack.length-1];P.label=A,P.identifier=me(this.sliceSerialize(w)).toLowerCase()}function I(){let w=this.resume(),A=this.stack[this.stack.length-1];A.title=w}function y(){let w=this.resume(),A=this.stack[this.stack.length-1];A.url=w}function D(w){let A=this.stack[this.stack.length-1];if(!A.depth){let P=this.sliceSerialize(w).length;A.depth=P}}function B(){o("setextHeadingSlurpLineEnding",!0)}function S(w){let A=this.stack[this.stack.length-1];A.depth=this.sliceSerialize(w).charCodeAt(0)===61?1:2}function T(){o("setextHeadingSlurpLineEnding")}function k(w){let A=this.stack[this.stack.length-1],P=A.children[A.children.length-1];(!P||P.type!=="text")&&(P=Kn(),P.position={start:we(w.start)},A.children.push(P)),this.stack.push(P)}function _(w){let A=this.stack.pop();A.value+=this.sliceSerialize(w),A.position.end=we(w.end)}function v(w){let A=this.stack[this.stack.length-1];if(a("atHardBreak")){let P=A.children[A.children.length-1];P.position.end=we(w.end),o("atHardBreak");return}!a("setextHeadingSlurpLineEnding")&&r.canContainEols.includes(A.type)&&(k.call(this,w),_.call(this,w))}function O(){o("atHardBreak",!0)}function M(){let w=this.resume(),A=this.stack[this.stack.length-1];A.value=w}function z(){let w=this.resume(),A=this.stack[this.stack.length-1];A.value=w}function W(){let w=this.resume(),A=this.stack[this.stack.length-1];A.value=w}function N(){let w=this.stack[this.stack.length-1];if(a("inReference")){let A=a("referenceType")||"shortcut";w.type+="Reference",w.referenceType=A,delete w.url,delete w.title}else delete w.identifier,delete w.label;o("referenceType")}function $(){let w=this.stack[this.stack.length-1];if(a("inReference")){let A=a("referenceType")||"shortcut";w.type+="Reference",w.referenceType=A,delete w.url,delete w.title}else delete w.identifier,delete w.label;o("referenceType")}function Q(w){let A=this.sliceSerialize(w),P=this.stack[this.stack.length-2];P.label=Vt(A),P.identifier=me(A).toLowerCase()}function p(){let w=this.stack[this.stack.length-1],A=this.resume(),P=this.stack[this.stack.length-1];if(o("inReference",!0),P.type==="link"){let U=w.children;P.children=U}else P.alt=A}function c(){let w=this.resume(),A=this.stack[this.stack.length-1];A.url=w}function Le(){let w=this.resume(),A=this.stack[this.stack.length-1];A.title=w}function ye(){o("inReference")}function qe(){o("referenceType","collapsed")}function Oe(w){let A=this.resume(),P=this.stack[this.stack.length-1];P.label=A,P.identifier=me(this.sliceSerialize(w)).toLowerCase(),o("referenceType","full")}function ae(w){o("characterReferenceType",w.type)}function K(w){let A=this.sliceSerialize(w),P=a("characterReferenceType"),U;P?(U=nr(A,P==="characterReferenceMarkerNumeric"?10:16),o("characterReferenceType")):U=Ie(A);let H=this.stack.pop();H.value+=U,H.position.end=we(w.end)}function Pe(w){_.call(this,w);let A=this.stack[this.stack.length-1];A.url=this.sliceSerialize(w)}function le(w){_.call(this,w);let A=this.stack[this.stack.length-1];A.url="mailto:"+this.sliceSerialize(w)}function Fe(){return{type:"blockquote",children:[]}}function be(){return{type:"code",lang:null,meta:null,value:""}}function hr(){return{type:"inlineCode",value:""}}function Un(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Hn(){return{type:"emphasis",children:[]}}function ot(){return{type:"heading",depth:void 0,children:[]}}function ut(){return{type:"break"}}function at(){return{type:"html",value:""}}function Vn(){return{type:"image",title:null,url:"",alt:null}}function st(){return{type:"link",title:null,url:"",children:[]}}function lt(w){return{type:"list",ordered:w.type==="listOrdered",start:null,spread:w._spread,children:[]}}function Qn(w){return{type:"listItem",spread:w._spread,checked:null,children:[]}}function Gn(){return{type:"paragraph",children:[]}}function $n(){return{type:"strong",children:[]}}function Kn(){return{type:"text",value:""}}function Zn(){return{type:"thematicBreak"}}}function we(e){return{line:e.line,column:e.column,offset:e.offset}}function Zt(e,r){let t=-1;for(;++t<r.length;){let n=r[t];Array.isArray(n)?Zt(e,n):_o(e,n)}}function _o(e,r){let t;for(t in r)if(Kt.call(r,t)){if(t==="canContainEols"){let n=r[t];n&&e[t].push(...n)}else if(t==="transforms"){let n=r[t];n&&e[t].push(...n)}else if(t==="enter"||t==="exit"){let n=r[t];n&&Object.assign(e[t],n)}}}function $t(e,r){throw e?new Error("Cannot close `"+e.type+"` ("+ke({start:e.start,end:e.end})+"): a different token (`"+r.type+"`, "+ke({start:r.start,end:r.end})+") is open"):new Error("Cannot close document, a token (`"+r.type+"`, "+ke({start:r.start,end:r.end})+") is still open")}function Rr(e){Object.assign(this,{Parser:t=>{let n=this.data("settings");return zr(t,Object.assign({},n,e,{extensions:this.data("micromarkExtensions")||[],mdastExtensions:this.data("fromMarkdownExtensions")||[]}))}})}var Jt=Rr;function Br(e){if(e)throw e}var dn=he(Nr(),1),$r=he(sn(),1);function je(e){if(typeof e!="object"||e===null)return!1;let r=Object.getPrototypeOf(e);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function ln(){let e=[],r={run:t,use:n};return r;function t(...i){let o=-1,a=i.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);u(null,...i);function u(s,...f){let l=e[++o],E=-1;if(s){a(s);return}for(;++E<i.length;)(f[E]===null||f[E]===void 0)&&(f[E]=i[E]);i=f,l?Io(l,u)(...f):a(null,...f)}}function n(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),r}}function Io(e,r){let t;return n;function n(...a){let u=e.length>a.length,s;u&&a.push(i);try{s=e.apply(this,a)}catch(f){let l=f;if(u&&t)throw l;return i(l)}u||(s instanceof Promise?s.then(o,i):s instanceof Error?i(s):o(s))}function i(a,...u){t||(t=!0,r(a,...u))}function o(a){i(null,a)}}var pn=he(Nr(),1);var Y=class extends Error{constructor(r,t,n){let i=[null,null],o={start:{line:null,column:null},end:{line:null,column:null}};if(super(),typeof t=="string"&&(n=t,t=void 0),typeof n=="string"){let a=n.indexOf(":");a===-1?i[1]=n:(i[0]=n.slice(0,a),i[1]=n.slice(a+1))}t&&("type"in t||"position"in t?t.position&&(o=t.position):"start"in t||"end"in t?o=t:("line"in t||"column"in t)&&(o.start=t)),this.name=ke(t)||"1:1",this.message=typeof r=="object"?r.message:r,this.stack="",typeof r=="object"&&r.stack&&(this.stack=r.stack),this.reason=this.message,this.fatal,this.line=o.start.line,this.column=o.start.column,this.position=o,this.source=i[0],this.ruleId=i[1],this.file,this.actual,this.expected,this.url,this.note}};Y.prototype.file="";Y.prototype.name="";Y.prototype.reason="";Y.prototype.message="";Y.prototype.stack="";Y.prototype.fatal=null;Y.prototype.column=null;Y.prototype.line=null;Y.prototype.source=null;Y.prototype.ruleId=null;Y.prototype.position=null;var ie=he(require("path"),1);var Mr=he(require("process"),1);var Wr=require("url");function or(e){return e!==null&&typeof e=="object"&&e.href&&e.origin}var jr=["history","path","basename","stem","extname","dirname"],Ue=class{constructor(r){let t;r?typeof r=="string"||Lo(r)?t={value:r}:or(r)?t={path:r}:t=r:t={},this.data={},this.messages=[],this.history=[],this.cwd=Mr.default.cwd(),this.value,this.stored,this.result,this.map;let n=-1;for(;++n<jr.length;){let o=jr[n];o in t&&t[o]!==void 0&&t[o]!==null&&(this[o]=o==="history"?[...t[o]]:t[o])}let i;for(i in t)jr.includes(i)||(this[i]=t[i])}get path(){return this.history[this.history.length-1]}set path(r){or(r)&&(r=(0,Wr.fileURLToPath)(r)),Hr(r,"path"),this.path!==r&&this.history.push(r)}get dirname(){return typeof this.path=="string"?ie.default.dirname(this.path):void 0}set dirname(r){cn(this.basename,"dirname"),this.path=ie.default.join(r||"",this.basename)}get basename(){return typeof this.path=="string"?ie.default.basename(this.path):void 0}set basename(r){Hr(r,"basename"),Ur(r,"basename"),this.path=ie.default.join(this.dirname||"",r)}get extname(){return typeof this.path=="string"?ie.default.extname(this.path):void 0}set extname(r){if(Ur(r,"extname"),cn(this.dirname,"extname"),r){if(r.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(r.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=ie.default.join(this.dirname,this.stem+(r||""))}get stem(){return typeof this.path=="string"?ie.default.basename(this.path,this.extname):void 0}set stem(r){Hr(r,"stem"),Ur(r,"stem"),this.path=ie.default.join(this.dirname||"",r+(this.extname||""))}toString(r){return(this.value||"").toString(r||void 0)}message(r,t,n){let i=new Y(r,t,n);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}info(r,t,n){let i=this.message(r,t,n);return i.fatal=null,i}fail(r,t,n){let i=this.message(r,t,n);throw i.fatal=!0,i}};function Ur(e,r){if(e&&e.includes(ie.default.sep))throw new Error("`"+r+"` cannot be a path: did not expect `"+ie.default.sep+"`")}function Hr(e,r){if(!e)throw new Error("`"+r+"` cannot be empty")}function cn(e,r){if(!e)throw new Error("Setting `"+r+"` requires `path` to be set too")}function Lo(e){return(0,pn.default)(e)}var Kr=xn().freeze(),gn={}.hasOwnProperty;function xn(){let e=ln(),r=[],t={},n,i=-1;return o.data=a,o.Parser=void 0,o.Compiler=void 0,o.freeze=u,o.attachers=r,o.use=s,o.parse=f,o.stringify=l,o.run=E,o.runSync=g,o.process=h,o.processSync=m,o;function o(){let d=xn(),b=-1;for(;++b<r.length;)d.use(...r[b]);return d.data((0,$r.default)(!0,{},t)),d}function a(d,b){return typeof d=="string"?arguments.length===2?(Gr("data",n),t[d]=b,o):gn.call(t,d)&&t[d]||null:d?(Gr("data",n),t=d,o):t}function u(){if(n)return o;for(;++i<r.length;){let[d,...b]=r[i];if(b[0]===!1)continue;b[0]===!0&&(b[0]=void 0);let x=d.call(o,...b);typeof x=="function"&&e.use(x)}return n=!0,i=Number.POSITIVE_INFINITY,o}function s(d,...b){let x;if(Gr("use",n),d!=null)if(typeof d=="function")I(d,...b);else if(typeof d=="object")Array.isArray(d)?L(d):C(d);else throw new TypeError("Expected usable value, not `"+d+"`");return x&&(t.settings=Object.assign(t.settings||{},x)),o;function q(y){if(typeof y=="function")I(y);else if(typeof y=="object")if(Array.isArray(y)){let[D,...B]=y;I(D,...B)}else C(y);else throw new TypeError("Expected usable value, not `"+y+"`")}function C(y){L(y.plugins),y.settings&&(x=Object.assign(x||{},y.settings))}function L(y){let D=-1;if(y!=null)if(Array.isArray(y))for(;++D<y.length;){let B=y[D];q(B)}else throw new TypeError("Expected a list of plugins, not `"+y+"`")}function I(y,D){let B=-1,S;for(;++B<r.length;)if(r[B][0]===y){S=r[B];break}S?(je(S[1])&&je(D)&&(D=(0,$r.default)(!0,S[1],D)),S[1]=D):r.push([...arguments])}}function f(d){o.freeze();let b=He(d),x=o.Parser;return Vr("parse",x),fn(x,"parse")?new x(String(b),b).parse():x(String(b),b)}function l(d,b){o.freeze();let x=He(b),q=o.Compiler;return Qr("stringify",q),hn(d),fn(q,"compile")?new q(d,x).compile():q(d,x)}function E(d,b,x){if(hn(d),o.freeze(),!x&&typeof b=="function"&&(x=b,b=void 0),!x)return new Promise(q);q(null,x);function q(C,L){e.run(d,He(b),I);function I(y,D,B){D=D||d,y?L(y):C?C(D):x(null,D,B)}}}function g(d,b){let x,q;return o.run(d,b,C),mn("runSync","run",q),x;function C(L,I){Br(L),x=I,q=!0}}function h(d,b){if(o.freeze(),Vr("process",o.Parser),Qr("process",o.Compiler),!b)return new Promise(x);x(null,b);function x(q,C){let L=He(d);o.run(o.parse(L),L,(y,D,B)=>{if(y||!D||!B)I(y);else{let S=o.stringify(D,B);S==null||(Do(S)?B.value=S:B.result=S),I(y,B)}});function I(y,D){y||!D?C(y):q?q(D):b(null,D)}}}function m(d){let b;o.freeze(),Vr("processSync",o.Parser),Qr("processSync",o.Compiler);let x=He(d);return o.process(x,q),mn("processSync","process",b),x;function q(C){b=!0,Br(C)}}}function fn(e,r){return typeof e=="function"&&e.prototype&&(Oo(e.prototype)||r in e.prototype)}function Oo(e){let r;for(r in e)if(gn.call(e,r))return!0;return!1}function Vr(e,r){if(typeof r!="function")throw new TypeError("Cannot `"+e+"` without `Parser`")}function Qr(e,r){if(typeof r!="function")throw new TypeError("Cannot `"+e+"` without `Compiler`")}function Gr(e,r){if(r)throw new Error("Cannot call `"+e+"` on a frozen processor.\\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function hn(e){if(!je(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function mn(e,r,t){if(!t)throw new Error("`"+e+"` finished async. Use `"+r+"` instead")}function He(e){return Po(e)?e:new Ue(e)}function Po(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Do(e){return typeof e=="string"||(0,dn.default)(e)}var kn={}.hasOwnProperty;function ur(e,r){let t=r||{};function n(i,...o){let a=n.invalid,u=n.handlers;if(i&&kn.call(i,e)){let s=String(i[e]);a=kn.call(u,s)?u[s]:n.unknown}if(a)return a.call(this,i,...o)}return n.handlers=t.handlers||{},n.invalid=t.invalid,n.unknown=t.unknown,n}var zo=ur("operator",{unknown:jo,invalid:yn,handlers:{"=":Ro,"^=":No,"$=":Mo,"*=":Wo,"~=":Bo}});function wn(e,r){let t=-1;for(;++t<e.attrs.length;)if(!zo(e.attrs[t],r))return!1;return!0}function yn(e,r){return r[e.name]!==null&&r[e.name]!==void 0}function Ro(e,r){return yn(e,r)&&String(r[e.name])===e.value}function Bo(e,r){let t=r[e.name];return t==null?!1:Array.isArray(t)&&t.includes(e.value)?!0:String(t)===e.value}function No(e,r){let t=r[e.name];return!!(e.value&&typeof t=="string"&&t.slice(0,e.value.length)===e.value)}function Mo(e,r){let t=r[e.name];return!!(e.value&&typeof t=="string"&&t.slice(-e.value.length)===e.value)}function Wo(e,r){let t=r[e.name];return!!(e.value&&typeof t=="string"&&t.includes(e.value))}function jo(e){throw new Error("Unknown operator `"+e.operator+"`")}function bn(e,r){return e.tagName==="*"||e.tagName===r.type}var Uo=new Set([9,10,12,13,32]),En="0".charCodeAt(0),Ho="9".charCodeAt(0);function Sn(e){if(e=e.trim().toLowerCase(),e==="even")return[2,0];if(e==="odd")return[2,1];let r=0,t=0,n=o(),i=a();if(r<e.length&&e.charAt(r)==="n"&&(r++,t=n*(i!=null?i:1),u(),r<e.length?(n=o(),u(),i=a()):n=i=0),i===null||r<e.length)throw new Error(`n-th rule couldn\'t be parsed (\'${e}\')`);return[t,n*i];function o(){return e.charAt(r)==="-"?(r++,-1):(e.charAt(r)==="+"&&r++,1)}function a(){let s=r,f=0;for(;r<e.length&&e.charCodeAt(r)>=En&&e.charCodeAt(r)<=Ho;)f=f*10+(e.charCodeAt(r)-En),r++;return r===s?null:f}function u(){for(;r<e.length&&Uo.has(e.charCodeAt(r));)r++}}var Zr=he(An(),1);function Cn(e){let r=e[0],t=e[1]-1;if(t<0&&r<=0)return Zr.default.falseFunc;if(r===-1)return o=>o<=t;if(r===0)return o=>o===t;if(r===1)return t<0?Zr.default.trueFunc:o=>o>=t;let n=Math.abs(r),i=(t%n+n)%n;return r>1?o=>o>=t&&o%n===i:o=>o<=t&&o%n===i}function ar(e){return Cn(Sn(e))}function Te(e){return Array.isArray(e.children)}var Vo=ar.default||ar,Qo=ur("name",{unknown:su,invalid:au,handlers:{any:Jr,blank:Tn,empty:Tn,"first-child":Go,"first-of-type":$o,has:Ko,"last-child":Zo,"last-of-type":Jo,matches:Jr,not:Yo,"nth-child":Xo,"nth-last-child":eu,"nth-of-type":tu,"nth-last-of-type":ru,"only-child":nu,"only-of-type":iu,root:ou,scope:uu}});Yr.needsIndex=["any","first-child","first-of-type","last-child","last-of-type","matches","not","nth-child","nth-last-child","nth-of-type","nth-last-of-type","only-child","only-of-type"];function Yr(e,r,t,n,i){let o=e.pseudos,a=-1;for(;++a<o.length;)if(!Qo(o[a],r,t,n,i))return!1;return!0}function Tn(e,r){return Te(r)?r.children.length===0:!("value"in r)}function Go(e,r,t,n,i){return se(i,e),i.nodeIndex===0}function $o(e,r,t,n,i){return se(i,e),i.typeIndex===0}function Ko(e,r,t,n,i){let o={type:"root",children:Te(r)?r.children:[]},a=Se(Ee({},i),{found:!1,shallow:!1,one:!0,scopeNodes:[r],results:[],rootQuery:Ve(e.value)});return Qe(a,o),a.results.length>0}function Zo(e,r,t,n,i){return se(i,e),typeof i.nodeCount=="number"&&i.nodeIndex===i.nodeCount-1}function Jo(e,r,t,n,i){return se(i,e),typeof i.typeCount=="number"&&i.typeIndex===i.typeCount-1}function Jr(e,r,t,n,i){let o=Se(Ee({},i),{found:!1,shallow:!1,one:!0,scopeNodes:[r],results:[],rootQuery:Ve(e.value)});return Qe(o,r),o.results[0]===r}function Yo(e,r,t,n,i){return!Jr(e,r,t,n,i)}function Xo(e,r,t,n,i){let o=sr(e);return se(i,e),typeof i.nodeIndex=="number"&&o(i.nodeIndex)}function eu(e,r,t,n,i){let o=sr(e);return se(i,e),typeof i.nodeCount=="number"&&typeof i.nodeIndex=="number"&&o(i.nodeCount-i.nodeIndex-1)}function ru(e,r,t,n,i){let o=sr(e);return se(i,e),typeof i.typeIndex=="number"&&typeof i.typeCount=="number"&&o(i.typeCount-1-i.typeIndex)}function tu(e,r,t,n,i){let o=sr(e);return se(i,e),typeof i.typeIndex=="number"&&o(i.typeIndex)}function nu(e,r,t,n,i){return se(i,e),i.nodeCount===1}function iu(e,r,t,n,i){return se(i,e),i.typeCount===1}function ou(e,r,t,n){return r&&!n}function uu(e,r,t,n,i){return r&&i.scopeNodes.includes(r)}function au(){throw new Error("Invalid pseudo-selector")}function su(e){throw e.name?new Error("Unknown pseudo-selector `"+e.name+"`"):new Error("Unexpected pseudo-element or empty pseudo-class")}function se(e,r){if(e.shallow)throw new Error("Cannot use `:"+r.name+"` without parent")}function sr(e){let r=e._cachedFn;return r||(r=Vo(e.value),e._cachedFn=r),r}function qn(e,r,t,n,i){if(e.id)throw new Error("Invalid selector: id");if(e.classNames)throw new Error("Invalid selector: class");return!!(r&&(!e.tagName||bn(e,r))&&(!e.attrs||wn(e,r))&&(!e.pseudos||Yr(e,r,t,n,i)))}var lu=[];function Ve(e){return e===null?{type:"selectors",selectors:[]}:e.type==="ruleSet"?{type:"selectors",selectors:[e]}:e}function Qe(e,r){r&&_n(e,[],r,void 0,void 0)}function _n(e,r,t,n,i){let o={directChild:void 0,descendant:void 0,adjacentSibling:void 0,generalSibling:void 0};return o=pu(e,lr(r,e.rootQuery.selectors),t,n,i),Te(t)&&!e.shallow&&!(e.one&&e.found)&&cu(e,o,t),o}function cu(e,r,t){let n=lr(r.descendant,r.directChild),i,o=-1,a={count:0,types:new Map},u={count:0,types:new Map};for(;++o<t.children.length;)Fn(a,t.children[o]);for(o=-1;++o<t.children.length;){let f=t.children[o].type.toUpperCase();e.nodeIndex=u.count,e.typeIndex=u.types.get(f)||0,e.nodeCount=a.count,e.typeCount=a.types.get(f);let l=lr(n,i),E=_n(e,l,t.children[o],o,t);if(i=lr(E.generalSibling,E.adjacentSibling),e.one&&e.found)break;Fn(u,t.children[o])}}function pu(e,r,t,n,i){let o={directChild:void 0,descendant:void 0,adjacentSibling:void 0,generalSibling:void 0},a=-1;for(;++a<r.length;){let u=r[a];if(e.one&&e.found)break;if(e.shallow&&u.rule.rule)throw new Error("Expected selector without nesting");if(qn(u.rule,t,n,i,e)){let s=u.rule.rule;if(s){let f={type:"ruleSet",rule:s},l=s.nestingOperator==="+"?"adjacentSibling":s.nestingOperator==="~"?"generalSibling":s.nestingOperator===">"?"directChild":"descendant";Xr(o,l,f)}else e.found=!0,e.results.includes(t)||e.results.push(t)}u.rule.nestingOperator===null?Xr(o,"descendant",u):u.rule.nestingOperator==="~"&&Xr(o,"generalSibling",u)}return o}function lr(e,r){return e&&r&&e.length>0&&r.length>0?[...e,...r]:e&&e.length>0?e:r&&r.length>0?r:lu}function Xr(e,r,t){let n=e[r];n?n.push(t):e[r]=[t]}function Fn(e,r){let t=r.type.toUpperCase(),n=(e.types.get(t)||0)+1;e.count++,e.types.set(t,n)}var Pn=he(On(),1),pr=new Pn.CssSelectorParser;pr.registerAttrEqualityMods("~","^","$","*");pr.registerSelectorPseudos("any","matches","not","has");pr.registerNestingOperators(">","+","~");function Dn(e){if(typeof e!="string")throw new TypeError("Expected `string` as selector, not `"+e+"`");return pr.parse(e)}function it(e,r){let t=bu(e,r);return Qe(t,r||void 0),t.results}function bu(e,r){return{rootQuery:Ve(Dn(e)),results:[],scopeNodes:r?Te(r)&&(r.type==="RootNode"||r.type==="root")?r.children:[r]:[],one:!1,shallow:!1,found:!1,typeIndex:void 0,nodeIndex:void 0,typeCount:void 0,nodeCount:void 0}}var Eu=Kr().use(Jt).freeze(),Su=e=>{let r=Eu.parse(e),t=it("blockquote > paragraph link",r).filter(({url:u})=>{try{let s=new URL(u);return s.protocol==="zotero:"&&s.searchParams.has("annotation")}catch(s){return!1}}),n=it("blockquote > paragraph",r),i=new Map;for(let{children:u}of n){let s="";for(let f of u)if(f.type==="text")s+=f.value;else if(f.type==="link")i.set(f,s.replace(/\\n+/g," ").trim()),s="";else{let{start:l,end:E}=f.position;s+=e.slice(l.offset,E.offset)}}let o=vu(e,t.map(({position:{start:u,end:s}})=>[u.offset,s.offset]));return{annots:t.map(u=>{var h;let{url:s,children:f}=u,l=f[0],E=f[f.length-1],g={annotKey:new URL(s).searchParams.get("annotation"),url:s,fallback:(h=i.get(u))!=null?h:""};return f.length===1&&l.type==="inlineCode"&&l.value?Se(Ee({},g),{alt:l.value,altType:"code"}):f.length>0&&l.type==="text"&&l.value.startsWith("%%")&&E.type==="text"&&E.value.endsWith("%%")?Se(Ee({},g),{alt:zn(e,f).slice(2,-2),altType:"text"}):Se(Ee({},g),{alt:zn(e,f),altType:"none"})}),withoutLinks:o}},Rn=Su,vu=(e,r)=>{let t=0;for(let[n,i]of r)e=e.slice(0,n+t)+e.slice(i+t),t+=n-i;return e},zn=(e,r)=>{if(r.length===0)return"";let t=r[0].position.start.offset,n=r[r.length-1].position.end.offset;return e.slice(t,n)};var Mn=he(Nn(),1),Au=e=>{let r=e.map(({text:n,alt:i,altType:o})=>{if(o==="code")try{return`${new Function("raw",`return raw.${i}`)(n)}`}catch(a){let u=`Failed to alter annotation "${n}", error: ${a}`;return console.error(u,a),`<span style="color:var(--text-error)">${n}</span>`}else{if(o==="text")return i;if(o==="none")return n;(0,Mn.assertNever)(o)}}),t=e.map(({url:n,altType:i,alt:o},a)=>`[${i==="none"&&o&&!Cu.has(o.toLowerCase())?o:a>0?a:"annot"}](${n})`);return[r.join(" ")+" "+t.join(" ")].map(n=>"> "+n).join(`\n`)},Cu=new Set(["zotero","annot"]),Wn=Au;var Tu={parse:Rn,stringify:Wn};(0,jn.worker)(wt(Tu));\n/*! Bundled license information:\n\n@aidenlx/workerpool/dist/workerpool.js:\n  (**\n   * workerpool.js\n   * https://github.com/josdejong/workerpool\n   *\n   * Offload tasks to a pool of workers on node.js and in the browser.\n   *\n   * @version 6.2.1-mod.13\n   * @date    2022-10-04\n   *\n   * @license\n   * Copyright (C) 2014-2022 Jos de Jong <wjosdejong@gmail.com>\n   *\n   * Licensed under the Apache License, Version 2.0 (the "License"); you may not\n   * use this file except in compliance with the License. You may obtain a copy\n   * of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n   * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n   * License for the specific language governing permissions and limitations under\n   * the License.\n   *)\n\nis-buffer/index.js:\n  (*!\n   * Determine if an object is a Buffer\n   *\n   * @author   Feross Aboukhadijeh <https://feross.org>\n   * @license  MIT\n   *)\n*/\n';var jl=class extends fe{plugin=this.use(le);#e=Vs(MD);#t=qD.default.pool(this.#e,{workerType:"web",name:"Zotero Annot Block Worker"});api=Gs(this.#t);onload(){this.plugin.registerMarkdownCodeBlockProcessor("zotero-annot",(t,r,n)=>{let o=new Ih(r,this.plugin.database,this,this.plugin.app);n.addChild(o),o.load(),o.render([t,n.sourcePath])})}async onunload(){await this.#t.terminate(),URL.revokeObjectURL(this.#e)}async parse(t){return await this.api.parse(t)}async stringify(t){return await this.api.stringify(t)}},Ih=class extends Bl.MarkdownRenderChild{constructor(r,n,o,i){super(r);this.db=n;this.worker=o;this.app=i}cache=null;async render(r){this.containerEl.empty();let n,o,i;if(r)[i,o]=r,this.cache=null,n=(await this.worker.parse(i)).annots,this.cache=[n,o,i];else if(this.cache)[n,o,i]=this.cache;else{Z.debug("Cannot render without spec or cache");return}let a;try{let s=await this.db.api.getAnnotFromKey(n.map(({annotKey:l})=>l),this.db.settings.citationLibrary),u=n.map(({annotKey:l,...c})=>({...c,annotKey:l,text:s[l]?.type===we.highlight?s[l].text??"":""}));a=await this.worker.stringify(u)}catch(s){Re("stringify annots",s),a=i}await Bl.MarkdownRenderer.render(this.app,a,this.containerEl,o,this)}onload(){this.registerEvent(this.app.vault.on("zotero:db-refresh",this.render.bind(this)))}};var Wl=require("@codemirror/language");var Ah=require("obsidian");var zl=class extends fe{plugin=this.use(le);onload(){this.patchEditorClick()}async patchEditorClick(){let{workspace:t}=this.plugin.app,{noteIndex:r,database:n,settings:o,noteFeatures:i}=this.plugin;await rw(this.plugin.app);let a=()=>t.getLeavesOfType("markdown").length>0,[s,u]=Ci({register:c=>t.on("layout-change",()=>{a()&&c()}),unregister:c=>t.offref(c),escape:a,timeout:null});u&&this.register(u),await s;let l=t.getLeavesOfType("markdown")[0].view;this.register(et(l.editor.constructor.prototype,{getClickableTokenAt:c=>function(f,...p){let d=c.call(this,f,...p);return d||QU.call(this,f,r)}})),this.register(et(l.editMode.constructor.prototype,{triggerClickableToken:c=>function(f,p){if(f.type==="internal-link"&&f.citekey==="zotero")(async()=>{let d=f.text,{[d]:h}=await n.api.getItemIDsFromCitekey([f.text]);if(h<0){new Ah.Notice(`Citekey ${d} not found in Zotero`);return}let[y]=await n.api.getItems([[h,o.database.citationLibrary]]);if(!y){new Ah.Notice(`Item not found for citekey ${d}`);return}let v=await i.createNoteForDocItemFull(y);await t.openLinkText(v,"",!0,{active:!0})})();else return c.call(this,f,p)}}))}};function QU(e,t){let r=this.cm,n=r.state.doc,o=[],i=n.line(e.line+1),a=(0,Wl.syntaxTree)(r.state),s=i.from;a.iterate({from:i.from,to:i.to,enter:y=>{let v=y.type,w=y.from,S=y.to,T=v.prop(Wl.tokenClassNodeProp);T&&(s<w&&o.push({type:"",from:s,to:w}),o.push({type:T,from:w,to:S}),s=S)}}),s<i.to&&o.push({type:"",from:s,to:i.to});let u=this.posToOffset(e),l=-1;for(let y=0;y<o.length;y++){let v=o[y];if(v.from<=u&&v.to>=u){l=y;break}}if(l<0)return null;let c=o[l];if(!c.type.split(" ").includes("hmd-barelink"))return null;let p=n.sliceString(c.from,c.to);if(!p.startsWith("@"))return null;let d=p.slice(1),h={start:this.offsetToPos(c.from),end:this.offsetToPos(c.to)};if(t.citekeyCache.has(d)){let[y]=t.citekeyCache.get(d);return{type:"internal-link",text:y,...h}}else return{type:"internal-link",text:d,citekey:"zotero",...h}}var LD=require("obsidian");var $D=ae(We(),1);var Ho=class extends Ne{getDefaults(){return{literatureNoteFolder:"LiteratureNotes"}}async apply(t){t==="literatureNoteFolder"?this.use(Wn).reload():(0,$D.default)(t)}get joinPath(){return XU(this.literatureNoteFolder)}},XU=e=>e==="/"?"":e+"/";var Wn=class extends fe{plugin=this.use(le);settings=this.use(Ho);get meta(){return this.plugin.app.metadataCache}get vault(){return this.plugin.app.vault}get template(){return this.plugin.settings.template}noteCache=new Map;blockCache={byFile:new Map,byKey:new Map};citekeyCache=new Map;#e(t,r){let n=bm(r);if(n){if(!this.noteCache.has(n))return this.noteCache.set(n,new Set([t])),!0;let i=this.noteCache.get(n),a=i.size;return i.add(t).size!==a}let o=!1;for(let[i,a]of this.noteCache.entries()){let s=a.delete(t);o||=s,s&&a.size===0&&this.noteCache.delete(i)}return o}#t(t,r){let n=u=>{let l=this.blockCache.byFile.get(u);if(!l)return!1;this.blockCache.byFile.delete(u);for(let c of l){let f=this.blockCache.byKey.get(c.key);f.delete(c),f.size===0&&this.blockCache.byKey.delete(c.key)}return!0};if(!r)return n(t);let{blocks:o,sections:i}=r;if(!i||!o)return n(t);let a=i.filter(Ea);if(a.length===0)return n(t);n(t);let s=Gr(a.flatMap(u=>Sa(u.id).map(l=>[l,u.position])),mn(([u])=>u),nr((u,l)=>({file:t,key:u,blocks:l.map(([c,f])=>f)})),hn);this.blockCache.byFile.set(t,s);for(let u of s){let l=this.blockCache.byKey.get(u.key);l?l.add(u):this.blockCache.byKey.set(u.key,new Set([u]))}return!0}#r(t,r){let n=r?.frontmatter?.citekey;if(n){if(!this.citekeyCache.has(n))return this.citekeyCache.set(n,new Set([t])),!0;let i=this.citekeyCache.get(n),a=i.size;return i.add(t).size!==a}let o=!1;for(let[i,a]of this.citekeyCache.entries()){let s=a.delete(t);o||=s,s&&a.size===0&&this.citekeyCache.delete(i)}return o}getNotesFor(t){let r=this.noteCache.get(Et(t,!0));return r?[...r]:[]}getBlocksFor({file:t,item:r}){if(!t&&!r)throw new Error("no file or item provided");let n=r?this.blockCache.byKey.get(Et(r,!0)):null,o=t?this.blockCache.byFile.get(t):null;return t&&r?!o||!n?[]:o.filter(i=>n.has(i)):t?o?[...o]:[]:r?n?[...n]:[]:[]}getBlocksIn(t){let r=this.blockCache.byFile.get(t);return r?[...r]:null}#n(t,r){r===void 0&&(r=this.meta.getCache(t)),[this.#e(t,r),this.#t(t,r),this.#r(t,r)].some(o=>o)&&this.meta.trigger("zotero:index-update",t)}#o(t){this.#n(t,null)}#a(){this.noteCache.clear(),this.blockCache.byFile.clear(),this.blockCache.byKey.clear(),this.meta.trigger("zotero:index-clear")}onload(){[this.meta.on("changed",this.onMetaChanged,this),this.vault.on("rename",this.onFileRenamed,this),this.vault.on("delete",this.onFileRemoved,this)].forEach(this.registerEvent.bind(this));let[t,r]=tw(this.plugin.app,{});r&&this.register(r),t.then(()=>{this.onMetaBuilt(),this.plugin.addCommand({id:"refresh-note-index",name:"Refresh Literature Notes Index",callback:()=>{this.reload(),new LD.Notice("Literature notes re-indexed")}})})}onMetaBuilt(){for(let t of this.vault.getMarkdownFiles())this.#n(t.path)}onMetaChanged(t,r,n){this.#n(t.path,n)}onFileRemoved(t){Ve(t)&&this.#o(t.path)}onFileRenamed(t,r){this.#o(r),Ve(t)&&this.#n(t.path)}reload(){this.#a(),this.onMetaBuilt(),Z.info("Note Index: Reloaded")}};var Vl=require("fs/promises");var eH=(e,t)=>t.some(r=>e instanceof r),jD,BD;function tH(){return jD||(jD=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rH(){return BD||(BD=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var zD=new WeakMap,Th=new WeakMap,WD=new WeakMap,Ch=new WeakMap,Dh=new WeakMap;function nH(e){let t=new Promise((r,n)=>{let o=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{r(fr(e.result)),o()},a=()=>{n(e.error),o()};e.addEventListener("success",i),e.addEventListener("error",a)});return t.then(r=>{r instanceof IDBCursor&&zD.set(r,e)}).catch(()=>{}),Dh.set(t,e),t}function oH(e){if(Th.has(e))return;let t=new Promise((r,n)=>{let o=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{r(),o()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),o()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)});Th.set(e,t)}var Oh={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return Th.get(e);if(t==="objectStoreNames")return e.objectStoreNames||WD.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return fr(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function UD(e){Oh=e(Oh)}function iH(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){let n=e.call(Ul(this),t,...r);return WD.set(n,t.sort?t.sort():[t]),fr(n)}:rH().includes(e)?function(...t){return e.apply(Ul(this),t),fr(zD.get(this))}:function(...t){return fr(e.apply(Ul(this),t))}}function aH(e){return typeof e=="function"?iH(e):(e instanceof IDBTransaction&&oH(e),eH(e,tH())?new Proxy(e,Oh):e)}function fr(e){if(e instanceof IDBRequest)return nH(e);if(Ch.has(e))return Ch.get(e);let t=aH(e);return t!==e&&(Ch.set(e,t),Dh.set(t,e)),t}var Ul=e=>Dh.get(e);function VD(e,t,{blocked:r,upgrade:n,blocking:o,terminated:i}={}){let a=indexedDB.open(e,t),s=fr(a);return n&&a.addEventListener("upgradeneeded",u=>{n(fr(a.result),u.oldVersion,u.newVersion,fr(a.transaction),u)}),r&&a.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),s.then(u=>{i&&u.addEventListener("close",()=>i()),o&&u.addEventListener("versionchange",l=>o(l.oldVersion,l.newVersion,l))}).catch(()=>{}),s}var sH=["get","getKey","getAll","getAllKeys","count"],uH=["put","add","delete","clear"],Fh=new Map;function HD(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Fh.get(t))return Fh.get(t);let r=t.replace(/FromIndex$/,""),n=t!==r,o=uH.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(o||sH.includes(r)))return;let i=async function(a,...s){let u=this.transaction(a,o?"readwrite":"readonly"),l=u.store;return n&&(l=l.index(s.shift())),(await Promise.all([l[r](...s),o&&u.done]))[0]};return Fh.set(t,i),i}UD(e=>({...e,get:(t,r,n)=>HD(t,r)||e.get(t,r,n),has:(t,r)=>!!HD(t,r)||e.has(t,r)}));var Gl=require("obsidian");var cH="zotlit",Hl="pdf-outline",rs=class extends fe{constructor(r){super();this.plugin=r}db=VD(cH,1,{upgrade(r){r.createObjectStore(Hl,{keyPath:"path"})}});async getCachedOutlineKeys(){return await(await this.db).getAllKeys(Hl)}async getPDFOutline(r,n=!1){let o=await this.db,i=await o.get(Hl,r),a;try{a=await(0,Vl.stat)(r)}catch(u){if(u.code==="ENOENT")return new Gl.Notice("PDF file not found"),null;throw u}if(i&&a.mtimeMs===i.mtime&&!n)return Z.debug("PDF outline cache hit",r),i.outline;let s=await this.#e(r);return s?(await o.put(Hl,{path:r,mtime:a.mtimeMs,outline:s,created:Date.now()}),Z.debug("PDF outline cache miss and updated",r),s):null}pdfjs;async#e(r){this.pdfjs??=await(0,Gl.loadPdfJs)();let n=this.pdfjs.getDocument(await(0,Vl.readFile)(r)),o=await n.promise,i=GD(await o.getOutline(),0),a=await Promise.all(i.map(async({dest:s,...u})=>{if(!Array.isArray(s))return{...u,page:null};let[l]=s,c=await o.getPageIndex(l);return{...u,page:c}}));return await o.cleanup(),await n.destroy(),a}},GD=(e,t)=>e.flatMap(({title:r,dest:n,items:o})=>[{title:r,dest:n,level:t},...GD(o,t+1)]);var JD=require("http");var ZD=require("obsidian");var KD=ae(We(),1);var Vo=class extends Ne{getDefaults(){return{enableServer:!1,serverPort:9091,serverHostname:"127.0.0.1"}}async apply(t){let r=this.use(Go);switch(t){case"enableServer":this.enableServer?r.initServer():r.closeServer();return;case"serverPort":case"serverHostname":r.reloadPort();return;default:(0,KD.assertNever)(t)}}};var lH=new Set(["notify"]),fH=new Set([...c2.map(e=>`zotero/${e}`)]),Go=class extends fe{#e=new ZD.Events;settings=this.use(Vo);plugin=this.use(le);server=null;get port(){return this.settings.serverPort}get hostname(){return this.settings.serverHostname}onload(){this.settings.enableServer&&this.initServer(),this.registerObsidianProtocolHandler()}onunload(){this.closeServer(),this.server=null}registerObsidianProtocolHandler(){let t=r=>{let{action:n,...o}=r;this.trigger(n,o)};for(let r of fH)this.plugin.registerObsidianProtocolHandler(r,t)}#t(){this.server??=(0,JD.createServer)((t,r)=>{this.requestListener(t,r)})}#r(){this.server?.listening||this.server?.listen(this.port,this.hostname,()=>this.listeningListener())}initServer(){this.#t(),this.#r()}closeServer(){this.server?.close()}reloadPort(){this.settings.enableServer&&(this.closeServer(),this.#t(),this.#r())}requestListener(t,r){if(!t.url){Z.error("Request without url"),r.statusCode=400,r.end();return}Z.trace("server recieved req",t.url,t.rawHeaders);let{pathname:n,searchParams:o}=new URL(t.url,`http://${t.headers.host}`),i=n.substring(1),a=`bg:${n.substring(1)}`;if(lH.has(i)){let s=Object.fromEntries(o.entries());t.headers["content-type"]==="application/json"?new Promise((u,l)=>{let c="";t.on("data",f=>c+=f),t.on("error",f=>l(f)),t.on("end",()=>{try{u(JSON.parse(c))}catch(f){l(f)}})}).then(u=>{this.trigger(a,s,u),r.end()}):(this.trigger(a,s),r.end())}else r.statusCode=404,r.end()}listeningListener(){this.server&&Z.info(`Server is listening at ${pH(this.server)}`)}on(t,r,n){return this.#e.on(t,r,n)}off(t,r){return this.#e.off(t,r)}offref(t){return this.#e.offref(t)}trigger(t,...r){return Z.trace(`server trigger ${t}`,...r),this.#e.trigger(t,...r)}tryTrigger(t,r){return this.#e.tryTrigger(t,r)}};function pH(e){let t=e.address();return t?typeof t=="string"?t:`${t.address}:${t.port}`:"?"}var Ph=require("fs");var YD=ae(We(),1);var Ko=class extends Ne{getDefaults(){return{autoRefresh:!0}}async apply(t){switch(t){case"autoRefresh":return await this.use(pr).setAutoRefresh(this.autoRefresh);default:(0,YD.assertNever)(t)}}};var pr=class extends fe{databaseSettings=this.use(Tt);settings=this.use(Ko);api=this.use(ot).api;app=this.use(le).app;onDatabaseUpdate(t){return()=>this.app.vault.trigger("zotero:db-updated",t)}async onload(){await this.setAutoRefresh(this.settings.autoRefresh),Z.debug("loading DatabaseWatcher")}onunload(){this.#e()}#e(){this.#r=!1,this.#t=lo(this.#t,t=>(t?.close(),null))}#t={main:null,bbt:null};#r=!1;async setAutoRefresh(t,r=!1){t===this.#r&&!r||(Z.debug("Auto refresh set to "+t),this.#r=t,this.#e(),t&&(this.#t.main=(0,Ph.watch)(this.databaseSettings.zoteroDbPath,this.onDatabaseUpdate("main")),await this.api.checkDbStatus("bbt")&&(this.#t.bbt=(0,Ph.watch)(this.databaseSettings.betterBibTexDbPath,this.onDatabaseUpdate("bbt")))))}};var ns=class extends fe{onunload(){Z.info("ZoteroDB unloaded")}get defaultLibId(){return this.settings.citationLibrary}settings=this.use(Tt);#e=this.use(ot);watcher=this.use(pr);get api(){return this.#e.api}async search(t){let n=this.defaultLibId;if(this.#e.status!==2)throw new Error("Search index not ready");let o=await this.api.search(n,{query:t,limit:50,index:dH});if(o.length===0)return[];let i=mH(o);return i.length===0?[]:(await this.api.getItems(i.map(s=>[s.id,n]))).map((s,u)=>{let{id:l,fields:c,score:f}=i[u];if(!s)throw new Error("Item not found: "+l);return{item:s,score:f,fields:[...c]}})}async getItemsOf(t=50,r=this.defaultLibId){if(this.#e.status!==2)throw new Error("Search index not ready");return(await this.api.getItemsFromCache(t,r)).map(o=>({item:o,score:-1,fields:[]}))}},dH=["title","creators[]:firstName","creators[]:lastName","date"];function mH(e){let{size:t}=new Set(e.flatMap(n=>n.result)),r=e.reduce((n,{field:o,result:i})=>(o.startsWith("creators[]")&&(o="creators"),i.forEach((a,s)=>{let u=t-s;switch(o){case"title":u*=100;break;case"creators":case"date":u*=5;break;default:throw new Error("Unknown field: "+o)}if(!n.has(+a))n.set(+a,{id:+a,score:u,fields:new Set([o])});else{let l=n.get(+a);l.fields.add(o),l.score+=u}}),n),new Map);return Array.from(r.values()).sort((n,o)=>o.score-n.score)}var Kt=require("fs/promises"),XD=require("path"),eF=require("path/posix");var Mt=require("obsidian");var QD=require("obsidian");var Jo=class extends Ne{getDefaults(){return{mode:QD.Platform.isWin?"copy":"symlink",imgExcerptPath:"ZtImgExcerpt"}}get imgExcerptDir(){return this.mode?this.imgExcerptPath:null}fromJSON({mode:t,symlinkImgExcerpt:r,...n}){super.fromJSON({...n,mode:t??(r!==void 0?r===!0?"symlink":!1:void 0)??this.getDefaults().mode})}};var os=class extends fe{onload(){Z.debug("loading ImgCacheImporter")}async onunload(){await this.flush()}get app(){return this.use(le).app}databaseSettings=this.use(Tt);settings=this.use(Jo);queue=new Map;getCachePath(t){return $r(t,this.databaseSettings.zoteroDataDir)}getInVaultPath(t){if(!this.settings.imgExcerptDir||t.type!==we.image)return null;let r=this.getCachePath(t);return gH(t,r,this.settings.imgExcerptDir)}import(t){let r=this.getCachePath(t),n=this.getInVaultPath(t);if(!n)return null;let o;return this.queue.has(n)?o=this.queue.get(n):(o=async()=>{let i=await this.linkToVault(n,r);return this.queue.delete(n),i},this.queue.set(n,o)),n}async flush(){return await Promise.all([...this.queue.values()].map(r=>r()))}cancel(){this.queue.clear()}async linkToVault(t,r){let n=await(0,Kt.stat)(r).then(a=>{if(!a.isFile()&&!a.isSymbolicLink()){let s=`failed to link image excerpt cache to vault: given path not file ${r}`;return new Mt.Notice(s),Re(s,null),-1}return a.mtimeMs}).catch(a=>{if(a.code==="ENOENT"){let s=`failed to link image excerpt cache to vault: file not found ${r}`;return new Mt.Notice(s),Re(s,a),-1}throw a});if(n===-1)return!1;let o=this.settings.mode;if(o===!1)return Z.trace("import mode disabled"),!1;let i=(0,eF.dirname)(t);if(i!=="."&&i!==".."&&await this.app.vault.createFolder(i).catch(()=>{}),this.app.vault.adapter instanceof Mt.FileSystemAdapter){let a=this.app.vault.adapter.getFullPath(t),s=await(0,Kt.lstat)(a).catch(u=>{if(u.code!=="ENOENT")throw u;return null});if(o==="copy"){let u=-1;if(s)if(s.isSymbolicLink())Z.trace(a+" is symlink, unlinking"),await(0,Kt.rm)(a);else if(s.isFile())u=s.mtimeMs;else{let l="Failed to import image excerpt cache: cannot overwrite non-file "+a;return new Mt.Notice(l),Re(l,null),!1}if(u<0||n>u)return Z.trace(a+" is file, "+(u<0?"creating":"overwritting")),await(0,Kt.copyFile)(r,a),new Mt.Notice(`Copied image excerpt cache to vault: ${t}`),!0;Z.trace("mtime check pass, skipping")}else{if(s){if(s.isSymbolicLink())return Z.trace(a+" is symlink, skipping"),!1;if(s.isFile())Z.trace(a+" is file, remove before symlinking"),await(0,Kt.rm)(a);else{let u="Failed to import image excerpt cache: cannot overwrite non-file "+a;return new Mt.Notice(u),Re(u,null),!1}}try{await(0,Kt.symlink)(r,a,"file")}catch(u){if(u.code==="EPERM")return new Mt.Notice(`Failed to symlink image excerpt cache to vault: permission denied ${r}, check directory permission or change import mode to copy. If you are using FAT32 drive, symlink is not supported.`),Re(`Failed to symlink image excerpt cache to vault: permission denied ${r}`,u),!1;throw u}return new Mt.Notice(`linked image excerpt cache to vault: ${t}`),!0}return!1}else throw new Error("Mobile not supported")}},hH=(e,t)=>(t??"")+(0,XD.basename)(e),gH=(e,t,r)=>{let n=hH(t,e.groupID);return[(0,Mt.normalizePath)(r),n].join("/")};A();A();A();function Zo(e,t=[]){let r=[];function n(i,a){let s=Oe(a),u=r.length;r=[...r,a];function l(f){let{scope:p,children:d,...h}=f,y=p?.[e][u]||s,v=ie(()=>h,Object.values(h));return Y(y.Provider,{value:v},d)}function c(f,p){let d=p?.[e][u]||s,h=j(d);if(h)return h;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return l.displayName=i+"Provider",[l,c]}let o=()=>{let i=r.map(a=>Oe(a));return function(s){let u=s?.[e]||i;return ie(()=>({[`__scope${e}`]:{...s,[e]:u}}),[s,u])}};return o.scopeName=e,[n,yH(o,...t)]}function yH(...e){let t=e[0];if(e.length===1)return t;let r=()=>{let n=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(i){let a=n.reduce((s,{useScope:u,scopeName:l})=>{let f=u(i)[`__scope${l}`];return{...s,...f}},{});return ie(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}A();A();A();function vH(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function Nh(...e){return t=>e.forEach(r=>vH(r,t))}function Un(...e){return ee(Nh(...e),e)}A();var Yo=re((e,t)=>{let{children:r,...n}=e,o=Me.toArray(r),i=o.find(wH);if(i){let a=i.props.children,s=o.map(u=>u===i?Me.count(a)>1?Me.only(null):yt(a)?a.props.children:null:u);return Y(Rh,de({},n,{ref:t}),yt(a)?Ot(a,void 0,s):null)}return Y(Rh,de({},n,{ref:t}),r)});Yo.displayName="Slot";var Rh=re((e,t)=>{let{children:r,...n}=e;return yt(r)?Ot(r,{...xH(n,r.props),ref:Nh(t,r.ref)}):Me.count(r)>1?Me.only(null):null});Rh.displayName="SlotClone";var bH=({children:e})=>Y(z,null,e);function wH(e){return yt(e)&&e.type===bH}function xH(e,t){let r={...t};for(let n in t){let o=e[n],i=t[n];/^on[A-Z]/.test(n)?o&&i?r[n]=(...s)=>{i(...s),o(...s)}:o&&(r[n]=o):n==="style"?r[n]={...o,...i}:n==="className"&&(r[n]=[o,i].filter(Boolean).join(" "))}return{...e,...r}}function tF(e){let t=e+"CollectionProvider",[r,n]=Zo(t),[o,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),a=d=>{let{scope:h,children:y}=d,v=$.useRef(null),w=$.useRef(new Map).current;return $.createElement(o,{scope:h,itemMap:w,collectionRef:v},y)},s=e+"CollectionSlot",u=$.forwardRef((d,h)=>{let{scope:y,children:v}=d,w=i(s,y),S=Un(h,w.collectionRef);return $.createElement(Yo,{ref:S},v)}),l=e+"CollectionItemSlot",c="data-radix-collection-item",f=$.forwardRef((d,h)=>{let{scope:y,children:v,...w}=d,S=$.useRef(null),T=Un(h,S),M=i(l,y);return $.useEffect(()=>(M.itemMap.set(S,{ref:S,...w}),()=>void M.itemMap.delete(S))),$.createElement(Yo,{[c]:"",ref:T},v)});function p(d){let h=i(e+"CollectionConsumer",d);return $.useCallback(()=>{let v=h.collectionRef.current;if(!v)return[];let w=Array.from(v.querySelectorAll(`[${c}]`));return Array.from(h.itemMap.values()).sort((M,B)=>w.indexOf(M.ref.current)-w.indexOf(B.ref.current))},[h.collectionRef,h.itemMap])}return[{Provider:a,Slot:u,ItemSlot:f},p,n]}A();A();var is=globalThis?.document?it:()=>{};var EH=Bt["useId".toString()]||(()=>{}),SH=0;function Kl(e){let[t,r]=q(EH());return is(()=>{e||r(n=>n??String(SH++))},[e]),e||(t?`radix-${t}`:"")}A();A();var kH=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Yr=kH.reduce((e,t)=>{let r=re((n,o)=>{let{asChild:i,...a}=n,s=i?Yo:t;return J(()=>{window[Symbol.for("radix-ui")]=!0},[]),Y(s,de({},a,{ref:o}))});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});A();function as(e){let t=W(e);return J(()=>{t.current=e}),ie(()=>(...r)=>{var n;return(n=t.current)===null||n===void 0?void 0:n.call(t,...r)},[])}A();function Jl({prop:e,defaultProp:t,onChange:r=()=>{}}){let[n,o]=_H({defaultProp:t,onChange:r}),i=e!==void 0,a=i?e:n,s=as(r),u=ee(l=>{if(i){let f=typeof l=="function"?l(e):l;f!==e&&s(f)}else o(l)},[i,e,o,s]);return[a,u]}function _H({defaultProp:e,onChange:t}){let r=q(e),[n]=r,o=W(n),i=as(t);return J(()=>{o.current!==n&&(i(n),o.current=n)},[n,o,i]),r}A();var IH=Oe(void 0);function Zl(e){let t=j(IH);return e||t||"ltr"}var Mh="rovingFocusGroup.onEntryFocus",AH={bubbles:!1,cancelable:!0},$h="RovingFocusGroup",[qh,rF,CH]=tF($h),[TH,Lh]=Zo($h,[CH]),[OH,DH]=TH($h),FH=re((e,t)=>Y(qh.Provider,{scope:e.__scopeRovingFocusGroup},Y(qh.Slot,{scope:e.__scopeRovingFocusGroup},Y(PH,de({},e,{ref:t}))))),PH=re((e,t)=>{let{__scopeRovingFocusGroup:r,orientation:n,loop:o=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:s,onCurrentTabStopIdChange:u,onEntryFocus:l,...c}=e,f=W(null),p=Un(t,f),d=Zl(i),[h=null,y]=Jl({prop:a,defaultProp:s,onChange:u}),[v,w]=q(!1),S=as(l),T=rF(r),M=W(!1),[B,Q]=q(0);return J(()=>{let X=f.current;if(X)return X.addEventListener(Mh,S),()=>X.removeEventListener(Mh,S)},[S]),Y(OH,{scope:r,orientation:n,dir:d,loop:o,currentTabStopId:h,onItemFocus:ee(X=>y(X),[y]),onItemShiftTab:ee(()=>w(!0),[]),onFocusableItemAdd:ee(()=>Q(X=>X+1),[]),onFocusableItemRemove:ee(()=>Q(X=>X-1),[])},Y(Yr.div,de({tabIndex:v||B===0?-1:0,"data-orientation":n},c,{ref:p,style:{outline:"none",...e.style},onMouseDown:ft(e.onMouseDown,()=>{M.current=!0}),onFocus:ft(e.onFocus,X=>{let G=!M.current;if(X.target===X.currentTarget&&G&&!v){let x=new CustomEvent(Mh,AH);if(X.currentTarget.dispatchEvent(x),!x.defaultPrevented){let C=T().filter(D=>D.focusable),b=C.find(D=>D.active),k=C.find(D=>D.id===h),R=[b,k,...C].filter(Boolean).map(D=>D.ref.current);nF(R)}}M.current=!1}),onBlur:ft(e.onBlur,()=>w(!1))})))}),NH="RovingFocusGroupItem",RH=re((e,t)=>{let{__scopeRovingFocusGroup:r,focusable:n=!0,active:o=!1,tabStopId:i,...a}=e,s=Kl(),u=i||s,l=DH(NH,r),c=l.currentTabStopId===u,f=rF(r),{onFocusableItemAdd:p,onFocusableItemRemove:d}=l;return J(()=>{if(n)return p(),()=>d()},[n,p,d]),Y(qh.ItemSlot,{scope:r,id:u,focusable:n,active:o},Y(Yr.span,de({tabIndex:c?0:-1,"data-orientation":l.orientation},a,{ref:t,onMouseDown:ft(e.onMouseDown,h=>{n?l.onItemFocus(u):h.preventDefault()}),onFocus:ft(e.onFocus,()=>l.onItemFocus(u)),onKeyDown:ft(e.onKeyDown,h=>{if(h.key==="Tab"&&h.shiftKey){l.onItemShiftTab();return}if(h.target!==h.currentTarget)return;let y=$H(h,l.orientation,l.dir);if(y!==void 0){h.preventDefault();let w=f().filter(S=>S.focusable).map(S=>S.ref.current);if(y==="last")w.reverse();else if(y==="prev"||y==="next"){y==="prev"&&w.reverse();let S=w.indexOf(h.currentTarget);w=l.loop?LH(w,S+1):w.slice(S+1)}setTimeout(()=>nF(w))}})})))}),MH={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function qH(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function $H(e,t,r){let n=qH(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return MH[n]}function nF(e){let t=document.activeElement;for(let r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function LH(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var oF=FH,iF=RH;A();A();function jH(e,t){return ir((r,n)=>{let o=t[r][n];return o??r},e)}var jh=e=>{let{present:t,children:r}=e,n=BH(t),o=typeof r=="function"?r({present:n.isPresent}):Me.only(r),i=Un(n.ref,o.ref);return typeof r=="function"||n.isPresent?Ot(o,{ref:i}):null};jh.displayName="Presence";function BH(e){let[t,r]=q(),n=W({}),o=W(e),i=W("none"),a=e?"mounted":"unmounted",[s,u]=jH(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return J(()=>{let l=Yl(n.current);i.current=s==="mounted"?l:"none"},[s]),is(()=>{let l=n.current,c=o.current;if(c!==e){let p=i.current,d=Yl(l);e?u("MOUNT"):d==="none"||l?.display==="none"?u("UNMOUNT"):u(c&&p!==d?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,u]),is(()=>{if(t){let l=f=>{let d=Yl(n.current).includes(f.animationName);f.target===t&&d&&ar(()=>u("ANIMATION_END"))},c=f=>{f.target===t&&(i.current=Yl(n.current))};return t.addEventListener("animationstart",c),t.addEventListener("animationcancel",l),t.addEventListener("animationend",l),()=>{t.removeEventListener("animationstart",c),t.removeEventListener("animationcancel",l),t.removeEventListener("animationend",l)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:ee(l=>{l&&(n.current=getComputedStyle(l)),r(l)},[])}}function Yl(e){return e?.animationName||"none"}var aF="Tabs",[zH,iwe]=Zo(aF,[Lh]),sF=Lh(),[WH,Bh]=zH(aF),UH=re((e,t)=>{let{__scopeTabs:r,value:n,onValueChange:o,defaultValue:i,orientation:a="horizontal",dir:s,activationMode:u="automatic",...l}=e,c=Zl(s),[f,p]=Jl({prop:n,onChange:o,defaultProp:i});return Y(WH,{scope:r,baseId:Kl(),value:f,onValueChange:p,orientation:a,dir:c,activationMode:u},Y(Yr.div,de({dir:c,"data-orientation":a},l,{ref:t})))}),HH="TabsList",VH=re((e,t)=>{let{__scopeTabs:r,loop:n=!0,...o}=e,i=Bh(HH,r),a=sF(r);return Y(oF,de({asChild:!0},a,{orientation:i.orientation,dir:i.dir,loop:n}),Y(Yr.div,de({role:"tablist","aria-orientation":i.orientation},o,{ref:t})))}),GH="TabsTrigger",KH=re((e,t)=>{let{__scopeTabs:r,value:n,disabled:o=!1,...i}=e,a=Bh(GH,r),s=sF(r),u=uF(a.baseId,n),l=cF(a.baseId,n),c=n===a.value;return Y(iF,de({asChild:!0},s,{focusable:!o,active:c}),Y(Yr.button,de({type:"button",role:"tab","aria-selected":c,"aria-controls":l,"data-state":c?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:u},i,{ref:t,onMouseDown:ft(e.onMouseDown,f=>{!o&&f.button===0&&f.ctrlKey===!1?a.onValueChange(n):f.preventDefault()}),onKeyDown:ft(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&a.onValueChange(n)}),onFocus:ft(e.onFocus,()=>{let f=a.activationMode!=="manual";!c&&!o&&f&&a.onValueChange(n)})})))}),JH="TabsContent",ZH=re((e,t)=>{let{__scopeTabs:r,value:n,forceMount:o,children:i,...a}=e,s=Bh(JH,r),u=uF(s.baseId,n),l=cF(s.baseId,n),c=n===s.value,f=W(c);return J(()=>{let p=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(p)},[]),Y(jh,{present:o||c},({present:p})=>Y(Yr.div,de({"data-state":c?"active":"inactive","data-orientation":s.orientation,role:"tabpanel","aria-labelledby":u,hidden:!p,id:l,tabIndex:0},a,{ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0}}),p&&i))});function uF(e,t){return`${e}-trigger-${t}`}function cF(e,t){return`${e}-content-${t}`}var lF=UH,zh=VH,Wh=KH,Uh=ZH;A();var fF=lF,Hh=re(({className:e,...t},r)=>m(zh,{ref:r,className:ne("inline-flex items-center justify-center rounded-md bg-secondary p-1",e),...t}));Hh.displayName=zh.displayName;var Qr=re(({className:e,...t},r)=>m(Wh,{className:ne("obzt-btn-reset","inline-flex min-w-[100px] items-center justify-center rounded-[0.185rem] px-3 py-1.5  text-sm font-medium text-txt-muted transition-all  disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-primary data-[state=active]:text-txt-normal data-[state=active]:shadow-sm",e),...t,ref:r}));Qr.displayName=Wh.displayName;var Xr=re(({className:e,...t},r)=>m(Uh,{className:ne("mt-2 rounded-md border p-6",e),...t,ref:r}));Xr.displayName=Uh.displayName;A();A();function Qo(){return Qo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qo.apply(this,arguments)}var lwe=typeof Symbol<"u"?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator",fwe=typeof Symbol<"u"?Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")):"@@asyncIterator";var QH=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?it:J,XH=function(t){var r=W(t);return QH(function(){r.current=t}),ee(function(){return r.current},[r])},eV={status:"not-requested",loading:!1,result:void 0,error:void 0},dF={status:"loading",loading:!0,result:void 0,error:void 0},tV=function(t){return dF},rV=function(t,r){return{status:"success",loading:!1,result:t,error:void 0}},nV=function(t,r){return{status:"error",loading:!1,result:void 0,error:t}},pF=function(){},oV={initialState:function(t){return t&&t.executeOnMount?dF:eV},executeOnMount:!0,executeOnUpdate:!0,setLoading:tV,setResult:rV,setError:nV,onSuccess:pF,onError:pF},iV=function(t){return Qo({},oV,{},t)},aV=function(t){var r=q(function(){return t.initialState(t)}),n=r[0],o=r[1],i=ee(function(){return o(t.initialState(t))},[o,t]),a=ee(function(){return o(t.setLoading(n))},[n,o]),s=ee(function(c){return o(t.setResult(c,n))},[n,o]),u=ee(function(c){return o(t.setError(c,n))},[n,o]),l=ee(function(c){return o(Qo({},n,{},c))},[n,o]);return{value:n,set:o,merge:l,reset:i,setLoading:a,setResult:s,setError:u}},sV=function(){var t=W(!1);return J(function(){return t.current=!0,function(){t.current=!1}},[]),function(){return t.current}},uV=function(){var t=W(null);return{set:function(n){return t.current=n},get:function(){return t.current},is:function(n){return t.current===n}}},mF=function(t,r,n){!r&&(r=[]);var o=iV(n),i=q(null),a=i[0],s=i[1],u=aV(o),l=sV(),c=uV(),f=function(w){return l()&&c.is(w)},p=function(){for(var w=arguments.length,S=new Array(w),T=0;T<w;T++)S[T]=arguments[T];var M=function(){try{return Promise.resolve(t.apply(void 0,S))}catch(B){return Promise.reject(B)}}();return s(S),c.set(M),u.setLoading(),M.then(function(B){f(M)&&u.setResult(B),o.onSuccess(B,{isCurrent:function(){return c.is(M)}})},function(B){f(M)&&u.setError(B),o.onError(B,{isCurrent:function(){return c.is(M)}})}),M},d=XH(p),h=ee(function(){return d().apply(void 0,arguments)},[d]),y=!l();return J(function(){var v=function(){return d().apply(void 0,r)};y&&o.executeOnMount&&v(),!y&&o.executeOnUpdate&&v()},r),Qo({},u.value,{set:u.set,merge:u.merge,reset:u.reset,execute:h,currentPromise:c.get(),currentParams:a})};function hF(e,t,r){return mF(e,t,r)}var gF=function(t,r){return mF(t,[],Qo({},r,{executeOnMount:!1,executeOnUpdate:!1}))};var yF=require("obsidian");var Ql=class{constructor(t){this.path=t??Ql.defaultPath}vaildPath;get path(){return this.vaildPath}set path(t){t?this.vaildPath=(0,yF.normalizePath)(t):this.vaildPath=Ql.defaultPath}getFile(t){return t.getAbstractFileByPath(this.vaildPath)}fromJSON(t){return t&&(this.vaildPath=t),this}toJSON(){return this.path}toString(){return this.path}},ss=Ql;fg(ss,"defaultPath","/");var pe=Oe({});function Xo(e){return new ss(e).path}function Xl(e,t,r){let[n,o]=q(!1);return[hF(e,[...t,n],r),ee(()=>o(i=>!i),[])]}A();var vF=require("obsidian");A();A();var he=re(function({name:t,description:r,heading:n,children:o,className:i},a){return m("div",{className:ne("setting-item",n&&"setting-item-heading border-none",i),children:[m("div",{className:"setting-item-info",children:[m("div",{className:"setting-item-name",children:t}),r&&m("div",{className:"setting-item-description",children:r})]}),m("div",{className:"setting-item-control",ref:a,children:o})]})});function qt(e,t){let{plugin:{settings:r}}=j(pe);return Se(async function(o){return await e.setOption(t,o).apply()===!1?!1:(await r.save(),!0)})}function cV(e,t){let r=Se(t),n=W(null);return J(()=>{n.current?.setValue(e)},[e]),ee(o=>{if(!o)n.current?.toggleEl.remove(),n.current=null;else{let i=new vF.ToggleComponent(o);i.setValue(e),i.onChange(r),n.current=i}},[])}function Jt({name:e,children:t,settings:r,prop:n}){let[,o]=Gh(r,n);return m(Vh,{ref:o,name:e,children:t})}var Vh=re(function({name:t,children:r},n){return m(he,{className:"mod-toggle",ref:n,name:t,description:r})});function Gh(e,t){let[r,n]=q(e[t]),o=qt(e,t),i=Se(async function(s){n(s),await o(s)});return[r,cV(r,i)]}var xF=ae(require("node:net"),1),EF=ae(require("node:os"),1),tf=class extends Error{constructor(t){super(`${t} is locked`)}},ei={old:new Set,young:new Set},lV=1e3*15;var ef,fV=()=>{let e=EF.default.networkInterfaces(),t=new Set([void 0,"0.0.0.0"]);for(let r of Object.values(e))for(let n of r)t.add(n.address);return t},bF=e=>new Promise((t,r)=>{let n=xF.default.createServer();n.unref(),n.on("error",r),n.listen(e,()=>{let{port:o}=n.address();n.close(()=>{t(o)})})}),wF=async(e,t)=>{if(e.host||e.port===0)return bF(e);for(let r of t)try{await bF({port:e.port,host:r})}catch(n){if(!["EADDRNOTAVAIL","EINVAL"].includes(n.code))throw n}return e.port},pV=function*(e){e&&(yield*e),yield 0};async function Kh(e){let t,r=new Set;if(e&&(e.port&&(t=typeof e.port=="number"?[e.port]:e.port),e.exclude)){let o=e.exclude;if(typeof o[Symbol.iterator]!="function")throw new TypeError("The `exclude` option must be an iterable.");for(let i of o){if(typeof i!="number")throw new TypeError("Each item in the `exclude` option must be a number corresponding to the port you want excluded.");if(!Number.isSafeInteger(i))throw new TypeError(`Number ${i} in the exclude option is not a safe integer and can't be used`)}r=new Set(o)}ef===void 0&&(ef=setInterval(()=>{ei.old=ei.young,ei.young=new Set},lV),ef.unref&&ef.unref());let n=fV();for(let o of pV(t))try{if(r.has(o))continue;let i=await wF({...e,port:o},n);for(;ei.old.has(i)||ei.young.has(i);){if(o!==0)throw new tf(o);i=await wF({...e,port:o},n)}return ei.young.add(i),i}catch(i){if(!["EADDRINUSE","EACCES"].includes(i.code)&&!(i instanceof tf))throw i}throw new Error("No available ports found")}var rf=require("obsidian");A();function SF(){let{server:e}=j(pe).plugin.settings,[t,r]=Gh(e,"enableServer");return m(z,{children:[m(he,{heading:!0,name:"Background connect",description:"Allow Zotero to send status in the background, which is required for some features like focus annotation on selection in Zotero"}),m(Vh,{ref:r,name:"Enable",children:"Remember to enable the server in Zotero as well"}),t&&m(dV,{})]})}function dV(){let{server:e}=j(pe).plugin.settings,t=ie(()=>e.getDefaults().serverPort,[]),[r,n]=q(t),[o]=at("check");async function i(){if(isNaN(r)||r<0||r>65535)return new rf.Notice("Invalid port number: "+r),n(e.serverPort),!1;if(r===e.serverPort)return!1;let a=await Kh({host:e.serverHostname,port:[r]});if(console.log(a,r),a!==r)return new rf.Notice(`Port is currently occupied, a different port is provided: ${a}, confirm again to apply the change.`),n(a),!1;let s=e.setOption("serverPort",a);return await s.apply(),s.changed&&new rf.Notice("Server port is saved and applied."),s.changed}return m(he,{name:"Port number",description:`Default to ${t}`,children:[m("input",{type:"number",value:r,min:0,max:65535,onChange:a=>n(Number.parseInt(a.target.value,10))}),m("button",{"aria-label":"Apply",ref:o,onClick:i})]})}var IF=require("@electron/remote");var AF=ae(We(),1),CF=require("obsidian");A();function Jh(){let[e,t,r]=kF("main"),[n,o,i]=kF("bbt"),[a,s]=TF("data"),[u,l]=hV(Se(()=>{s(),r(),i()}));return m(he,{name:"Zotero data directory",description:m(z,{children:[m(_F,{path:e,state:t,children:"Zotero"}),m(_F,{path:n,state:o,children:"Better BibTeX"})]}),children:[m(OF,{path:a,state:u}),m("button",{onClick:l,children:"Select"})]})}function mV(e){let{plugin:t}=j(pe),[r,n]=Xl(()=>t.databaseAPI.checkDbStatus(e),[e]),o;return r.loading?o="disabled":r.error?o="failed":o=r.result?"success":"failed",[o,n]}function kF(e){let[t,r]=TF(e),[n,o]=mV(e);return[t,n,ee(()=>{r(),o()},[r,o])]}function hV(e){let{plugin:{settings:t}}=j(pe),r=gF(async()=>{try{let{filePaths:[o]}=await IF.dialog.showOpenDialog({defaultPath:t.database.zoteroDataDir,properties:["openDirectory"]});o&&t.database.zoteroDataDir!==o&&(await t.database.setOption("zoteroDataDir",o).apply(),await t.save(),e())}catch(o){throw console.error("Failed to set data directory",o),new CF.Notice(`Failed to set data directory: ${o}`),o}}),n;return r.loading?n="disabled":r.error?n="failed":n="success",[n,r.execute]}function TF(e){let{plugin:{settings:{database:t}}}=j(pe),r=ee(()=>{switch(e){case"main":return t.zoteroDbPath;case"bbt":return t.betterBibTexDbPath;case"data":return t.zoteroDataDir;default:(0,AF.assertNever)(e)}},[e,t]),[n,o]=q(r);return[n,ee(()=>o(r),[r])]}function _F({children:e,path:t,state:r}){return m("div",{children:[e,": ",r==="failed"&&"(Failed to load)",m(OF,{path:t,state:r})]})}function OF({path:e,state:t}){return m("code",{"data-state":t,className:ne("data-[state=success]:text-txt-success","data-[state=failed]:text-txt-error","data-[state=disabled]:text-txt-muted"),children:e})}function Zh(){let{plugin:{settings:{watcher:e}}}=j(pe);return m(z,{children:[m(Jh,{}),m(Jt,{name:"Refresh automatically when Zotero updates database",settings:e,prop:"autoRefresh"}),m(SF,{})]})}A();A();function Hn({name:e,children:t,normalize:r,settings:n,prop:o}){let[i,a]=q(n[o]),s=qt(n,o);return m(Yh,{name:e,value:i,onChange:u=>a(u.target.value),onSubmit:()=>{let u=r?.(i)??i;u!==i&&a(u),s(u)},children:t})}function Yh({name:e,children:t,value:r,onChange:n,onSubmit:o}){let[i]=at("check");return m(he,{name:e,description:t,children:[m(Oa,{className:"border",value:r,onChange:n}),m("button",{"aria-label":"Apply",ref:i,onClick:o})]})}A();function DF(){let{imgImporter:e}=j(pe).plugin.settings,[t,r]=q(()=>e.mode===!1?"false":e.mode),n=qt(e,"mode"),o=Se(async function(a){r(a),await n(a==="false"?!1:a)});return m(z,{children:[m(he,{heading:!0,name:"Image excerpt",description:"Controls how to import images in annotaion excerpts."}),m(he,{name:"Mode",description:m("dl",{className:"mt-2 grid grid-cols-3 gap-1",children:[m("div",{children:[m("dt",{className:"text-xs font-medium text-txt-normal",children:"Direct link"}),m("dd",{className:"mt-1",children:["Use image embed linked directly to the original image in Zotero cache using ",m("code",{children:"file://"})," url"]})]}),m("div",{children:[m("dt",{className:"text-xs font-medium text-txt-normal",children:"Symlink"}),m("dd",{className:"mt-1",children:["Create a symlink to the original image in Zotero cache within the specified folder",m("p",{className:"text-txt-error",children:"Don't use this option if your file system doesn't support symlink."})]})]}),m("div",{children:[m("dt",{className:"text-xs font-medium text-txt-normal",children:"Copy"}),m("dd",{className:"mt-1",children:"Copy the original image to the specified folder."})]})]}),children:m("select",{className:"dropdown",onChange:i=>o(i.target.value),value:t,children:[m("option",{value:"false",children:"direct link"},0),m("option",{value:"symlink",children:"symlink"},1),m("option",{value:"copy",children:"copy"},2)]})}),t!=="false"&&m(z,{children:m(Hn,{name:"Default location",settings:e,prop:"imgExcerptPath",normalize:Xo,children:"The folder to store image excerpts."})})]})}var FF=require("obsidian");A();function Qh(){let{plugin:e}=j(pe),{database:t}=e.settings,[r,n]=Xl(()=>e.databaseAPI.getLibs(),[]),[o,i]=q(()=>t.citationLibrary),a=qt(t,"citationLibrary"),s=Se(async function(f){let p=Number.parseInt(f.target.value,10);Number.isNaN(p)||(i(p),await a(p)&&new FF.Notice("Zotero search index updated."))}),u=r.result??[{groupID:null,libraryID:1,name:"My Library"}],[l]=at("switch");return m(he,{name:"Citation library",children:[m("select",{className:"dropdown",onChange:s,value:o,children:u.map(({groupID:c,libraryID:f,name:p})=>m("option",{value:f,children:p?c?`${p} (Group)`:p:`Library ${f}`},f))}),m("button",{"aria-label":"Refresh",ref:l,onClick:async()=>{await e.dbWorker.refresh({task:"full"}),n()}})]})}function Xh(){let{noteIndex:e}=j(pe).plugin.settings;return m(z,{children:[m(Hn,{name:"Default location for new literature notes",settings:e,prop:"literatureNoteFolder",normalize:Xo}),m(Qh,{}),m(DF,{})]})}A();function eg(){let{log:e}=j(pe).plugin.settings,[t,r]=q(()=>e.level),n=qt(e,"level"),o=Se(async function(a){let s=a.target.value;r(s),await n(s)});return m(z,{children:[m(he,{heading:!0,name:"Debug"}),m(he,{name:"Log Level",description:m(z,{children:["Change level of logs output to the console.",m("br",{}),"Set to DEBUG if you need to report a issue",m("br",{}),"To check console, ",z1()]}),children:m("select",{className:"dropdown",onChange:o,value:t,children:Object.entries(Ig).map(([i,a])=>m("option",{value:a,children:i},a))})})]})}function tg(){return m(z,{children:m(eg,{})})}var PF=require("obsidian");var us=class extends PF.PluginSettingTab{#e(){let t=this.containerEl.parentElement;if(!t)throw new Error("Setting tab is not mounted");if(!t.classList.contains("vertical-tab-content-container"))return Z.error("Failed to patch unload, unexpected tabContentContainer"),console.error(t),!1;let r=this,n=et(t,{empty:o=>function(){r.unload(),o.call(this),n()}});return Z.debug("Setting tab unload patched"),!0}#t=[];register(t){this.#t.push(t)}unload(){for(;this.#t.length>0;)this.#t.pop()()}display(){this.containerEl.empty(),this.#e()}};A();function rg(){let{suggester:e}=j(pe).plugin.settings;return m(z,{children:[m(Jt,{name:"Citation editor suggester",settings:e,prop:"citationEditorSuggester"}),m(Jt,{name:"Show BibTex citekey in suggester",settings:e,prop:"showCitekeyInSuggester"})]})}A();A();function ng(){let{plugin:e}=j(pe),{template:t}=e.settings,[r,n]=q(()=>t.autoTrim[0]),[o,i]=q(()=>t.autoTrim[1]),a=qt(t,"autoTrim"),s=Se(async function(l,c){let f=l==="false"?!1:l;c===0?(n(f),await a([f,o])):(i(f),await a([r,f]))});return m(he,{name:"Auto trim",description:m(z,{children:[m("p",{className:"text-sm",children:["Controls default whitespace/new line trimming before/after a ejs"," ",m("code",{className:"whitespace-nowrap",children:"<% Tag %>"})]}),m("dl",{className:"mt-2",children:m("div",{className:"grid grid-cols-2 gap-1",children:[m("div",{children:[m("dt",{className:"text-xs font-medium text-txt-normal",children:"Newline slurp"}),m("dd",{className:"mt-1",children:"Removes the following newline before and after the tag."})]}),m("div",{children:[m("dt",{className:"text-xs font-medium text-txt-normal",children:"Whitespace slurp:"}),m("dd",{className:"mt-1",children:"Removes all whitespace before and after the tag."})]})]})})]}),children:m("div",{className:"flex flex-col gap-2",children:[0,1].map(u=>m("div",{className:"flex flex-col items-start gap-1 text-sm",children:[m("span",{children:u===0?"Leading":"Ending"}),m("select",{className:"dropdown",onChange:l=>s(l.target.value,u),value:String(u===0?r:o),children:[m("option",{value:"false",children:"Disable"},0),m("option",{value:"nl",children:"Newline slurp (-)"},1),m("option",{value:"slurp",children:"Whitespace slurp (_)"},2)]})]},u))})})}var tn=require("obsidian");A();var NF=require("obsidian");A();function og(e,{icon:t,desc:r,disable:n}){let o=Se(e),i=W(null);return J(()=>{i.current?.setIcon(t??"")},[t]),J(()=>{i.current?.setTooltip(r??"")},[r]),J(()=>{i.current?.setDisabled(n??!1)},[n]),ee(a=>{if(!a)i.current?.extraSettingsEl.remove(),i.current=null;else{let s=new NF.ExtraButtonComponent(a);s.onClick(o),i.current=s}},[])}var en={filename:{title:"Note filename",desc:"Used to render filename for each imported literature note"},citation:{title:"Primary Markdown citation",desc:"Used to render citation in literature note"},altCitation:{title:"Secondary Markdown citation",desc:"Used to render alternative citation in literature note"},field:{title:"Note properties",desc:"Used to render Properties in literature note"},note:{title:"Note content",desc:"Used to render created literature note"},annotation:{title:"Single annotaion",desc:"Used to render single annotation"},annots:{title:"Annotations",desc:"Used to render annotation list when batch importing"}};function RF({type:e}){let{plugin:t}=j(pe),r=t.settings.template,[n]=at("arrow-up-right"),[o]=at("folder-input"),[i]=at("reset"),[a,s]=q(()=>ig(e,{app:t.app,folder:r.folder})),u=wn(e,r.folder);return J(()=>{let l=[t.app.vault.on("delete",c=>{c.path===u&&s(!1)}),t.app.vault.on("create",c=>{c.path===u&&s(!0)}),t.app.vault.on("rename",(c,f)=>{c.path===u&&s(!0),f===u&&s(!1)})];return()=>l.forEach(c=>t.app.vault.offref(c))},[u]),a?m(he,{name:en[e].title,description:en[e].desc,children:[m("code",{children:u}),m("button",{"aria-label":"Open Template File",ref:n,onClick:async()=>{await zn(e,null,t)}}),m("button",{"aria-label":"Reset to default",ref:i,onClick:async()=>{if(!vc(t.app).confirm("Reset template to default?"))return;let c=t.app.vault.getAbstractFileByPath(u);c instanceof tn.TFile?(await t.app.vault.modify(c,Ge.Ejectable[e]),new tn.Notice(`Template '${u}' reset`)):s(!0)}})]}):m(he,{name:en[e].title,description:en[e].desc,children:[m("pre",{className:"text-left max-w-xs overflow-scroll rounded border p-4",children:Ge.Ejectable[e]}),m("button",{"aria-label":"Save to Template Folder",ref:o,onClick:async()=>{let l=await MF(e,{app:t.app,folder:r.folder});s(l)}})]})}async function MF(e,{app:t,folder:r}){let n=wn(e,r),o=t.vault.getAbstractFileByPath(n);return o instanceof tn.TFile?!0:o?(new tn.Notice(`The path '${n}' is occupied by a folder`),!1):(await t.fileManager.createNewMarkdownFile(t.vault.getRoot(),n,Ge.Ejectable[e]),new tn.Notice(`Template '${n}' created`),!0)}function ig(e,{app:t,folder:r}){let n=wn(e,r);return t.vault.getAbstractFileByPath(n)instanceof tn.TFile}function qF(){let{app:e,settings:{template:t}}=j(pe).plugin,[r,n]=q(()=>ur.Ejectable.every(i=>ig(i,{app:e,folder:t.folder}))),o=og(async()=>{let i=ur.Ejectable.filter(a=>!ig(a,{app:e,folder:t.folder}));await Promise.all(i.map(a=>MF(a,{app:e,folder:t.folder}))),n(!0)},{icon:r?"":"folder-input",desc:r?"":"Save template files to template folder",disable:r});return[r,o]}A();function $F({type:e}){let{plugin:t}=j(pe),{template:r}=t.settings,[n,o]=q(r.templates[e]),i=async a=>{if(await r.setTemplate(e,a)===!1)return!1;await t.settings.save()};return m(Yh,{name:en[e].title,value:n,onChange:a=>o(a.target.value),onSubmit:()=>{o(n),i(n)},children:en[e].desc})}function ag(){let{template:e}=j(pe).plugin.settings,[t,r]=qF();return m(z,{children:[m(Hn,{name:"Template location",settings:e,prop:"folder",normalize:Xo,children:"The folder which templates are ejected into and stored"}),m(Jt,{name:"Auto pair for Eta",settings:e,prop:"autoPairEta",children:["Pair `<` and `%` automatically in eta templates.",m("br",{}),"If you have issue with native auto pair features, you can disable this option and report the bug in GitHub"]}),m(ng,{}),m(he,{heading:!0,name:"Simple"}),ur.Embeded.map(n=>m($F,{type:n},n)),m(he,{heading:!0,name:"Ejectable",ref:r,description:"These templates can be customized once saved to the template folder",children:t||m("div",{children:"Eject"})}),ur.Ejectable.map(n=>m(RF,{type:n},n))]})}A();function sg(){let{template:e}=j(pe).plugin.settings;return m(z,{children:[m(he,{heading:!0,name:"Update note",description:m(z,{children:["You can find update note option in ",m("code",{children:"More Options"})," menu and command pallette inside a literature note. When update, all literature notes with the same ",m("code",{children:"zotero-key"})," will be updated."]})}),m(Jt,{name:"Overwrite existing note",settings:e,prop:"updateOverwrite",children:m("div",{className:"space-y-2",children:m("div",{className:"text-txt-error",children:"\u26A0 WARNING: This will overwrite the whole note content with latest one when update literature note, make sure you didn't add any custom content in the note before enable this option."})})}),m(Jt,{name:"In-place update of existing annotations",settings:e,prop:"updateAnnotBlock",children:m("div",{className:"space-y-2",children:[m("div",{children:"(Experimental)"}),m("div",{className:"text-txt-error",children:"\u26A0 WARNING: When enable, the plugin will try to update existing annotaion callouts marked with block-id in addition to appped newly-added ones, which may cause unexpected behavior. Make sure you have backup of your notes before enable this option."}),m("div",{className:"text-txt-accent",children:"\u24D8 Note: If you disable callout warpping in annotation template, you need to make sure the block-id is added properly in the template."}),m("div",{className:"text-txt-accent",children:"\u24D8 Note: This won't work on annotations imported before this feature is available, unless every annotation is inside a block with proper block-id"})]})})]})}var cs=class extends us{constructor(r){super(r.app,r);this.plugin=r;this.containerEl.addClass("obzt")}display(){super.display(),$.render(m(pe.Provider,{value:{plugin:this.plugin,closeTab:()=>this.setting.close()},children:m(gV,{})}),this.containerEl),this.register(()=>$.unmountComponentAtNode(this.containerEl))}};function gV(){let[e,t]=Pp("obzt-setting-tab",{defaultValue:"general"});return m(fF,{value:e,onValueChange:t,className:"flex h-full flex-col",children:[m(Hh,{className:"self-start max-w-full",children:[m(Qr,{value:"general",children:"General"}),m(Qr,{value:"connect",children:"Connect"}),m(Qr,{value:"suggester",children:"Suggester"}),m(Qr,{value:"template",children:"Template"}),m(Qr,{value:"update",children:"Note update"}),m(Qr,{value:"misc",children:"Misc"})]}),m(Xr,{value:"general",className:"divide-y flex-grow overflow-y-scroll",children:m(Xh,{})}),m(Xr,{value:"connect",className:"divide-y flex-grow overflow-y-scroll",children:m(Zh,{})}),m(Xr,{value:"suggester",className:"divide-y flex-grow overflow-y-scroll",children:m(rg,{})}),m(Xr,{value:"template",className:"divide-y flex-grow overflow-y-scroll",children:m(ag,{})}),m(Xr,{value:"update",className:"divide-y flex-grow overflow-y-scroll",children:m(sg,{})}),m(Xr,{value:"misc",className:"divide-y flex-grow overflow-y-scroll",children:m(tg,{})})]})}var LF=Yt()("database","watcher","imgImporter","log","noteIndex","template","suggester","server"),nf=class extends fe{plugin=this.use(le);noteIndex=this.use(Ho);database=this.use(Tt);watcher=this.use(Ko);imgImporter=this.use(Jo);log=this.use(fo);template=this.use(Cn);suggester=this.use(Ra);server=this.use(Vo);async onload(){Z.debug("Loading Settings...");let t=await this.plugin.loadData()??{};Gr(this,jt(LF),hn).forEach(r=>r.fromJSON(t)),await this.log.applyAll(),Z.debug("Settings loaded")}async save(){let t=Gr(this,jt(LF),nr((r,n)=>n instanceof Ne?n.toJSON():{[r]:n}),hn);await this.plugin.saveData(Object.assign({},...t))}};var le=class extends jF.Plugin{use=$e.plugin(this);constructor(t,r){if(super(t,r),!R1(r,t))throw new Error("Library check failed")}settings=this.use(nf);noteIndex=this.use(Wn);server=this.use(Go);citekeyClick=this.use(zl);templateEditor=this.use(xa);noteFeatures=this.use(RD);get databaseAPI(){return this.dbWorker.api}dbWorker=this.use(ot);imgCacheImporter=this.use(os);dbWatcher=this.use(pr);database=this.use(ns);templateRenderer=this.use(wa);annotBlockWorker=this.use(jl);pdfParser=this.use(rs);async onload(){Z.info("loading ZotLit"),this.addSettingTab(new cs(this)),globalThis.zoteroAPI={version:this.manifest.version,getDocItems:t=>this.databaseAPI.getItems(t),getItemIDsFromCitekey:(...t)=>this.databaseAPI.getItemIDsFromCitekey(...t),getAnnotsFromKeys:(...t)=>this.databaseAPI.getAnnotFromKey(...t),getAnnotsOfAtch:(...t)=>this.databaseAPI.getAnnotations(...t),getAttachments:(...t)=>this.databaseAPI.getAttachments(...t),getLibs:()=>this.databaseAPI.getLibs()},this.register(()=>{delete globalThis.zoteroAPI})}onunload(){Z.info("unloading ZotLit")}};0&&(module.exports={});
/*! Bundled license information:

flatted/cjs/index.js:
  (*! (c) 2020 Andrea Giammarchi *)

@aidenlx/workerpool/dist/workerpool.js:
  (**
   * workerpool.js
   * https://github.com/josdejong/workerpool
   *
   * Offload tasks to a pool of workers on node.js and in the browser.
   *
   * @version 6.2.1-mod.13
   * @date    2022-10-04
   *
   * @license
   * Copyright (C) 2014-2022 Jos de Jong <wjosdejong@gmail.com>
   *
   * Licensed under the Apache License, Version 2.0 (the "License"); you may not
   * use this file except in compliance with the License. You may obtain a copy
   * of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
   * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
   * License for the specific language governing permissions and limitations under
   * the License.
   *)

use-sync-external-store/cjs/use-sync-external-store-shim.production.min.js:
  (**
   * @license React
   * use-sync-external-store-shim.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.production.min.js:
  (**
   * @license React
   * use-sync-external-store-shim/with-selector.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

@mui/base/index.js:
  (**
   * @mui/base v5.0.0-alpha.122
   *
   * @license MIT
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
*/
